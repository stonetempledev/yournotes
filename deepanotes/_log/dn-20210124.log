2021-01-24 16:19:32,563 [7] INFO dn_lib.tools.log - reload core
2021-01-24 16:19:32,605 [7] INFO dn_lib.tools.log - reload config docs
2021-01-24 16:19:32,607 [7] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 16:19:32,615 [7] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 16:19:32,622 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 16:19:32,623 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 16:19:32,625 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 16:19:32,636 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 16:19:32,637 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 16:19:32,638 [7] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 16:19:32,644 [7] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 16:19:32,648 [7] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 16:19:32,649 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 16:19:32,649 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 16:19:32,651 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 16:19:32,652 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 16:19:32,653 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 16:19:32,653 [7] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 16:19:32,654 [7] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 16:19:32,665 [7] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 16:19:32,667 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 16:19:32,668 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 16:19:32,669 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 16:19:32,670 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 16:19:32,670 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 16:19:32,671 [7] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 16:19:32,674 [7] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 16:19:37,689 [7] INFO dn_lib.tools.log - reload config docs
2021-01-24 16:19:37,690 [7] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 16:19:37,691 [7] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 16:19:37,692 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 16:19:37,693 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 16:19:37,694 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 16:19:37,696 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 16:19:37,697 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 16:19:37,698 [7] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 16:19:37,698 [7] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 16:19:37,699 [7] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 16:19:37,700 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 16:19:37,700 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 16:19:37,701 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 16:19:37,702 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 16:19:37,702 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 16:19:37,703 [7] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 16:19:37,704 [7] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 16:19:37,705 [7] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 16:19:37,705 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 16:19:37,706 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 16:19:37,706 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 16:19:37,707 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 16:19:37,708 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 16:19:37,709 [7] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 16:19:37,709 [7] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 16:19:37,726 [7] INFO dn_lib.tools.log - reload config docs
2021-01-24 16:19:37,727 [7] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 16:19:37,728 [7] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 16:19:37,729 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 16:19:37,730 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 16:19:37,730 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 16:19:37,731 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 16:19:37,732 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 16:19:37,732 [7] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 16:19:37,733 [7] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 16:19:37,734 [7] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 16:19:37,734 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 16:19:37,735 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 16:19:37,736 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 16:19:37,736 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 16:19:37,736 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 16:19:37,737 [7] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 16:19:37,737 [7] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 16:19:37,738 [7] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 16:19:37,738 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 16:19:37,739 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 16:19:37,739 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 16:19:37,740 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 16:19:37,740 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 16:19:37,740 [7] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 16:19:37,741 [7] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 16:19:37,782 [7] INFO dn_lib.tools.log - reload config docs
2021-01-24 16:19:37,783 [7] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 16:19:37,783 [7] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 16:19:37,784 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 16:19:37,785 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 16:19:37,785 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 16:19:37,786 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 16:19:37,786 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 16:19:37,786 [7] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 16:19:37,787 [7] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 16:19:37,787 [7] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 16:19:37,788 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 16:19:37,788 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 16:19:37,788 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 16:19:37,789 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 16:19:37,789 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 16:19:37,790 [7] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 16:19:37,790 [7] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 16:19:37,791 [7] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 16:19:37,791 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 16:19:37,791 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 16:19:37,792 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 16:19:37,792 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 16:19:37,793 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 16:19:37,793 [7] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 16:19:37,794 [7] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 16:19:37,826 [7] INFO dn_lib.tools.log - reload config docs
2021-01-24 16:19:37,826 [7] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 16:19:37,827 [7] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 16:19:37,828 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 16:19:37,828 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 16:19:37,829 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 16:19:37,829 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 16:19:37,830 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 16:19:37,831 [7] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 16:19:37,831 [7] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 16:19:37,832 [7] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 16:19:37,832 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 16:19:37,833 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 16:19:37,833 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 16:19:37,834 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 16:19:37,834 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 16:19:37,834 [7] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 16:19:37,835 [7] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 16:19:37,835 [7] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 16:19:37,836 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 16:19:37,836 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 16:19:37,837 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 16:19:37,837 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 16:19:37,837 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 16:19:37,838 [7] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 16:19:37,849 [7] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 16:19:37,873 [7] DEBUG dn_lib.tools.log - SQL: select task_filter_id, filter_title, filter_notes, filter_def, filter_class
 from dn_tasks_filters order by filter_order
2021-01-24 16:19:37,883 [7] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 0 and var_name in ('active-task-filter')
2021-01-24 16:19:37,892 [7] DEBUG dn_lib.tools.log - SQL: select ft.tp, ft.synch_folder_id, ft.folder_id, ft.parent_id, ft.title
       , ft.des, ft.http_path, ft.lvl, dbo.folder_path(ft.folder_id) as folder_path
       , (select top 1 1 from dn_tasks where folder_id = ft.folder_id) as is_task
      from dbo.fnc_dn_folders(null, null) ft
      
      order by ft.synch_folder_id, ft.lvl, ft.title
2021-01-24 16:19:37,918 [7] DEBUG dn_lib.tools.log - SQL: select f.synch_folder_id, f.file_id, f.folder_id, f.file_name, f.dt_ins , null as found_file
       from dn_files f
       where exists (select top 1 1 from dbo.fnc_dn_folders(null, null) ft 
        
	      where ft.synch_folder_id = f.synch_folder_id 
          and isnull(ft.folder_id, 0) = isnull(f.folder_id, 0))
2021-01-24 16:19:37,931 [7] DEBUG dn_lib.tools.log - SQL: select t3.*
      , tst.stato, tst.[order] as stato_order, isnull(tst.class, 'light') as stato_class, isnull(tst.title_plurale, '') as stato_title_plurale, isnull(tst.title_singolare, '') as stato_title_singolare
      , tp.priorita, tp.[order] as priorita_order, isnull(tp.class, 'light') as priorita_class, isnull(tp.title_plurale, '') as priorita_title_plurale, isnull(tp.title_singolare, '') as priorita_title_singolare
      , tt.tipo, tt.[order] as tipo_order, isnull(tt.class, 'light') as tipo_class, isnull(tt.title_plurale, '') as tipo_title_plurale, isnull(tt.title_singolare, '') as tipo_title_singolare
      , ts.stima, ts.[days] as stima_days, isnull(ts.class, 'light') as stima_class, isnull(ts.title_plurale, '') as stima_title_plurale, isnull(ts.title_singolare, '') as stima_title_singolare
      , (select top 1 1 from dn_tasks_notes where task_id = t3.task_id) as task_notes
      , (select top 1 1 from vw_task_allegati f2 where f2.task_id = t3.task_id 
          and not exists (select top 1 1 from dn_files_info where file_name = f2.file_name)) as task_files
  from (select t2.*, datediff(day, t2.dt_ref, getdate()) as diff_days
    from (select t.task_id, t.synch_folder_id, isnull(t.folder_id, f.folder_id) as folder_id
	   , t.file_id, t.title, t.[user], t.stato, t.priorita, t.tipo, t.stima, t.dt_ins, t.dt_upd
     , (case when t.dt_ins > t.dt_upd then t.dt_ins else t.dt_upd end) as dt_ref
	  from dn_tasks t
    
	  left join dn_files f on f.file_id = t.file_id
    where (null is null or (null is not null and t.task_id = null)) ) t2
    where exists (select top 1 1 from dbo.fnc_dn_folders(null, null) ft 
	    where  ft.synch_folder_id = t2.synch_folder_id 
       and isnull(ft.folder_id, 0) = isnull(t2.folder_id, 0))) t3
   left join dn_task_stato tst on tst.stato = t3.stato
   left join dn_task_priorita tp on tp.priorita = t3.priorita
   left join dn_task_tipo tt on tt.tipo = t3.tipo
   left join dn_task_stima ts on ts.stima = t3.stima
   where 1 = 1 
2021-01-24 16:19:37,968 [7] DEBUG dn_lib.tools.log - SQL: select title_singolare, stato from dn_task_stato order by [order]
2021-01-24 16:19:37,988 [7] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, priorita as [value], [order] from dn_task_priorita
      ) t order by t.[order]
2021-01-24 16:19:38,080 [7] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [days]
       union select title_singolare as title, stima as [value], [days] from dn_task_stima 
       ) t order by t.[days]
2021-01-24 16:19:38,083 [7] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, tipo as [value], [order] from dn_task_tipo
       ) t order by t.[order]
2021-01-24 16:19:38,085 [7] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value]
       union select nome as title, nome as [value] from users
       ) t order by 2
2021-01-24 16:19:42,873 [12] INFO dn_lib.tools.log - reload config docs
2021-01-24 16:19:42,874 [12] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 16:19:42,875 [12] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 16:19:42,877 [12] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 16:19:42,877 [12] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 16:19:42,878 [12] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 16:19:42,879 [12] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 16:19:42,880 [12] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 16:19:42,880 [12] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 16:19:42,881 [12] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 16:19:42,881 [12] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 16:19:42,882 [12] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 16:19:42,883 [12] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 16:19:42,883 [12] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 16:19:42,884 [12] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 16:19:42,884 [12] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 16:19:42,885 [12] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 16:19:42,886 [12] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 16:19:42,886 [12] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 16:19:42,887 [12] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 16:19:42,887 [12] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 16:19:42,888 [12] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 16:19:42,889 [12] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 16:19:42,889 [12] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 16:19:42,890 [12] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 16:19:42,890 [12] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 16:19:42,906 [5] INFO dn_lib.tools.log - reload config docs
2021-01-24 16:19:42,907 [5] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 16:19:42,908 [5] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 16:19:42,909 [5] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 16:19:42,909 [5] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 16:19:42,911 [5] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 16:19:42,912 [5] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 16:19:42,914 [5] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 16:19:42,914 [5] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 16:19:42,915 [5] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 16:19:42,916 [5] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 16:19:42,917 [5] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 16:19:42,917 [5] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 16:19:42,918 [5] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 16:19:42,919 [5] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 16:19:42,919 [5] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 16:19:42,920 [5] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 16:19:42,920 [5] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 16:19:42,921 [5] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 16:19:42,921 [5] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 16:19:42,922 [5] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 16:19:42,922 [5] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 16:19:42,923 [5] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 16:19:42,924 [5] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 16:19:42,924 [5] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 16:19:42,925 [5] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 16:20:01,287 [12] INFO dn_lib.tools.log - reload config docs
2021-01-24 16:20:01,292 [12] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 16:20:01,293 [12] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 16:20:01,294 [12] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 16:20:01,295 [12] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 16:20:01,295 [12] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 16:20:01,296 [12] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 16:20:01,297 [12] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 16:20:01,298 [12] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 16:20:01,298 [12] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 16:20:01,299 [12] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 16:20:01,299 [12] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 16:20:01,300 [12] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 16:20:01,301 [12] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 16:20:01,301 [12] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 16:20:01,302 [12] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 16:20:01,303 [12] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 16:20:01,303 [12] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 16:20:01,303 [12] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 16:20:01,304 [12] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 16:20:01,305 [12] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 16:20:01,306 [12] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 16:20:01,306 [12] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 16:20:01,307 [12] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 16:20:01,308 [12] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 16:20:01,309 [12] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 16:20:01,322 [16] INFO dn_lib.tools.log - reload config docs
2021-01-24 16:20:01,323 [16] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 16:20:01,324 [16] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 16:20:01,325 [16] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 16:20:01,326 [16] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 16:20:01,327 [16] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 16:20:01,327 [16] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 16:20:01,328 [16] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 16:20:01,329 [16] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 16:20:01,330 [16] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 16:20:01,330 [16] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 16:20:01,331 [16] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 16:20:01,332 [16] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 16:20:01,332 [16] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 16:20:01,333 [16] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 16:20:01,334 [16] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 16:20:01,334 [16] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 16:20:01,335 [16] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 16:20:01,335 [16] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 16:20:01,336 [16] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 16:20:01,336 [16] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 16:20:01,336 [16] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 16:20:01,337 [16] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 16:20:01,338 [16] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 16:20:01,338 [16] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 16:20:01,339 [16] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 16:20:01,362 [7] INFO dn_lib.tools.log - reload config docs
2021-01-24 16:20:01,363 [7] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 16:20:01,364 [7] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 16:20:01,365 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 16:20:01,366 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 16:20:01,366 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 16:20:01,367 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 16:20:01,368 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 16:20:01,369 [7] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 16:20:01,369 [7] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 16:20:01,370 [7] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 16:20:01,371 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 16:20:01,371 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 16:20:01,371 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 16:20:01,372 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 16:20:01,372 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 16:20:01,373 [7] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 16:20:01,373 [7] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 16:20:01,374 [7] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 16:20:01,375 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 16:20:01,375 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 16:20:01,376 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 16:20:01,376 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 16:20:01,377 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 16:20:01,377 [7] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 16:20:01,378 [7] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 16:20:01,953 [5] INFO dn_lib.tools.log - reload config docs
2021-01-24 16:20:01,958 [5] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 16:20:01,958 [5] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 16:20:01,958 [5] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 16:20:01,958 [5] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 16:20:01,958 [5] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 16:20:01,962 [5] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 16:20:01,962 [5] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 16:20:01,962 [5] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 16:20:01,962 [5] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 16:20:01,962 [5] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 16:20:01,962 [5] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 16:20:01,962 [5] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 16:20:01,962 [5] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 16:20:01,962 [5] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 16:20:01,962 [5] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 16:20:01,962 [5] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 16:20:01,962 [5] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 16:20:01,962 [5] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 16:20:01,962 [5] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 16:20:01,973 [5] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 16:20:01,973 [5] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 16:20:01,973 [5] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 16:20:01,973 [5] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 16:20:01,973 [5] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 16:20:01,973 [5] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 16:20:02,033 [5] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-01-24 16:20:02,043 [5] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-01-24 16:20:02,043 [5] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-01-24 16:20:02,043 [5] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-01-24 16:20:02,052 [5] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-01-24 16:20:02,052 [5] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-01-24 16:20:02,052 [5] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-01-24 16:20:02,052 [5] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 16:20:02,062 [5] DEBUG dn_lib.tools.log - lettura cartelle
2021-01-24 16:20:02,062 [5] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 16:20:02,062 [5] DEBUG dn_lib.tools.log - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-01-24 16:20:02,073 [5] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-01-24 16:20:02,073 [5] DEBUG dn_lib.tools.log - leggo la cartella C:\root\todd\_test\dn
2021-01-24 16:20:02,073 [5] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id is null and file_name = 'script.incorso.task.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, null, 'script.incorso.task.sql', '.sql', 1, convert(datetime, '2021-01-07 16:50:16', 120), convert(datetime, '2021-01-07 16:50:48', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 16:50:16', 120), dt_upd = convert(datetime, '2021-01-07 16:50:48', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 16:50:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-07 16:50:48', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-24 16:20:02,093 [5] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4288;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, null, 4288, left('script', 150)
            , NULL, convert(datetime, '2021-01-07 16:50:16', 120), convert(datetime, '2021-01-07 16:50:48', 120), 1
            , 'in_corso', NULL, NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 16:50:16', 120), dt_upd = convert(datetime, '2021-01-07 16:50:48', 120)
         , title = left('script', 150), [user] = NULL
         , stato = 'in_corso', priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 16:50:16', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-01-07 16:50:48', 120), getdate())
          or isnull(title, '') <> isnull('script', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('in_corso', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-24 16:20:02,103 [5] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = 'script.incorso.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, 'script.incorso.task', 1, convert(datetime, '2021-01-07 16:50:16', 120), convert(datetime, '2021-01-07 16:50:16', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 16:50:16', 120), dt_upd = convert(datetime, '2021-01-07 16:50:16', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 16:50:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-07 16:50:16', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-24 16:20:02,112 [5] DEBUG dn_lib.tools.log - SQL: delete from dn_files where file_id = 4288;
      delete from dn_files_contents where [file_id] = 4288;
      
      delete dn from dn_tasks dn
       where file_id is not null and not exists (select top 1 1 from dn_files where file_id = dn.file_id);
  
      delete dn from dn_tasks_notes dn
       where not exists (select top 1 1 from dn_tasks where task_id = dn.task_id);
2021-01-24 16:20:02,122 [5] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1820 and file_name = 'content.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1820, 'content.sql', '.sql', 1, convert(datetime, '2021-01-07 16:50:16', 120), convert(datetime, '2021-01-07 16:50:16', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 16:50:16', 120), dt_upd = convert(datetime, '2021-01-07 16:50:16', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 16:50:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-07 16:50:16', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-24 16:20:02,122 [5] DEBUG dn_lib.tools.log - SQL: update dn_tasks set dt_upd = convert(datetime, convert(varchar, getdate(), 120), 120), folder_id = 1820, file_id = null
        where task_id = 1430;
2021-01-24 16:20:02,132 [5] DEBUG dn_lib.tools.log - SQL: update dn_folders set folder_name = 'script.task', dt_upd = convert(datetime, convert(varchar, getdate(), 120), 120)
        where folder_id = 1820
2021-01-24 16:20:02,142 [5] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1820 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, 1820, null, left('script', 150)
            , NULL, convert(datetime, '2021-01-07 16:50:16', 120), convert(datetime, '2021-01-07 16:50:48', 120), 1
            , 'in_corso', NULL, NULL, NULL, convert(datetime, '2021-01-24 16:20:02', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 16:50:16', 120), dt_upd = convert(datetime, '2021-01-07 16:50:48', 120)
         , title = left('script', 150), [user] = NULL
         , stato = 'in_corso', priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = convert(datetime, '2021-01-24 16:20:02', 120)
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 16:50:16', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-01-07 16:50:48', 120), getdate())
          or isnull(title, '') <> isnull('script', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('in_corso', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-24 16:20:02,153 [5] DEBUG dn_lib.tools.log - added task: script
2021-01-24 16:20:02,153 [5] DEBUG dn_lib.tools.log - SQL: delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
2021-01-24 16:20:02,153 [5] DEBUG dn_lib.tools.log - cancellati 14 files/folders/tasks
2021-01-24 16:20:02,162 [5] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '1')
        else update users_cache set var_value = substring('1', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-01-24 16:20:02,162 [5] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '0')
        else update users_cache set var_value = substring('0', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-01-24 16:20:02,172 [5] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/01/07 16:50:48')
        else update users_cache set var_value = substring('2021/01/07 16:50:48', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-01-24 16:20:02,172 [5] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/01/24 16:20:02')
        else update users_cache set var_value = substring('2021/01/24 16:20:02', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-01-24 16:20:31,147 [5] INFO dn_lib.tools.log - reload config docs
2021-01-24 16:20:31,148 [5] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 16:20:31,149 [5] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 16:20:31,150 [5] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 16:20:31,151 [5] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 16:20:31,152 [5] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 16:20:31,153 [5] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 16:20:31,155 [5] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 16:20:31,156 [5] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 16:20:31,156 [5] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 16:20:31,157 [5] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 16:20:31,157 [5] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 16:20:31,158 [5] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 16:20:31,158 [5] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 16:20:31,159 [5] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 16:20:31,159 [5] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 16:20:31,160 [5] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 16:20:31,160 [5] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 16:20:31,161 [5] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 16:20:31,161 [5] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 16:20:31,162 [5] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 16:20:31,162 [5] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 16:20:31,163 [5] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 16:20:31,164 [5] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 16:20:31,164 [5] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 16:20:31,165 [5] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 16:20:31,179 [7] INFO dn_lib.tools.log - reload config docs
2021-01-24 16:20:31,181 [7] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 16:20:31,181 [7] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 16:20:31,182 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 16:20:31,183 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 16:20:31,184 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 16:20:31,185 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 16:20:31,186 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 16:20:31,187 [7] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 16:20:31,188 [7] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 16:20:31,188 [7] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 16:20:31,189 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 16:20:31,189 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 16:20:31,190 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 16:20:31,190 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 16:20:31,191 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 16:20:31,192 [7] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 16:20:31,193 [7] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 16:20:31,193 [7] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 16:20:31,194 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 16:20:31,195 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 16:20:31,195 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 16:20:31,196 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 16:20:31,196 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 16:20:31,197 [7] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 16:20:31,198 [7] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 16:20:31,212 [10] INFO dn_lib.tools.log - reload config docs
2021-01-24 16:20:31,214 [10] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 16:20:31,215 [10] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 16:20:31,216 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 16:20:31,216 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 16:20:31,217 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 16:20:31,218 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 16:20:31,219 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 16:20:31,220 [10] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 16:20:31,220 [10] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 16:20:31,220 [10] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 16:20:31,221 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 16:20:31,221 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 16:20:31,222 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 16:20:31,222 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 16:20:31,223 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 16:20:31,223 [10] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 16:20:31,225 [10] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 16:20:31,225 [10] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 16:20:31,226 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 16:20:31,226 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 16:20:31,227 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 16:20:31,227 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 16:20:31,228 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 16:20:31,228 [10] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 16:20:31,229 [10] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 16:20:31,785 [13] INFO dn_lib.tools.log - reload config docs
2021-01-24 16:20:31,785 [13] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 16:20:31,793 [13] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 16:20:31,793 [13] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 16:20:31,793 [13] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 16:20:31,793 [13] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 16:20:31,793 [13] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 16:20:31,793 [13] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 16:20:31,793 [13] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 16:20:31,793 [13] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 16:20:31,793 [13] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 16:20:31,793 [13] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 16:20:31,793 [13] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 16:20:31,793 [13] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 16:20:31,793 [13] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 16:20:31,793 [13] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 16:20:31,803 [13] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 16:20:31,803 [13] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 16:20:31,803 [13] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 16:20:31,803 [13] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 16:20:31,803 [13] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 16:20:31,803 [13] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 16:20:31,803 [13] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 16:20:31,803 [13] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 16:20:31,803 [13] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 16:20:31,803 [13] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 16:20:31,818 [13] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-01-24 16:20:31,818 [13] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-01-24 16:20:31,818 [13] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-01-24 16:20:31,818 [13] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-01-24 16:20:31,818 [13] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-01-24 16:20:31,824 [13] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-01-24 16:20:31,824 [13] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-01-24 16:20:31,824 [13] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 16:20:31,824 [13] DEBUG dn_lib.tools.log - lettura cartelle
2021-01-24 16:20:31,824 [13] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 16:20:31,824 [13] DEBUG dn_lib.tools.log - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-01-24 16:20:31,824 [13] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-01-24 16:20:31,840 [13] DEBUG dn_lib.tools.log - leggo la cartella C:\root\todd\_test\dn
2021-01-24 16:20:31,840 [13] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = 'script.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, 'script.task', 1, convert(datetime, '2021-01-24 16:20:02', 120), convert(datetime, '2021-01-24 16:20:02', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-24 16:20:02', 120), dt_upd = convert(datetime, '2021-01-24 16:20:02', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 16:20:02', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 16:20:02', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-24 16:20:31,844 [13] DEBUG dn_lib.tools.log - updated folder: C:\root\todd\_test\dn\script.task
2021-01-24 16:20:31,844 [13] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1820 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, 1820, null, left('script', 150)
            , NULL, convert(datetime, '2021-01-24 16:20:02', 120), convert(datetime, '2021-01-24 16:20:02', 120), 1
            , 'in_corso', NULL, NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-24 16:20:02', 120), dt_upd = convert(datetime, '2021-01-24 16:20:02', 120)
         , title = left('script', 150), [user] = NULL
         , stato = 'in_corso', priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 16:20:02', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-01-24 16:20:02', 120), getdate())
          or isnull(title, '') <> isnull('script', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('in_corso', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-24 16:20:31,844 [13] DEBUG dn_lib.tools.log - updated task: script
2021-01-24 16:20:31,853 [13] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1820 and file_name = 'content.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1820, 'content.sql', '.sql', 1, convert(datetime, '2021-01-07 16:50:16', 120), convert(datetime, '2021-01-07 16:50:48', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 16:50:16', 120), dt_upd = convert(datetime, '2021-01-07 16:50:48', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 16:50:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-07 16:50:48', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-24 16:20:31,853 [13] DEBUG dn_lib.tools.log - updated file 4289: C:\root\todd\_test\dn\script.task\content.sql
2021-01-24 16:20:31,853 [13] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4289;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4289, '.sql', @content, convert(datetime, '2021-01-07 16:50:16', 120), convert(datetime, '2021-01-07 16:50:48', 120));
2021-01-24 16:20:31,863 [13] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\script.task\content.sql'
2021-01-24 16:20:31,863 [13] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1820 and file_name = '__i.xml';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1820, '__i.xml', '.xml', 1, convert(datetime, '2021-01-24 16:20:02', 120), convert(datetime, '2021-01-24 16:20:02', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-24 16:20:02', 120), dt_upd = convert(datetime, '2021-01-24 16:20:02', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 16:20:02', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 16:20:02', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-24 16:20:31,863 [13] DEBUG dn_lib.tools.log - added file 4290: C:\root\todd\_test\dn\script.task\__i.xml
2021-01-24 16:20:31,863 [13] DEBUG dn_lib.tools.log - SQL: delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
2021-01-24 16:20:31,863 [13] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '2')
        else update users_cache set var_value = substring('2', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-01-24 16:20:31,872 [13] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '1')
        else update users_cache set var_value = substring('1', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-01-24 16:20:31,872 [13] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/01/24 16:20:02')
        else update users_cache set var_value = substring('2021/01/24 16:20:02', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-01-24 16:20:31,872 [13] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/01/24 16:20:31')
        else update users_cache set var_value = substring('2021/01/24 16:20:31', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-01-24 16:20:43,415 [5] INFO dn_lib.tools.log - reload config docs
2021-01-24 16:20:43,417 [5] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 16:20:43,418 [5] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 16:20:43,419 [5] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 16:20:43,420 [5] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 16:20:43,421 [5] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 16:20:43,421 [5] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 16:20:43,422 [5] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 16:20:43,422 [5] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 16:20:43,423 [5] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 16:20:43,424 [5] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 16:20:43,424 [5] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 16:20:43,425 [5] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 16:20:43,426 [5] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 16:20:43,427 [5] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 16:20:43,427 [5] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 16:20:43,428 [5] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 16:20:43,428 [5] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 16:20:43,429 [5] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 16:20:43,430 [5] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 16:20:43,430 [5] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 16:20:43,431 [5] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 16:20:43,432 [5] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 16:20:43,432 [5] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 16:20:43,432 [5] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 16:20:43,433 [5] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 16:20:43,448 [14] INFO dn_lib.tools.log - reload config docs
2021-01-24 16:20:43,449 [14] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 16:20:43,450 [14] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 16:20:43,451 [14] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 16:20:43,452 [14] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 16:20:43,453 [14] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 16:20:43,454 [14] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 16:20:43,455 [14] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 16:20:43,456 [14] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 16:20:43,457 [14] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 16:20:43,458 [14] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 16:20:43,458 [14] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 16:20:43,459 [14] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 16:20:43,460 [14] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 16:20:43,460 [14] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 16:20:43,461 [14] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 16:20:43,461 [14] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 16:20:43,462 [14] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 16:20:43,463 [14] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 16:20:43,463 [14] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 16:20:43,464 [14] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 16:20:43,464 [14] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 16:20:43,465 [14] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 16:20:43,465 [14] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 16:20:43,466 [14] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 16:20:43,467 [14] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 16:20:43,479 [8] INFO dn_lib.tools.log - reload config docs
2021-01-24 16:20:43,480 [8] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 16:20:43,481 [8] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 16:20:43,481 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 16:20:43,482 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 16:20:43,482 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 16:20:43,483 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 16:20:43,484 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 16:20:43,485 [8] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 16:20:43,485 [8] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 16:20:43,486 [8] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 16:20:43,486 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 16:20:43,487 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 16:20:43,487 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 16:20:43,488 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 16:20:43,488 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 16:20:43,489 [8] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 16:20:43,489 [8] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 16:20:43,490 [8] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 16:20:43,490 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 16:20:43,491 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 16:20:43,491 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 16:20:43,492 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 16:20:43,492 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 16:20:43,493 [8] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 16:20:43,493 [8] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 16:20:44,063 [10] INFO dn_lib.tools.log - reload config docs
2021-01-24 16:20:44,063 [10] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 16:20:44,063 [10] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 16:20:44,073 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 16:20:44,073 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 16:20:44,073 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 16:20:44,073 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 16:20:44,073 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 16:20:44,073 [10] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 16:20:44,073 [10] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 16:20:44,073 [10] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 16:20:44,073 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 16:20:44,073 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 16:20:44,082 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 16:20:44,082 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 16:20:44,082 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 16:20:44,082 [10] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 16:20:44,082 [10] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 16:20:44,085 [10] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 16:20:44,085 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 16:20:44,085 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 16:20:44,085 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 16:20:44,085 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 16:20:44,085 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 16:20:44,085 [10] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 16:20:44,085 [10] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 16:20:44,098 [10] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-01-24 16:20:44,098 [10] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-01-24 16:20:44,103 [10] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-01-24 16:20:44,103 [10] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-01-24 16:20:44,103 [10] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-01-24 16:20:44,103 [10] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-01-24 16:20:44,103 [10] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-01-24 16:20:44,103 [10] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 16:20:44,103 [10] DEBUG dn_lib.tools.log - lettura cartelle
2021-01-24 16:20:44,103 [10] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 16:20:44,113 [10] DEBUG dn_lib.tools.log - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-01-24 16:20:44,113 [10] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-01-24 16:20:44,113 [10] DEBUG dn_lib.tools.log - leggo la cartella C:\root\todd\_test\dn
2021-01-24 16:20:44,113 [10] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = 'script.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, 'script.task', 1, convert(datetime, '2021-01-24 16:20:02', 120), convert(datetime, '2021-01-24 16:20:02', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-24 16:20:02', 120), dt_upd = convert(datetime, '2021-01-24 16:20:02', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 16:20:02', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 16:20:02', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-24 16:20:44,123 [10] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1820 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, 1820, null, left('script', 150)
            , NULL, convert(datetime, '2021-01-24 16:20:02', 120), convert(datetime, '2021-01-24 16:20:02', 120), 1
            , 'in_corso', NULL, NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-24 16:20:02', 120), dt_upd = convert(datetime, '2021-01-24 16:20:02', 120)
         , title = left('script', 150), [user] = NULL
         , stato = 'in_corso', priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 16:20:02', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-01-24 16:20:02', 120), getdate())
          or isnull(title, '') <> isnull('script', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('in_corso', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-24 16:20:44,123 [10] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1820 and file_name = 'content.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1820, 'content.sql', '.sql', 1, convert(datetime, '2021-01-07 16:50:16', 120), convert(datetime, '2021-01-07 16:50:48', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 16:50:16', 120), dt_upd = convert(datetime, '2021-01-07 16:50:48', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 16:50:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-07 16:50:48', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-24 16:20:44,133 [10] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1820 and file_name = '__i.xml';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1820, '__i.xml', '.xml', 1, convert(datetime, '2021-01-24 16:20:02', 120), convert(datetime, '2021-01-24 16:20:02', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-24 16:20:02', 120), dt_upd = convert(datetime, '2021-01-24 16:20:02', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 16:20:02', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 16:20:02', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-24 16:20:44,133 [10] DEBUG dn_lib.tools.log - SQL: delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
2021-01-24 16:20:44,143 [10] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '2')
        else update users_cache set var_value = substring('2', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-01-24 16:20:44,143 [10] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '1')
        else update users_cache set var_value = substring('1', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-01-24 16:20:44,143 [10] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/01/24 16:20:02')
        else update users_cache set var_value = substring('2021/01/24 16:20:02', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-01-24 16:20:44,153 [10] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/01/24 16:20:44')
        else update users_cache set var_value = substring('2021/01/24 16:20:44', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-01-24 17:01:23,331 [7] INFO dn_lib.tools.log - reload core
2021-01-24 17:01:23,366 [7] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:01:23,368 [7] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:01:23,370 [7] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:01:23,370 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:01:23,371 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:01:23,373 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:01:23,382 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:01:23,383 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:01:23,385 [7] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:01:23,385 [7] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:01:23,387 [7] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:01:23,388 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:01:23,388 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:01:23,390 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:01:23,390 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:01:23,391 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:01:23,392 [7] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:01:23,392 [7] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:01:23,400 [7] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:01:23,402 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:01:23,403 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:01:23,404 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:01:23,404 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:01:23,405 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:01:23,406 [7] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:01:23,411 [7] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:01:24,079 [7] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:01:24,080 [7] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:01:24,081 [7] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:01:24,082 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:01:24,083 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:01:24,084 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:01:24,084 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:01:24,085 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:01:24,086 [7] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:01:24,086 [7] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:01:24,087 [7] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:01:24,087 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:01:24,088 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:01:24,089 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:01:24,089 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:01:24,090 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:01:24,090 [7] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:01:24,091 [7] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:01:24,091 [7] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:01:24,092 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:01:24,093 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:01:24,094 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:01:24,094 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:01:24,095 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:01:24,096 [7] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:01:24,096 [7] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:01:24,146 [7] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-01-24 17:01:24,150 [7] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-01-24 17:01:24,153 [7] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-01-24 17:01:24,155 [7] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-01-24 17:01:24,159 [7] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-01-24 17:01:24,160 [7] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-01-24 17:01:24,162 [7] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-01-24 17:01:24,164 [7] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 17:01:24,170 [7] DEBUG dn_lib.tools.log - lettura cartelle
2021-01-24 17:01:24,171 [7] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 17:01:24,172 [7] DEBUG dn_lib.tools.log - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-01-24 17:01:24,174 [7] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-01-24 17:01:24,185 [7] DEBUG dn_lib.tools.log - leggo la cartella C:\root\todd\_test\dn
2021-01-24 17:01:24,186 [7] DEBUG dn_lib.tools.log - SQL: delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
2021-01-24 17:01:24,192 [7] DEBUG dn_lib.tools.log - cancellati 5 files/folders/tasks
2021-01-24 17:01:24,193 [7] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '0')
        else update users_cache set var_value = substring('0', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-01-24 17:01:24,197 [7] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '0')
        else update users_cache set var_value = substring('0', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-01-24 17:01:24,200 [7] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/01/05 15:40:09')
        else update users_cache set var_value = substring('2021/01/05 15:40:09', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-01-24 17:01:24,203 [7] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/01/24 17:01:24')
        else update users_cache set var_value = substring('2021/01/24 17:01:24', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-01-24 17:01:55,136 [12] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:01:55,137 [12] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:01:55,137 [12] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:01:55,138 [12] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:01:55,138 [12] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:01:55,139 [12] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:01:55,140 [12] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:01:55,142 [12] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:01:55,144 [12] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:01:55,144 [12] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:01:55,145 [12] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:01:55,146 [12] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:01:55,146 [12] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:01:55,146 [12] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:01:55,147 [12] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:01:55,147 [12] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:01:55,148 [12] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:01:55,148 [12] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:01:55,148 [12] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:01:55,149 [12] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:01:55,149 [12] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:01:55,149 [12] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:01:55,150 [12] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:01:55,150 [12] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:01:55,150 [12] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:01:55,151 [12] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:01:55,724 [13] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:01:55,726 [13] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:01:55,727 [13] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:01:55,728 [13] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:01:55,729 [13] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:01:55,729 [13] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:01:55,730 [13] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:01:55,731 [13] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:01:55,731 [13] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:01:55,731 [13] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:01:55,732 [13] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:01:55,733 [13] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:01:55,734 [13] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:01:55,734 [13] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:01:55,735 [13] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:01:55,735 [13] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:01:55,736 [13] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:01:55,737 [13] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:01:55,737 [13] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:01:55,738 [13] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:01:55,738 [13] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:01:55,739 [13] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:01:55,740 [13] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:01:55,740 [13] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:01:55,741 [13] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:01:55,741 [13] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:01:55,750 [13] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-01-24 17:01:55,752 [13] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-01-24 17:01:55,753 [13] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-01-24 17:01:55,754 [13] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-01-24 17:01:55,755 [13] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-01-24 17:01:55,756 [13] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-01-24 17:01:55,757 [13] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-01-24 17:01:55,758 [13] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 17:01:55,759 [13] DEBUG dn_lib.tools.log - lettura cartelle
2021-01-24 17:01:55,760 [13] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 17:01:55,761 [13] DEBUG dn_lib.tools.log - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-01-24 17:01:55,761 [13] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-01-24 17:01:55,762 [13] DEBUG dn_lib.tools.log - leggo la cartella C:\root\todd\_test\dn
2021-01-24 17:01:55,763 [13] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id is null and file_name = 'orco.incorso.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, null, 'orco.incorso.txt', '.txt', 1, convert(datetime, '2021-01-24 17:01:37', 120), convert(datetime, '2021-01-24 17:01:37', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-24 17:01:37', 120), dt_upd = convert(datetime, '2021-01-24 17:01:37', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:01:37', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 17:01:37', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-24 17:01:55,777 [13] DEBUG dn_lib.tools.log - added file 4291: C:\root\todd\_test\dn\orco.incorso.txt
2021-01-24 17:01:55,778 [13] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4291;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4291, '.txt', @content, convert(datetime, '2021-01-24 17:01:37', 120), convert(datetime, '2021-01-24 17:01:37', 120));
2021-01-24 17:01:55,781 [13] DEBUG dn_lib.tools.log - salvato contenuto file nel database: C:\root\todd\_test\dn\orco.incorso.txt
2021-01-24 17:01:55,784 [13] DEBUG dn_lib.tools.log - SQL: delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
2021-01-24 17:01:55,785 [13] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '1')
        else update users_cache set var_value = substring('1', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-01-24 17:01:55,788 [13] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '0')
        else update users_cache set var_value = substring('0', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-01-24 17:01:55,789 [13] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/01/24 17:01:37')
        else update users_cache set var_value = substring('2021/01/24 17:01:37', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-01-24 17:01:55,793 [13] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/01/24 17:01:55')
        else update users_cache set var_value = substring('2021/01/24 17:01:55', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-01-24 17:12:28,428 [55] INFO dn_lib.tools.log - reload core
2021-01-24 17:12:28,463 [55] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:12:28,465 [55] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:12:28,465 [55] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:12:28,466 [55] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:12:28,475 [55] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:12:28,476 [55] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:12:28,486 [55] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:12:28,488 [55] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:12:28,489 [55] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:12:28,491 [55] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:12:28,493 [55] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:12:28,494 [55] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:12:28,495 [55] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:12:28,496 [55] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:12:28,497 [55] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:12:28,497 [55] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:12:28,498 [55] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:12:28,498 [55] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:12:28,505 [55] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:12:28,509 [55] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:12:28,510 [55] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:12:28,511 [55] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:12:28,513 [55] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:12:28,514 [55] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:12:28,514 [55] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:12:28,518 [55] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:12:29,125 [49] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:12:29,126 [49] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:12:29,128 [49] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:12:29,129 [49] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:12:29,130 [49] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:12:29,130 [49] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:12:29,131 [49] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:12:29,132 [49] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:12:29,133 [49] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:12:29,133 [49] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:12:29,134 [49] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:12:29,134 [49] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:12:29,135 [49] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:12:29,136 [49] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:12:29,136 [49] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:12:29,137 [49] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:12:29,137 [49] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:12:29,138 [49] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:12:29,139 [49] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:12:29,139 [49] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:12:29,139 [49] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:12:29,139 [49] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:12:29,139 [49] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:12:29,139 [49] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:12:29,139 [49] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:12:29,142 [49] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:12:29,187 [49] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-01-24 17:12:29,187 [49] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-01-24 17:12:29,192 [49] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-01-24 17:12:29,192 [49] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-01-24 17:12:29,192 [49] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-01-24 17:12:29,192 [49] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-01-24 17:12:29,202 [49] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-01-24 17:12:29,202 [49] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 17:12:29,212 [49] DEBUG dn_lib.tools.log - lettura cartelle
2021-01-24 17:12:29,212 [49] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 17:12:29,212 [49] DEBUG dn_lib.tools.log - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-01-24 17:12:29,212 [49] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-01-24 17:12:29,212 [49] DEBUG dn_lib.tools.log - leggo la cartella C:\root\todd\_test\dn
2021-01-24 17:12:29,222 [49] DEBUG dn_lib.tools.log - SQL: delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
2021-01-24 17:12:29,222 [49] DEBUG dn_lib.tools.log - cancellati 2 files/folders/tasks
2021-01-24 17:12:29,222 [49] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '0')
        else update users_cache set var_value = substring('0', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-01-24 17:12:29,222 [49] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '0')
        else update users_cache set var_value = substring('0', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-01-24 17:12:29,232 [49] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/01/05 15:40:09')
        else update users_cache set var_value = substring('2021/01/05 15:40:09', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-01-24 17:12:29,232 [49] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/01/24 17:12:29')
        else update users_cache set var_value = substring('2021/01/24 17:12:29', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-01-24 17:24:25,968 [44] INFO dn_lib.tools.log - reload core
2021-01-24 17:24:26,000 [44] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:24:26,002 [44] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:24:26,003 [44] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:24:26,004 [44] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:24:26,006 [44] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:24:26,008 [44] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:24:26,019 [44] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:24:26,020 [44] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:24:26,021 [44] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:24:26,022 [44] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:24:26,024 [44] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:24:26,025 [44] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:24:26,026 [44] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:24:26,027 [44] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:24:26,028 [44] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:24:26,029 [44] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:24:26,029 [44] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:24:26,030 [44] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:24:26,037 [44] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:24:26,039 [44] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:24:26,041 [44] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:24:26,042 [44] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:24:26,043 [44] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:24:26,044 [44] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:24:26,045 [44] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:24:26,050 [44] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:24:26,670 [38] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:24:26,671 [38] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:24:26,673 [38] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:24:26,674 [38] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:24:26,675 [38] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:24:26,676 [38] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:24:26,677 [38] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:24:26,678 [38] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:24:26,679 [38] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:24:26,679 [38] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:24:26,680 [38] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:24:26,681 [38] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:24:26,681 [38] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:24:26,682 [38] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:24:26,683 [38] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:24:26,684 [38] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:24:26,684 [38] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:24:26,685 [38] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:24:26,685 [38] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:24:26,686 [38] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:24:26,687 [38] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:24:26,687 [38] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:24:26,688 [38] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:24:26,688 [38] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:24:26,689 [38] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:24:26,689 [38] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:24:26,744 [38] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-01-24 17:24:26,748 [38] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-01-24 17:24:26,752 [38] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-01-24 17:24:26,754 [38] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-01-24 17:24:26,759 [38] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-01-24 17:24:26,761 [38] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-01-24 17:24:26,763 [38] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-01-24 17:24:26,765 [38] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 17:24:26,771 [38] DEBUG dn_lib.tools.log - lettura cartelle
2021-01-24 17:24:26,772 [38] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 17:24:26,774 [38] DEBUG dn_lib.tools.log - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-01-24 17:24:26,776 [38] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-01-24 17:24:26,778 [38] DEBUG dn_lib.tools.log - leggo la cartella C:\root\todd\_test\dn
2021-01-24 17:24:26,779 [38] DEBUG dn_lib.tools.log - SQL: declare @cc_files int; declare @cc_folders int;
      select @cc_files = (select count(*) from dn_files where readed is null) 
      select @cc_folders = (select count(*) from dn_folders where readed is null)
      
      delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
      select @cc_files, @cc_folders;
2021-01-24 17:24:26,785 [38] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '0')
        else update users_cache set var_value = substring('0', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-01-24 17:24:26,797 [38] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '0')
        else update users_cache set var_value = substring('0', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-01-24 17:24:26,800 [38] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/01/05 15:40:09')
        else update users_cache set var_value = substring('2021/01/05 15:40:09', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-01-24 17:24:26,804 [38] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/01/24 17:24:26')
        else update users_cache set var_value = substring('2021/01/24 17:24:26', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-01-24 17:25:03,847 [52] INFO dn_lib.tools.log - reload core
2021-01-24 17:25:03,881 [52] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:25:03,883 [52] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:25:03,885 [52] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:25:03,886 [52] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:25:03,887 [52] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:25:03,888 [52] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:25:03,897 [52] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:25:03,899 [52] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:25:03,901 [52] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:25:03,902 [52] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:25:03,903 [52] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:25:03,904 [52] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:25:03,904 [52] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:25:03,906 [52] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:25:03,906 [52] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:25:03,907 [52] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:25:03,907 [52] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:25:03,908 [52] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:25:03,915 [52] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:25:03,917 [52] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:25:03,918 [52] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:25:03,919 [52] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:25:03,920 [52] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:25:03,921 [52] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:25:03,921 [52] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:25:03,926 [52] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:25:04,530 [36] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:25:04,531 [36] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:25:04,531 [36] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:25:04,532 [36] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:25:04,533 [36] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:25:04,533 [36] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:25:04,534 [36] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:25:04,535 [36] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:25:04,536 [36] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:25:04,537 [36] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:25:04,537 [36] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:25:04,538 [36] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:25:04,539 [36] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:25:04,539 [36] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:25:04,540 [36] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:25:04,541 [36] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:25:04,541 [36] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:25:04,542 [36] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:25:04,542 [36] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:25:04,543 [36] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:25:04,544 [36] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:25:04,544 [36] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:25:04,545 [36] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:25:04,546 [36] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:25:04,547 [36] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:25:04,548 [36] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:25:04,608 [36] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-01-24 17:25:04,611 [36] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-01-24 17:25:04,614 [36] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-01-24 17:25:04,616 [36] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-01-24 17:25:04,619 [36] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-01-24 17:25:04,621 [36] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-01-24 17:25:04,622 [36] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-01-24 17:25:04,625 [36] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 17:25:04,631 [36] DEBUG dn_lib.tools.log - lettura cartelle
2021-01-24 17:25:04,632 [36] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 17:25:04,633 [36] DEBUG dn_lib.tools.log - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-01-24 17:25:04,635 [36] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-01-24 17:25:04,636 [36] DEBUG dn_lib.tools.log - elaboro la cartella C:\root\todd\_test\dn...
2021-01-24 17:25:04,637 [36] DEBUG dn_lib.tools.log - SQL: declare @cc_files int; declare @cc_folders int;
      select @cc_files = (select count(*) from dn_files where readed is null) 
      select @cc_folders = (select count(*) from dn_folders where readed is null)
      
      delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
      select @cc_files, @cc_folders;
2021-01-24 17:25:04,639 [36] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '0')
        else update users_cache set var_value = substring('0', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-01-24 17:25:04,649 [36] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '0')
        else update users_cache set var_value = substring('0', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-01-24 17:25:04,651 [36] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/01/05 15:40:09')
        else update users_cache set var_value = substring('2021/01/05 15:40:09', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-01-24 17:25:04,652 [36] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/01/24 17:25:04')
        else update users_cache set var_value = substring('2021/01/24 17:25:04', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-01-24 17:25:53,536 [52] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:25:53,537 [52] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:25:53,538 [52] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:25:53,538 [52] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:25:53,539 [52] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:25:53,539 [52] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:25:53,540 [52] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:25:53,540 [52] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:25:53,541 [52] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:25:53,541 [52] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:25:53,541 [52] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:25:53,542 [52] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:25:53,542 [52] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:25:53,543 [52] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:25:53,544 [52] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:25:53,544 [52] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:25:53,546 [52] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:25:53,546 [52] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:25:53,547 [52] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:25:53,547 [52] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:25:53,548 [52] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:25:53,548 [52] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:25:53,549 [52] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:25:53,549 [52] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:25:53,549 [52] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:25:53,550 [52] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:25:54,105 [36] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:25:54,106 [36] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:25:54,107 [36] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:25:54,107 [36] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:25:54,108 [36] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:25:54,109 [36] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:25:54,110 [36] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:25:54,111 [36] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:25:54,113 [36] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:25:54,114 [36] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:25:54,115 [36] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:25:54,115 [36] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:25:54,117 [36] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:25:54,117 [36] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:25:54,117 [36] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:25:54,118 [36] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:25:54,119 [36] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:25:54,120 [36] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:25:54,121 [36] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:25:54,121 [36] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:25:54,122 [36] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:25:54,122 [36] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:25:54,123 [36] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:25:54,124 [36] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:25:54,124 [36] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:25:54,125 [36] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:25:54,135 [36] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-01-24 17:25:54,138 [36] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-01-24 17:25:54,139 [36] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-01-24 17:25:54,141 [36] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-01-24 17:25:54,142 [36] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-01-24 17:25:54,145 [36] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-01-24 17:25:54,146 [36] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-01-24 17:25:54,148 [36] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 17:25:54,149 [36] DEBUG dn_lib.tools.log - lettura cartelle
2021-01-24 17:25:54,150 [36] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 17:25:54,151 [36] DEBUG dn_lib.tools.log - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-01-24 17:25:54,152 [36] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-01-24 17:25:54,154 [36] DEBUG dn_lib.tools.log - elaboro la cartella C:\root\todd\_test\dn...
2021-01-24 17:25:54,155 [36] DEBUG dn_lib.tools.log - SQL: declare @cc_files int; declare @cc_folders int;
      select @cc_files = (select count(*) from dn_files where readed is null) 
      select @cc_folders = (select count(*) from dn_folders where readed is null)
      
      delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
      select @cc_files, @cc_folders;
2021-01-24 17:25:54,161 [36] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '0')
        else update users_cache set var_value = substring('0', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-01-24 17:25:54,165 [36] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '0')
        else update users_cache set var_value = substring('0', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-01-24 17:25:54,168 [36] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/01/05 15:40:09')
        else update users_cache set var_value = substring('2021/01/05 15:40:09', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-01-24 17:25:54,172 [36] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/01/24 17:25:54')
        else update users_cache set var_value = substring('2021/01/24 17:25:54', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-01-24 17:26:06,580 [43] INFO dn_lib.tools.log - reload core
2021-01-24 17:26:06,613 [43] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:26:06,615 [43] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:26:06,616 [43] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:26:06,616 [43] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:26:06,618 [43] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:26:06,619 [43] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:26:06,630 [43] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:26:06,632 [43] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:26:06,633 [43] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:26:06,634 [43] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:26:06,635 [43] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:26:06,636 [43] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:26:06,637 [43] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:26:06,639 [43] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:26:06,640 [43] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:26:06,641 [43] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:26:06,642 [43] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:26:06,643 [43] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:26:06,649 [43] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:26:06,651 [43] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:26:06,652 [43] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:26:06,652 [43] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:26:06,654 [43] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:26:06,655 [43] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:26:06,655 [43] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:26:06,660 [43] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:26:07,254 [32] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:26:07,255 [32] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:26:07,257 [32] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:26:07,258 [32] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:26:07,259 [32] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:26:07,260 [32] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:26:07,261 [32] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:26:07,262 [32] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:26:07,262 [32] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:26:07,263 [32] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:26:07,263 [32] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:26:07,264 [32] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:26:07,264 [32] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:26:07,265 [32] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:26:07,266 [32] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:26:07,266 [32] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:26:07,267 [32] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:26:07,267 [32] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:26:07,268 [32] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:26:07,269 [32] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:26:07,269 [32] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:26:07,270 [32] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:26:07,271 [32] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:26:07,272 [32] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:26:07,272 [32] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:26:07,273 [32] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:26:07,324 [32] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-01-24 17:26:07,326 [32] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-01-24 17:26:07,328 [32] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-01-24 17:26:07,329 [32] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-01-24 17:26:07,332 [32] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-01-24 17:26:07,334 [32] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-01-24 17:26:07,335 [32] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-01-24 17:26:07,338 [32] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 17:26:07,342 [32] DEBUG dn_lib.tools.log - eleco cartelle da sincronizzare
2021-01-24 17:26:07,344 [32] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 17:26:07,345 [32] DEBUG dn_lib.tools.log -  - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-01-24 17:26:07,347 [32] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-01-24 17:26:07,348 [32] DEBUG dn_lib.tools.log - elaboro la cartella C:\root\todd\_test\dn...
2021-01-24 17:26:07,349 [32] DEBUG dn_lib.tools.log - SQL: declare @cc_files int; declare @cc_folders int;
      select @cc_files = (select count(*) from dn_files where readed is null) 
      select @cc_folders = (select count(*) from dn_folders where readed is null)
      
      delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
      select @cc_files, @cc_folders;
2021-01-24 17:26:07,350 [32] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '0')
        else update users_cache set var_value = substring('0', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-01-24 17:26:07,360 [32] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '0')
        else update users_cache set var_value = substring('0', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-01-24 17:26:07,362 [32] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/01/05 15:40:09')
        else update users_cache set var_value = substring('2021/01/05 15:40:09', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-01-24 17:26:07,363 [32] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/01/24 17:26:07')
        else update users_cache set var_value = substring('2021/01/24 17:26:07', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-01-24 17:26:48,135 [38] INFO dn_lib.tools.log - reload core
2021-01-24 17:26:48,167 [38] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:26:48,169 [38] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:26:48,170 [38] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:26:48,170 [38] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:26:48,171 [38] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:26:48,172 [38] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:26:48,173 [38] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:26:48,174 [38] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:26:48,174 [38] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:26:48,175 [38] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:26:48,177 [38] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:26:48,178 [38] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:26:48,180 [38] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:26:48,180 [38] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:26:48,181 [38] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:26:48,182 [38] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:26:48,182 [38] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:26:48,183 [38] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:26:48,190 [38] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:26:48,191 [38] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:26:48,193 [38] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:26:48,194 [38] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:26:48,195 [38] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:26:48,195 [38] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:26:48,197 [38] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:26:48,200 [38] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:26:48,800 [32] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:26:48,802 [32] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:26:48,803 [32] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:26:48,804 [32] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:26:48,805 [32] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:26:48,806 [32] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:26:48,807 [32] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:26:48,807 [32] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:26:48,808 [32] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:26:48,808 [32] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:26:48,809 [32] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:26:48,809 [32] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:26:48,810 [32] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:26:48,810 [32] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:26:48,810 [32] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:26:48,811 [32] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:26:48,812 [32] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:26:48,812 [32] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:26:48,813 [32] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:26:48,814 [32] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:26:48,814 [32] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:26:48,815 [32] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:26:48,816 [32] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:26:48,816 [32] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:26:48,817 [32] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:26:48,818 [32] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:26:48,877 [32] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-01-24 17:26:48,879 [32] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-01-24 17:26:48,882 [32] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-01-24 17:26:48,884 [32] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-01-24 17:26:48,889 [32] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-01-24 17:26:48,891 [32] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-01-24 17:26:48,893 [32] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-01-24 17:26:48,895 [32] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 17:26:48,901 [32] DEBUG dn_lib.tools.log - eleco cartelle da sincronizzare
2021-01-24 17:26:48,903 [32] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 17:26:48,904 [32] DEBUG dn_lib.tools.log -  - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-01-24 17:26:48,906 [32] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-01-24 17:26:48,908 [32] DEBUG dn_lib.tools.log - elaboro la cartella C:\root\todd\_test\dn...
2021-01-24 17:26:48,910 [32] DEBUG dn_lib.tools.log - SQL: declare @cc_files int; declare @cc_folders int;
      select @cc_files = (select count(*) from dn_files where readed is null) 
      select @cc_folders = (select count(*) from dn_folders where readed is null)
      
      delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
      select @cc_files, @cc_folders;
2021-01-24 17:26:48,918 [32] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '0')
        else update users_cache set var_value = substring('0', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-01-24 17:26:48,930 [32] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '0')
        else update users_cache set var_value = substring('0', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-01-24 17:26:48,933 [32] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/01/05 15:40:09')
        else update users_cache set var_value = substring('2021/01/05 15:40:09', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-01-24 17:26:48,937 [32] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/01/24 17:26:48')
        else update users_cache set var_value = substring('2021/01/24 17:26:48', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-01-24 17:27:20,014 [52] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:27:20,015 [52] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:27:20,016 [52] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:27:20,017 [52] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:27:20,018 [52] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:27:20,019 [52] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:27:20,020 [52] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:27:20,020 [52] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:27:20,021 [52] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:27:20,022 [52] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:27:20,022 [52] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:27:20,023 [52] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:27:20,024 [52] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:27:20,024 [52] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:27:20,025 [52] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:27:20,025 [52] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:27:20,026 [52] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:27:20,026 [52] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:27:20,027 [52] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:27:20,027 [52] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:27:20,028 [52] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:27:20,028 [52] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:27:20,029 [52] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:27:20,030 [52] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:27:20,031 [52] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:27:20,032 [52] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:27:20,591 [29] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:27:20,593 [29] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:27:20,594 [29] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:27:20,594 [29] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:27:20,595 [29] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:27:20,596 [29] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:27:20,597 [29] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:27:20,597 [29] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:27:20,599 [29] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:27:20,599 [29] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:27:20,600 [29] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:27:20,600 [29] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:27:20,601 [29] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:27:20,602 [29] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:27:20,602 [29] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:27:20,603 [29] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:27:20,603 [29] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:27:20,604 [29] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:27:20,605 [29] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:27:20,605 [29] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:27:20,606 [29] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:27:20,607 [29] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:27:20,608 [29] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:27:20,608 [29] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:27:20,609 [29] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:27:20,610 [29] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:27:20,620 [29] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-01-24 17:27:20,622 [29] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-01-24 17:27:20,623 [29] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-01-24 17:27:20,624 [29] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-01-24 17:27:20,625 [29] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-01-24 17:27:20,626 [29] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-01-24 17:27:20,626 [29] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-01-24 17:27:20,627 [29] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 17:27:20,629 [29] DEBUG dn_lib.tools.log - eleco cartelle da sincronizzare
2021-01-24 17:27:20,630 [29] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 17:27:20,631 [29] DEBUG dn_lib.tools.log -  - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-01-24 17:27:20,631 [29] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-01-24 17:27:20,632 [29] DEBUG dn_lib.tools.log - elaboro la cartella C:\root\todd\_test\dn...
2021-01-24 17:27:20,633 [29] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id is null and file_name = 'orco.incorso.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, null, 'orco.incorso.txt', '.txt', 1, convert(datetime, '2021-01-24 17:27:10', 120), convert(datetime, '2021-01-24 17:27:10', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-24 17:27:10', 120), dt_upd = convert(datetime, '2021-01-24 17:27:10', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:27:10', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 17:27:10', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-24 17:27:20,646 [29] DEBUG dn_lib.tools.log - added file: C:\root\todd\_test\dn\orco.incorso.txt
2021-01-24 17:27:20,652 [29] DEBUG dn_lib.tools.log - SQL: declare @cc_files int; declare @cc_folders int;
      select @cc_files = (select count(*) from dn_files where readed is null) 
      select @cc_folders = (select count(*) from dn_folders where readed is null)
      
      delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
      select @cc_files, @cc_folders;
2021-01-24 17:27:20,654 [29] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '1')
        else update users_cache set var_value = substring('1', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-01-24 17:27:20,657 [29] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '0')
        else update users_cache set var_value = substring('0', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-01-24 17:27:20,659 [29] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/01/24 17:27:10')
        else update users_cache set var_value = substring('2021/01/24 17:27:10', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-01-24 17:27:20,662 [29] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/01/24 17:27:20')
        else update users_cache set var_value = substring('2021/01/24 17:27:20', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-01-24 17:31:54,425 [52] INFO dn_lib.tools.log - reload core
2021-01-24 17:31:54,465 [52] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:31:54,467 [52] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:31:54,468 [52] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:31:54,469 [52] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:31:54,470 [52] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:31:54,471 [52] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:31:54,481 [52] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:31:54,489 [52] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:31:54,496 [52] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:31:54,496 [52] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:31:54,498 [52] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:31:54,499 [52] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:31:54,499 [52] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:31:54,501 [52] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:31:54,502 [52] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:31:54,503 [52] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:31:54,503 [52] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:31:54,504 [52] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:31:54,511 [52] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:31:54,512 [52] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:31:54,514 [52] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:31:54,514 [52] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:31:54,516 [52] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:31:54,517 [52] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:31:54,518 [52] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:31:54,523 [52] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:31:55,125 [29] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:31:55,126 [29] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:31:55,127 [29] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:31:55,127 [29] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:31:55,128 [29] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:31:55,129 [29] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:31:55,130 [29] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:31:55,131 [29] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:31:55,132 [29] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:31:55,133 [29] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:31:55,133 [29] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:31:55,134 [29] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:31:55,135 [29] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:31:55,136 [29] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:31:55,136 [29] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:31:55,137 [29] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:31:55,138 [29] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:31:55,138 [29] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:31:55,139 [29] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:31:55,140 [29] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:31:55,141 [29] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:31:55,141 [29] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:31:55,142 [29] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:31:55,143 [29] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:31:55,143 [29] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:31:55,144 [29] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:31:55,195 [29] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-01-24 17:31:55,197 [29] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-01-24 17:31:55,201 [29] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-01-24 17:31:55,204 [29] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-01-24 17:31:55,210 [29] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-01-24 17:31:55,212 [29] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-01-24 17:31:55,213 [29] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-01-24 17:31:55,216 [29] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 17:31:55,224 [29] DEBUG dn_lib.tools.log - elenco cartelle da sincronizzare
2021-01-24 17:31:55,226 [29] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 17:31:55,228 [29] DEBUG dn_lib.tools.log -    - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-01-24 17:31:55,230 [29] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-01-24 17:31:55,238 [29] DEBUG dn_lib.tools.log - elaboro la cartella C:\root\todd\_test\dn...
2021-01-24 17:31:55,241 [29] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id is null and file_name = 'orco.incorso.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, null, 'orco.incorso.txt', '.txt', 1, convert(datetime, '2021-01-24 17:27:10', 120), convert(datetime, '2021-01-24 17:27:10', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-24 17:27:10', 120), dt_upd = convert(datetime, '2021-01-24 17:27:10', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:27:10', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 17:27:10', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-24 17:31:55,249 [29] DEBUG dn_lib.tools.log - SQL: declare @cc_files int; declare @cc_folders int;
      select @cc_files = (select count(*) from dn_files where readed is null) 
      select @cc_folders = (select count(*) from dn_folders where readed is null)
      
      delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
      select @cc_files, @cc_folders;
2021-01-24 17:31:55,255 [29] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '1')
        else update users_cache set var_value = substring('1', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-01-24 17:31:55,259 [29] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '0')
        else update users_cache set var_value = substring('0', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-01-24 17:31:55,262 [29] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/01/24 17:27:10')
        else update users_cache set var_value = substring('2021/01/24 17:27:10', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-01-24 17:31:55,265 [29] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/01/24 17:31:55')
        else update users_cache set var_value = substring('2021/01/24 17:31:55', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-01-24 17:32:11,167 [40] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:32:11,168 [40] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:32:11,169 [40] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:32:11,170 [40] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:32:11,170 [40] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:32:11,171 [40] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:32:11,171 [40] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:32:11,172 [40] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:32:11,172 [40] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:32:11,173 [40] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:32:11,173 [40] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:32:11,174 [40] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:32:11,174 [40] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:32:11,175 [40] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:32:11,175 [40] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:32:11,176 [40] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:32:11,176 [40] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:32:11,176 [40] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:32:11,177 [40] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:32:11,177 [40] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:32:11,178 [40] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:32:11,178 [40] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:32:11,178 [40] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:32:11,179 [40] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:32:11,179 [40] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:32:11,180 [40] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:32:11,755 [52] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:32:11,757 [52] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:32:11,758 [52] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:32:11,759 [52] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:32:11,760 [52] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:32:11,761 [52] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:32:11,761 [52] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:32:11,762 [52] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:32:11,762 [52] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:32:11,763 [52] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:32:11,764 [52] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:32:11,764 [52] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:32:11,765 [52] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:32:11,766 [52] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:32:11,767 [52] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:32:11,767 [52] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:32:11,768 [52] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:32:11,768 [52] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:32:11,769 [52] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:32:11,770 [52] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:32:11,770 [52] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:32:11,771 [52] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:32:11,772 [52] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:32:11,772 [52] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:32:11,773 [52] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:32:11,774 [52] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:32:11,784 [52] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-01-24 17:32:11,786 [52] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-01-24 17:32:11,788 [52] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-01-24 17:32:11,791 [52] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-01-24 17:32:11,793 [52] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-01-24 17:32:11,795 [52] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-01-24 17:32:11,795 [52] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-01-24 17:32:11,796 [52] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 17:32:11,798 [52] DEBUG dn_lib.tools.log - elenco cartelle da sincronizzare
2021-01-24 17:32:11,799 [52] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 17:32:11,801 [52] DEBUG dn_lib.tools.log -    - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-01-24 17:32:11,801 [52] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-01-24 17:32:11,805 [52] DEBUG dn_lib.tools.log - elaboro la cartella C:\root\todd\_test\dn...
2021-01-24 17:32:11,806 [52] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id is null and file_name = 'to orco.incorso.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, null, 'to orco.incorso.txt', '.txt', 1, convert(datetime, '2021-01-24 17:27:10', 120), convert(datetime, '2021-01-24 17:27:10', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-24 17:27:10', 120), dt_upd = convert(datetime, '2021-01-24 17:27:10', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:27:10', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 17:27:10', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-24 17:32:11,811 [52] DEBUG dn_lib.tools.log - aggiunto file al database: C:\root\todd\_test\dn\to orco.incorso.txt
2021-01-24 17:32:11,812 [52] DEBUG dn_lib.tools.log - SQL: declare @cc_files int; declare @cc_folders int;
      select @cc_files = (select count(*) from dn_files where readed is null) 
      select @cc_folders = (select count(*) from dn_folders where readed is null)
      
      delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
      select @cc_files, @cc_folders;
2021-01-24 17:32:11,818 [52] DEBUG dn_lib.tools.log - cancellati dal database: 1 files
2021-01-24 17:32:11,819 [52] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '1')
        else update users_cache set var_value = substring('1', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-01-24 17:32:11,822 [52] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '0')
        else update users_cache set var_value = substring('0', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-01-24 17:32:11,825 [52] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/01/24 17:27:10')
        else update users_cache set var_value = substring('2021/01/24 17:27:10', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-01-24 17:32:11,828 [52] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/01/24 17:32:11')
        else update users_cache set var_value = substring('2021/01/24 17:32:11', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-01-24 17:32:26,207 [29] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:32:26,208 [29] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:32:26,208 [29] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:32:26,209 [29] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:32:26,209 [29] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:32:26,211 [29] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:32:26,211 [29] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:32:26,212 [29] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:32:26,212 [29] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:32:26,213 [29] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:32:26,215 [29] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:32:26,215 [29] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:32:26,216 [29] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:32:26,217 [29] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:32:26,217 [29] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:32:26,218 [29] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:32:26,219 [29] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:32:26,220 [29] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:32:26,220 [29] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:32:26,220 [29] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:32:26,221 [29] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:32:26,221 [29] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:32:26,222 [29] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:32:26,223 [29] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:32:26,223 [29] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:32:26,224 [29] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:32:26,784 [25] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:32:26,785 [25] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:32:26,786 [25] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:32:26,787 [25] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:32:26,788 [25] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:32:26,789 [25] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:32:26,790 [25] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:32:26,791 [25] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:32:26,792 [25] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:32:26,792 [25] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:32:26,793 [25] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:32:26,794 [25] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:32:26,795 [25] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:32:26,795 [25] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:32:26,796 [25] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:32:26,796 [25] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:32:26,797 [25] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:32:26,798 [25] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:32:26,798 [25] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:32:26,799 [25] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:32:26,800 [25] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:32:26,800 [25] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:32:26,801 [25] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:32:26,802 [25] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:32:26,802 [25] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:32:26,803 [25] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:32:26,812 [25] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-01-24 17:32:26,813 [25] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-01-24 17:32:26,815 [25] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-01-24 17:32:26,816 [25] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-01-24 17:32:26,816 [25] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-01-24 17:32:26,817 [25] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-01-24 17:32:26,818 [25] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-01-24 17:32:26,819 [25] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 17:32:26,820 [25] DEBUG dn_lib.tools.log - elenco cartelle da sincronizzare
2021-01-24 17:32:26,821 [25] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 17:32:26,822 [25] DEBUG dn_lib.tools.log -    - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-01-24 17:32:26,823 [25] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-01-24 17:32:26,824 [25] DEBUG dn_lib.tools.log - elaboro la cartella C:\root\todd\_test\dn...
2021-01-24 17:32:26,825 [25] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id is null and file_name = 'to orco.incorso.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, null, 'to orco.incorso.txt', '.txt', 1, convert(datetime, '2021-01-24 17:27:10', 120), convert(datetime, '2021-01-24 17:32:23', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-24 17:27:10', 120), dt_upd = convert(datetime, '2021-01-24 17:32:23', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:27:10', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 17:32:23', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-24 17:32:26,830 [25] DEBUG dn_lib.tools.log - aggiornato file nel database: C:\root\todd\_test\dn\to orco.incorso.txt
2021-01-24 17:32:26,834 [25] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4293;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4293, '.txt', @content, convert(datetime, '2021-01-24 17:27:10', 120), convert(datetime, '2021-01-24 17:32:23', 120));
2021-01-24 17:32:26,837 [25] DEBUG dn_lib.tools.log - salvato contenuto file nel database: C:\root\todd\_test\dn\to orco.incorso.txt
2021-01-24 17:32:26,837 [25] DEBUG dn_lib.tools.log - SQL: declare @cc_files int; declare @cc_folders int;
      select @cc_files = (select count(*) from dn_files where readed is null) 
      select @cc_folders = (select count(*) from dn_folders where readed is null)
      
      delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
      select @cc_files, @cc_folders;
2021-01-24 17:32:26,840 [25] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '1')
        else update users_cache set var_value = substring('1', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-01-24 17:32:26,841 [25] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '0')
        else update users_cache set var_value = substring('0', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-01-24 17:32:26,843 [25] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/01/24 17:32:23')
        else update users_cache set var_value = substring('2021/01/24 17:32:23', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-01-24 17:32:26,845 [25] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/01/24 17:32:26')
        else update users_cache set var_value = substring('2021/01/24 17:32:26', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-01-24 17:32:30,493 [43] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:32:30,495 [43] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:32:30,496 [43] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:32:30,497 [43] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:32:30,497 [43] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:32:30,498 [43] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:32:30,499 [43] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:32:30,499 [43] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:32:30,501 [43] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:32:30,502 [43] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:32:30,502 [43] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:32:30,502 [43] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:32:30,503 [43] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:32:30,503 [43] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:32:30,504 [43] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:32:30,505 [43] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:32:30,505 [43] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:32:30,506 [43] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:32:30,507 [43] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:32:30,507 [43] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:32:30,509 [43] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:32:30,509 [43] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:32:30,510 [43] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:32:30,511 [43] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:32:30,511 [43] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:32:30,512 [43] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:32:31,065 [34] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:32:31,066 [34] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:32:31,067 [34] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:32:31,068 [34] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:32:31,070 [34] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:32:31,070 [34] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:32:31,071 [34] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:32:31,072 [34] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:32:31,072 [34] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:32:31,073 [34] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:32:31,074 [34] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:32:31,074 [34] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:32:31,075 [34] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:32:31,076 [34] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:32:31,076 [34] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:32:31,077 [34] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:32:31,077 [34] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:32:31,078 [34] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:32:31,079 [34] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:32:31,079 [34] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:32:31,080 [34] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:32:31,081 [34] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:32:31,081 [34] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:32:31,082 [34] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:32:31,083 [34] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:32:31,083 [34] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:32:31,093 [34] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-01-24 17:32:31,094 [34] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-01-24 17:32:31,095 [34] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-01-24 17:32:31,096 [34] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-01-24 17:32:31,096 [34] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-01-24 17:32:31,097 [34] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-01-24 17:32:31,098 [34] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-01-24 17:32:31,099 [34] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 17:32:31,100 [34] DEBUG dn_lib.tools.log - elenco cartelle da sincronizzare
2021-01-24 17:32:31,101 [34] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 17:32:31,102 [34] DEBUG dn_lib.tools.log -    - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-01-24 17:32:31,102 [34] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-01-24 17:32:31,112 [34] DEBUG dn_lib.tools.log - elaboro la cartella C:\root\todd\_test\dn...
2021-01-24 17:32:31,112 [34] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id is null and file_name = 'to orco.incorso.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, null, 'to orco.incorso.txt', '.txt', 1, convert(datetime, '2021-01-24 17:27:10', 120), convert(datetime, '2021-01-24 17:32:23', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-24 17:27:10', 120), dt_upd = convert(datetime, '2021-01-24 17:32:23', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:27:10', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 17:32:23', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-24 17:32:31,115 [34] DEBUG dn_lib.tools.log - SQL: declare @cc_files int; declare @cc_folders int;
      select @cc_files = (select count(*) from dn_files where readed is null) 
      select @cc_folders = (select count(*) from dn_folders where readed is null)
      
      delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
      select @cc_files, @cc_folders;
2021-01-24 17:32:31,115 [34] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '1')
        else update users_cache set var_value = substring('1', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-01-24 17:32:31,116 [34] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '0')
        else update users_cache set var_value = substring('0', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-01-24 17:32:31,118 [34] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/01/24 17:32:23')
        else update users_cache set var_value = substring('2021/01/24 17:32:23', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-01-24 17:32:31,119 [34] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/01/24 17:32:31')
        else update users_cache set var_value = substring('2021/01/24 17:32:31', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-01-24 17:32:41,290 [51] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:32:41,292 [51] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:32:41,293 [51] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:32:41,295 [51] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:32:41,296 [51] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:32:41,297 [51] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:32:41,297 [51] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:32:41,298 [51] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:32:41,299 [51] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:32:41,299 [51] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:32:41,300 [51] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:32:41,300 [51] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:32:41,301 [51] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:32:41,302 [51] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:32:41,302 [51] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:32:41,303 [51] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:32:41,303 [51] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:32:41,304 [51] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:32:41,305 [51] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:32:41,305 [51] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:32:41,306 [51] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:32:41,307 [51] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:32:41,307 [51] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:32:41,308 [51] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:32:41,308 [51] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:32:41,309 [51] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:32:41,865 [34] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:32:41,866 [34] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:32:41,867 [34] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:32:41,868 [34] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:32:41,869 [34] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:32:41,870 [34] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:32:41,871 [34] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:32:41,872 [34] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:32:41,872 [34] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:32:41,873 [34] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:32:41,873 [34] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:32:41,874 [34] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:32:41,875 [34] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:32:41,875 [34] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:32:41,876 [34] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:32:41,876 [34] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:32:41,877 [34] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:32:41,877 [34] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:32:41,878 [34] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:32:41,879 [34] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:32:41,879 [34] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:32:41,880 [34] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:32:41,881 [34] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:32:41,882 [34] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:32:41,882 [34] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:32:41,883 [34] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:32:41,892 [34] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-01-24 17:32:41,893 [34] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-01-24 17:32:41,894 [34] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-01-24 17:32:41,895 [34] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-01-24 17:32:41,896 [34] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-01-24 17:32:41,896 [34] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-01-24 17:32:41,897 [34] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-01-24 17:32:41,899 [34] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 17:32:41,900 [34] DEBUG dn_lib.tools.log - elenco cartelle da sincronizzare
2021-01-24 17:32:41,900 [34] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 17:32:41,901 [34] DEBUG dn_lib.tools.log -    - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-01-24 17:32:41,901 [34] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-01-24 17:32:41,903 [34] DEBUG dn_lib.tools.log - elaboro la cartella C:\root\todd\_test\dn...
2021-01-24 17:32:41,904 [34] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id is null and file_name = 'to orco.incorso.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, null, 'to orco.incorso.txt', '.txt', 1, convert(datetime, '2021-01-24 17:27:10', 120), convert(datetime, '2021-01-24 17:32:37', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-24 17:27:10', 120), dt_upd = convert(datetime, '2021-01-24 17:32:37', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:27:10', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 17:32:37', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-24 17:32:41,909 [34] DEBUG dn_lib.tools.log - aggiornato file nel database: C:\root\todd\_test\dn\to orco.incorso.txt
2021-01-24 17:32:41,917 [34] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4293;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4293, '.txt', @content, convert(datetime, '2021-01-24 17:27:10', 120), convert(datetime, '2021-01-24 17:32:37', 120));
2021-01-24 17:32:41,920 [34] DEBUG dn_lib.tools.log - salvato contenuto file nel database: C:\root\todd\_test\dn\to orco.incorso.txt
2021-01-24 17:32:41,920 [34] DEBUG dn_lib.tools.log - SQL: declare @cc_files int; declare @cc_folders int;
      select @cc_files = (select count(*) from dn_files where readed is null) 
      select @cc_folders = (select count(*) from dn_folders where readed is null)
      
      delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
      select @cc_files, @cc_folders;
2021-01-24 17:32:41,921 [34] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '1')
        else update users_cache set var_value = substring('1', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-01-24 17:32:41,923 [34] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '0')
        else update users_cache set var_value = substring('0', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-01-24 17:32:41,924 [34] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/01/24 17:32:37')
        else update users_cache set var_value = substring('2021/01/24 17:32:37', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-01-24 17:32:41,927 [34] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/01/24 17:32:41')
        else update users_cache set var_value = substring('2021/01/24 17:32:41', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-01-24 17:32:48,995 [41] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:32:48,996 [41] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:32:48,997 [41] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:32:48,999 [41] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:32:49,000 [41] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:32:49,001 [41] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:32:49,001 [41] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:32:49,002 [41] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:32:49,003 [41] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:32:49,004 [41] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:32:49,004 [41] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:32:49,005 [41] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:32:49,005 [41] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:32:49,006 [41] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:32:49,006 [41] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:32:49,007 [41] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:32:49,007 [41] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:32:49,008 [41] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:32:49,009 [41] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:32:49,009 [41] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:32:49,010 [41] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:32:49,011 [41] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:32:49,012 [41] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:32:49,012 [41] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:32:49,013 [41] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:32:49,014 [41] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:32:49,572 [25] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:32:49,573 [25] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:32:49,575 [25] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:32:49,576 [25] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:32:49,578 [25] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:32:49,579 [25] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:32:49,580 [25] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:32:49,581 [25] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:32:49,582 [25] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:32:49,584 [25] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:32:49,585 [25] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:32:49,586 [25] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:32:49,587 [25] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:32:49,588 [25] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:32:49,588 [25] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:32:49,589 [25] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:32:49,590 [25] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:32:49,591 [25] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:32:49,592 [25] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:32:49,593 [25] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:32:49,593 [25] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:32:49,594 [25] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:32:49,594 [25] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:32:49,595 [25] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:32:49,595 [25] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:32:49,596 [25] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:32:49,606 [25] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-01-24 17:32:49,608 [25] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-01-24 17:32:49,609 [25] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-01-24 17:32:49,610 [25] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-01-24 17:32:49,610 [25] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-01-24 17:32:49,612 [25] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-01-24 17:32:49,612 [25] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-01-24 17:32:49,613 [25] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 17:32:49,615 [25] DEBUG dn_lib.tools.log - elenco cartelle da sincronizzare
2021-01-24 17:32:49,615 [25] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 17:32:49,616 [25] DEBUG dn_lib.tools.log -    - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-01-24 17:32:49,617 [25] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-01-24 17:32:49,627 [25] DEBUG dn_lib.tools.log - elaboro la cartella C:\root\todd\_test\dn...
2021-01-24 17:32:49,628 [25] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id is null and file_name = 'to orco.incorso.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, null, 'to orco.incorso.txt', '.txt', 1, convert(datetime, '2021-01-24 17:27:10', 120), convert(datetime, '2021-01-24 17:32:37', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-24 17:27:10', 120), dt_upd = convert(datetime, '2021-01-24 17:32:37', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:27:10', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 17:32:37', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-24 17:32:49,630 [25] DEBUG dn_lib.tools.log - SQL: declare @cc_files int; declare @cc_folders int;
      select @cc_files = (select count(*) from dn_files where readed is null) 
      select @cc_folders = (select count(*) from dn_folders where readed is null)
      
      delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
      select @cc_files, @cc_folders;
2021-01-24 17:32:49,631 [25] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '1')
        else update users_cache set var_value = substring('1', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-01-24 17:32:49,632 [25] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '0')
        else update users_cache set var_value = substring('0', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-01-24 17:32:49,633 [25] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/01/24 17:32:37')
        else update users_cache set var_value = substring('2021/01/24 17:32:37', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-01-24 17:32:49,633 [25] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/01/24 17:32:49')
        else update users_cache set var_value = substring('2021/01/24 17:32:49', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-01-24 17:33:02,548 [34] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:33:02,549 [34] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:33:02,551 [34] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:33:02,552 [34] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:33:02,553 [34] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:33:02,554 [34] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:33:02,555 [34] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:33:02,556 [34] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:33:02,556 [34] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:33:02,557 [34] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:33:02,558 [34] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:33:02,559 [34] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:33:02,560 [34] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:33:02,561 [34] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:33:02,561 [34] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:33:02,562 [34] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:33:02,563 [34] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:33:02,563 [34] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:33:02,564 [34] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:33:02,565 [34] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:33:02,565 [34] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:33:02,566 [34] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:33:02,567 [34] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:33:02,567 [34] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:33:02,568 [34] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:33:02,569 [34] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:33:03,133 [40] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:33:03,135 [40] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:33:03,136 [40] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:33:03,138 [40] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:33:03,139 [40] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:33:03,141 [40] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:33:03,142 [40] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:33:03,144 [40] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:33:03,145 [40] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:33:03,146 [40] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:33:03,146 [40] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:33:03,147 [40] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:33:03,148 [40] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:33:03,148 [40] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:33:03,149 [40] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:33:03,150 [40] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:33:03,150 [40] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:33:03,151 [40] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:33:03,152 [40] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:33:03,152 [40] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:33:03,153 [40] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:33:03,154 [40] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:33:03,154 [40] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:33:03,155 [40] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:33:03,155 [40] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:33:03,156 [40] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:33:03,165 [40] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-01-24 17:33:03,166 [40] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-01-24 17:33:03,167 [40] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-01-24 17:33:03,168 [40] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-01-24 17:33:03,169 [40] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-01-24 17:33:03,170 [40] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-01-24 17:33:03,170 [40] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-01-24 17:33:03,171 [40] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 17:33:03,172 [40] DEBUG dn_lib.tools.log - elenco cartelle da sincronizzare
2021-01-24 17:33:03,173 [40] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 17:33:03,173 [40] DEBUG dn_lib.tools.log -    - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-01-24 17:33:03,174 [40] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-01-24 17:33:03,174 [40] DEBUG dn_lib.tools.log - elaboro la cartella C:\root\todd\_test\dn...
2021-01-24 17:33:03,175 [40] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id is null and file_name = 'to orco.incorso.task.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, null, 'to orco.incorso.task.txt', '.txt', 1, convert(datetime, '2021-01-24 17:27:10', 120), convert(datetime, '2021-01-24 17:32:37', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-24 17:27:10', 120), dt_upd = convert(datetime, '2021-01-24 17:32:37', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:27:10', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 17:32:37', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-24 17:33:03,179 [40] DEBUG dn_lib.tools.log - aggiunto file al database: C:\root\todd\_test\dn\to orco.incorso.task.txt
2021-01-24 17:33:03,179 [40] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4294;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4294, '.txt', @content, convert(datetime, '2021-01-24 17:27:10', 120), convert(datetime, '2021-01-24 17:32:37', 120));
2021-01-24 17:33:03,181 [40] DEBUG dn_lib.tools.log - salvato contenuto file nel database: C:\root\todd\_test\dn\to orco.incorso.task.txt
2021-01-24 17:33:03,186 [40] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4294;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, null, 4294, left('to orco', 150)
            , NULL, convert(datetime, '2021-01-24 17:27:10', 120), convert(datetime, '2021-01-24 17:32:37', 120), 1
            , 'in_corso', NULL, NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-24 17:27:10', 120), dt_upd = convert(datetime, '2021-01-24 17:32:37', 120)
         , title = left('to orco', 150), [user] = NULL
         , stato = 'in_corso', priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:27:10', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-01-24 17:32:37', 120), getdate())
          or isnull(title, '') <> isnull('to orco', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('in_corso', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-24 17:33:03,191 [40] DEBUG dn_lib.tools.log - inserito task nel database: C:\root\todd\_test\dn\to orco
2021-01-24 17:33:03,193 [40] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1432;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1432, 4294, @content
          , convert(datetime, '2021-01-24 17:27:10', 120), convert(datetime, '2021-01-24 17:32:37', 120));
2021-01-24 17:33:03,196 [40] DEBUG dn_lib.tools.log - salvate le note del task nel database: 1432
2021-01-24 17:33:03,198 [40] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = 'to orco.incorso.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, 'to orco.incorso.task', 1, convert(datetime, '2021-01-24 17:27:10', 120), convert(datetime, '2021-01-24 17:27:10', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-24 17:27:10', 120), dt_upd = convert(datetime, '2021-01-24 17:27:10', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:27:10', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 17:27:10', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-24 17:33:03,203 [40] DEBUG dn_lib.tools.log - creato folder: C:\root\todd\_test\dn\to orco.incorso.task
2021-01-24 17:33:03,204 [40] DEBUG dn_lib.tools.log - SQL: delete from dn_files where file_id = 4294;
      delete from dn_files_contents where [file_id] = 4294;
      
      delete dn from dn_tasks dn
       where file_id is not null and not exists (select top 1 1 from dn_files where file_id = dn.file_id);
  
      delete dn from dn_tasks_notes dn
       where not exists (select top 1 1 from dn_tasks where task_id = dn.task_id);
2021-01-24 17:33:03,209 [40] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1821 and file_name = 'content.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1821, 'content.txt', '.txt', 1, convert(datetime, '2021-01-24 17:27:10', 120), convert(datetime, '2021-01-24 17:27:10', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-24 17:27:10', 120), dt_upd = convert(datetime, '2021-01-24 17:27:10', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:27:10', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 17:27:10', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-24 17:33:03,215 [40] DEBUG dn_lib.tools.log - SQL: update dn_tasks set dt_upd = convert(datetime, convert(varchar, getdate(), 120), 120), folder_id = 1821, file_id = null
        where task_id = 1432;
2021-01-24 17:33:03,218 [40] DEBUG dn_lib.tools.log - spostato file da: C:\root\todd\_test\dn\to orco.incorso.task.txt, a:C:\root\todd\_test\dn\to orco.incorso.task\content.txt
2021-01-24 17:33:03,224 [40] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1821 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1821, 'i.txt', '.txt', 1, convert(datetime, '2021-01-24 17:27:10', 120), convert(datetime, '2021-01-24 17:27:10', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-24 17:27:10', 120), dt_upd = convert(datetime, '2021-01-24 17:27:10', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:27:10', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 17:27:10', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-24 17:33:03,229 [40] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4296;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4296, '.txt', @content, convert(datetime, '2021-01-24 17:27:10', 120), convert(datetime, '2021-01-24 17:27:10', 120));
2021-01-24 17:33:03,232 [40] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1432;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1432, 4294, @content
          , convert(datetime, convert(varchar, getdate(), 120), 120), convert(datetime, convert(varchar, getdate(), 120), 120));
      update dn_tasks set dt_upd = convert(datetime, convert(varchar, getdate(), 120), 120) where task_id = 1432;
2021-01-24 17:33:03,235 [40] DEBUG dn_lib.tools.log - salvate le note nel file: C:\root\todd\_test\dn\to orco.incorso.task\i.txt
2021-01-24 17:33:03,243 [40] DEBUG dn_lib.tools.log - SQL: update dn_folders set folder_name = 'to orco.task', dt_upd = convert(datetime, convert(varchar, getdate(), 120), 120)
        where folder_id = 1821
2021-01-24 17:33:03,246 [40] DEBUG dn_lib.tools.log - rinominato folder: C:\root\todd\_test\dn\to orco.task, in: C:\root\todd\_test\dn\to orco.task
2021-01-24 17:33:03,250 [40] DEBUG dn_lib.tools.log - salvato index doc: C:\root\todd\_test\dn\to orco.task\__i.xml
2021-01-24 17:33:03,251 [40] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1821 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, 1821, null, left('to orco', 150)
            , NULL, convert(datetime, '2021-01-24 17:27:10', 120), convert(datetime, '2021-01-24 17:32:37', 120), 1
            , 'in_corso', NULL, NULL, NULL, convert(datetime, '2021-01-24 17:33:03', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-24 17:27:10', 120), dt_upd = convert(datetime, '2021-01-24 17:32:37', 120)
         , title = left('to orco', 150), [user] = NULL
         , stato = 'in_corso', priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = convert(datetime, '2021-01-24 17:33:03', 120)
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:27:10', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-01-24 17:32:37', 120), getdate())
          or isnull(title, '') <> isnull('to orco', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('in_corso', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-24 17:33:03,257 [40] DEBUG dn_lib.tools.log - aggiunto task al database: to orco
2021-01-24 17:33:03,257 [40] DEBUG dn_lib.tools.log - SQL: declare @cc_files int; declare @cc_folders int;
      select @cc_files = (select count(*) from dn_files where readed is null) 
      select @cc_folders = (select count(*) from dn_folders where readed is null)
      
      delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
      select @cc_files, @cc_folders;
2021-01-24 17:33:03,263 [40] DEBUG dn_lib.tools.log - cancellati dal database: 1 files
2021-01-24 17:33:03,263 [40] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '1')
        else update users_cache set var_value = substring('1', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-01-24 17:33:03,265 [40] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '0')
        else update users_cache set var_value = substring('0', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-01-24 17:33:03,266 [40] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/01/24 17:32:37')
        else update users_cache set var_value = substring('2021/01/24 17:32:37', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-01-24 17:33:03,267 [40] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/01/24 17:33:03')
        else update users_cache set var_value = substring('2021/01/24 17:33:03', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-01-24 17:33:51,885 [34] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:33:51,887 [34] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:33:51,888 [34] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:33:51,888 [34] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:33:51,889 [34] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:33:51,890 [34] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:33:51,891 [34] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:33:51,891 [34] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:33:51,892 [34] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:33:51,893 [34] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:33:51,893 [34] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:33:51,894 [34] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:33:51,895 [34] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:33:51,895 [34] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:33:51,896 [34] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:33:51,896 [34] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:33:51,897 [34] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:33:51,898 [34] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:33:51,898 [34] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:33:51,899 [34] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:33:51,900 [34] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:33:51,901 [34] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:33:51,902 [34] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:33:51,902 [34] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:33:51,903 [34] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:33:51,904 [34] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:33:52,461 [29] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:33:52,462 [29] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:33:52,463 [29] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:33:52,464 [29] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:33:52,465 [29] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:33:52,465 [29] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:33:52,466 [29] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:33:52,467 [29] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:33:52,467 [29] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:33:52,468 [29] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:33:52,468 [29] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:33:52,469 [29] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:33:52,470 [29] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:33:52,470 [29] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:33:52,471 [29] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:33:52,471 [29] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:33:52,472 [29] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:33:52,473 [29] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:33:52,473 [29] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:33:52,474 [29] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:33:52,475 [29] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:33:52,475 [29] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:33:52,477 [29] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:33:52,477 [29] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:33:52,477 [29] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:33:52,478 [29] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:33:52,487 [29] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-01-24 17:33:52,489 [29] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-01-24 17:33:52,492 [29] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-01-24 17:33:52,493 [29] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-01-24 17:33:52,494 [29] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-01-24 17:33:52,496 [29] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-01-24 17:33:52,497 [29] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-01-24 17:33:52,498 [29] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 17:33:52,500 [29] DEBUG dn_lib.tools.log - elenco cartelle da sincronizzare
2021-01-24 17:33:52,501 [29] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 17:33:52,502 [29] DEBUG dn_lib.tools.log -    - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-01-24 17:33:52,502 [29] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-01-24 17:33:52,515 [29] DEBUG dn_lib.tools.log - elaboro la cartella C:\root\todd\_test\dn...
2021-01-24 17:33:52,516 [29] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = 'to orco.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, 'to orco.task', 1, convert(datetime, '2021-01-24 17:33:03', 120), convert(datetime, '2021-01-24 17:33:03', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-24 17:33:03', 120), dt_upd = convert(datetime, '2021-01-24 17:33:03', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:33:03', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 17:33:03', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-24 17:33:52,520 [29] DEBUG dn_lib.tools.log - aggiornato folder nel database: C:\root\todd\_test\dn\to orco.task
2021-01-24 17:33:52,522 [29] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1821 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, 1821, null, left('to orco', 150)
            , NULL, convert(datetime, '2021-01-24 17:33:03', 120), convert(datetime, '2021-01-24 17:33:03', 120), 1
            , 'in_corso', NULL, NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-24 17:33:03', 120), dt_upd = convert(datetime, '2021-01-24 17:33:03', 120)
         , title = left('to orco', 150), [user] = NULL
         , stato = 'in_corso', priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:33:03', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-01-24 17:33:03', 120), getdate())
          or isnull(title, '') <> isnull('to orco', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('in_corso', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-24 17:33:52,528 [29] DEBUG dn_lib.tools.log - aggiornato task nel database: to orco
2021-01-24 17:33:52,529 [29] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1821 and file_name = 'content.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1821, 'content.txt', '.txt', 1, convert(datetime, '2021-01-24 17:27:10', 120), convert(datetime, '2021-01-24 17:32:37', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-24 17:27:10', 120), dt_upd = convert(datetime, '2021-01-24 17:32:37', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:27:10', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 17:32:37', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-24 17:33:52,534 [29] DEBUG dn_lib.tools.log - aggiornato file nel database: C:\root\todd\_test\dn\to orco.task\content.txt
2021-01-24 17:33:52,535 [29] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4295;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4295, '.txt', @content, convert(datetime, '2021-01-24 17:27:10', 120), convert(datetime, '2021-01-24 17:32:37', 120));
2021-01-24 17:33:52,538 [29] DEBUG dn_lib.tools.log - salvato contenuto file nel database: C:\root\todd\_test\dn\to orco.task\content.txt
2021-01-24 17:33:52,538 [29] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1821 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1821, 'i.txt', '.txt', 1, convert(datetime, '2021-01-24 17:33:03', 120), convert(datetime, '2021-01-24 17:33:03', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-24 17:33:03', 120), dt_upd = convert(datetime, '2021-01-24 17:33:03', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:33:03', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 17:33:03', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-24 17:33:52,543 [29] DEBUG dn_lib.tools.log - aggiornato file nel database: C:\root\todd\_test\dn\to orco.task\i.txt
2021-01-24 17:33:52,544 [29] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4296;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4296, '.txt', @content, convert(datetime, '2021-01-24 17:33:03', 120), convert(datetime, '2021-01-24 17:33:03', 120));
2021-01-24 17:33:52,547 [29] DEBUG dn_lib.tools.log - salvato contenuto file nel database: C:\root\todd\_test\dn\to orco.task\i.txt
2021-01-24 17:33:52,547 [29] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1821 and file_name = '__i.xml';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1821, '__i.xml', '.xml', 1, convert(datetime, '2021-01-24 17:33:03', 120), convert(datetime, '2021-01-24 17:33:03', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-24 17:33:03', 120), dt_upd = convert(datetime, '2021-01-24 17:33:03', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:33:03', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 17:33:03', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-24 17:33:52,551 [29] DEBUG dn_lib.tools.log - aggiunto file al database: C:\root\todd\_test\dn\to orco.task\__i.xml
2021-01-24 17:33:52,552 [29] DEBUG dn_lib.tools.log - SQL: declare @cc_files int; declare @cc_folders int;
      select @cc_files = (select count(*) from dn_files where readed is null) 
      select @cc_folders = (select count(*) from dn_folders where readed is null)
      
      delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
      select @cc_files, @cc_folders;
2021-01-24 17:33:52,557 [29] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '3')
        else update users_cache set var_value = substring('3', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-01-24 17:33:52,561 [29] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '1')
        else update users_cache set var_value = substring('1', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-01-24 17:33:52,563 [29] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/01/24 17:33:03')
        else update users_cache set var_value = substring('2021/01/24 17:33:03', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-01-24 17:33:52,566 [29] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/01/24 17:33:52')
        else update users_cache set var_value = substring('2021/01/24 17:33:52', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-01-24 17:34:02,044 [29] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:34:02,046 [29] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:34:02,047 [29] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:34:02,048 [29] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:34:02,049 [29] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:34:02,050 [29] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:34:02,050 [29] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:34:02,051 [29] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:34:02,052 [29] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:34:02,053 [29] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:34:02,053 [29] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:34:02,054 [29] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:34:02,054 [29] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:34:02,055 [29] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:34:02,056 [29] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:34:02,056 [29] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:34:02,057 [29] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:34:02,057 [29] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:34:02,058 [29] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:34:02,058 [29] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:34:02,059 [29] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:34:02,059 [29] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:34:02,060 [29] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:34:02,061 [29] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:34:02,062 [29] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:34:02,062 [29] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:34:02,622 [34] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:34:02,623 [34] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:34:02,623 [34] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:34:02,625 [34] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:34:02,626 [34] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:34:02,627 [34] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:34:02,628 [34] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:34:02,629 [34] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:34:02,630 [34] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:34:02,630 [34] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:34:02,631 [34] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:34:02,632 [34] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:34:02,632 [34] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:34:02,633 [34] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:34:02,633 [34] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:34:02,634 [34] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:34:02,635 [34] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:34:02,635 [34] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:34:02,635 [34] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:34:02,636 [34] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:34:02,637 [34] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:34:02,638 [34] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:34:02,639 [34] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:34:02,639 [34] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:34:02,640 [34] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:34:02,640 [34] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:34:02,649 [34] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-01-24 17:34:02,650 [34] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-01-24 17:34:02,651 [34] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-01-24 17:34:02,652 [34] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-01-24 17:34:02,653 [34] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-01-24 17:34:02,654 [34] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-01-24 17:34:02,655 [34] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-01-24 17:34:02,656 [34] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 17:34:02,657 [34] DEBUG dn_lib.tools.log - elenco cartelle da sincronizzare
2021-01-24 17:34:02,657 [34] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 17:34:02,658 [34] DEBUG dn_lib.tools.log -    - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-01-24 17:34:02,659 [34] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-01-24 17:34:02,669 [34] DEBUG dn_lib.tools.log - elaboro la cartella C:\root\todd\_test\dn...
2021-01-24 17:34:02,670 [34] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = 'to orco.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, 'to orco.task', 1, convert(datetime, '2021-01-24 17:33:03', 120), convert(datetime, '2021-01-24 17:33:03', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-24 17:33:03', 120), dt_upd = convert(datetime, '2021-01-24 17:33:03', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:33:03', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 17:33:03', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-24 17:34:02,672 [34] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1821 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, 1821, null, left('to orco', 150)
            , NULL, convert(datetime, '2021-01-24 17:33:03', 120), convert(datetime, '2021-01-24 17:33:03', 120), 1
            , 'in_corso', NULL, NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-24 17:33:03', 120), dt_upd = convert(datetime, '2021-01-24 17:33:03', 120)
         , title = left('to orco', 150), [user] = NULL
         , stato = 'in_corso', priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:33:03', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-01-24 17:33:03', 120), getdate())
          or isnull(title, '') <> isnull('to orco', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('in_corso', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-24 17:34:02,673 [34] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1821 and file_name = 'content.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1821, 'content.txt', '.txt', 1, convert(datetime, '2021-01-24 17:27:10', 120), convert(datetime, '2021-01-24 17:32:37', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-24 17:27:10', 120), dt_upd = convert(datetime, '2021-01-24 17:32:37', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:27:10', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 17:32:37', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-24 17:34:02,675 [34] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1821 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1821, 'i.txt', '.txt', 1, convert(datetime, '2021-01-24 17:33:03', 120), convert(datetime, '2021-01-24 17:33:03', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-24 17:33:03', 120), dt_upd = convert(datetime, '2021-01-24 17:33:03', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:33:03', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 17:33:03', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-24 17:34:02,676 [34] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1821 and file_name = '__i.xml';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1821, '__i.xml', '.xml', 1, convert(datetime, '2021-01-24 17:33:03', 120), convert(datetime, '2021-01-24 17:33:03', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-24 17:33:03', 120), dt_upd = convert(datetime, '2021-01-24 17:33:03', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:33:03', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 17:33:03', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-24 17:34:02,679 [34] DEBUG dn_lib.tools.log - SQL: declare @cc_files int; declare @cc_folders int;
      select @cc_files = (select count(*) from dn_files where readed is null) 
      select @cc_folders = (select count(*) from dn_folders where readed is null)
      
      delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
      select @cc_files, @cc_folders;
2021-01-24 17:34:02,680 [34] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '3')
        else update users_cache set var_value = substring('3', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-01-24 17:34:02,681 [34] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '1')
        else update users_cache set var_value = substring('1', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-01-24 17:34:02,682 [34] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/01/24 17:33:03')
        else update users_cache set var_value = substring('2021/01/24 17:33:03', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-01-24 17:34:02,683 [34] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/01/24 17:34:02')
        else update users_cache set var_value = substring('2021/01/24 17:34:02', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-01-24 17:39:08,125 [41] INFO dn_lib.tools.log - reload core
2021-01-24 17:39:08,159 [41] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:39:08,161 [41] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:39:08,162 [41] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:39:08,163 [41] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:39:08,164 [41] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:39:08,165 [41] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:39:08,174 [41] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:39:08,176 [41] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:39:08,178 [41] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:39:08,178 [41] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:39:08,180 [41] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:39:08,180 [41] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:39:08,181 [41] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:39:08,183 [41] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:39:08,183 [41] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:39:08,184 [41] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:39:08,184 [41] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:39:08,185 [41] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:39:08,191 [41] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:39:08,193 [41] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:39:08,194 [41] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:39:08,195 [41] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:39:08,196 [41] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:39:08,196 [41] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:39:08,197 [41] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:39:08,201 [41] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:39:08,785 [34] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:39:08,787 [34] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:39:08,788 [34] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:39:08,790 [34] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:39:08,791 [34] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:39:08,792 [34] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:39:08,793 [34] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:39:08,795 [34] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:39:08,795 [34] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:39:08,796 [34] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:39:08,796 [34] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:39:08,797 [34] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:39:08,798 [34] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:39:08,798 [34] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:39:08,799 [34] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:39:08,800 [34] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:39:08,801 [34] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:39:08,801 [34] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:39:08,802 [34] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:39:08,803 [34] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:39:08,803 [34] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:39:08,804 [34] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:39:08,805 [34] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:39:08,805 [34] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:39:08,805 [34] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:39:08,806 [34] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:39:08,855 [34] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-01-24 17:39:08,858 [34] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-01-24 17:39:08,862 [34] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-01-24 17:39:08,865 [34] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-01-24 17:39:08,870 [34] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-01-24 17:39:08,872 [34] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-01-24 17:39:08,873 [34] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-01-24 17:39:08,876 [34] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 17:39:08,882 [34] DEBUG dn_lib.tools.log - elenco cartelle da sincronizzare
2021-01-24 17:39:08,884 [34] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 17:39:08,885 [34] DEBUG dn_lib.tools.log -    - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-01-24 17:39:08,887 [34] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-01-24 17:39:08,890 [34] DEBUG dn_lib.tools.log - elaboro la cartella C:\root\todd\_test\dn...
2021-01-24 17:39:08,892 [34] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = 'to orco.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, 'to orco.task', 1, convert(datetime, '2021-01-24 17:33:03', 120), convert(datetime, '2021-01-24 17:33:03', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-24 17:33:03', 120), dt_upd = convert(datetime, '2021-01-24 17:33:03', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:33:03', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 17:33:03', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-24 17:39:08,903 [34] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1821 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, 1821, null, left('to orco', 150)
            , NULL, convert(datetime, '2021-01-24 17:33:03', 120), convert(datetime, '2021-01-24 17:33:03', 120), 1
            , 'in_corso', NULL, NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-24 17:33:03', 120), dt_upd = convert(datetime, '2021-01-24 17:33:03', 120)
         , title = left('to orco', 150), [user] = NULL
         , stato = 'in_corso', priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:33:03', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-01-24 17:33:03', 120), getdate())
          or isnull(title, '') <> isnull('to orco', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('in_corso', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-24 17:39:08,911 [34] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1821 and file_name = 'content.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1821, 'content.txt', '.txt', 1, convert(datetime, '2021-01-24 17:27:10', 120), convert(datetime, '2021-01-24 17:32:37', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-24 17:27:10', 120), dt_upd = convert(datetime, '2021-01-24 17:32:37', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:27:10', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 17:32:37', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-24 17:39:08,917 [34] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1821 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1821, 'i.txt', '.txt', 1, convert(datetime, '2021-01-24 17:33:03', 120), convert(datetime, '2021-01-24 17:33:03', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-24 17:33:03', 120), dt_upd = convert(datetime, '2021-01-24 17:33:03', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:33:03', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 17:33:03', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-24 17:39:08,922 [34] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1821 and file_name = '__i.xml';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1821, '__i.xml', '.xml', 1, convert(datetime, '2021-01-24 17:33:03', 120), convert(datetime, '2021-01-24 17:33:03', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-24 17:33:03', 120), dt_upd = convert(datetime, '2021-01-24 17:33:03', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:33:03', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 17:33:03', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-24 17:39:08,927 [34] DEBUG dn_lib.tools.log - SQL: declare @cc_files int; declare @cc_folders int;
      select @cc_files = (select count(*) from dn_files where readed is null) 
      select @cc_folders = (select count(*) from dn_folders where readed is null)
      
      delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
      select @cc_files, @cc_folders;
2021-01-24 17:39:08,933 [34] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '3')
        else update users_cache set var_value = substring('3', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-01-24 17:39:08,937 [34] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '1')
        else update users_cache set var_value = substring('1', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-01-24 17:39:08,940 [34] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/01/24 17:33:03')
        else update users_cache set var_value = substring('2021/01/24 17:33:03', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-01-24 17:39:08,943 [34] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/01/24 17:39:08')
        else update users_cache set var_value = substring('2021/01/24 17:39:08', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-01-24 17:39:12,780 [43] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:39:12,782 [43] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:39:12,784 [43] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:39:12,785 [43] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:39:12,786 [43] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:39:12,787 [43] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:39:12,788 [43] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:39:12,789 [43] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:39:12,789 [43] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:39:12,790 [43] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:39:12,791 [43] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:39:12,791 [43] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:39:12,792 [43] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:39:12,793 [43] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:39:12,793 [43] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:39:12,794 [43] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:39:12,795 [43] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:39:12,795 [43] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:39:12,796 [43] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:39:12,797 [43] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:39:12,797 [43] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:39:12,799 [43] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:39:12,800 [43] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:39:12,800 [43] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:39:12,801 [43] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:39:12,802 [43] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:39:13,376 [25] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:39:13,377 [25] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:39:13,377 [25] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:39:13,378 [25] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:39:13,379 [25] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:39:13,380 [25] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:39:13,381 [25] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:39:13,381 [25] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:39:13,383 [25] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:39:13,383 [25] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:39:13,384 [25] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:39:13,385 [25] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:39:13,386 [25] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:39:13,387 [25] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:39:13,387 [25] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:39:13,388 [25] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:39:13,389 [25] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:39:13,389 [25] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:39:13,390 [25] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:39:13,391 [25] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:39:13,391 [25] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:39:13,392 [25] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:39:13,393 [25] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:39:13,394 [25] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:39:13,394 [25] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:39:13,395 [25] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:39:13,404 [25] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-01-24 17:39:13,406 [25] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-01-24 17:39:13,407 [25] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-01-24 17:39:13,408 [25] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-01-24 17:39:13,409 [25] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-01-24 17:39:13,410 [25] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-01-24 17:39:13,410 [25] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-01-24 17:39:13,412 [25] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 17:39:13,413 [25] DEBUG dn_lib.tools.log - elenco cartelle da sincronizzare
2021-01-24 17:39:13,414 [25] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 17:39:13,415 [25] DEBUG dn_lib.tools.log -    - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-01-24 17:39:13,416 [25] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-01-24 17:39:13,419 [25] DEBUG dn_lib.tools.log - elaboro la cartella C:\root\todd\_test\dn...
2021-01-24 17:39:13,420 [25] DEBUG dn_lib.tools.log - SQL: declare @cc_files int; declare @cc_folders int;
      select @cc_files = (select count(*) from dn_files where readed is null) 
      select @cc_folders = (select count(*) from dn_folders where readed is null)
      
      delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
      select @cc_files, @cc_folders;
2021-01-24 17:39:13,423 [25] DEBUG dn_lib.tools.log - cancellati dal database: 3 files
2021-01-24 17:39:13,423 [25] DEBUG dn_lib.tools.log - cancellati dal database: 1 folders
2021-01-24 17:39:13,424 [25] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '0')
        else update users_cache set var_value = substring('0', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-01-24 17:39:13,428 [25] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '0')
        else update users_cache set var_value = substring('0', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-01-24 17:39:13,431 [25] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/01/05 15:40:09')
        else update users_cache set var_value = substring('2021/01/05 15:40:09', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-01-24 17:39:13,434 [25] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/01/24 17:39:13')
        else update users_cache set var_value = substring('2021/01/24 17:39:13', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-01-24 17:39:46,621 [29] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:39:46,623 [29] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:39:46,624 [29] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:39:46,624 [29] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:39:46,625 [29] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:39:46,625 [29] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:39:46,627 [29] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:39:46,628 [29] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:39:46,628 [29] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:39:46,629 [29] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:39:46,630 [29] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:39:46,630 [29] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:39:46,631 [29] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:39:46,631 [29] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:39:46,632 [29] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:39:46,632 [29] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:39:46,634 [29] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:39:46,634 [29] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:39:46,635 [29] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:39:46,635 [29] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:39:46,636 [29] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:39:46,636 [29] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:39:46,637 [29] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:39:46,638 [29] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:39:46,638 [29] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:39:46,639 [29] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:39:47,199 [51] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:39:47,201 [51] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:39:47,202 [51] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:39:47,203 [51] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:39:47,204 [51] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:39:47,205 [51] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:39:47,206 [51] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:39:47,207 [51] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:39:47,208 [51] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:39:47,208 [51] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:39:47,209 [51] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:39:47,210 [51] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:39:47,210 [51] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:39:47,211 [51] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:39:47,211 [51] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:39:47,212 [51] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:39:47,213 [51] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:39:47,213 [51] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:39:47,214 [51] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:39:47,215 [51] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:39:47,215 [51] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:39:47,216 [51] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:39:47,217 [51] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:39:47,217 [51] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:39:47,219 [51] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:39:47,219 [51] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:39:47,229 [51] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-01-24 17:39:47,231 [51] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-01-24 17:39:47,233 [51] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-01-24 17:39:47,234 [51] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-01-24 17:39:47,236 [51] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-01-24 17:39:47,238 [51] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-01-24 17:39:47,239 [51] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-01-24 17:39:47,240 [51] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 17:39:47,242 [51] DEBUG dn_lib.tools.log - elenco cartelle da sincronizzare
2021-01-24 17:39:47,243 [51] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 17:39:47,244 [51] DEBUG dn_lib.tools.log -    - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-01-24 17:39:47,245 [51] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-01-24 17:39:47,247 [51] DEBUG dn_lib.tools.log - elaboro la cartella C:\root\todd\_test\dn...
2021-01-24 17:39:47,248 [51] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id is null and file_name = 'forco.wait.task.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, null, 'forco.wait.task.txt', '.txt', 1, convert(datetime, '2021-01-24 17:39:19', 120), convert(datetime, '2021-01-24 17:39:43', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-24 17:39:19', 120), dt_upd = convert(datetime, '2021-01-24 17:39:43', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:39:19', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 17:39:43', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-24 17:39:47,261 [51] DEBUG dn_lib.tools.log - aggiunto file al database: C:\root\todd\_test\dn\forco.wait.task.txt
2021-01-24 17:39:47,266 [51] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4298;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4298, '.txt', @content, convert(datetime, '2021-01-24 17:39:19', 120), convert(datetime, '2021-01-24 17:39:43', 120));
2021-01-24 17:39:47,269 [51] DEBUG dn_lib.tools.log - salvato contenuto file nel database: C:\root\todd\_test\dn\forco.wait.task.txt
2021-01-24 17:39:47,270 [51] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4298;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, null, 4298, left('forco', 150)
            , NULL, convert(datetime, '2021-01-24 17:39:19', 120), convert(datetime, '2021-01-24 17:39:43', 120), 1
            , NULL, NULL, NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-24 17:39:19', 120), dt_upd = convert(datetime, '2021-01-24 17:39:43', 120)
         , title = left('forco', 150), [user] = NULL
         , stato = NULL, priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:39:19', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-01-24 17:39:43', 120), getdate())
          or isnull(title, '') <> isnull('forco', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull(NULL, '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-24 17:39:47,275 [51] DEBUG dn_lib.tools.log - inserito task nel database: C:\root\todd\_test\dn\forco
2021-01-24 17:39:47,277 [51] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1434;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1434, 4298, @content
          , convert(datetime, '2021-01-24 17:39:19', 120), convert(datetime, '2021-01-24 17:39:43', 120));
2021-01-24 17:39:47,280 [51] DEBUG dn_lib.tools.log - salvate le note del task nel database: C:\root\todd\_test\dn\forco.wait.task.txt
2021-01-24 17:39:47,281 [51] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = 'forco.wait.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, 'forco.wait.task', 1, convert(datetime, '2021-01-24 17:39:19', 120), convert(datetime, '2021-01-24 17:39:19', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-24 17:39:19', 120), dt_upd = convert(datetime, '2021-01-24 17:39:19', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:39:19', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 17:39:19', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-24 17:39:47,286 [51] DEBUG dn_lib.tools.log - creato folder: C:\root\todd\_test\dn\forco.wait.task
2021-01-24 17:39:47,286 [51] DEBUG dn_lib.tools.log - SQL: delete from dn_files where file_id = 4298;
      delete from dn_files_contents where [file_id] = 4298;
      
      delete dn from dn_tasks dn
       where file_id is not null and not exists (select top 1 1 from dn_files where file_id = dn.file_id);
  
      delete dn from dn_tasks_notes dn
       where not exists (select top 1 1 from dn_tasks where task_id = dn.task_id);
2021-01-24 17:39:47,293 [51] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1822 and file_name = 'content.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1822, 'content.txt', '.txt', 1, convert(datetime, '2021-01-24 17:39:19', 120), convert(datetime, '2021-01-24 17:39:19', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-24 17:39:19', 120), dt_upd = convert(datetime, '2021-01-24 17:39:19', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:39:19', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 17:39:19', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-24 17:39:47,298 [51] DEBUG dn_lib.tools.log - SQL: update dn_tasks set dt_upd = convert(datetime, convert(varchar, getdate(), 120), 120), folder_id = 1822, file_id = null
        where task_id = 1434;
2021-01-24 17:39:47,300 [51] DEBUG dn_lib.tools.log - spostato file da: C:\root\todd\_test\dn\forco.wait.task.txt, a:C:\root\todd\_test\dn\forco.wait.task\content.txt
2021-01-24 17:39:47,305 [51] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1822 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1822, 'i.txt', '.txt', 1, convert(datetime, '2021-01-24 17:39:19', 120), convert(datetime, '2021-01-24 17:39:19', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-24 17:39:19', 120), dt_upd = convert(datetime, '2021-01-24 17:39:19', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:39:19', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 17:39:19', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-24 17:39:47,310 [51] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4300;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4300, '.txt', @content, convert(datetime, '2021-01-24 17:39:19', 120), convert(datetime, '2021-01-24 17:39:19', 120));
2021-01-24 17:39:47,313 [51] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1434;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1434, 4298, @content
          , convert(datetime, convert(varchar, getdate(), 120), 120), convert(datetime, convert(varchar, getdate(), 120), 120));
      update dn_tasks set dt_upd = convert(datetime, convert(varchar, getdate(), 120), 120) where task_id = 1434;
2021-01-24 17:39:47,317 [51] DEBUG dn_lib.tools.log - salvate le note nel file: C:\root\todd\_test\dn\forco.wait.task\i.txt
2021-01-24 17:39:47,321 [51] DEBUG dn_lib.tools.log - SQL: update dn_folders set folder_name = 'forco.task', dt_upd = convert(datetime, convert(varchar, getdate(), 120), 120)
        where folder_id = 1822
2021-01-24 17:39:47,324 [51] DEBUG dn_lib.tools.log - rinominato folder: C:\root\todd\_test\dn\forco.task, in: C:\root\todd\_test\dn\forco.task
2021-01-24 17:39:47,328 [51] DEBUG dn_lib.tools.log - salvato index doc: C:\root\todd\_test\dn\forco.task\__i.xml
2021-01-24 17:39:47,329 [51] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1822 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, 1822, null, left('forco', 150)
            , NULL, convert(datetime, '2021-01-24 17:39:19', 120), convert(datetime, '2021-01-24 17:39:43', 120), 1
            , NULL, NULL, NULL, NULL, convert(datetime, '2021-01-24 17:39:47', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-24 17:39:19', 120), dt_upd = convert(datetime, '2021-01-24 17:39:43', 120)
         , title = left('forco', 150), [user] = NULL
         , stato = NULL, priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = convert(datetime, '2021-01-24 17:39:47', 120)
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:39:19', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-01-24 17:39:43', 120), getdate())
          or isnull(title, '') <> isnull('forco', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull(NULL, '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-24 17:39:47,336 [51] DEBUG dn_lib.tools.log - aggiunto task al database: forco
2021-01-24 17:39:47,336 [51] DEBUG dn_lib.tools.log - SQL: declare @cc_files int; declare @cc_folders int;
      select @cc_files = (select count(*) from dn_files where readed is null) 
      select @cc_folders = (select count(*) from dn_folders where readed is null)
      
      delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
      select @cc_files, @cc_folders;
2021-01-24 17:39:47,342 [51] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '1')
        else update users_cache set var_value = substring('1', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-01-24 17:39:47,346 [51] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '0')
        else update users_cache set var_value = substring('0', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-01-24 17:39:47,348 [51] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/01/24 17:39:43')
        else update users_cache set var_value = substring('2021/01/24 17:39:43', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-01-24 17:39:47,352 [51] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/01/24 17:39:47')
        else update users_cache set var_value = substring('2021/01/24 17:39:47', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-01-24 17:40:50,691 [34] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:40:50,692 [34] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:40:50,693 [34] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:40:50,694 [34] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:40:50,695 [34] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:40:50,696 [34] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:40:50,697 [34] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:40:50,698 [34] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:40:50,699 [34] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:40:50,700 [34] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:40:50,701 [34] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:40:50,701 [34] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:40:50,701 [34] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:40:50,702 [34] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:40:50,702 [34] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:40:50,703 [34] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:40:50,703 [34] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:40:50,704 [34] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:40:50,704 [34] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:40:50,705 [34] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:40:50,705 [34] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:40:50,705 [34] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:40:50,706 [34] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:40:50,706 [34] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:40:50,707 [34] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:40:50,707 [34] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:40:51,264 [36] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:40:51,265 [36] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:40:51,266 [36] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:40:51,267 [36] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:40:51,268 [36] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:40:51,269 [36] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:40:51,270 [36] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:40:51,271 [36] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:40:51,271 [36] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:40:51,272 [36] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:40:51,274 [36] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:40:51,274 [36] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:40:51,274 [36] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:40:51,274 [36] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:40:51,275 [36] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:40:51,275 [36] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:40:51,276 [36] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:40:51,277 [36] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:40:51,277 [36] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:40:51,278 [36] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:40:51,278 [36] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:40:51,279 [36] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:40:51,280 [36] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:40:51,281 [36] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:40:51,282 [36] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:40:51,282 [36] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:40:51,292 [36] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-01-24 17:40:51,294 [36] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-01-24 17:40:51,296 [36] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-01-24 17:40:51,298 [36] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-01-24 17:40:51,298 [36] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-01-24 17:40:51,301 [36] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-01-24 17:40:51,302 [36] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-01-24 17:40:51,303 [36] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 17:40:51,304 [36] DEBUG dn_lib.tools.log - elenco cartelle da sincronizzare
2021-01-24 17:40:51,305 [36] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 17:40:51,306 [36] DEBUG dn_lib.tools.log -    - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-01-24 17:40:51,307 [36] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-01-24 17:40:51,319 [36] DEBUG dn_lib.tools.log - elaboro la cartella C:\root\todd\_test\dn...
2021-01-24 17:40:51,320 [36] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = 'forco.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, 'forco.task', 1, convert(datetime, '2021-01-24 17:39:47', 120), convert(datetime, '2021-01-24 17:39:47', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-24 17:39:47', 120), dt_upd = convert(datetime, '2021-01-24 17:39:47', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:39:47', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 17:39:47', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-24 17:40:51,325 [36] DEBUG dn_lib.tools.log - aggiornato folder nel database: C:\root\todd\_test\dn\forco.task
2021-01-24 17:40:51,327 [36] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1822 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, 1822, null, left('forco', 150)
            , NULL, convert(datetime, '2021-01-24 17:39:47', 120), convert(datetime, '2021-01-24 17:39:47', 120), 1
            , NULL, NULL, NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-24 17:39:47', 120), dt_upd = convert(datetime, '2021-01-24 17:39:47', 120)
         , title = left('forco', 150), [user] = NULL
         , stato = NULL, priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:39:47', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-01-24 17:39:47', 120), getdate())
          or isnull(title, '') <> isnull('forco', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull(NULL, '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-24 17:40:51,332 [36] DEBUG dn_lib.tools.log - aggiornato task nel database: forco
2021-01-24 17:40:51,334 [36] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1822 and file_name = 'content.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1822, 'content.txt', '.txt', 1, convert(datetime, '2021-01-24 17:39:19', 120), convert(datetime, '2021-01-24 17:39:43', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-24 17:39:19', 120), dt_upd = convert(datetime, '2021-01-24 17:39:43', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:39:19', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 17:39:43', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-24 17:40:51,339 [36] DEBUG dn_lib.tools.log - aggiornato file nel database: C:\root\todd\_test\dn\forco.task\content.txt
2021-01-24 17:40:51,341 [36] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4299;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4299, '.txt', @content, convert(datetime, '2021-01-24 17:39:19', 120), convert(datetime, '2021-01-24 17:39:43', 120));
2021-01-24 17:40:51,344 [36] DEBUG dn_lib.tools.log - salvato contenuto file nel database: C:\root\todd\_test\dn\forco.task\content.txt
2021-01-24 17:40:51,345 [36] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1822 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1822, 'i.txt', '.txt', 1, convert(datetime, '2021-01-24 17:39:47', 120), convert(datetime, '2021-01-24 17:39:47', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-24 17:39:47', 120), dt_upd = convert(datetime, '2021-01-24 17:39:47', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:39:47', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 17:39:47', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-24 17:40:51,351 [36] DEBUG dn_lib.tools.log - aggiornato file nel database: C:\root\todd\_test\dn\forco.task\i.txt
2021-01-24 17:40:51,352 [36] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4300;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4300, '.txt', @content, convert(datetime, '2021-01-24 17:39:47', 120), convert(datetime, '2021-01-24 17:39:47', 120));
2021-01-24 17:40:51,356 [36] DEBUG dn_lib.tools.log - salvato contenuto file nel database: C:\root\todd\_test\dn\forco.task\i.txt
2021-01-24 17:40:51,357 [36] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1822 and file_name = '__i.xml';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1822, '__i.xml', '.xml', 1, convert(datetime, '2021-01-24 17:39:47', 120), convert(datetime, '2021-01-24 17:39:47', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-24 17:39:47', 120), dt_upd = convert(datetime, '2021-01-24 17:39:47', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:39:47', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 17:39:47', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-24 17:40:51,364 [36] DEBUG dn_lib.tools.log - aggiunto file al database: C:\root\todd\_test\dn\forco.task\__i.xml
2021-01-24 17:40:51,366 [36] DEBUG dn_lib.tools.log - SQL: declare @cc_files int; declare @cc_folders int;
      select @cc_files = (select count(*) from dn_files where readed is null) 
      select @cc_folders = (select count(*) from dn_folders where readed is null)
      
      delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
      select @cc_files, @cc_folders;
2021-01-24 17:40:51,372 [36] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '3')
        else update users_cache set var_value = substring('3', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-01-24 17:40:51,377 [36] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '1')
        else update users_cache set var_value = substring('1', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-01-24 17:40:51,381 [36] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/01/24 17:39:47')
        else update users_cache set var_value = substring('2021/01/24 17:39:47', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-01-24 17:40:51,385 [36] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/01/24 17:40:51')
        else update users_cache set var_value = substring('2021/01/24 17:40:51', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-01-24 17:41:34,768 [41] INFO dn_lib.tools.log - reload core
2021-01-24 17:41:34,845 [41] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:41:34,847 [41] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:41:34,848 [41] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:41:34,849 [41] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:41:34,850 [41] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:41:34,851 [41] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:41:34,852 [41] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:41:34,853 [41] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:41:34,855 [41] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:41:34,856 [41] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:41:34,858 [41] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:41:34,859 [41] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:41:34,860 [41] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:41:34,862 [41] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:41:34,862 [41] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:41:34,863 [41] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:41:34,864 [41] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:41:34,865 [41] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:41:34,891 [41] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:41:34,894 [41] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:41:34,895 [41] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:41:34,896 [41] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:41:34,897 [41] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:41:34,898 [41] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:41:34,899 [41] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:41:34,900 [41] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:41:34,981 [43] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:41:34,982 [43] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:41:34,983 [43] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:41:34,984 [43] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:41:34,985 [43] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:41:34,986 [43] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:41:34,986 [43] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:41:34,987 [43] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:41:34,988 [43] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:41:34,989 [43] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:41:34,989 [43] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:41:34,990 [43] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:41:34,991 [43] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:41:34,992 [43] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:41:34,993 [43] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:41:34,994 [43] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:41:34,995 [43] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:41:34,996 [43] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:41:34,997 [43] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:41:34,998 [43] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:41:34,998 [43] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:41:34,999 [43] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:41:35,000 [43] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:41:35,001 [43] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:41:35,002 [43] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:41:35,003 [43] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:41:35,084 [36] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:41:35,085 [36] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:41:35,086 [36] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:41:35,087 [36] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:41:35,087 [36] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:41:35,088 [36] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:41:35,089 [36] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:41:35,090 [36] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:41:35,091 [36] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:41:35,093 [36] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:41:35,094 [36] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:41:35,096 [36] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:41:35,097 [36] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:41:35,098 [36] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:41:35,098 [36] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:41:35,099 [36] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:41:35,100 [36] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:41:35,101 [36] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:41:35,102 [36] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:41:35,104 [36] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:41:35,105 [36] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:41:35,106 [36] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:41:35,108 [36] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:41:35,110 [36] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:41:35,111 [36] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:41:35,118 [36] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:41:35,149 [36] DEBUG dn_lib.tools.log - SQL: select task_filter_id, filter_title, filter_notes, filter_def, filter_class
 from dn_tasks_filters order by filter_order
2021-01-24 17:41:35,156 [36] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 0 and var_name in ('active-task-filter')
2021-01-24 17:41:35,162 [36] DEBUG dn_lib.tools.log - SQL: select ft.tp, ft.synch_folder_id, ft.folder_id, ft.parent_id, ft.title
       , ft.des, ft.http_path, ft.lvl, dbo.folder_path(ft.folder_id) as folder_path
       , (select top 1 1 from dn_tasks where folder_id = ft.folder_id) as is_task
      from dbo.fnc_dn_folders(null, null) ft
      
      order by ft.synch_folder_id, ft.lvl, ft.title
2021-01-24 17:41:35,176 [36] DEBUG dn_lib.tools.log - SQL: select f.synch_folder_id, f.file_id, f.folder_id, f.file_name, f.dt_ins , null as found_file
       from dn_files f
       where exists (select top 1 1 from dbo.fnc_dn_folders(null, null) ft 
        
	      where ft.synch_folder_id = f.synch_folder_id 
          and isnull(ft.folder_id, 0) = isnull(f.folder_id, 0))
2021-01-24 17:41:35,189 [36] DEBUG dn_lib.tools.log - SQL: select t3.*
      , tst.stato, tst.[order] as stato_order, isnull(tst.class, 'light') as stato_class, isnull(tst.title_plurale, '') as stato_title_plurale, isnull(tst.title_singolare, '') as stato_title_singolare
      , tp.priorita, tp.[order] as priorita_order, isnull(tp.class, 'light') as priorita_class, isnull(tp.title_plurale, '') as priorita_title_plurale, isnull(tp.title_singolare, '') as priorita_title_singolare
      , tt.tipo, tt.[order] as tipo_order, isnull(tt.class, 'light') as tipo_class, isnull(tt.title_plurale, '') as tipo_title_plurale, isnull(tt.title_singolare, '') as tipo_title_singolare
      , ts.stima, ts.[days] as stima_days, isnull(ts.class, 'light') as stima_class, isnull(ts.title_plurale, '') as stima_title_plurale, isnull(ts.title_singolare, '') as stima_title_singolare
      , (select top 1 1 from dn_tasks_notes where task_id = t3.task_id) as task_notes
      , (select top 1 1 from vw_task_allegati f2 where f2.task_id = t3.task_id 
          and not exists (select top 1 1 from dn_files_info where file_name = f2.file_name)) as task_files
  from (select t2.*, datediff(day, t2.dt_ref, getdate()) as diff_days
    from (select t.task_id, t.synch_folder_id, isnull(t.folder_id, f.folder_id) as folder_id
	   , t.file_id, t.title, t.[user], t.stato, t.priorita, t.tipo, t.stima, t.dt_ins, t.dt_upd
     , (case when t.dt_ins > t.dt_upd then t.dt_ins else t.dt_upd end) as dt_ref
	  from dn_tasks t
    
	  left join dn_files f on f.file_id = t.file_id
    where (null is null or (null is not null and t.task_id = null)) ) t2
    where exists (select top 1 1 from dbo.fnc_dn_folders(null, null) ft 
	    where  ft.synch_folder_id = t2.synch_folder_id 
       and isnull(ft.folder_id, 0) = isnull(t2.folder_id, 0))) t3
   left join dn_task_stato tst on tst.stato = t3.stato
   left join dn_task_priorita tp on tp.priorita = t3.priorita
   left join dn_task_tipo tt on tt.tipo = t3.tipo
   left join dn_task_stima ts on ts.stima = t3.stima
   where 1 = 1 
2021-01-24 17:41:35,227 [36] DEBUG dn_lib.tools.log - SQL: select title_singolare, stato from dn_task_stato order by [order]
2021-01-24 17:41:35,247 [36] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, priorita as [value], [order] from dn_task_priorita
      ) t order by t.[order]
2021-01-24 17:41:35,358 [36] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [days]
       union select title_singolare as title, stima as [value], [days] from dn_task_stima 
       ) t order by t.[days]
2021-01-24 17:41:35,361 [36] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, tipo as [value], [order] from dn_task_tipo
       ) t order by t.[order]
2021-01-24 17:41:35,363 [36] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value]
       union select nome as title, nome as [value] from users
       ) t order by 2
2021-01-24 17:41:46,705 [41] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:41:46,706 [41] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:41:46,708 [41] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:41:46,709 [41] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:41:46,710 [41] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:41:46,710 [41] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:41:46,711 [41] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:41:46,712 [41] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:41:46,713 [41] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:41:46,714 [41] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:41:46,715 [41] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:41:46,715 [41] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:41:46,716 [41] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:41:46,717 [41] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:41:46,718 [41] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:41:46,719 [41] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:41:46,720 [41] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:41:46,720 [41] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:41:46,721 [41] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:41:46,722 [41] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:41:46,723 [41] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:41:46,724 [41] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:41:46,725 [41] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:41:46,726 [41] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:41:46,727 [41] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:41:46,728 [41] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:41:46,770 [43] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:41:46,771 [43] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:41:46,771 [43] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:41:46,772 [43] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:41:46,772 [43] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:41:46,773 [43] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:41:46,774 [43] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:41:46,775 [43] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:41:46,776 [43] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:41:46,777 [43] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:41:46,777 [43] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:41:46,778 [43] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:41:46,778 [43] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:41:46,779 [43] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:41:46,779 [43] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:41:46,780 [43] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:41:46,780 [43] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:41:46,781 [43] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:41:46,781 [43] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:41:46,782 [43] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:41:46,782 [43] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:41:46,783 [43] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:41:46,784 [43] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:41:46,784 [43] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:41:46,785 [43] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:41:46,785 [43] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:41:46,820 [36] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:41:46,821 [36] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:41:46,822 [36] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:41:46,822 [36] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:41:46,823 [36] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:41:46,823 [36] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:41:46,824 [36] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:41:46,825 [36] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:41:46,826 [36] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:41:46,826 [36] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:41:46,826 [36] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:41:46,827 [36] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:41:46,827 [36] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:41:46,827 [36] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:41:46,828 [36] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:41:46,828 [36] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:41:46,829 [36] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:41:46,829 [36] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:41:46,829 [36] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:41:46,830 [36] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:41:46,830 [36] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:41:46,831 [36] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:41:46,831 [36] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:41:46,831 [36] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:41:46,832 [36] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:41:46,832 [36] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:41:47,414 [41] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:41:47,415 [41] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:41:47,416 [41] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:41:47,417 [41] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:41:47,418 [41] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:41:47,418 [41] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:41:47,419 [41] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:41:47,420 [41] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:41:47,421 [41] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:41:47,422 [41] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:41:47,423 [41] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:41:47,423 [41] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:41:47,424 [41] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:41:47,424 [41] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:41:47,425 [41] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:41:47,425 [41] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:41:47,426 [41] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:41:47,427 [41] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:41:47,428 [41] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:41:47,428 [41] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:41:47,429 [41] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:41:47,430 [41] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:41:47,431 [41] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:41:47,431 [41] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:41:47,432 [41] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:41:47,433 [41] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:41:47,491 [41] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-01-24 17:41:47,494 [41] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-01-24 17:41:47,497 [41] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-01-24 17:41:47,500 [41] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-01-24 17:41:47,502 [41] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-01-24 17:41:47,504 [41] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-01-24 17:41:47,505 [41] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-01-24 17:41:47,509 [41] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 17:41:47,516 [41] DEBUG dn_lib.tools.log - elenco cartelle da sincronizzare
2021-01-24 17:41:47,518 [41] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 17:41:47,519 [41] DEBUG dn_lib.tools.log -    - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-01-24 17:41:47,521 [41] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-01-24 17:41:47,534 [41] DEBUG dn_lib.tools.log - elaboro la cartella C:\root\todd\_test\dn...
2021-01-24 17:41:47,536 [41] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = 'forco.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, 'forco.task', 1, convert(datetime, '2021-01-24 17:39:47', 120), convert(datetime, '2021-01-24 17:39:47', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-24 17:39:47', 120), dt_upd = convert(datetime, '2021-01-24 17:39:47', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:39:47', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 17:39:47', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-24 17:41:47,583 [41] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1822 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, 1822, null, left('forco', 150)
            , NULL, convert(datetime, '2021-01-24 17:39:47', 120), convert(datetime, '2021-01-24 17:39:47', 120), 1
            , NULL, NULL, NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-24 17:39:47', 120), dt_upd = convert(datetime, '2021-01-24 17:39:47', 120)
         , title = left('forco', 150), [user] = NULL
         , stato = NULL, priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:39:47', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-01-24 17:39:47', 120), getdate())
          or isnull(title, '') <> isnull('forco', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull(NULL, '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-24 17:41:47,590 [41] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1822 and file_name = 'content.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1822, 'content.txt', '.txt', 1, convert(datetime, '2021-01-24 17:39:19', 120), convert(datetime, '2021-01-24 17:39:43', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-24 17:39:19', 120), dt_upd = convert(datetime, '2021-01-24 17:39:43', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:39:19', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 17:39:43', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-24 17:41:47,598 [41] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1822 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1822, 'i.txt', '.txt', 1, convert(datetime, '2021-01-24 17:39:47', 120), convert(datetime, '2021-01-24 17:39:47', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-24 17:39:47', 120), dt_upd = convert(datetime, '2021-01-24 17:39:47', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:39:47', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 17:39:47', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-24 17:41:47,603 [41] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1822 and file_name = '__i.xml';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1822, '__i.xml', '.xml', 1, convert(datetime, '2021-01-24 17:39:47', 120), convert(datetime, '2021-01-24 17:39:47', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-24 17:39:47', 120), dt_upd = convert(datetime, '2021-01-24 17:39:47', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:39:47', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 17:39:47', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-24 17:41:47,609 [41] DEBUG dn_lib.tools.log - SQL: declare @cc_files int; declare @cc_folders int;
      select @cc_files = (select count(*) from dn_files where readed is null) 
      select @cc_folders = (select count(*) from dn_folders where readed is null)
      
      delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
      select @cc_files, @cc_folders;
2021-01-24 17:41:47,616 [41] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '3')
        else update users_cache set var_value = substring('3', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-01-24 17:41:47,620 [41] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '1')
        else update users_cache set var_value = substring('1', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-01-24 17:41:47,623 [41] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/01/24 17:39:47')
        else update users_cache set var_value = substring('2021/01/24 17:39:47', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-01-24 17:41:47,627 [41] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/01/24 17:41:47')
        else update users_cache set var_value = substring('2021/01/24 17:41:47', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-01-24 17:42:28,734 [41] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:42:28,736 [41] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:42:28,737 [41] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:42:28,738 [41] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:42:28,739 [41] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:42:28,739 [41] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:42:28,740 [41] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:42:28,741 [41] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:42:28,742 [41] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:42:28,742 [41] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:42:28,743 [41] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:42:28,743 [41] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:42:28,744 [41] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:42:28,745 [41] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:42:28,745 [41] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:42:28,746 [41] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:42:28,747 [41] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:42:28,747 [41] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:42:28,748 [41] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:42:28,749 [41] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:42:28,749 [41] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:42:28,750 [41] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:42:28,751 [41] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:42:28,752 [41] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:42:28,754 [41] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:42:28,755 [41] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:42:29,331 [43] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:42:29,332 [43] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:42:29,333 [43] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:42:29,334 [43] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:42:29,334 [43] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:42:29,334 [43] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:42:29,334 [43] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:42:29,334 [43] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:42:29,334 [43] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:42:29,334 [43] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:42:29,334 [43] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:42:29,334 [43] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:42:29,334 [43] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:42:29,334 [43] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:42:29,334 [43] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:42:29,334 [43] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:42:29,334 [43] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:42:29,334 [43] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:42:29,342 [43] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:42:29,342 [43] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:42:29,342 [43] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:42:29,342 [43] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:42:29,342 [43] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:42:29,342 [43] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:42:29,342 [43] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:42:29,342 [43] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:42:29,352 [43] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-01-24 17:42:29,359 [43] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-01-24 17:42:29,359 [43] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-01-24 17:42:29,359 [43] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-01-24 17:42:29,362 [43] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-01-24 17:42:29,362 [43] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-01-24 17:42:29,362 [43] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-01-24 17:42:29,362 [43] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 17:42:29,362 [43] DEBUG dn_lib.tools.log - elenco cartelle da sincronizzare
2021-01-24 17:42:29,362 [43] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 17:42:29,362 [43] DEBUG dn_lib.tools.log -    - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-01-24 17:42:29,362 [43] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-01-24 17:42:29,380 [43] DEBUG dn_lib.tools.log - elaboro la cartella C:\root\todd\_test\dn...
2021-01-24 17:42:29,380 [43] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id is null and file_name = 'porc.incroso.task.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, null, 'porc.incroso.task.txt', '.txt', 1, convert(datetime, '2021-01-24 17:42:13', 120), convert(datetime, '2021-01-24 17:42:24', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-24 17:42:13', 120), dt_upd = convert(datetime, '2021-01-24 17:42:24', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:42:13', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 17:42:24', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-24 17:42:33,824 [43] DEBUG dn_lib.tools.log - aggiunto file al database: C:\root\todd\_test\dn\porc.incroso.task.txt
2021-01-24 17:42:33,830 [43] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4302;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4302, '.txt', @content, convert(datetime, '2021-01-24 17:42:13', 120), convert(datetime, '2021-01-24 17:42:24', 120));
2021-01-24 17:42:33,833 [43] DEBUG dn_lib.tools.log - salvato contenuto file nel database: C:\root\todd\_test\dn\porc.incroso.task.txt
2021-01-24 17:42:33,862 [43] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4302;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, null, 4302, left('porc', 150)
            , NULL, convert(datetime, '2021-01-24 17:42:13', 120), convert(datetime, '2021-01-24 17:42:24', 120), 1
            , NULL, NULL, NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-24 17:42:13', 120), dt_upd = convert(datetime, '2021-01-24 17:42:24', 120)
         , title = left('porc', 150), [user] = NULL
         , stato = NULL, priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:42:13', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-01-24 17:42:24', 120), getdate())
          or isnull(title, '') <> isnull('porc', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull(NULL, '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-24 17:42:33,869 [43] DEBUG dn_lib.tools.log - inserito task nel database: C:\root\todd\_test\dn\porc
2021-01-24 17:42:33,871 [43] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1436;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1436, 4302, @content
          , convert(datetime, '2021-01-24 17:42:13', 120), convert(datetime, '2021-01-24 17:42:24', 120));
2021-01-24 17:42:33,873 [43] DEBUG dn_lib.tools.log - salvate le note del task nel database: C:\root\todd\_test\dn\porc.incroso.task.txt
2021-01-24 17:42:33,875 [43] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = 'porc.incroso.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, 'porc.incroso.task', 1, convert(datetime, '2021-01-24 17:42:13', 120), convert(datetime, '2021-01-24 17:42:13', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-24 17:42:13', 120), dt_upd = convert(datetime, '2021-01-24 17:42:13', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:42:13', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 17:42:13', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-24 17:42:33,879 [43] DEBUG dn_lib.tools.log - creato folder: C:\root\todd\_test\dn\porc.incroso.task
2021-01-24 17:42:33,880 [43] DEBUG dn_lib.tools.log - SQL: delete from dn_files where file_id = 4302;
      delete from dn_files_contents where [file_id] = 4302;
      
      delete dn from dn_tasks dn
       where file_id is not null and not exists (select top 1 1 from dn_files where file_id = dn.file_id);
  
      delete dn from dn_tasks_notes dn
       where not exists (select top 1 1 from dn_tasks where task_id = dn.task_id);
2021-01-24 17:42:33,887 [43] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1823 and file_name = 'content.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1823, 'content.txt', '.txt', 1, convert(datetime, '2021-01-24 17:42:13', 120), convert(datetime, '2021-01-24 17:42:13', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-24 17:42:13', 120), dt_upd = convert(datetime, '2021-01-24 17:42:13', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:42:13', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 17:42:13', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-24 17:42:33,893 [43] DEBUG dn_lib.tools.log - SQL: update dn_tasks set dt_upd = convert(datetime, convert(varchar, getdate(), 120), 120), folder_id = 1823, file_id = null
        where task_id = 1436;
2021-01-24 17:42:33,895 [43] DEBUG dn_lib.tools.log - spostato file da: C:\root\todd\_test\dn\porc.incroso.task.txt, a:C:\root\todd\_test\dn\porc.incroso.task\content.txt
2021-01-24 17:42:33,901 [43] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1823 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1823, 'i.txt', '.txt', 1, convert(datetime, '2021-01-24 17:42:13', 120), convert(datetime, '2021-01-24 17:42:13', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-24 17:42:13', 120), dt_upd = convert(datetime, '2021-01-24 17:42:13', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:42:13', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 17:42:13', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-24 17:42:33,907 [43] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4304;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4304, '.txt', @content, convert(datetime, '2021-01-24 17:42:13', 120), convert(datetime, '2021-01-24 17:42:13', 120));
2021-01-24 17:42:33,910 [43] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1436;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1436, 4302, @content
          , convert(datetime, convert(varchar, getdate(), 120), 120), convert(datetime, convert(varchar, getdate(), 120), 120));
      update dn_tasks set dt_upd = convert(datetime, convert(varchar, getdate(), 120), 120) where task_id = 1436;
2021-01-24 17:42:33,913 [43] DEBUG dn_lib.tools.log - salvate le note nel file: C:\root\todd\_test\dn\porc.incroso.task\i.txt
2021-01-24 17:42:33,960 [43] DEBUG dn_lib.tools.log - SQL: update dn_folders set folder_name = 'porc.task', dt_upd = convert(datetime, convert(varchar, getdate(), 120), 120)
        where folder_id = 1823
2021-01-24 17:42:33,962 [43] DEBUG dn_lib.tools.log - rinominato folder: C:\root\todd\_test\dn\porc.task, in: C:\root\todd\_test\dn\porc.task
2021-01-24 17:42:33,969 [43] DEBUG dn_lib.tools.log - salvato index doc: C:\root\todd\_test\dn\porc.task\__i.xml
2021-01-24 17:42:33,971 [43] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1823 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, 1823, null, left('porc', 150)
            , NULL, convert(datetime, '2021-01-24 17:42:13', 120), convert(datetime, '2021-01-24 17:42:24', 120), 1
            , NULL, NULL, NULL, NULL, convert(datetime, '2021-01-24 17:42:33', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-24 17:42:13', 120), dt_upd = convert(datetime, '2021-01-24 17:42:24', 120)
         , title = left('porc', 150), [user] = NULL
         , stato = NULL, priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = convert(datetime, '2021-01-24 17:42:33', 120)
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:42:13', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-01-24 17:42:24', 120), getdate())
          or isnull(title, '') <> isnull('porc', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull(NULL, '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-24 17:42:33,977 [43] DEBUG dn_lib.tools.log - aggiunto task al database: porc
2021-01-24 17:42:33,978 [43] DEBUG dn_lib.tools.log - SQL: declare @cc_files int; declare @cc_folders int;
      select @cc_files = (select count(*) from dn_files where readed is null) 
      select @cc_folders = (select count(*) from dn_folders where readed is null)
      
      delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
      select @cc_files, @cc_folders;
2021-01-24 17:42:33,985 [43] DEBUG dn_lib.tools.log - cancellati dal database: 3 files
2021-01-24 17:42:33,985 [43] DEBUG dn_lib.tools.log - cancellati dal database: 1 folders
2021-01-24 17:42:33,986 [43] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '1')
        else update users_cache set var_value = substring('1', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-01-24 17:42:33,989 [43] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '0')
        else update users_cache set var_value = substring('0', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-01-24 17:42:33,992 [43] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/01/24 17:42:24')
        else update users_cache set var_value = substring('2021/01/24 17:42:24', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-01-24 17:42:33,995 [43] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/01/24 17:42:33')
        else update users_cache set var_value = substring('2021/01/24 17:42:33', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-01-24 17:42:45,978 [41] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:42:45,979 [41] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:42:45,981 [41] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:42:45,982 [41] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:42:45,983 [41] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:42:45,984 [41] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:42:45,984 [41] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:42:45,985 [41] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:42:45,985 [41] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:42:45,986 [41] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:42:45,986 [41] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:42:45,986 [41] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:42:45,987 [41] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:42:45,987 [41] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:42:45,988 [41] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:42:45,988 [41] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:42:45,988 [41] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:42:45,989 [41] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:42:45,989 [41] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:42:45,989 [41] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:42:45,990 [41] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:42:45,990 [41] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:42:45,991 [41] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:42:45,991 [41] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:42:45,991 [41] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:42:45,992 [41] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:42:46,577 [43] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:42:46,578 [43] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:42:46,579 [43] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:42:46,580 [43] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:42:46,581 [43] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:42:46,582 [43] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:42:46,583 [43] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:42:46,584 [43] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:42:46,585 [43] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:42:46,585 [43] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:42:46,586 [43] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:42:46,586 [43] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:42:46,587 [43] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:42:46,587 [43] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:42:46,588 [43] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:42:46,589 [43] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:42:46,590 [43] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:42:46,590 [43] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:42:46,591 [43] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:42:46,592 [43] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:42:46,593 [43] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:42:46,593 [43] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:42:46,594 [43] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:42:46,595 [43] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:42:46,596 [43] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:42:46,597 [43] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:42:46,603 [43] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-01-24 17:42:46,603 [43] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-01-24 17:42:46,613 [43] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-01-24 17:42:46,613 [43] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-01-24 17:42:46,613 [43] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-01-24 17:42:46,613 [43] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-01-24 17:42:46,613 [43] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-01-24 17:42:46,613 [43] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 17:42:46,613 [43] DEBUG dn_lib.tools.log - elenco cartelle da sincronizzare
2021-01-24 17:42:46,613 [43] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 17:42:46,613 [43] DEBUG dn_lib.tools.log -    - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-01-24 17:42:46,613 [43] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-01-24 17:42:46,631 [43] DEBUG dn_lib.tools.log - elaboro la cartella C:\root\todd\_test\dn...
2021-01-24 17:42:46,633 [43] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = 'porc.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, 'porc.task', 1, convert(datetime, '2021-01-24 17:42:33', 120), convert(datetime, '2021-01-24 17:42:33', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-24 17:42:33', 120), dt_upd = convert(datetime, '2021-01-24 17:42:33', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:42:33', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 17:42:33', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-24 17:42:46,633 [43] DEBUG dn_lib.tools.log - aggiornato folder nel database: C:\root\todd\_test\dn\porc.task
2021-01-24 17:42:46,653 [43] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1823 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, 1823, null, left('porc', 150)
            , NULL, convert(datetime, '2021-01-24 17:42:33', 120), convert(datetime, '2021-01-24 17:42:33', 120), 1
            , NULL, NULL, NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-24 17:42:33', 120), dt_upd = convert(datetime, '2021-01-24 17:42:33', 120)
         , title = left('porc', 150), [user] = NULL
         , stato = NULL, priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:42:33', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-01-24 17:42:33', 120), getdate())
          or isnull(title, '') <> isnull('porc', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull(NULL, '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-24 17:42:46,653 [43] DEBUG dn_lib.tools.log - aggiornato task nel database: porc
2021-01-24 17:42:46,653 [43] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1823 and file_name = 'content.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1823, 'content.txt', '.txt', 1, convert(datetime, '2021-01-24 17:42:13', 120), convert(datetime, '2021-01-24 17:42:24', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-24 17:42:13', 120), dt_upd = convert(datetime, '2021-01-24 17:42:24', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:42:13', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 17:42:24', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-24 17:42:46,662 [43] DEBUG dn_lib.tools.log - aggiornato file nel database: C:\root\todd\_test\dn\porc.task\content.txt
2021-01-24 17:42:46,662 [43] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4303;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4303, '.txt', @content, convert(datetime, '2021-01-24 17:42:13', 120), convert(datetime, '2021-01-24 17:42:24', 120));
2021-01-24 17:42:46,662 [43] DEBUG dn_lib.tools.log - salvato contenuto file nel database: C:\root\todd\_test\dn\porc.task\content.txt
2021-01-24 17:42:46,662 [43] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1823 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1823, 'i.txt', '.txt', 1, convert(datetime, '2021-01-24 17:42:33', 120), convert(datetime, '2021-01-24 17:42:33', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-24 17:42:33', 120), dt_upd = convert(datetime, '2021-01-24 17:42:33', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:42:33', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 17:42:33', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-24 17:42:46,672 [43] DEBUG dn_lib.tools.log - aggiornato file nel database: C:\root\todd\_test\dn\porc.task\i.txt
2021-01-24 17:42:46,672 [43] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4304;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4304, '.txt', @content, convert(datetime, '2021-01-24 17:42:33', 120), convert(datetime, '2021-01-24 17:42:33', 120));
2021-01-24 17:42:46,672 [43] DEBUG dn_lib.tools.log - salvato contenuto file nel database: C:\root\todd\_test\dn\porc.task\i.txt
2021-01-24 17:42:46,672 [43] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1823 and file_name = '__i.xml';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1823, '__i.xml', '.xml', 1, convert(datetime, '2021-01-24 17:42:33', 120), convert(datetime, '2021-01-24 17:42:33', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-24 17:42:33', 120), dt_upd = convert(datetime, '2021-01-24 17:42:33', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:42:33', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 17:42:33', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-24 17:44:10,907 [43] DEBUG dn_lib.tools.log - aggiunto file al database: C:\root\todd\_test\dn\porc.task\__i.xml
2021-01-24 17:44:10,909 [43] DEBUG dn_lib.tools.log - SQL: declare @cc_files int; declare @cc_folders int;
      select @cc_files = (select count(*) from dn_files where readed is null) 
      select @cc_folders = (select count(*) from dn_folders where readed is null)
      
      delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
      select @cc_files, @cc_folders;
2021-01-24 17:44:10,916 [43] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '3')
        else update users_cache set var_value = substring('3', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-01-24 17:44:10,922 [43] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '1')
        else update users_cache set var_value = substring('1', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-01-24 17:44:10,927 [43] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/01/24 17:42:33')
        else update users_cache set var_value = substring('2021/01/24 17:42:33', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-01-24 17:44:10,930 [43] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/01/24 17:44:10')
        else update users_cache set var_value = substring('2021/01/24 17:44:10', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-01-24 17:45:11,261 [43] INFO dn_lib.tools.log - reload core
2021-01-24 17:45:11,293 [43] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:45:11,295 [43] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:45:11,296 [43] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:45:11,297 [43] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:45:11,298 [43] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:45:11,299 [43] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:45:11,310 [43] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:45:11,317 [43] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:45:11,318 [43] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:45:11,319 [43] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:45:11,321 [43] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:45:11,321 [43] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:45:11,322 [43] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:45:11,325 [43] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:45:11,326 [43] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:45:11,326 [43] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:45:11,327 [43] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:45:11,328 [43] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:45:11,335 [43] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:45:11,337 [43] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:45:11,338 [43] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:45:11,339 [43] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:45:11,340 [43] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:45:11,342 [43] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:45:11,343 [43] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:45:11,345 [43] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:45:11,379 [45] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:45:11,380 [45] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:45:11,380 [45] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:45:11,381 [45] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:45:11,382 [45] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:45:11,382 [45] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:45:11,383 [45] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:45:11,384 [45] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:45:11,385 [45] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:45:11,385 [45] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:45:11,386 [45] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:45:11,386 [45] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:45:11,387 [45] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:45:11,387 [45] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:45:11,388 [45] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:45:11,388 [45] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:45:11,389 [45] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:45:11,389 [45] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:45:11,390 [45] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:45:11,390 [45] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:45:11,391 [45] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:45:11,392 [45] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:45:11,392 [45] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:45:11,393 [45] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:45:11,393 [45] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:45:11,393 [45] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:45:11,425 [47] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:45:11,427 [47] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:45:11,428 [47] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:45:11,429 [47] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:45:11,430 [47] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:45:11,430 [47] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:45:11,431 [47] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:45:11,432 [47] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:45:11,433 [47] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:45:11,433 [47] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:45:11,434 [47] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:45:11,435 [47] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:45:11,435 [47] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:45:11,436 [47] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:45:11,436 [47] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:45:11,436 [47] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:45:11,437 [47] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:45:11,437 [47] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:45:11,437 [47] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:45:11,438 [47] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:45:11,438 [47] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:45:11,439 [47] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:45:11,439 [47] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:45:11,439 [47] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:45:11,440 [47] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:45:11,444 [47] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:45:11,469 [47] DEBUG dn_lib.tools.log - SQL: select task_filter_id, filter_title, filter_notes, filter_def, filter_class
 from dn_tasks_filters order by filter_order
2021-01-24 17:45:11,476 [47] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 0 and var_name in ('active-task-filter')
2021-01-24 17:45:11,482 [47] DEBUG dn_lib.tools.log - SQL: select ft.tp, ft.synch_folder_id, ft.folder_id, ft.parent_id, ft.title
       , ft.des, ft.http_path, ft.lvl, dbo.folder_path(ft.folder_id) as folder_path
       , (select top 1 1 from dn_tasks where folder_id = ft.folder_id) as is_task
      from dbo.fnc_dn_folders(null, null) ft
      
      order by ft.synch_folder_id, ft.lvl, ft.title
2021-01-24 17:45:11,492 [47] DEBUG dn_lib.tools.log - SQL: select f.synch_folder_id, f.file_id, f.folder_id, f.file_name, f.dt_ins , null as found_file
       from dn_files f
       where exists (select top 1 1 from dbo.fnc_dn_folders(null, null) ft 
        
	      where ft.synch_folder_id = f.synch_folder_id 
          and isnull(ft.folder_id, 0) = isnull(f.folder_id, 0))
2021-01-24 17:45:11,502 [47] DEBUG dn_lib.tools.log - SQL: select t3.*
      , tst.stato, tst.[order] as stato_order, isnull(tst.class, 'light') as stato_class, isnull(tst.title_plurale, '') as stato_title_plurale, isnull(tst.title_singolare, '') as stato_title_singolare
      , tp.priorita, tp.[order] as priorita_order, isnull(tp.class, 'light') as priorita_class, isnull(tp.title_plurale, '') as priorita_title_plurale, isnull(tp.title_singolare, '') as priorita_title_singolare
      , tt.tipo, tt.[order] as tipo_order, isnull(tt.class, 'light') as tipo_class, isnull(tt.title_plurale, '') as tipo_title_plurale, isnull(tt.title_singolare, '') as tipo_title_singolare
      , ts.stima, ts.[days] as stima_days, isnull(ts.class, 'light') as stima_class, isnull(ts.title_plurale, '') as stima_title_plurale, isnull(ts.title_singolare, '') as stima_title_singolare
      , (select top 1 1 from dn_tasks_notes where task_id = t3.task_id) as task_notes
      , (select top 1 1 from vw_task_allegati f2 where f2.task_id = t3.task_id 
          and not exists (select top 1 1 from dn_files_info where file_name = f2.file_name)) as task_files
  from (select t2.*, datediff(day, t2.dt_ref, getdate()) as diff_days
    from (select t.task_id, t.synch_folder_id, isnull(t.folder_id, f.folder_id) as folder_id
	   , t.file_id, t.title, t.[user], t.stato, t.priorita, t.tipo, t.stima, t.dt_ins, t.dt_upd
     , (case when t.dt_ins > t.dt_upd then t.dt_ins else t.dt_upd end) as dt_ref
	  from dn_tasks t
    
	  left join dn_files f on f.file_id = t.file_id
    where (null is null or (null is not null and t.task_id = null)) ) t2
    where exists (select top 1 1 from dbo.fnc_dn_folders(null, null) ft 
	    where  ft.synch_folder_id = t2.synch_folder_id 
       and isnull(ft.folder_id, 0) = isnull(t2.folder_id, 0))) t3
   left join dn_task_stato tst on tst.stato = t3.stato
   left join dn_task_priorita tp on tp.priorita = t3.priorita
   left join dn_task_tipo tt on tt.tipo = t3.tipo
   left join dn_task_stima ts on ts.stima = t3.stima
   where 1 = 1 
2021-01-24 17:45:11,530 [47] DEBUG dn_lib.tools.log - SQL: select title_singolare, stato from dn_task_stato order by [order]
2021-01-24 17:45:11,547 [47] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, priorita as [value], [order] from dn_task_priorita
      ) t order by t.[order]
2021-01-24 17:45:11,628 [47] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [days]
       union select title_singolare as title, stima as [value], [days] from dn_task_stima 
       ) t order by t.[days]
2021-01-24 17:45:11,631 [47] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, tipo as [value], [order] from dn_task_tipo
       ) t order by t.[order]
2021-01-24 17:45:11,633 [47] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value]
       union select nome as title, nome as [value] from users
       ) t order by 2
2021-01-24 17:45:23,721 [43] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:45:23,723 [43] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:45:23,724 [43] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:45:23,726 [43] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:45:23,726 [43] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:45:23,726 [43] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:45:23,728 [43] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:45:23,729 [43] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:45:23,729 [43] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:45:23,730 [43] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:45:23,730 [43] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:45:23,731 [43] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:45:23,731 [43] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:45:23,732 [43] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:45:23,733 [43] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:45:23,733 [43] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:45:23,734 [43] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:45:23,735 [43] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:45:23,736 [43] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:45:23,737 [43] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:45:23,737 [43] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:45:23,738 [43] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:45:23,739 [43] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:45:23,740 [43] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:45:23,741 [43] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:45:23,742 [43] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:45:23,756 [37] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:45:23,758 [37] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:45:23,759 [37] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:45:23,760 [37] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:45:23,761 [37] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:45:23,762 [37] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:45:23,763 [37] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:45:23,763 [37] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:45:23,764 [37] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:45:23,765 [37] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:45:23,766 [37] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:45:23,767 [37] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:45:23,767 [37] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:45:23,768 [37] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:45:23,769 [37] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:45:23,769 [37] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:45:23,770 [37] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:45:23,771 [37] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:45:23,771 [37] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:45:23,772 [37] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:45:23,773 [37] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:45:23,773 [37] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:45:23,773 [37] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:45:23,775 [37] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:45:23,775 [37] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:45:23,775 [37] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:45:23,790 [41] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:45:23,791 [41] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:45:23,792 [41] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:45:23,793 [41] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:45:23,794 [41] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:45:23,795 [41] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:45:23,796 [41] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:45:23,797 [41] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:45:23,797 [41] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:45:23,798 [41] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:45:23,799 [41] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:45:23,799 [41] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:45:23,800 [41] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:45:23,800 [41] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:45:23,801 [41] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:45:23,801 [41] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:45:23,802 [41] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:45:23,802 [41] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:45:23,803 [41] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:45:23,803 [41] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:45:23,804 [41] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:45:23,804 [41] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:45:23,805 [41] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:45:23,806 [41] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:45:23,806 [41] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:45:23,807 [41] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:45:24,392 [36] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:45:24,394 [36] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:45:24,395 [36] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:45:24,396 [36] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:45:24,397 [36] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:45:24,398 [36] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:45:24,399 [36] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:45:24,399 [36] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:45:24,400 [36] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:45:24,400 [36] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:45:24,401 [36] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:45:24,402 [36] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:45:24,402 [36] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:45:24,403 [36] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:45:24,404 [36] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:45:24,405 [36] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:45:24,405 [36] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:45:24,406 [36] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:45:24,406 [36] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:45:24,407 [36] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:45:24,408 [36] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:45:24,408 [36] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:45:24,409 [36] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:45:24,410 [36] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:45:24,410 [36] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:45:24,411 [36] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:45:24,456 [36] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-01-24 17:45:24,459 [36] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-01-24 17:45:24,462 [36] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-01-24 17:45:24,464 [36] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-01-24 17:45:24,466 [36] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-01-24 17:45:24,469 [36] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-01-24 17:45:24,470 [36] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-01-24 17:45:24,472 [36] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 17:45:24,478 [36] DEBUG dn_lib.tools.log - elenco cartelle da sincronizzare
2021-01-24 17:45:24,479 [36] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 17:45:24,480 [36] DEBUG dn_lib.tools.log -    - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-01-24 17:45:24,483 [36] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-01-24 17:45:24,495 [36] DEBUG dn_lib.tools.log - elaboro la cartella C:\root\todd\_test\dn...
2021-01-24 17:45:24,496 [36] DEBUG dn_lib.tools.log - SQL: declare @cc_files int; declare @cc_folders int;
      select @cc_files = (select count(*) from dn_files where readed is null) 
      select @cc_folders = (select count(*) from dn_folders where readed is null)
      
      delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
      select @cc_files, @cc_folders;
2021-01-24 17:45:24,503 [36] DEBUG dn_lib.tools.log - cancellati dal database: 3 files
2021-01-24 17:45:24,504 [36] DEBUG dn_lib.tools.log - cancellati dal database: 1 folders
2021-01-24 17:45:24,505 [36] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '0')
        else update users_cache set var_value = substring('0', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-01-24 17:45:24,509 [36] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '0')
        else update users_cache set var_value = substring('0', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-01-24 17:45:24,513 [36] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/01/05 15:40:09')
        else update users_cache set var_value = substring('2021/01/05 15:40:09', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-01-24 17:45:24,516 [36] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/01/24 17:45:24')
        else update users_cache set var_value = substring('2021/01/24 17:45:24', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-01-24 17:47:02,267 [45] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:47:02,268 [45] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:47:02,269 [45] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:47:02,269 [45] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:47:02,270 [45] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:47:02,271 [45] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:47:02,272 [45] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:47:02,273 [45] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:47:02,274 [45] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:47:02,276 [45] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:47:02,277 [45] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:47:02,277 [45] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:47:02,278 [45] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:47:02,278 [45] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:47:02,279 [45] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:47:02,279 [45] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:47:02,280 [45] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:47:02,280 [45] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:47:02,281 [45] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:47:02,282 [45] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:47:02,282 [45] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:47:02,283 [45] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:47:02,283 [45] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:47:02,284 [45] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:47:02,284 [45] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:47:02,285 [45] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:47:02,873 [47] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:47:02,874 [47] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:47:02,875 [47] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:47:02,876 [47] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:47:02,876 [47] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:47:02,877 [47] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:47:02,878 [47] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:47:02,879 [47] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:47:02,879 [47] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:47:02,880 [47] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:47:02,881 [47] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:47:02,881 [47] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:47:02,882 [47] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:47:02,883 [47] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:47:02,883 [47] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:47:02,884 [47] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:47:02,884 [47] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:47:02,885 [47] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:47:02,885 [47] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:47:02,887 [47] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:47:02,887 [47] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:47:02,888 [47] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:47:02,888 [47] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:47:02,889 [47] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:47:02,889 [47] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:47:02,890 [47] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:47:02,900 [47] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-01-24 17:47:02,902 [47] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-01-24 17:47:02,904 [47] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-01-24 17:47:02,906 [47] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-01-24 17:47:02,908 [47] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-01-24 17:47:02,909 [47] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-01-24 17:47:02,911 [47] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-01-24 17:47:02,912 [47] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 17:47:02,914 [47] DEBUG dn_lib.tools.log - elenco cartelle da sincronizzare
2021-01-24 17:47:02,916 [47] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 17:47:02,917 [47] DEBUG dn_lib.tools.log -    - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-01-24 17:47:02,918 [47] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-01-24 17:47:02,920 [47] DEBUG dn_lib.tools.log - elaboro la cartella C:\root\todd\_test\dn...
2021-01-24 17:47:02,921 [47] DEBUG dn_lib.tools.log - SQL: declare @cc_files int; declare @cc_folders int;
      select @cc_files = (select count(*) from dn_files where readed is null) 
      select @cc_folders = (select count(*) from dn_folders where readed is null)
      
      delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
      select @cc_files, @cc_folders;
2021-01-24 17:47:02,927 [47] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '0')
        else update users_cache set var_value = substring('0', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-01-24 17:47:02,930 [47] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '0')
        else update users_cache set var_value = substring('0', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-01-24 17:47:02,934 [47] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/01/05 15:40:09')
        else update users_cache set var_value = substring('2021/01/05 15:40:09', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-01-24 17:47:02,937 [47] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/01/24 17:47:02')
        else update users_cache set var_value = substring('2021/01/24 17:47:02', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-01-24 17:47:43,199 [45] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:47:43,200 [45] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:47:43,201 [45] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:47:43,202 [45] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:47:43,203 [45] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:47:43,204 [45] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:47:43,205 [45] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:47:43,206 [45] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:47:43,206 [45] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:47:43,207 [45] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:47:43,208 [45] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:47:43,208 [45] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:47:43,209 [45] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:47:43,209 [45] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:47:43,210 [45] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:47:43,211 [45] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:47:43,211 [45] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:47:43,212 [45] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:47:43,213 [45] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:47:43,213 [45] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:47:43,214 [45] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:47:43,214 [45] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:47:43,215 [45] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:47:43,216 [45] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:47:43,217 [45] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:47:43,218 [45] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:47:43,801 [54] INFO dn_lib.tools.log - reload config docs
2021-01-24 17:47:43,803 [54] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:47:43,804 [54] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:47:43,805 [54] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:47:43,806 [54] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:47:43,807 [54] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:47:43,808 [54] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:47:43,808 [54] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:47:43,809 [54] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:47:43,810 [54] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:47:43,810 [54] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:47:43,811 [54] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:47:43,811 [54] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:47:43,812 [54] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:47:43,812 [54] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:47:43,813 [54] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:47:43,814 [54] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:47:43,814 [54] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 17:47:43,815 [54] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 17:47:43,816 [54] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 17:47:43,816 [54] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 17:47:43,817 [54] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 17:47:43,818 [54] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 17:47:43,819 [54] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 17:47:43,819 [54] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 17:47:43,820 [54] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 17:47:43,830 [54] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-01-24 17:47:43,833 [54] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-01-24 17:47:43,835 [54] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-01-24 17:47:43,836 [54] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-01-24 17:47:43,838 [54] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-01-24 17:47:43,840 [54] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-01-24 17:47:43,841 [54] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-01-24 17:47:43,842 [54] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 17:47:43,844 [54] DEBUG dn_lib.tools.log - elenco cartelle da sincronizzare
2021-01-24 17:47:43,845 [54] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 17:47:43,846 [54] DEBUG dn_lib.tools.log -    - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-01-24 17:47:43,846 [54] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-01-24 17:47:43,850 [54] DEBUG dn_lib.tools.log - elaboro la cartella C:\root\todd\_test\dn...
2021-01-24 17:47:43,852 [54] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id is null and file_name = 'el corazon.incorso.task.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, null, 'el corazon.incorso.task.txt', '.txt', 1, convert(datetime, '2021-01-24 17:47:08', 120), convert(datetime, '2021-01-24 17:47:24', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-24 17:47:08', 120), dt_upd = convert(datetime, '2021-01-24 17:47:24', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:47:08', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 17:47:24', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-24 17:47:43,865 [54] DEBUG dn_lib.tools.log - aggiunto file al database: C:\root\todd\_test\dn\el corazon.incorso.task.txt
2021-01-24 17:47:43,872 [54] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4306;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4306, '.txt', @content, convert(datetime, '2021-01-24 17:47:08', 120), convert(datetime, '2021-01-24 17:47:24', 120));
2021-01-24 17:47:43,875 [54] DEBUG dn_lib.tools.log - salvato contenuto file nel database: C:\root\todd\_test\dn\el corazon.incorso.task.txt
2021-01-24 17:47:43,880 [54] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4306;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, null, 4306, left('el corazon', 150)
            , NULL, convert(datetime, '2021-01-24 17:47:08', 120), convert(datetime, '2021-01-24 17:47:24', 120), 1
            , 'in_corso', NULL, NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-24 17:47:08', 120), dt_upd = convert(datetime, '2021-01-24 17:47:24', 120)
         , title = left('el corazon', 150), [user] = NULL
         , stato = 'in_corso', priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:47:08', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-01-24 17:47:24', 120), getdate())
          or isnull(title, '') <> isnull('el corazon', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('in_corso', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-24 17:47:43,887 [54] DEBUG dn_lib.tools.log - inserito task nel database: C:\root\todd\_test\dn\el corazon
2021-01-24 17:47:43,889 [54] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1438;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1438, 4306, @content
          , convert(datetime, '2021-01-24 17:47:08', 120), convert(datetime, '2021-01-24 17:47:24', 120));
2021-01-24 17:47:43,891 [54] DEBUG dn_lib.tools.log - salvate le note del task nel database: C:\root\todd\_test\dn\el corazon.incorso.task.txt
2021-01-24 17:47:43,894 [54] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = 'el corazon.incorso.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, 'el corazon.incorso.task', 1, convert(datetime, '2021-01-24 17:47:08', 120), convert(datetime, '2021-01-24 17:47:08', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-24 17:47:08', 120), dt_upd = convert(datetime, '2021-01-24 17:47:08', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:47:08', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 17:47:08', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-24 17:47:43,898 [54] DEBUG dn_lib.tools.log - creato folder: C:\root\todd\_test\dn\el corazon.incorso.task
2021-01-24 17:47:43,900 [54] DEBUG dn_lib.tools.log - SQL: delete from dn_files where file_id = 4306;
      delete from dn_files_contents where [file_id] = 4306;
      
      delete dn from dn_tasks dn
       where file_id is not null and not exists (select top 1 1 from dn_files where file_id = dn.file_id);
  
      delete dn from dn_tasks_notes dn
       where not exists (select top 1 1 from dn_tasks where task_id = dn.task_id);
2021-01-24 17:47:43,906 [54] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1824 and file_name = 'content.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1824, 'content.txt', '.txt', 1, convert(datetime, '2021-01-24 17:47:08', 120), convert(datetime, '2021-01-24 17:47:08', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-24 17:47:08', 120), dt_upd = convert(datetime, '2021-01-24 17:47:08', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:47:08', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 17:47:08', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-24 17:47:43,911 [54] DEBUG dn_lib.tools.log - SQL: update dn_tasks set dt_upd = convert(datetime, convert(varchar, getdate(), 120), 120), folder_id = 1824, file_id = null
        where task_id = 1438;
2021-01-24 17:47:43,914 [54] DEBUG dn_lib.tools.log - spostato file da: C:\root\todd\_test\dn\el corazon.incorso.task.txt, a:C:\root\todd\_test\dn\el corazon.incorso.task\content.txt
2021-01-24 17:47:43,920 [54] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1824 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1824, 'i.txt', '.txt', 1, convert(datetime, '2021-01-24 17:47:08', 120), convert(datetime, '2021-01-24 17:47:08', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-24 17:47:08', 120), dt_upd = convert(datetime, '2021-01-24 17:47:08', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:47:08', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 17:47:08', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-24 17:47:43,925 [54] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4308;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4308, '.txt', @content, convert(datetime, '2021-01-24 17:47:08', 120), convert(datetime, '2021-01-24 17:47:08', 120));
2021-01-24 17:47:43,929 [54] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1438;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1438, 4306, @content
          , convert(datetime, convert(varchar, getdate(), 120), 120), convert(datetime, convert(varchar, getdate(), 120), 120));
      update dn_tasks set dt_upd = convert(datetime, convert(varchar, getdate(), 120), 120) where task_id = 1438;
2021-01-24 17:47:43,932 [54] DEBUG dn_lib.tools.log - salvate le note nel file: C:\root\todd\_test\dn\el corazon.incorso.task\i.txt
2021-01-24 17:47:43,940 [54] DEBUG dn_lib.tools.log - SQL: update dn_folders set folder_name = 'el corazon.task', dt_upd = convert(datetime, convert(varchar, getdate(), 120), 120)
        where folder_id = 1824
2021-01-24 17:47:43,943 [54] DEBUG dn_lib.tools.log - rinominato folder: C:\root\todd\_test\dn\el corazon.task, in: C:\root\todd\_test\dn\el corazon.task
2021-01-24 17:47:43,948 [54] DEBUG dn_lib.tools.log - salvato index doc: C:\root\todd\_test\dn\el corazon.task\__i.xml
2021-01-24 17:47:43,949 [54] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1824 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, 1824, null, left('el corazon', 150)
            , NULL, convert(datetime, '2021-01-24 17:47:08', 120), convert(datetime, '2021-01-24 17:47:24', 120), 1
            , 'in_corso', NULL, NULL, NULL, convert(datetime, '2021-01-24 17:47:43', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-24 17:47:08', 120), dt_upd = convert(datetime, '2021-01-24 17:47:24', 120)
         , title = left('el corazon', 150), [user] = NULL
         , stato = 'in_corso', priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = convert(datetime, '2021-01-24 17:47:43', 120)
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:47:08', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-01-24 17:47:24', 120), getdate())
          or isnull(title, '') <> isnull('el corazon', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('in_corso', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-24 17:47:43,956 [54] DEBUG dn_lib.tools.log - aggiunto task al database: el corazon
2021-01-24 17:47:43,957 [54] DEBUG dn_lib.tools.log - SQL: declare @cc_files int; declare @cc_folders int;
      select @cc_files = (select count(*) from dn_files where readed is null) 
      select @cc_folders = (select count(*) from dn_folders where readed is null)
      
      delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
      select @cc_files, @cc_folders;
2021-01-24 17:47:43,963 [54] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '1')
        else update users_cache set var_value = substring('1', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-01-24 17:47:43,967 [54] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '0')
        else update users_cache set var_value = substring('0', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-01-24 17:47:43,970 [54] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/01/24 17:47:24')
        else update users_cache set var_value = substring('2021/01/24 17:47:24', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-01-24 17:47:43,973 [54] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/01/24 17:47:43')
        else update users_cache set var_value = substring('2021/01/24 17:47:43', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-01-24 18:24:02,032 [69] INFO dn_lib.tools.log - reload core
2021-01-24 18:24:02,066 [69] INFO dn_lib.tools.log - reload config docs
2021-01-24 18:24:02,068 [69] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:24:02,069 [69] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:24:02,070 [69] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:24:02,071 [69] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:24:02,072 [69] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:24:02,081 [69] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:24:02,083 [69] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:24:02,084 [69] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:24:02,085 [69] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:24:02,086 [69] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:24:02,087 [69] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:24:02,088 [69] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:24:02,089 [69] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:24:02,090 [69] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:24:02,091 [69] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:24:02,092 [69] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:24:02,092 [69] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:24:02,100 [69] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:24:02,101 [69] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:24:02,102 [69] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:24:02,103 [69] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:24:02,104 [69] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:24:02,105 [69] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:24:02,105 [69] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:24:02,110 [69] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 18:24:02,725 [59] INFO dn_lib.tools.log - reload config docs
2021-01-24 18:24:02,726 [59] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:24:02,727 [59] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:24:02,728 [59] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:24:02,729 [59] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:24:02,730 [59] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:24:02,730 [59] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:24:02,731 [59] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:24:02,732 [59] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:24:02,733 [59] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:24:02,733 [59] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:24:02,734 [59] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:24:02,735 [59] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:24:02,735 [59] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:24:02,736 [59] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:24:02,737 [59] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:24:02,737 [59] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:24:02,738 [59] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:24:02,739 [59] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:24:02,739 [59] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:24:02,740 [59] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:24:02,741 [59] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:24:02,741 [59] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:24:02,742 [59] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:24:02,742 [59] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:24:02,743 [59] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 18:24:02,792 [59] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-01-24 18:24:02,795 [59] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-01-24 18:24:02,798 [59] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-01-24 18:24:02,800 [59] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-01-24 18:24:02,804 [59] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-01-24 18:24:02,806 [59] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-01-24 18:24:02,807 [59] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-01-24 18:24:02,811 [59] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 18:24:02,817 [59] DEBUG dn_lib.tools.log - elenco cartelle da sincronizzare
2021-01-24 18:24:02,819 [59] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 18:24:02,820 [59] DEBUG dn_lib.tools.log -    - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-01-24 18:24:02,822 [59] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-01-24 18:24:02,835 [59] DEBUG dn_lib.tools.log - elaboro la cartella C:\root\todd\_test\dn...
2021-01-24 18:24:02,836 [59] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = 'el corazon.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, 'el corazon.task', 1, convert(datetime, '2021-01-24 17:47:43', 120), convert(datetime, '2021-01-24 17:47:43', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-24 17:47:43', 120), dt_upd = convert(datetime, '2021-01-24 17:47:43', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:47:43', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 17:47:43', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-24 18:24:02,841 [59] DEBUG dn_lib.tools.log - aggiornato folder nel database: C:\root\todd\_test\dn\el corazon.task
2021-01-24 18:24:02,851 [59] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1824 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, 1824, null, left('el corazon', 150)
            , NULL, convert(datetime, '2021-01-24 17:47:43', 120), convert(datetime, '2021-01-24 17:47:43', 120), 1
            , 'in_corso', NULL, NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-24 17:47:43', 120), dt_upd = convert(datetime, '2021-01-24 17:47:43', 120)
         , title = left('el corazon', 150), [user] = NULL
         , stato = 'in_corso', priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:47:43', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-01-24 17:47:43', 120), getdate())
          or isnull(title, '') <> isnull('el corazon', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('in_corso', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-24 18:24:02,858 [59] DEBUG dn_lib.tools.log - aggiornato task nel database: el corazon
2021-01-24 18:24:02,860 [59] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1824 and file_name = 'content.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1824, 'content.txt', '.txt', 1, convert(datetime, '2021-01-24 17:47:08', 120), convert(datetime, '2021-01-24 17:47:24', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-24 17:47:08', 120), dt_upd = convert(datetime, '2021-01-24 17:47:24', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:47:08', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 17:47:24', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-24 18:24:02,866 [59] DEBUG dn_lib.tools.log - aggiornato file nel database: C:\root\todd\_test\dn\el corazon.task\content.txt
2021-01-24 18:24:02,868 [59] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4307;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4307, '.txt', @content, convert(datetime, '2021-01-24 17:47:08', 120), convert(datetime, '2021-01-24 17:47:24', 120));
2021-01-24 18:24:02,872 [59] DEBUG dn_lib.tools.log - salvato contenuto file nel database: C:\root\todd\_test\dn\el corazon.task\content.txt
2021-01-24 18:24:02,872 [59] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1824 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1824, 'i.txt', '.txt', 1, convert(datetime, '2021-01-24 17:47:43', 120), convert(datetime, '2021-01-24 17:47:43', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-24 17:47:43', 120), dt_upd = convert(datetime, '2021-01-24 17:47:43', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:47:43', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 17:47:43', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-24 18:24:02,877 [59] DEBUG dn_lib.tools.log - aggiornato file nel database: C:\root\todd\_test\dn\el corazon.task\i.txt
2021-01-24 18:24:02,878 [59] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4308;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4308, '.txt', @content, convert(datetime, '2021-01-24 17:47:43', 120), convert(datetime, '2021-01-24 17:47:43', 120));
2021-01-24 18:24:02,881 [59] DEBUG dn_lib.tools.log - salvato contenuto file nel database: C:\root\todd\_test\dn\el corazon.task\i.txt
2021-01-24 18:24:02,884 [59] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1439;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1439, 4308, @content
          , convert(datetime, '2021-01-24 17:47:43', 120), convert(datetime, '2021-01-24 17:47:43', 120));
2021-01-24 18:24:02,886 [59] DEBUG dn_lib.tools.log - salvate le note del task nel database: C:\root\todd\_test\dn\el corazon.task\i.txt
2021-01-24 18:24:02,887 [59] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1439) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-24 18:24:02,896 [59] DEBUG dn_lib.tools.log - SQL: declare @cc_files int; declare @cc_folders int;
      select @cc_files = (select count(*) from dn_files where readed is null) 
      select @cc_folders = (select count(*) from dn_folders where readed is null)
      
      delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
      select @cc_files, @cc_folders;
2021-01-24 18:24:02,903 [59] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '3')
        else update users_cache set var_value = substring('3', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-01-24 18:24:02,907 [59] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '1')
        else update users_cache set var_value = substring('1', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-01-24 18:24:02,910 [59] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/01/24 17:47:43')
        else update users_cache set var_value = substring('2021/01/24 17:47:43', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-01-24 18:24:02,913 [59] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/01/24 18:24:02')
        else update users_cache set var_value = substring('2021/01/24 18:24:02', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-01-24 18:24:03,843 [67] INFO dn_lib.tools.log - reload config docs
2021-01-24 18:24:03,845 [67] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:24:03,846 [67] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:24:03,847 [67] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:24:03,848 [67] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:24:03,848 [67] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:24:03,849 [67] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:24:03,850 [67] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:24:03,850 [67] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:24:03,851 [67] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:24:03,852 [67] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:24:03,852 [67] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:24:03,853 [67] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:24:03,854 [67] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:24:03,854 [67] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:24:03,855 [67] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:24:03,855 [67] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:24:03,856 [67] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:24:03,857 [67] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:24:03,857 [67] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:24:03,858 [67] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:24:03,858 [67] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:24:03,859 [67] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:24:03,860 [67] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:24:03,861 [67] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:24:03,863 [67] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 18:24:04,431 [68] INFO dn_lib.tools.log - reload config docs
2021-01-24 18:24:04,432 [68] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:24:04,433 [68] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:24:04,434 [68] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:24:04,435 [68] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:24:04,435 [68] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:24:04,436 [68] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:24:04,437 [68] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:24:04,437 [68] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:24:04,439 [68] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:24:04,439 [68] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:24:04,439 [68] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:24:04,440 [68] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:24:04,441 [68] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:24:04,441 [68] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:24:04,442 [68] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:24:04,443 [68] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:24:04,444 [68] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:24:04,444 [68] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:24:04,445 [68] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:24:04,446 [68] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:24:04,446 [68] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:24:04,447 [68] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:24:04,447 [68] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:24:04,448 [68] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:24:04,448 [68] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 18:24:04,458 [68] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-01-24 18:24:04,459 [68] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-01-24 18:24:04,462 [68] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-01-24 18:24:04,462 [68] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-01-24 18:24:04,464 [68] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-01-24 18:24:04,464 [68] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-01-24 18:24:04,464 [68] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-01-24 18:24:04,465 [68] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 18:24:04,466 [68] DEBUG dn_lib.tools.log - elenco cartelle da sincronizzare
2021-01-24 18:24:04,468 [68] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 18:24:04,468 [68] DEBUG dn_lib.tools.log -    - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-01-24 18:24:04,468 [68] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-01-24 18:24:04,478 [68] DEBUG dn_lib.tools.log - elaboro la cartella C:\root\todd\_test\dn...
2021-01-24 18:24:04,479 [68] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = 'el corazon.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, 'el corazon.task', 1, convert(datetime, '2021-01-24 17:47:43', 120), convert(datetime, '2021-01-24 17:47:43', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-24 17:47:43', 120), dt_upd = convert(datetime, '2021-01-24 17:47:43', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:47:43', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 17:47:43', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-24 18:24:04,480 [68] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1824 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, 1824, null, left('el corazon', 150)
            , NULL, convert(datetime, '2021-01-24 17:47:43', 120), convert(datetime, '2021-01-24 17:47:43', 120), 1
            , 'in_corso', NULL, NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-24 17:47:43', 120), dt_upd = convert(datetime, '2021-01-24 17:47:43', 120)
         , title = left('el corazon', 150), [user] = NULL
         , stato = 'in_corso', priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:47:43', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-01-24 17:47:43', 120), getdate())
          or isnull(title, '') <> isnull('el corazon', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('in_corso', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-24 18:24:04,482 [68] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1824 and file_name = 'content.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1824, 'content.txt', '.txt', 1, convert(datetime, '2021-01-24 17:47:08', 120), convert(datetime, '2021-01-24 17:47:24', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-24 17:47:08', 120), dt_upd = convert(datetime, '2021-01-24 17:47:24', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:47:08', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 17:47:24', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-24 18:24:04,483 [68] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1824 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1824, 'i.txt', '.txt', 1, convert(datetime, '2021-01-24 17:47:43', 120), convert(datetime, '2021-01-24 17:47:43', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-24 17:47:43', 120), dt_upd = convert(datetime, '2021-01-24 17:47:43', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 17:47:43', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 17:47:43', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-24 18:24:04,483 [68] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1439) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-24 18:24:04,484 [68] DEBUG dn_lib.tools.log - SQL: declare @cc_files int; declare @cc_folders int;
      select @cc_files = (select count(*) from dn_files where readed is null) 
      select @cc_folders = (select count(*) from dn_folders where readed is null)
      
      delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
      select @cc_files, @cc_folders;
2021-01-24 18:24:04,485 [68] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '3')
        else update users_cache set var_value = substring('3', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-01-24 18:24:04,486 [68] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '1')
        else update users_cache set var_value = substring('1', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-01-24 18:24:04,486 [68] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/01/24 17:47:43')
        else update users_cache set var_value = substring('2021/01/24 17:47:43', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-01-24 18:24:04,487 [68] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/01/24 18:24:04')
        else update users_cache set var_value = substring('2021/01/24 18:24:04', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-01-24 18:50:33,909 [7] INFO dn_lib.tools.log - reload core
2021-01-24 18:50:33,946 [7] INFO dn_lib.tools.log - reload config docs
2021-01-24 18:50:33,948 [7] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:50:33,949 [7] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:50:33,950 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:50:33,957 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:50:33,960 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:50:33,969 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:50:33,970 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:50:33,972 [7] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:50:33,973 [7] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:50:33,975 [7] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:50:33,976 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:50:33,976 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:50:33,978 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:50:33,978 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:50:33,978 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:50:33,979 [7] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:50:33,980 [7] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:50:33,987 [7] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:50:33,988 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:50:33,989 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:50:33,991 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:50:33,993 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:50:33,993 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:50:33,994 [7] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:50:33,999 [7] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 18:50:34,667 [7] INFO dn_lib.tools.log - reload config docs
2021-01-24 18:50:34,668 [7] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:50:34,669 [7] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:50:34,670 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:50:34,671 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:50:34,671 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:50:34,672 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:50:34,673 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:50:34,674 [7] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:50:34,675 [7] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:50:34,675 [7] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:50:34,676 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:50:34,676 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:50:34,677 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:50:34,678 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:50:34,678 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:50:34,679 [7] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:50:34,679 [7] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:50:34,680 [7] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:50:34,681 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:50:34,681 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:50:34,682 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:50:34,682 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:50:34,683 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:50:34,684 [7] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:50:34,684 [7] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 18:50:34,734 [7] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-01-24 18:50:34,738 [7] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-01-24 18:50:34,741 [7] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-01-24 18:50:34,743 [7] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-01-24 18:50:34,747 [7] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-01-24 18:50:34,748 [7] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-01-24 18:50:34,750 [7] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-01-24 18:50:34,753 [7] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 18:50:34,759 [7] DEBUG dn_lib.tools.log - elenco cartelle da sincronizzare
2021-01-24 18:50:34,760 [7] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 18:50:34,761 [7] DEBUG dn_lib.tools.log -    - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-01-24 18:50:34,763 [7] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-01-24 18:50:34,777 [7] DEBUG dn_lib.tools.log - elaboro la cartella C:\root\todd\_test\dn...
2021-01-24 18:50:34,779 [7] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id is null and file_name = 'ercho.incorso.task.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, null, 'ercho.incorso.task.txt', '.txt', 1, convert(datetime, '2021-01-24 18:24:50', 120), convert(datetime, '2021-01-24 18:25:04', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-24 18:24:50', 120), dt_upd = convert(datetime, '2021-01-24 18:25:04', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 18:24:50', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 18:25:04', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-24 18:50:34,783 [7] DEBUG dn_lib.tools.log - aggiunto file al database: C:\root\todd\_test\dn\ercho.incorso.task.txt
2021-01-24 18:50:34,785 [7] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4309;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4309, '.txt', @content, convert(datetime, '2021-01-24 18:24:50', 120), convert(datetime, '2021-01-24 18:25:04', 120));
2021-01-24 18:50:34,788 [7] DEBUG dn_lib.tools.log - salvato contenuto file nel database: C:\root\todd\_test\dn\ercho.incorso.task.txt
2021-01-24 18:50:34,794 [7] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4309;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, null, 4309, left('ercho', 150)
            , NULL, convert(datetime, '2021-01-24 18:24:50', 120), convert(datetime, '2021-01-24 18:25:04', 120), 1
            , 'in_corso', NULL, NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-24 18:24:50', 120), dt_upd = convert(datetime, '2021-01-24 18:25:04', 120)
         , title = left('ercho', 150), [user] = NULL
         , stato = 'in_corso', priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 18:24:50', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-01-24 18:25:04', 120), getdate())
          or isnull(title, '') <> isnull('ercho', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('in_corso', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-24 18:50:34,800 [7] DEBUG dn_lib.tools.log - inserito task nel database: C:\root\todd\_test\dn\ercho
2021-01-24 18:50:34,802 [7] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1440;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1440, 4309, @content
          , convert(datetime, '2021-01-24 18:24:50', 120), convert(datetime, '2021-01-24 18:25:04', 120));
2021-01-24 18:50:34,805 [7] DEBUG dn_lib.tools.log - salvate le note del task nel database: C:\root\todd\_test\dn\ercho.incorso.task.txt
2021-01-24 18:50:34,806 [7] DEBUG dn_lib.tools.log - trasformazione task file in task folder: C:\root\todd\_test\dn\ercho.incorso.task.txt
2021-01-24 18:50:34,808 [7] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = 'ercho.incorso.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, 'ercho.incorso.task', 1, convert(datetime, '2021-01-24 18:24:50', 120), convert(datetime, '2021-01-24 18:24:50', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-24 18:24:50', 120), dt_upd = convert(datetime, '2021-01-24 18:24:50', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 18:24:50', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 18:24:50', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-24 18:50:34,812 [7] DEBUG dn_lib.tools.log - creato folder: C:\root\todd\_test\dn\ercho.incorso.task
2021-01-24 18:50:34,813 [7] DEBUG dn_lib.tools.log - SQL: delete from dn_files where file_id = 4309;
      delete from dn_files_contents where [file_id] = 4309;
      
      delete dn from dn_tasks dn
       where file_id is not null and not exists (select top 1 1 from dn_files where file_id = dn.file_id);
  
      delete dn from dn_tasks_notes dn
       where not exists (select top 1 1 from dn_tasks where task_id = dn.task_id);
2021-01-24 18:50:34,819 [7] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1825 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1825, 'i.txt', '.txt', 1, convert(datetime, '2021-01-24 18:24:50', 120), convert(datetime, '2021-01-24 18:24:50', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-24 18:24:50', 120), dt_upd = convert(datetime, '2021-01-24 18:24:50', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 18:24:50', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 18:24:50', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-24 18:50:34,824 [7] DEBUG dn_lib.tools.log - SQL: update dn_tasks set dt_upd = convert(datetime, convert(varchar, getdate(), 120), 120), folder_id = 1825, file_id = null
        where task_id = 1440;
2021-01-24 18:50:34,826 [7] DEBUG dn_lib.tools.log - spostato file da: C:\root\todd\_test\dn\ercho.incorso.task.txt, a:C:\root\todd\_test\dn\ercho.incorso.task\i.txt
2021-01-24 18:50:34,827 [7] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1440;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1440, 4310, @content
          , convert(datetime, convert(varchar, getdate(), 120), 120), convert(datetime, convert(varchar, getdate(), 120), 120));
      update dn_tasks set dt_upd = convert(datetime, convert(varchar, getdate(), 120), 120) where task_id = 1440;
2021-01-24 18:50:34,830 [7] DEBUG dn_lib.tools.log - salvate le note del task: C:\root\todd\_test\dn\ercho.incorso.task
2021-01-24 18:50:34,836 [7] DEBUG dn_lib.tools.log - SQL: update dn_folders set folder_name = 'ercho.task', dt_upd = convert(datetime, convert(varchar, getdate(), 120), 120)
        where folder_id = 1825
2021-01-24 18:50:34,838 [7] DEBUG dn_lib.tools.log - rinominato folder: C:\root\todd\_test\dn\ercho.task, in: C:\root\todd\_test\dn\ercho.task
2021-01-24 18:50:34,843 [7] DEBUG dn_lib.tools.log - salvato index doc: C:\root\todd\_test\dn\ercho.task\__i.xml
2021-01-24 18:50:34,844 [7] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1825 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, 1825, null, left('ercho', 150)
            , NULL, convert(datetime, '2021-01-24 18:24:50', 120), convert(datetime, '2021-01-24 18:25:04', 120), 1
            , 'in_corso', NULL, NULL, NULL, convert(datetime, '2021-01-24 18:50:34', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-24 18:24:50', 120), dt_upd = convert(datetime, '2021-01-24 18:25:04', 120)
         , title = left('ercho', 150), [user] = NULL
         , stato = 'in_corso', priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = convert(datetime, '2021-01-24 18:50:34', 120)
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 18:24:50', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-01-24 18:25:04', 120), getdate())
          or isnull(title, '') <> isnull('ercho', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('in_corso', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-24 18:50:34,850 [7] DEBUG dn_lib.tools.log - aggiunto task al database: ercho
2021-01-24 18:50:34,851 [7] DEBUG dn_lib.tools.log - SQL: declare @cc_files int; declare @cc_folders int;
      select @cc_files = (select count(*) from dn_files where readed is null) 
      select @cc_folders = (select count(*) from dn_folders where readed is null)
      
      delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
      select @cc_files, @cc_folders;
2021-01-24 18:50:34,858 [7] DEBUG dn_lib.tools.log - cancellati dal database: 2 files
2021-01-24 18:50:34,859 [7] DEBUG dn_lib.tools.log - cancellati dal database: 1 folders
2021-01-24 18:50:34,860 [7] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '1')
        else update users_cache set var_value = substring('1', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-01-24 18:50:34,864 [7] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '0')
        else update users_cache set var_value = substring('0', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-01-24 18:50:34,867 [7] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/01/24 18:25:04')
        else update users_cache set var_value = substring('2021/01/24 18:25:04', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-01-24 18:50:34,870 [7] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/01/24 18:50:34')
        else update users_cache set var_value = substring('2021/01/24 18:50:34', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-01-24 18:53:39,565 [5] INFO dn_lib.tools.log - reload core
2021-01-24 18:53:39,599 [5] INFO dn_lib.tools.log - reload config docs
2021-01-24 18:53:39,601 [5] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:53:39,602 [5] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:53:39,603 [5] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:53:39,604 [5] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:53:39,605 [5] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:53:39,615 [5] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:53:39,617 [5] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:53:39,618 [5] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:53:39,618 [5] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:53:39,620 [5] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:53:39,621 [5] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:53:39,621 [5] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:53:39,623 [5] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:53:39,623 [5] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:53:39,624 [5] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:53:39,625 [5] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:53:39,625 [5] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:53:39,633 [5] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:53:39,634 [5] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:53:39,636 [5] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:53:39,637 [5] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:53:39,638 [5] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:53:39,638 [5] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:53:39,639 [5] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:53:39,644 [5] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 18:53:40,256 [15] INFO dn_lib.tools.log - reload config docs
2021-01-24 18:53:40,257 [15] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:53:40,258 [15] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:53:40,259 [15] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:53:40,260 [15] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:53:40,261 [15] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:53:40,262 [15] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:53:40,262 [15] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:53:40,263 [15] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:53:40,264 [15] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:53:40,264 [15] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:53:40,265 [15] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:53:40,265 [15] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:53:40,266 [15] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:53:40,267 [15] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:53:40,267 [15] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:53:40,268 [15] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:53:40,268 [15] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:53:40,269 [15] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:53:40,269 [15] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:53:40,270 [15] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:53:40,270 [15] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:53:40,271 [15] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:53:40,271 [15] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:53:40,272 [15] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:53:40,272 [15] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 18:53:40,321 [15] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-01-24 18:53:40,324 [15] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-01-24 18:53:40,327 [15] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-01-24 18:53:40,329 [15] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-01-24 18:53:40,334 [15] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-01-24 18:53:40,336 [15] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-01-24 18:53:40,337 [15] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-01-24 18:53:40,340 [15] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 18:53:40,347 [15] DEBUG dn_lib.tools.log - elenco cartelle da sincronizzare
2021-01-24 18:53:40,348 [15] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 18:53:40,349 [15] DEBUG dn_lib.tools.log -    - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-01-24 18:53:40,351 [15] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-01-24 18:53:40,355 [15] DEBUG dn_lib.tools.log - elaboro la cartella C:\root\todd\_test\dn...
2021-01-24 18:53:40,358 [15] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = 'ercho.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, 'ercho.task', 1, convert(datetime, '2021-01-24 18:50:34', 120), convert(datetime, '2021-01-24 18:50:34', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-24 18:50:34', 120), dt_upd = convert(datetime, '2021-01-24 18:50:34', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 18:50:34', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 18:50:34', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-24 18:53:40,363 [15] DEBUG dn_lib.tools.log - aggiornato folder nel database: C:\root\todd\_test\dn\ercho.task
2021-01-24 18:53:40,372 [15] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1825 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, 1825, null, left('ercho', 150)
            , NULL, convert(datetime, '2021-01-24 18:50:34', 120), convert(datetime, '2021-01-24 18:50:34', 120), 1
            , 'in_corso', NULL, NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-24 18:50:34', 120), dt_upd = convert(datetime, '2021-01-24 18:50:34', 120)
         , title = left('ercho', 150), [user] = NULL
         , stato = 'in_corso', priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 18:50:34', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-01-24 18:50:34', 120), getdate())
          or isnull(title, '') <> isnull('ercho', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('in_corso', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-24 18:53:40,378 [15] DEBUG dn_lib.tools.log - aggiornato task nel database: ercho
2021-01-24 18:53:40,380 [15] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1825 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1825, 'i.txt', '.txt', 1, convert(datetime, '2021-01-24 18:24:50', 120), convert(datetime, '2021-01-24 18:25:04', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-24 18:24:50', 120), dt_upd = convert(datetime, '2021-01-24 18:25:04', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 18:24:50', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 18:25:04', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-24 18:53:40,385 [15] DEBUG dn_lib.tools.log - aggiornato file nel database: C:\root\todd\_test\dn\ercho.task\i.txt
2021-01-24 18:53:40,387 [15] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4310;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4310, '.txt', @content, convert(datetime, '2021-01-24 18:24:50', 120), convert(datetime, '2021-01-24 18:25:04', 120));
2021-01-24 18:53:40,390 [15] DEBUG dn_lib.tools.log - salvato contenuto file nel database: C:\root\todd\_test\dn\ercho.task\i.txt
2021-01-24 18:53:40,392 [15] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1441;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1441, 4310, @content
          , convert(datetime, '2021-01-24 18:24:50', 120), convert(datetime, '2021-01-24 18:25:04', 120));
2021-01-24 18:53:40,395 [15] DEBUG dn_lib.tools.log - salvate le note del task nel database: C:\root\todd\_test\dn\ercho.task\i.txt
2021-01-24 18:53:40,396 [15] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1441) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-24 18:53:40,402 [15] DEBUG dn_lib.tools.log - SQL: declare @cc_files int; declare @cc_folders int;
      select @cc_files = (select count(*) from dn_files where readed is null) 
      select @cc_folders = (select count(*) from dn_folders where readed is null)
      
      delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
      select @cc_files, @cc_folders;
2021-01-24 18:53:40,408 [15] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '2')
        else update users_cache set var_value = substring('2', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-01-24 18:53:40,413 [15] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '1')
        else update users_cache set var_value = substring('1', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-01-24 18:53:40,415 [15] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/01/24 18:50:34')
        else update users_cache set var_value = substring('2021/01/24 18:50:34', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-01-24 18:53:40,418 [15] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/01/24 18:53:40')
        else update users_cache set var_value = substring('2021/01/24 18:53:40', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-01-24 18:53:55,371 [8] INFO dn_lib.tools.log - reload config docs
2021-01-24 18:53:55,372 [8] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:53:55,374 [8] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:53:55,375 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:53:55,376 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:53:55,377 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:53:55,377 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:53:55,378 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:53:55,379 [8] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:53:55,379 [8] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:53:55,380 [8] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:53:55,380 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:53:55,380 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:53:55,381 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:53:55,381 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:53:55,382 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:53:55,382 [8] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:53:55,382 [8] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:53:55,383 [8] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:53:55,383 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:53:55,384 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:53:55,384 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:53:55,385 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:53:55,385 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:53:55,385 [8] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:53:55,386 [8] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 18:53:55,966 [15] INFO dn_lib.tools.log - reload config docs
2021-01-24 18:53:55,966 [15] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:53:55,968 [15] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:53:55,969 [15] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:53:55,970 [15] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:53:55,971 [15] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:53:55,972 [15] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:53:55,973 [15] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:53:55,973 [15] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:53:55,974 [15] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:53:55,975 [15] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:53:55,975 [15] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:53:55,976 [15] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:53:55,976 [15] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:53:55,977 [15] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:53:55,978 [15] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:53:55,978 [15] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:53:55,979 [15] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:53:55,979 [15] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:53:55,981 [15] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:53:55,981 [15] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:53:55,982 [15] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:53:55,982 [15] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:53:55,983 [15] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:53:55,983 [15] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:53:55,984 [15] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 18:53:55,994 [15] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-01-24 18:53:55,996 [15] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-01-24 18:53:55,998 [15] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-01-24 18:53:55,999 [15] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-01-24 18:53:56,001 [15] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-01-24 18:53:56,003 [15] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-01-24 18:53:56,003 [15] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-01-24 18:53:56,004 [15] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 18:53:56,006 [15] DEBUG dn_lib.tools.log - elenco cartelle da sincronizzare
2021-01-24 18:53:56,007 [15] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 18:53:56,008 [15] DEBUG dn_lib.tools.log -    - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-01-24 18:53:56,010 [15] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-01-24 18:53:56,022 [15] DEBUG dn_lib.tools.log - elaboro la cartella C:\root\todd\_test\dn...
2021-01-24 18:53:56,023 [15] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = 'ercho.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, 'ercho.task', 1, convert(datetime, '2021-01-24 18:50:34', 120), convert(datetime, '2021-01-24 18:50:34', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-24 18:50:34', 120), dt_upd = convert(datetime, '2021-01-24 18:50:34', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 18:50:34', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 18:50:34', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-24 18:53:56,028 [15] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1825 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, 1825, null, left('ercho', 150)
            , NULL, convert(datetime, '2021-01-24 18:50:34', 120), convert(datetime, '2021-01-24 18:50:34', 120), 1
            , 'in_corso', NULL, NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-24 18:50:34', 120), dt_upd = convert(datetime, '2021-01-24 18:50:34', 120)
         , title = left('ercho', 150), [user] = NULL
         , stato = 'in_corso', priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 18:50:34', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-01-24 18:50:34', 120), getdate())
          or isnull(title, '') <> isnull('ercho', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('in_corso', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-24 18:53:56,035 [15] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1825 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1825, 'i.txt', '.txt', 1, convert(datetime, '2021-01-24 18:24:50', 120), convert(datetime, '2021-01-24 18:25:04', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-24 18:24:50', 120), dt_upd = convert(datetime, '2021-01-24 18:25:04', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 18:24:50', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 18:25:04', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-24 18:53:56,040 [15] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1441) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-24 18:53:56,047 [15] DEBUG dn_lib.tools.log - SQL: declare @cc_files int; declare @cc_folders int;
      select @cc_files = (select count(*) from dn_files where readed is null) 
      select @cc_folders = (select count(*) from dn_folders where readed is null)
      
      delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
      select @cc_files, @cc_folders;
2021-01-24 18:53:56,055 [15] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '2')
        else update users_cache set var_value = substring('2', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-01-24 18:53:56,059 [15] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '1')
        else update users_cache set var_value = substring('1', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-01-24 18:53:56,062 [15] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/01/24 18:50:34')
        else update users_cache set var_value = substring('2021/01/24 18:50:34', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-01-24 18:53:56,065 [15] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/01/24 18:53:56')
        else update users_cache set var_value = substring('2021/01/24 18:53:56', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-01-24 18:54:07,743 [16] INFO dn_lib.tools.log - reload config docs
2021-01-24 18:54:07,744 [16] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:54:07,746 [16] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:54:07,747 [16] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:54:07,748 [16] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:54:07,749 [16] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:54:07,749 [16] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:54:07,750 [16] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:54:07,751 [16] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:54:07,752 [16] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:54:07,752 [16] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:54:07,753 [16] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:54:07,753 [16] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:54:07,754 [16] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:54:07,755 [16] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:54:07,756 [16] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:54:07,756 [16] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:54:07,757 [16] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:54:07,758 [16] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:54:07,758 [16] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:54:07,759 [16] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:54:07,760 [16] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:54:07,760 [16] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:54:07,761 [16] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:54:07,761 [16] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:54:07,762 [16] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 18:54:07,783 [13] INFO dn_lib.tools.log - reload config docs
2021-01-24 18:54:07,784 [13] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:54:07,785 [13] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:54:07,786 [13] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:54:07,786 [13] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:54:07,787 [13] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:54:07,789 [13] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:54:07,790 [13] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:54:07,790 [13] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:54:07,791 [13] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:54:07,792 [13] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:54:07,793 [13] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:54:07,793 [13] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:54:07,794 [13] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:54:07,794 [13] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:54:07,795 [13] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:54:07,796 [13] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:54:07,797 [13] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:54:07,798 [13] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:54:07,798 [13] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:54:07,799 [13] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:54:07,799 [13] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:54:07,800 [13] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:54:07,801 [13] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:54:07,801 [13] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:54:07,802 [13] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 18:54:07,823 [12] INFO dn_lib.tools.log - reload config docs
2021-01-24 18:54:07,825 [12] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:54:07,825 [12] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:54:07,826 [12] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:54:07,827 [12] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:54:07,828 [12] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:54:07,828 [12] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:54:07,829 [12] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:54:07,830 [12] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:54:07,830 [12] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:54:07,831 [12] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:54:07,832 [12] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:54:07,833 [12] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:54:07,834 [12] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:54:07,835 [12] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:54:07,835 [12] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:54:07,836 [12] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:54:07,836 [12] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:54:07,837 [12] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:54:07,838 [12] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:54:07,839 [12] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:54:07,839 [12] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:54:07,840 [12] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:54:07,841 [12] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:54:07,841 [12] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:54:07,842 [12] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 18:54:07,851 [12] DEBUG dn_lib.tools.log - SQL: select task_filter_id, filter_title, filter_notes, filter_def, filter_class
 from dn_tasks_filters order by filter_order
2021-01-24 18:54:07,854 [12] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 0 and var_name in ('active-task-filter')
2021-01-24 18:54:07,859 [12] DEBUG dn_lib.tools.log - SQL: select ft.tp, ft.synch_folder_id, ft.folder_id, ft.parent_id, ft.title
       , ft.des, ft.http_path, ft.lvl, dbo.folder_path(ft.folder_id) as folder_path
       , (select top 1 1 from dn_tasks where folder_id = ft.folder_id) as is_task
      from dbo.fnc_dn_folders(null, null) ft
      
      order by ft.synch_folder_id, ft.lvl, ft.title
2021-01-24 18:54:07,869 [12] DEBUG dn_lib.tools.log - SQL: select f.synch_folder_id, f.file_id, f.folder_id, f.file_name, f.dt_ins , null as found_file
       from dn_files f
       where exists (select top 1 1 from dbo.fnc_dn_folders(null, null) ft 
        
	      where ft.synch_folder_id = f.synch_folder_id 
          and isnull(ft.folder_id, 0) = isnull(f.folder_id, 0))
2021-01-24 18:54:07,879 [12] DEBUG dn_lib.tools.log - SQL: select t3.*
      , tst.stato, tst.[order] as stato_order, isnull(tst.class, 'light') as stato_class, isnull(tst.title_plurale, '') as stato_title_plurale, isnull(tst.title_singolare, '') as stato_title_singolare
      , tp.priorita, tp.[order] as priorita_order, isnull(tp.class, 'light') as priorita_class, isnull(tp.title_plurale, '') as priorita_title_plurale, isnull(tp.title_singolare, '') as priorita_title_singolare
      , tt.tipo, tt.[order] as tipo_order, isnull(tt.class, 'light') as tipo_class, isnull(tt.title_plurale, '') as tipo_title_plurale, isnull(tt.title_singolare, '') as tipo_title_singolare
      , ts.stima, ts.[days] as stima_days, isnull(ts.class, 'light') as stima_class, isnull(ts.title_plurale, '') as stima_title_plurale, isnull(ts.title_singolare, '') as stima_title_singolare
      , (select top 1 1 from dn_tasks_notes where task_id = t3.task_id) as task_notes
      , (select top 1 1 from vw_task_allegati f2 where f2.task_id = t3.task_id 
          and not exists (select top 1 1 from dn_files_info where file_name = f2.file_name)) as task_files
  from (select t2.*, datediff(day, t2.dt_ref, getdate()) as diff_days
    from (select t.task_id, t.synch_folder_id, isnull(t.folder_id, f.folder_id) as folder_id
	   , t.file_id, t.title, t.[user], t.stato, t.priorita, t.tipo, t.stima, t.dt_ins, t.dt_upd
     , (case when t.dt_ins > t.dt_upd then t.dt_ins else t.dt_upd end) as dt_ref
	  from dn_tasks t
    
	  left join dn_files f on f.file_id = t.file_id
    where (null is null or (null is not null and t.task_id = null)) ) t2
    where exists (select top 1 1 from dbo.fnc_dn_folders(null, null) ft 
	    where  ft.synch_folder_id = t2.synch_folder_id 
       and isnull(ft.folder_id, 0) = isnull(t2.folder_id, 0))) t3
   left join dn_task_stato tst on tst.stato = t3.stato
   left join dn_task_priorita tp on tp.priorita = t3.priorita
   left join dn_task_tipo tt on tt.tipo = t3.tipo
   left join dn_task_stima ts on ts.stima = t3.stima
   where 1 = 1 
2021-01-24 18:54:07,904 [12] DEBUG dn_lib.tools.log - SQL: select title_singolare, stato from dn_task_stato order by [order]
2021-01-24 18:54:07,918 [12] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, priorita as [value], [order] from dn_task_priorita
      ) t order by t.[order]
2021-01-24 18:54:07,926 [12] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [days]
       union select title_singolare as title, stima as [value], [days] from dn_task_stima 
       ) t order by t.[days]
2021-01-24 18:54:07,928 [12] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, tipo as [value], [order] from dn_task_tipo
       ) t order by t.[order]
2021-01-24 18:54:07,930 [12] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value]
       union select nome as title, nome as [value] from users
       ) t order by 2
2021-01-24 18:54:12,483 [7] INFO dn_lib.tools.log - reload config docs
2021-01-24 18:54:12,485 [7] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:54:12,486 [7] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:54:12,487 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:54:12,487 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:54:12,488 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:54:12,489 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:54:12,489 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:54:12,490 [7] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:54:12,491 [7] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:54:12,492 [7] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:54:12,492 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:54:12,493 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:54:12,494 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:54:12,494 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:54:12,495 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:54:12,495 [7] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:54:12,496 [7] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:54:12,497 [7] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:54:12,497 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:54:12,498 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:54:12,499 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:54:12,499 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:54:12,499 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:54:12,500 [7] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:54:12,501 [7] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 18:54:12,513 [7] DEBUG dn_lib.tools.log - SQL: select content from dn_tasks_notes 
       where task_id = 1441
2021-01-24 18:54:12,525 [7] DEBUG dn_lib.tools.log - SQL: select a.file_id, a.file_name, a.extension, a.http_path , null as found_file       
       , (select top 1 1 from dn_tasks where task_id = a.task_id and file_id = a.file_id) as file_task
      from vw_task_allegati a
      where a.task_id = 1441
2021-01-24 18:54:55,822 [12] INFO dn_lib.tools.log - reload config docs
2021-01-24 18:54:55,823 [12] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:54:55,826 [12] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:54:55,826 [12] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:54:55,828 [12] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:54:55,829 [12] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:54:55,829 [12] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:54:55,831 [12] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:54:55,832 [12] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:54:55,833 [12] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:54:55,833 [12] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:54:55,834 [12] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:54:55,835 [12] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:54:55,835 [12] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:54:55,836 [12] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:54:55,837 [12] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:54:55,837 [12] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:54:55,838 [12] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:54:55,838 [12] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:54:55,839 [12] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:54:55,839 [12] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:54:55,840 [12] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:54:55,840 [12] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:54:55,841 [12] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:54:55,841 [12] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:54:55,842 [12] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 18:54:55,855 [7] INFO dn_lib.tools.log - reload config docs
2021-01-24 18:54:55,856 [7] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:54:55,857 [7] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:54:55,857 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:54:55,858 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:54:55,859 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:54:55,860 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:54:55,860 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:54:55,861 [7] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:54:55,861 [7] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:54:55,862 [7] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:54:55,862 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:54:55,862 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:54:55,863 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:54:55,863 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:54:55,863 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:54:55,864 [7] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:54:55,865 [7] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:54:55,866 [7] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:54:55,866 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:54:55,867 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:54:55,867 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:54:55,868 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:54:55,868 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:54:55,868 [7] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:54:55,869 [7] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 18:54:55,881 [10] INFO dn_lib.tools.log - reload config docs
2021-01-24 18:54:55,882 [10] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:54:55,882 [10] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:54:55,884 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:54:55,884 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:54:55,885 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:54:55,885 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:54:55,885 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:54:55,885 [10] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:54:55,885 [10] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:54:55,886 [10] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:54:55,886 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:54:55,887 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:54:55,887 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:54:55,887 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:54:55,888 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:54:55,888 [10] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:54:55,888 [10] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:54:55,889 [10] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:54:55,889 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:54:55,889 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:54:55,890 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:54:55,890 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:54:55,890 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:54:55,891 [10] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:54:55,891 [10] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 18:54:56,476 [16] INFO dn_lib.tools.log - reload config docs
2021-01-24 18:54:56,477 [16] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:54:56,478 [16] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:54:56,478 [16] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:54:56,479 [16] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:54:56,480 [16] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:54:56,481 [16] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:54:56,482 [16] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:54:56,483 [16] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:54:56,483 [16] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:54:56,484 [16] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:54:56,484 [16] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:54:56,485 [16] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:54:56,485 [16] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:54:56,487 [16] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:54:56,487 [16] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:54:56,488 [16] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:54:56,488 [16] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:54:56,489 [16] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:54:56,489 [16] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:54:56,490 [16] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:54:56,490 [16] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:54:56,491 [16] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:54:56,491 [16] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:54:56,492 [16] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:54:56,493 [16] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 18:54:56,502 [16] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-01-24 18:54:56,505 [16] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-01-24 18:54:56,507 [16] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-01-24 18:54:56,508 [16] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-01-24 18:54:56,509 [16] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-01-24 18:54:56,511 [16] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-01-24 18:54:56,513 [16] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-01-24 18:54:56,514 [16] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 18:54:56,516 [16] DEBUG dn_lib.tools.log - elenco cartelle da sincronizzare
2021-01-24 18:54:56,517 [16] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 18:54:56,518 [16] DEBUG dn_lib.tools.log -    - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-01-24 18:54:56,519 [16] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-01-24 18:54:56,531 [16] DEBUG dn_lib.tools.log - elaboro la cartella C:\root\todd\_test\dn...
2021-01-24 18:54:56,532 [16] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = '20210102.porc.ok.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, '20210102.porc.ok.task', 1, convert(datetime, '2021-01-24 18:54:28', 120), convert(datetime, '2021-01-24 18:54:28', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-24 18:54:28', 120), dt_upd = convert(datetime, '2021-01-24 18:54:28', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 18:54:28', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 18:54:28', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-24 18:54:56,536 [16] DEBUG dn_lib.tools.log - aggiunto folder al database: C:\root\todd\_test\dn\20210102.porc.ok.task
2021-01-24 18:54:56,543 [16] DEBUG dn_lib.tools.log - rinominato folder: C:\root\todd\_test\dn\20210102.porc.ok.task, in: C:\root\todd\_test\dn\porc.task
2021-01-24 18:54:56,544 [16] DEBUG dn_lib.tools.log - SQL: update dn_folders set folder_name = 'porc.task', dt_upd = convert(datetime, convert(varchar, getdate(), 120), 120)
        where folder_id = 1826
2021-01-24 18:54:56,551 [16] DEBUG dn_lib.tools.log - salvato index doc: C:\root\todd\_test\dn\porc.task\__i.xml
2021-01-24 18:54:56,552 [16] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1826 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, 1826, null, left('porc', 150)
            , NULL, convert(datetime, '2021-01-02 00:00:00', 120), convert(datetime, '2021-01-24 18:54:28', 120), 1
            , 'fatto', NULL, NULL, NULL, convert(datetime, '2021-01-24 18:54:56', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-02 00:00:00', 120), dt_upd = convert(datetime, '2021-01-24 18:54:28', 120)
         , title = left('porc', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = convert(datetime, '2021-01-24 18:54:56', 120)
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-02 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-01-24 18:54:28', 120), getdate())
          or isnull(title, '') <> isnull('porc', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-24 18:54:56,559 [16] DEBUG dn_lib.tools.log - aggiunto task al database: porc
2021-01-24 18:54:56,559 [16] ERROR dn_lib.tools.log - Impossibile trovare una parte del percorso 'C:\root\todd\_test\dn\20210102.porc.ok.task'.
2021-01-24 18:54:56,560 [16] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = 'ercho.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, 'ercho.task', 1, convert(datetime, '2021-01-24 18:50:34', 120), convert(datetime, '2021-01-24 18:50:34', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-24 18:50:34', 120), dt_upd = convert(datetime, '2021-01-24 18:50:34', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 18:50:34', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 18:50:34', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-24 18:54:56,565 [16] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1825 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, 1825, null, left('ercho', 150)
            , NULL, convert(datetime, '2021-01-24 18:50:34', 120), convert(datetime, '2021-01-24 18:50:34', 120), 1
            , 'in_corso', NULL, NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-24 18:50:34', 120), dt_upd = convert(datetime, '2021-01-24 18:50:34', 120)
         , title = left('ercho', 150), [user] = NULL
         , stato = 'in_corso', priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 18:50:34', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-01-24 18:50:34', 120), getdate())
          or isnull(title, '') <> isnull('ercho', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('in_corso', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-24 18:54:56,570 [16] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1825 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1825, 'i.txt', '.txt', 1, convert(datetime, '2021-01-24 18:24:50', 120), convert(datetime, '2021-01-24 18:25:04', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-24 18:24:50', 120), dt_upd = convert(datetime, '2021-01-24 18:25:04', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 18:24:50', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 18:25:04', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-24 18:54:56,576 [16] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1441) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-24 18:54:56,582 [16] DEBUG dn_lib.tools.log - SQL: declare @cc_files int; declare @cc_folders int;
      select @cc_files = (select count(*) from dn_files where readed is null) 
      select @cc_folders = (select count(*) from dn_folders where readed is null)
      
      delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
      select @cc_files, @cc_folders;
2021-01-24 18:54:56,587 [16] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '2')
        else update users_cache set var_value = substring('2', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-01-24 18:54:56,591 [16] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '2')
        else update users_cache set var_value = substring('2', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-01-24 18:54:56,595 [16] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/01/24 18:54:28')
        else update users_cache set var_value = substring('2021/01/24 18:54:28', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-01-24 18:54:56,598 [16] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/01/24 18:54:56')
        else update users_cache set var_value = substring('2021/01/24 18:54:56', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-01-24 18:55:05,077 [5] INFO dn_lib.tools.log - reload config docs
2021-01-24 18:55:05,078 [5] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:55:05,079 [5] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:55:05,080 [5] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:55:05,081 [5] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:55:05,082 [5] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:55:05,083 [5] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:55:05,084 [5] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:55:05,084 [5] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:55:05,085 [5] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:55:05,086 [5] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:55:05,087 [5] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:55:05,087 [5] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:55:05,088 [5] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:55:05,089 [5] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:55:05,090 [5] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:55:05,090 [5] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:55:05,090 [5] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:55:05,091 [5] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:55:05,092 [5] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:55:05,092 [5] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:55:05,093 [5] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:55:05,094 [5] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:55:05,094 [5] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:55:05,095 [5] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:55:05,097 [5] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 18:55:05,674 [15] INFO dn_lib.tools.log - reload config docs
2021-01-24 18:55:05,675 [15] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:55:05,677 [15] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:55:05,678 [15] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:55:05,679 [15] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:55:05,680 [15] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:55:05,681 [15] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:55:05,682 [15] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:55:05,682 [15] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:55:05,682 [15] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:55:05,683 [15] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:55:05,683 [15] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:55:05,684 [15] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:55:05,684 [15] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:55:05,685 [15] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:55:05,686 [15] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:55:05,686 [15] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:55:05,687 [15] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:55:05,688 [15] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:55:05,688 [15] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:55:05,689 [15] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:55:05,689 [15] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:55:05,690 [15] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:55:05,690 [15] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:55:05,691 [15] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:55:05,692 [15] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 18:55:05,703 [15] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-01-24 18:55:05,706 [15] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-01-24 18:55:05,708 [15] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-01-24 18:55:05,710 [15] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-01-24 18:55:05,711 [15] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-01-24 18:55:05,713 [15] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-01-24 18:55:05,714 [15] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-01-24 18:55:05,715 [15] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 18:55:05,718 [15] DEBUG dn_lib.tools.log - elenco cartelle da sincronizzare
2021-01-24 18:55:05,719 [15] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 18:55:05,719 [15] DEBUG dn_lib.tools.log -    - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-01-24 18:55:05,721 [15] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-01-24 18:55:05,732 [15] DEBUG dn_lib.tools.log - elaboro la cartella C:\root\todd\_test\dn...
2021-01-24 18:55:05,733 [15] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = 'ercho.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, 'ercho.task', 1, convert(datetime, '2021-01-24 18:50:34', 120), convert(datetime, '2021-01-24 18:50:34', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-24 18:50:34', 120), dt_upd = convert(datetime, '2021-01-24 18:50:34', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 18:50:34', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 18:50:34', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-24 18:55:05,739 [15] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1825 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, 1825, null, left('ercho', 150)
            , NULL, convert(datetime, '2021-01-24 18:50:34', 120), convert(datetime, '2021-01-24 18:50:34', 120), 1
            , 'in_corso', NULL, NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-24 18:50:34', 120), dt_upd = convert(datetime, '2021-01-24 18:50:34', 120)
         , title = left('ercho', 150), [user] = NULL
         , stato = 'in_corso', priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 18:50:34', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-01-24 18:50:34', 120), getdate())
          or isnull(title, '') <> isnull('ercho', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('in_corso', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-24 18:55:05,746 [15] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1825 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1825, 'i.txt', '.txt', 1, convert(datetime, '2021-01-24 18:24:50', 120), convert(datetime, '2021-01-24 18:25:04', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-24 18:24:50', 120), dt_upd = convert(datetime, '2021-01-24 18:25:04', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 18:24:50', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 18:25:04', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-24 18:55:05,752 [15] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1441) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-24 18:55:05,758 [15] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = 'porc.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, 'porc.task', 1, convert(datetime, '2021-01-24 18:54:28', 120), convert(datetime, '2021-01-24 18:54:56', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-24 18:54:28', 120), dt_upd = convert(datetime, '2021-01-24 18:54:56', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 18:54:28', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 18:54:56', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-24 18:55:05,763 [15] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1826 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, 1826, null, left('porc', 150)
            , NULL, convert(datetime, '2021-01-24 18:54:28', 120), convert(datetime, '2021-01-24 18:54:56', 120), 1
            , 'fatto', NULL, NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-24 18:54:28', 120), dt_upd = convert(datetime, '2021-01-24 18:54:56', 120)
         , title = left('porc', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 18:54:28', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-01-24 18:54:56', 120), getdate())
          or isnull(title, '') <> isnull('porc', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-24 18:55:05,769 [15] DEBUG dn_lib.tools.log - aggiornato task nel database: porc
2021-01-24 18:55:05,770 [15] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1442) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-24 18:55:05,775 [15] DEBUG dn_lib.tools.log - SQL: declare @cc_files int; declare @cc_folders int;
      select @cc_files = (select count(*) from dn_files where readed is null) 
      select @cc_folders = (select count(*) from dn_folders where readed is null)
      
      delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
      select @cc_files, @cc_folders;
2021-01-24 18:55:05,781 [15] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '3')
        else update users_cache set var_value = substring('3', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-01-24 18:55:05,785 [15] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '2')
        else update users_cache set var_value = substring('2', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-01-24 18:55:05,788 [15] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/01/24 18:54:56')
        else update users_cache set var_value = substring('2021/01/24 18:54:56', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-01-24 18:55:05,791 [15] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/01/24 18:55:05')
        else update users_cache set var_value = substring('2021/01/24 18:55:05', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-01-24 18:55:08,829 [15] INFO dn_lib.tools.log - reload config docs
2021-01-24 18:55:08,830 [15] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:55:08,832 [15] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:55:08,832 [15] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:55:08,833 [15] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:55:08,834 [15] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:55:08,834 [15] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:55:08,835 [15] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:55:08,836 [15] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:55:08,836 [15] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:55:08,836 [15] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:55:08,837 [15] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:55:08,838 [15] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:55:08,838 [15] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:55:08,839 [15] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:55:08,839 [15] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:55:08,840 [15] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:55:08,840 [15] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:55:08,841 [15] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:55:08,842 [15] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:55:08,843 [15] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:55:08,844 [15] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:55:08,844 [15] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:55:08,846 [15] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:55:08,847 [15] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:55:08,847 [15] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 18:55:09,412 [10] INFO dn_lib.tools.log - reload config docs
2021-01-24 18:55:09,413 [10] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:55:09,414 [10] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:55:09,415 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:55:09,416 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:55:09,416 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:55:09,417 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:55:09,418 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:55:09,419 [10] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:55:09,419 [10] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:55:09,420 [10] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:55:09,420 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:55:09,421 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:55:09,421 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:55:09,422 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:55:09,423 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:55:09,423 [10] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:55:09,424 [10] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-24 18:55:09,424 [10] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-24 18:55:09,425 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-24 18:55:09,426 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-24 18:55:09,426 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-24 18:55:09,427 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-24 18:55:09,427 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-24 18:55:09,428 [10] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-24 18:55:09,429 [10] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-24 18:55:09,439 [10] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-01-24 18:55:09,440 [10] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-01-24 18:55:09,441 [10] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-01-24 18:55:09,442 [10] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-01-24 18:55:09,443 [10] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-01-24 18:55:09,444 [10] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-01-24 18:55:09,445 [10] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-01-24 18:55:09,445 [10] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 18:55:09,446 [10] DEBUG dn_lib.tools.log - elenco cartelle da sincronizzare
2021-01-24 18:55:09,447 [10] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-24 18:55:09,448 [10] DEBUG dn_lib.tools.log -    - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-01-24 18:55:09,449 [10] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-01-24 18:55:09,459 [10] DEBUG dn_lib.tools.log - elaboro la cartella C:\root\todd\_test\dn...
2021-01-24 18:55:09,460 [10] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = 'ercho.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, 'ercho.task', 1, convert(datetime, '2021-01-24 18:50:34', 120), convert(datetime, '2021-01-24 18:50:34', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-24 18:50:34', 120), dt_upd = convert(datetime, '2021-01-24 18:50:34', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 18:50:34', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 18:50:34', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-24 18:55:09,462 [10] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1825 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, 1825, null, left('ercho', 150)
            , NULL, convert(datetime, '2021-01-24 18:50:34', 120), convert(datetime, '2021-01-24 18:50:34', 120), 1
            , 'in_corso', NULL, NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-24 18:50:34', 120), dt_upd = convert(datetime, '2021-01-24 18:50:34', 120)
         , title = left('ercho', 150), [user] = NULL
         , stato = 'in_corso', priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 18:50:34', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-01-24 18:50:34', 120), getdate())
          or isnull(title, '') <> isnull('ercho', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('in_corso', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-24 18:55:09,464 [10] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1825 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1825, 'i.txt', '.txt', 1, convert(datetime, '2021-01-24 18:24:50', 120), convert(datetime, '2021-01-24 18:25:04', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-24 18:24:50', 120), dt_upd = convert(datetime, '2021-01-24 18:25:04', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 18:24:50', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 18:25:04', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-24 18:55:09,466 [10] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1441) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-24 18:55:09,467 [10] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = 'porc.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, 'porc.task', 1, convert(datetime, '2021-01-24 18:54:28', 120), convert(datetime, '2021-01-24 18:54:56', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-24 18:54:28', 120), dt_upd = convert(datetime, '2021-01-24 18:54:56', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 18:54:28', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-24 18:54:56', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-24 18:55:09,468 [10] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1826 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, 1826, null, left('porc', 150)
            , NULL, convert(datetime, '2021-01-24 18:54:28', 120), convert(datetime, '2021-01-24 18:54:56', 120), 1
            , 'fatto', NULL, NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-24 18:54:28', 120), dt_upd = convert(datetime, '2021-01-24 18:54:56', 120)
         , title = left('porc', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-24 18:54:28', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-01-24 18:54:56', 120), getdate())
          or isnull(title, '') <> isnull('porc', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-24 18:55:09,469 [10] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1442) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-24 18:55:09,470 [10] DEBUG dn_lib.tools.log - SQL: declare @cc_files int; declare @cc_folders int;
      select @cc_files = (select count(*) from dn_files where readed is null) 
      select @cc_folders = (select count(*) from dn_folders where readed is null)
      
      delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
      select @cc_files, @cc_folders;
2021-01-24 18:55:09,471 [10] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '3')
        else update users_cache set var_value = substring('3', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-01-24 18:55:09,473 [10] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '2')
        else update users_cache set var_value = substring('2', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-01-24 18:55:09,473 [10] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/01/24 18:54:56')
        else update users_cache set var_value = substring('2021/01/24 18:54:56', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-01-24 18:55:09,474 [10] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/01/24 18:55:09')
        else update users_cache set var_value = substring('2021/01/24 18:55:09', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
