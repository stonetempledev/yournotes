2021-02-07 17:34:35,487 [9] INFO dn_lib.tools.log - reload core
2021-02-07 17:34:35,532 [9] INFO dn_lib.tools.log - reload config docs
2021-02-07 17:34:35,534 [9] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:34:35,543 [9] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:34:35,552 [9] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:34:35,554 [9] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:34:35,556 [9] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:34:35,568 [9] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:34:35,569 [9] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:34:35,571 [9] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:34:35,578 [9] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:34:35,580 [9] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:34:35,581 [9] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:34:35,581 [9] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:34:35,584 [9] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:34:35,584 [9] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:34:35,585 [9] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:34:35,586 [9] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:34:35,586 [9] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:34:35,593 [9] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:34:35,595 [9] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:34:35,596 [9] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:34:35,597 [9] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:34:35,599 [9] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:34:35,601 [9] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:34:35,601 [9] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:34:35,603 [9] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 17:34:35,629 [9] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 17:34:35,646 [9] DEBUG dn_lib.tools.log - SQL: 
 update clients set session_id = '203xpfiwgx3pxihudetktwje', dt_session_id = getdate() where client_key = 'CD54BC0E46CF621374E9';
 select top 1 1 from clients where client_key = 'CD54BC0E46CF621374E9' 
  and datediff(second, dt_refresh, getdate()) < interval_ss + 5;
2021-02-07 17:34:35,663 [7] INFO dn_lib.tools.log - reload config docs
2021-02-07 17:34:35,664 [7] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:34:35,665 [7] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:34:35,666 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:34:35,667 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:34:35,668 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:34:35,668 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:34:35,669 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:34:35,670 [7] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:34:35,670 [7] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:34:35,671 [7] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:34:35,671 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:34:35,672 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:34:35,672 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:34:35,673 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:34:35,673 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:34:35,674 [7] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:34:35,674 [7] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:34:35,674 [7] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:34:35,675 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:34:35,675 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:34:35,676 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:34:35,676 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:34:35,677 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:34:35,677 [7] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:34:35,678 [7] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 17:34:35,683 [7] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 17:34:35,684 [7] DEBUG dn_lib.tools.log - SQL: 
 update clients set session_id = '203xpfiwgx3pxihudetktwje', dt_session_id = getdate() where client_key = 'CD54BC0E46CF621374E9';
 select top 1 1 from clients where client_key = 'CD54BC0E46CF621374E9' 
  and datediff(second, dt_refresh, getdate()) < interval_ss + 5;
2021-02-07 17:34:35,709 [8] INFO dn_lib.tools.log - reload config docs
2021-02-07 17:34:35,709 [8] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:34:35,710 [8] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:34:35,711 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:34:35,712 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:34:35,713 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:34:35,713 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:34:35,714 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:34:35,715 [8] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:34:35,716 [8] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:34:35,716 [8] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:34:35,717 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:34:35,717 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:34:35,718 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:34:35,718 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:34:35,718 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:34:35,719 [8] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:34:35,719 [8] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:34:35,720 [8] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:34:35,720 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:34:35,721 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:34:35,721 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:34:35,722 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:34:35,723 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:34:35,723 [8] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:34:35,735 [8] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 17:34:35,742 [8] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 17:34:35,743 [8] DEBUG dn_lib.tools.log - SQL: 
 update clients set session_id = '203xpfiwgx3pxihudetktwje', dt_session_id = getdate() where client_key = 'CD54BC0E46CF621374E9';
 select top 1 1 from clients where client_key = 'CD54BC0E46CF621374E9' 
  and datediff(second, dt_refresh, getdate()) < interval_ss + 5;
2021-02-07 17:34:35,755 [8] DEBUG dn_lib.tools.log - SQL: select task_filter_id, filter_title, filter_notes, filter_def, filter_class
 from dn_tasks_filters order by filter_order
2021-02-07 17:34:35,759 [8] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 17:34:35,761 [8] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 17:34:35,762 [8] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 17:34:35,764 [8] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 17:34:35,765 [8] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 17:34:35,766 [8] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 17:34:35,770 [8] DEBUG dn_lib.tools.log - SQL: select ft.tp, ft.synch_folder_id, ft.folder_id, ft.parent_id, ft.title
       , ft.des, ft.http_path, ft.lvl, dbo.folder_path(ft.folder_id) as folder_path
       , (select top 1 1 from dn_tasks where folder_id = ft.folder_id) as is_task
      from dbo.fnc_dn_folders(null, null) ft
      
      order by ft.synch_folder_id, ft.lvl, ft.title
2021-02-07 17:34:35,783 [8] DEBUG dn_lib.tools.log - SQL: select f.synch_folder_id, f.file_id, f.folder_id, f.file_name, f.dt_ins , null as found_file
       from dn_files f
       where exists (select top 1 1 from dbo.fnc_dn_folders(null, null) ft 
        
	      where ft.synch_folder_id = f.synch_folder_id 
          and isnull(ft.folder_id, 0) = isnull(f.folder_id, 0))
2021-02-07 17:34:35,795 [8] DEBUG dn_lib.tools.log - SQL: select t3.*
      , tst.stato, tst.[order] as stato_order, isnull(tst.class, 'light') as stato_class, isnull(tst.title_plurale, '') as stato_title_plurale, isnull(tst.title_singolare, '') as stato_title_singolare
      , tp.priorita, tp.[order] as priorita_order, isnull(tp.class, 'light') as priorita_class, isnull(tp.title_plurale, '') as priorita_title_plurale, isnull(tp.title_singolare, '') as priorita_title_singolare
      , tt.tipo, tt.[order] as tipo_order, isnull(tt.class, 'light') as tipo_class, isnull(tt.title_plurale, '') as tipo_title_plurale, isnull(tt.title_singolare, '') as tipo_title_singolare
      , ts.stima, ts.[days] as stima_days, isnull(ts.class, 'light') as stima_class, isnull(ts.title_plurale, '') as stima_title_plurale, isnull(ts.title_singolare, '') as stima_title_singolare
      , (select top 1 1 from dn_tasks_notes where task_id = t3.task_id) as task_notes
      , (select top 1 1 from vw_task_allegati f2 where f2.task_id = t3.task_id 
          and not exists (select top 1 1 from dn_files_info where file_name = f2.file_name)) as task_files
  from (select t2.*, datediff(day, t2.dt_ref, getdate()) as diff_days
    from (select t.task_id, t.synch_folder_id, isnull(t.folder_id, f.folder_id) as folder_id
	   , t.file_id, t.title, t.[user], t.stato, t.priorita, t.tipo, t.stima, t.dt_ins, t.dt_upd
     , (case when t.dt_ins > t.dt_upd then t.dt_ins else t.dt_upd end) as dt_ref
	  from dn_tasks t
    
	  left join dn_files f on f.file_id = t.file_id
    where (null is null or (null is not null and t.task_id = null)) ) t2
    where exists (select top 1 1 from dbo.fnc_dn_folders(null, null) ft 
	    where  ft.synch_folder_id = t2.synch_folder_id 
       and isnull(ft.folder_id, 0) = isnull(t2.folder_id, 0))) t3
   left join dn_task_stato tst on tst.stato = t3.stato
   left join dn_task_priorita tp on tp.priorita = t3.priorita
   left join dn_task_tipo tt on tt.tipo = t3.tipo
   left join dn_task_stima ts on ts.stima = t3.stima
   where 1 = 1  and t3.stato = 'in_corso' or t3.diff_days <= 14
2021-02-07 17:34:35,827 [8] DEBUG dn_lib.tools.log - SQL: select title_singolare, stato from dn_task_stato order by [order]
2021-02-07 17:34:35,843 [8] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, priorita as [value], [order] from dn_task_priorita
      ) t order by t.[order]
2021-02-07 17:34:35,930 [8] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [days]
       union select title_singolare as title, stima as [value], [days] from dn_task_stima 
       ) t order by t.[days]
2021-02-07 17:34:35,933 [8] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, tipo as [value], [order] from dn_task_tipo
       ) t order by t.[order]
2021-02-07 17:34:35,935 [8] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value]
       union select nome as title, nome as [value] from users
       ) t order by 2
2021-02-07 17:34:56,892 [8] INFO dn_lib.tools.log - reload config docs
2021-02-07 17:34:56,893 [8] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:34:56,894 [8] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:34:56,895 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:34:56,895 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:34:56,896 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:34:56,897 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:34:56,898 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:34:56,899 [8] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:34:56,899 [8] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:34:56,900 [8] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:34:56,901 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:34:56,901 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:34:56,902 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:34:56,903 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:34:56,903 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:34:56,904 [8] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:34:56,904 [8] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:34:56,905 [8] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:34:56,905 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:34:56,906 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:34:56,906 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:34:56,907 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:34:56,907 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:34:56,908 [8] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:34:56,908 [8] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 17:34:56,911 [8] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 17:34:56,913 [8] DEBUG dn_lib.tools.log - SQL: 
 update clients set session_id = '203xpfiwgx3pxihudetktwje', dt_session_id = getdate() where client_key = 'CD54BC0E46CF621374E9';
 select top 1 1 from clients where client_key = 'CD54BC0E46CF621374E9' 
  and datediff(second, dt_refresh, getdate()) < interval_ss + 5;
2021-02-07 17:34:56,962 [8] DEBUG dn_lib.tools.log - SQL: select content from dn_tasks_notes 
       where task_id = 1441
2021-02-07 17:34:56,965 [8] DEBUG dn_lib.tools.log - SQL: select a.file_id, a.file_name, a.extension, a.http_path , null as found_file       
       , (select top 1 1 from dn_tasks where task_id = a.task_id and file_id = a.file_id) as file_task
      from vw_task_allegati a
      where a.task_id = 1441
2021-02-07 17:35:03,379 [8] INFO dn_lib.tools.log - reload config docs
2021-02-07 17:35:03,380 [8] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:35:03,381 [8] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:35:03,381 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:35:03,382 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:35:03,383 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:35:03,383 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:35:03,384 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:35:03,384 [8] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:35:03,385 [8] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:35:03,385 [8] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:35:03,385 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:35:03,386 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:35:03,386 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:35:03,387 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:35:03,387 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:35:03,387 [8] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:35:03,388 [8] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:35:03,388 [8] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:35:03,389 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:35:03,389 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:35:03,390 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:35:03,390 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:35:03,391 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:35:03,391 [8] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:35:03,392 [8] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 17:35:03,393 [8] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 17:35:03,393 [8] DEBUG dn_lib.tools.log - SQL: 
 update clients set session_id = '203xpfiwgx3pxihudetktwje', dt_session_id = getdate() where client_key = 'CD54BC0E46CF621374E9';
 select top 1 1 from clients where client_key = 'CD54BC0E46CF621374E9' 
  and datediff(second, dt_refresh, getdate()) < interval_ss + 5;
2021-02-07 17:35:03,393 [8] DEBUG dn_lib.tools.log - SQL: select t.task_id, t.synch_folder_id, t.folder_id, t.file_id, t.title, t.dt_upd, t.dt_readed, sf.local_path as synch_local_path
		    , replace(dbo.folder_path(isnull(t.folder_id, f.folder_id)), '/', '\') as folder_path, f.file_id as file_notes_id, f.file_name
       from dn_tasks t
       join synch_folders sf on sf.synch_folder_id = t.synch_folder_id
       left join dn_files f on f.file_id = t.file_id
	   where t.task_id = 1441
2021-02-07 17:35:03,409 [8] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1825 and file_name = 'deepalist.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1825, 'deepalist.txt', '.txt', 1, convert(datetime, '2021-02-07 17:35:03', 120), convert(datetime, '2021-02-07 17:35:03', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-02-07 17:35:03', 120), dt_upd = convert(datetime, '2021-02-07 17:35:03', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-02-07 17:35:03', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-02-07 17:35:03', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-02-07 17:35:03,419 [8] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-02-07 17:35:03,419 [8] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-02-07 17:35:03,419 [8] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-02-07 17:35:03,419 [8] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-02-07 17:35:03,429 [8] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4315;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4315, '.txt', @content, convert(datetime, '2021-02-07 17:35:03', 120), convert(datetime, '2021-02-07 17:35:03', 120));
2021-02-07 17:35:03,670 [13] INFO dn_lib.tools.log - reload config docs
2021-02-07 17:35:03,670 [13] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:35:03,670 [13] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:35:03,680 [13] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:35:03,680 [13] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:35:03,680 [13] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:35:03,680 [13] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:35:03,680 [13] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:35:03,680 [13] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:35:03,680 [13] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:35:03,680 [13] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:35:03,680 [13] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:35:03,689 [13] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:35:03,689 [13] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:35:03,689 [13] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:35:03,689 [13] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:35:03,689 [13] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:35:03,689 [13] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:35:03,689 [13] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:35:03,689 [13] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:35:03,689 [13] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:35:03,689 [13] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:35:03,689 [13] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:35:03,689 [13] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:35:03,700 [13] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:35:03,700 [13] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 17:35:03,700 [13] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 17:35:03,700 [13] DEBUG dn_lib.tools.log - SQL: 
 update clients set session_id = '203xpfiwgx3pxihudetktwje', dt_session_id = getdate() where client_key = 'CD54BC0E46CF621374E9';
 select top 1 1 from clients where client_key = 'CD54BC0E46CF621374E9' 
  and datediff(second, dt_refresh, getdate()) < interval_ss + 5;
2021-02-07 17:35:03,714 [13] DEBUG dn_lib.tools.log - SQL: select content from dn_tasks_notes 
       where task_id = 1441
2021-02-07 17:35:03,714 [13] DEBUG dn_lib.tools.log - SQL: select a.file_id, a.file_name, a.extension, a.http_path , null as found_file       
       , (select top 1 1 from dn_tasks where task_id = a.task_id and file_id = a.file_id) as file_task
      from vw_task_allegati a
      where a.task_id = 1441
2021-02-07 17:35:15,792 [17] INFO dn_lib.tools.log - reload config docs
2021-02-07 17:35:15,793 [17] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:35:15,794 [17] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:35:15,794 [17] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:35:15,795 [17] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:35:15,795 [17] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:35:15,796 [17] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:35:15,796 [17] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:35:15,797 [17] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:35:15,798 [17] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:35:15,798 [17] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:35:15,799 [17] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:35:15,799 [17] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:35:15,799 [17] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:35:15,799 [17] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:35:15,799 [17] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:35:15,799 [17] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:35:15,799 [17] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:35:15,799 [17] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:35:15,799 [17] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:35:15,799 [17] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:35:15,799 [17] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:35:15,799 [17] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:35:15,799 [17] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:35:15,799 [17] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:35:15,799 [17] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 17:35:15,799 [17] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 17:35:15,809 [17] DEBUG dn_lib.tools.log - SQL: 
 update clients set session_id = '203xpfiwgx3pxihudetktwje', dt_session_id = getdate() where client_key = 'CD54BC0E46CF621374E9';
 select top 1 1 from clients where client_key = 'CD54BC0E46CF621374E9' 
  and datediff(second, dt_refresh, getdate()) < interval_ss + 5;
2021-02-07 17:35:15,809 [17] DEBUG dn_lib.tools.log - SQL: select t.task_id, t.synch_folder_id, t.folder_id, t.file_id, t.title, t.dt_upd, t.dt_readed, sf.local_path as synch_local_path
		    , replace(dbo.folder_path(isnull(t.folder_id, f.folder_id)), '/', '\') as folder_path, f.file_id as file_notes_id, f.file_name
       from dn_tasks t
       join synch_folders sf on sf.synch_folder_id = t.synch_folder_id
       left join dn_files f on f.file_id = t.file_id
	   where t.task_id = 1441
2021-02-07 17:35:15,809 [17] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1825 and file_name = 'google-docs.png';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1825, 'google-docs.png', '.png', 1, convert(datetime, '2021-02-07 17:35:15', 120), convert(datetime, '2021-02-07 17:35:15', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-02-07 17:35:15', 120), dt_upd = convert(datetime, '2021-02-07 17:35:15', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-02-07 17:35:15', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-02-07 17:35:15', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-02-07 17:35:15,819 [17] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-02-07 17:35:15,819 [17] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-02-07 17:35:15,819 [17] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-02-07 17:35:15,819 [17] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-02-07 17:35:16,039 [8] INFO dn_lib.tools.log - reload config docs
2021-02-07 17:35:16,039 [8] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:35:16,039 [8] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:35:16,050 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:35:16,050 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:35:16,050 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:35:16,050 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:35:16,050 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:35:16,050 [8] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:35:16,050 [8] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:35:16,050 [8] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:35:16,050 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:35:16,060 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:35:16,060 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:35:16,060 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:35:16,060 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:35:16,060 [8] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:35:16,060 [8] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:35:16,060 [8] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:35:16,060 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:35:16,060 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:35:16,060 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:35:16,060 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:35:16,060 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:35:16,060 [8] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:35:16,069 [8] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 17:35:16,069 [8] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 17:35:16,069 [8] DEBUG dn_lib.tools.log - SQL: 
 update clients set session_id = '203xpfiwgx3pxihudetktwje', dt_session_id = getdate() where client_key = 'CD54BC0E46CF621374E9';
 select top 1 1 from clients where client_key = 'CD54BC0E46CF621374E9' 
  and datediff(second, dt_refresh, getdate()) < interval_ss + 5;
2021-02-07 17:35:16,069 [8] DEBUG dn_lib.tools.log - SQL: select content from dn_tasks_notes 
       where task_id = 1441
2021-02-07 17:35:16,069 [8] DEBUG dn_lib.tools.log - SQL: select a.file_id, a.file_name, a.extension, a.http_path , null as found_file       
       , (select top 1 1 from dn_tasks where task_id = a.task_id and file_id = a.file_id) as file_task
      from vw_task_allegati a
      where a.task_id = 1441
2021-02-07 17:35:17,748 [13] INFO dn_lib.tools.log - reload config docs
2021-02-07 17:35:17,749 [13] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:35:17,750 [13] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:35:17,750 [13] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:35:17,751 [13] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:35:17,752 [13] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:35:17,753 [13] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:35:17,754 [13] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:35:17,754 [13] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:35:17,755 [13] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:35:17,755 [13] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:35:17,756 [13] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:35:17,757 [13] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:35:17,757 [13] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:35:17,758 [13] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:35:17,759 [13] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:35:17,759 [13] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:35:17,760 [13] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:35:17,760 [13] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:35:17,761 [13] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:35:17,761 [13] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:35:17,762 [13] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:35:17,763 [13] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:35:17,763 [13] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:35:17,763 [13] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:35:17,764 [13] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 17:35:17,767 [13] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 17:35:17,768 [13] DEBUG dn_lib.tools.log - SQL: 
 update clients set session_id = '203xpfiwgx3pxihudetktwje', dt_session_id = getdate() where client_key = 'CD54BC0E46CF621374E9';
 select top 1 1 from clients where client_key = 'CD54BC0E46CF621374E9' 
  and datediff(second, dt_refresh, getdate()) < interval_ss + 5;
2021-02-07 17:35:17,779 [13] DEBUG dn_lib.tools.log - SQL: insert into clients_cmds (client_key, cmd)
  select t.ck, t.cmd
   from (select 'CD54BC0E46CF621374E9' as ck, 'open_att#file_id:4316#user_id:1#user_name:molinero' as cmd) t
   join clients c on c.client_key = t.ck and datediff(second, c.dt_refresh, getdate()) < c.interval_ss + 5
2021-02-07 17:36:54,029 [7] INFO dn_lib.tools.log - reload config docs
2021-02-07 17:36:54,030 [7] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:36:54,031 [7] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:36:54,032 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:36:54,032 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:36:54,033 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:36:54,034 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:36:54,034 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:36:54,035 [7] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:36:54,035 [7] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:36:54,036 [7] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:36:54,037 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:36:54,037 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:36:54,038 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:36:54,038 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:36:54,039 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:36:54,039 [7] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:36:54,039 [7] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:36:54,040 [7] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:36:54,040 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:36:54,041 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:36:54,042 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:36:54,043 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:36:54,043 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:36:54,044 [7] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:36:54,045 [7] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 17:36:54,047 [7] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 17:36:54,049 [7] DEBUG dn_lib.tools.log - SQL: 
 update clients set session_id = '3ravs1wcyz1oy2s0lm4cipur', dt_session_id = getdate() where client_key = 'CD54BC0E46CF621374E9';
 select top 1 1 from clients where client_key = 'CD54BC0E46CF621374E9' 
  and datediff(second, dt_refresh, getdate()) < interval_ss + 5;
2021-02-07 17:36:54,065 [5] INFO dn_lib.tools.log - reload config docs
2021-02-07 17:36:54,066 [5] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:36:54,067 [5] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:36:54,067 [5] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:36:54,068 [5] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:36:54,069 [5] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:36:54,069 [5] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:36:54,070 [5] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:36:54,070 [5] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:36:54,071 [5] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:36:54,071 [5] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:36:54,072 [5] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:36:54,072 [5] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:36:54,072 [5] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:36:54,073 [5] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:36:54,073 [5] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:36:54,075 [5] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:36:54,076 [5] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:36:54,077 [5] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:36:54,078 [5] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:36:54,079 [5] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:36:54,080 [5] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:36:54,081 [5] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:36:54,081 [5] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:36:54,082 [5] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:36:54,083 [5] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 17:36:54,086 [5] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 17:36:54,087 [5] DEBUG dn_lib.tools.log - SQL: 
 update clients set session_id = '3ravs1wcyz1oy2s0lm4cipur', dt_session_id = getdate() where client_key = 'CD54BC0E46CF621374E9';
 select top 1 1 from clients where client_key = 'CD54BC0E46CF621374E9' 
  and datediff(second, dt_refresh, getdate()) < interval_ss + 5;
2021-02-07 17:36:54,092 [13] INFO dn_lib.tools.log - reload config docs
2021-02-07 17:36:54,094 [13] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:36:54,095 [13] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:36:54,095 [13] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:36:54,096 [13] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:36:54,097 [13] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:36:54,098 [13] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:36:54,098 [13] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:36:54,099 [13] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:36:54,100 [13] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:36:54,101 [13] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:36:54,101 [13] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:36:54,102 [13] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:36:54,103 [13] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:36:54,103 [13] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:36:54,104 [13] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:36:54,104 [13] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:36:54,105 [13] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:36:54,106 [13] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:36:54,106 [13] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:36:54,107 [13] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:36:54,108 [13] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:36:54,109 [13] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:36:54,110 [13] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:36:54,111 [13] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:36:54,112 [13] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 17:36:54,116 [13] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 17:36:54,118 [13] DEBUG dn_lib.tools.log - SQL: 
 update clients set session_id = '3ravs1wcyz1oy2s0lm4cipur', dt_session_id = getdate() where client_key = 'CD54BC0E46CF621374E9';
 select top 1 1 from clients where client_key = 'CD54BC0E46CF621374E9' 
  and datediff(second, dt_refresh, getdate()) < interval_ss + 5;
2021-02-07 17:36:54,119 [13] DEBUG dn_lib.tools.log - SQL: select task_filter_id, filter_title, filter_notes, filter_def, filter_class
 from dn_tasks_filters order by filter_order
2021-02-07 17:36:54,121 [13] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 17:36:54,123 [13] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 17:36:54,124 [13] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 17:36:54,126 [13] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 17:36:54,128 [13] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 17:36:54,128 [13] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 17:36:54,130 [13] DEBUG dn_lib.tools.log - SQL: select ft.tp, ft.synch_folder_id, ft.folder_id, ft.parent_id, ft.title
       , ft.des, ft.http_path, ft.lvl, dbo.folder_path(ft.folder_id) as folder_path
       , (select top 1 1 from dn_tasks where folder_id = ft.folder_id) as is_task
      from dbo.fnc_dn_folders(null, null) ft
      
      order by ft.synch_folder_id, ft.lvl, ft.title
2021-02-07 17:36:54,139 [13] DEBUG dn_lib.tools.log - SQL: select f.synch_folder_id, f.file_id, f.folder_id, f.file_name, f.dt_ins , null as found_file
       from dn_files f
       where exists (select top 1 1 from dbo.fnc_dn_folders(null, null) ft 
        
	      where ft.synch_folder_id = f.synch_folder_id 
          and isnull(ft.folder_id, 0) = isnull(f.folder_id, 0))
2021-02-07 17:36:54,147 [13] DEBUG dn_lib.tools.log - SQL: select t3.*
      , tst.stato, tst.[order] as stato_order, isnull(tst.class, 'light') as stato_class, isnull(tst.title_plurale, '') as stato_title_plurale, isnull(tst.title_singolare, '') as stato_title_singolare
      , tp.priorita, tp.[order] as priorita_order, isnull(tp.class, 'light') as priorita_class, isnull(tp.title_plurale, '') as priorita_title_plurale, isnull(tp.title_singolare, '') as priorita_title_singolare
      , tt.tipo, tt.[order] as tipo_order, isnull(tt.class, 'light') as tipo_class, isnull(tt.title_plurale, '') as tipo_title_plurale, isnull(tt.title_singolare, '') as tipo_title_singolare
      , ts.stima, ts.[days] as stima_days, isnull(ts.class, 'light') as stima_class, isnull(ts.title_plurale, '') as stima_title_plurale, isnull(ts.title_singolare, '') as stima_title_singolare
      , (select top 1 1 from dn_tasks_notes where task_id = t3.task_id) as task_notes
      , (select top 1 1 from vw_task_allegati f2 where f2.task_id = t3.task_id 
          and not exists (select top 1 1 from dn_files_info where file_name = f2.file_name)) as task_files
  from (select t2.*, datediff(day, t2.dt_ref, getdate()) as diff_days
    from (select t.task_id, t.synch_folder_id, isnull(t.folder_id, f.folder_id) as folder_id
	   , t.file_id, t.title, t.[user], t.stato, t.priorita, t.tipo, t.stima, t.dt_ins, t.dt_upd
     , (case when t.dt_ins > t.dt_upd then t.dt_ins else t.dt_upd end) as dt_ref
	  from dn_tasks t
    
	  left join dn_files f on f.file_id = t.file_id
    where (null is null or (null is not null and t.task_id = null)) ) t2
    where exists (select top 1 1 from dbo.fnc_dn_folders(null, null) ft 
	    where  ft.synch_folder_id = t2.synch_folder_id 
       and isnull(ft.folder_id, 0) = isnull(t2.folder_id, 0))) t3
   left join dn_task_stato tst on tst.stato = t3.stato
   left join dn_task_priorita tp on tp.priorita = t3.priorita
   left join dn_task_tipo tt on tt.tipo = t3.tipo
   left join dn_task_stima ts on ts.stima = t3.stima
   where 1 = 1  and t3.stato = 'in_corso' or t3.diff_days <= 14
2021-02-07 17:36:54,167 [13] DEBUG dn_lib.tools.log - SQL: select title_singolare, stato from dn_task_stato order by [order]
2021-02-07 17:36:54,171 [13] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, priorita as [value], [order] from dn_task_priorita
      ) t order by t.[order]
2021-02-07 17:36:54,173 [13] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [days]
       union select title_singolare as title, stima as [value], [days] from dn_task_stima 
       ) t order by t.[days]
2021-02-07 17:36:54,176 [13] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, tipo as [value], [order] from dn_task_tipo
       ) t order by t.[order]
2021-02-07 17:36:54,179 [13] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value]
       union select nome as title, nome as [value] from users
       ) t order by 2
2021-02-07 17:37:02,089 [17] INFO dn_lib.tools.log - reload config docs
2021-02-07 17:37:02,090 [17] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:37:02,091 [17] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:37:02,092 [17] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:37:02,092 [17] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:37:02,093 [17] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:37:02,094 [17] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:37:02,095 [17] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:37:02,095 [17] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:37:02,096 [17] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:37:02,096 [17] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:37:02,097 [17] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:37:02,097 [17] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:37:02,098 [17] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:37:02,098 [17] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:37:02,099 [17] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:37:02,099 [17] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:37:02,100 [17] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:37:02,100 [17] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:37:02,101 [17] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:37:02,101 [17] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:37:02,102 [17] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:37:02,102 [17] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:37:02,103 [17] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:37:02,103 [17] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:37:02,104 [17] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 17:37:02,107 [17] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 17:37:02,108 [17] DEBUG dn_lib.tools.log - SQL: 
 update clients set session_id = '3ravs1wcyz1oy2s0lm4cipur', dt_session_id = getdate() where client_key = 'CD54BC0E46CF621374E9';
 select top 1 1 from clients where client_key = 'CD54BC0E46CF621374E9' 
  and datediff(second, dt_refresh, getdate()) < interval_ss + 5;
2021-02-07 17:37:02,112 [13] INFO dn_lib.tools.log - reload config docs
2021-02-07 17:37:02,113 [13] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:37:02,114 [13] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:37:02,114 [13] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:37:02,115 [13] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:37:02,115 [13] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:37:02,116 [13] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:37:02,117 [13] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:37:02,117 [13] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:37:02,118 [13] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:37:02,118 [13] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:37:02,118 [13] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:37:02,119 [13] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:37:02,119 [13] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:37:02,120 [13] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:37:02,120 [13] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:37:02,121 [13] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:37:02,121 [13] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:37:02,122 [13] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:37:02,123 [13] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:37:02,123 [13] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:37:02,124 [13] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:37:02,125 [13] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:37:02,126 [13] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:37:02,127 [13] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:37:02,127 [13] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 17:37:02,129 [13] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 17:37:02,130 [13] DEBUG dn_lib.tools.log - SQL: 
 update clients set session_id = '3ravs1wcyz1oy2s0lm4cipur', dt_session_id = getdate() where client_key = 'CD54BC0E46CF621374E9';
 select top 1 1 from clients where client_key = 'CD54BC0E46CF621374E9' 
  and datediff(second, dt_refresh, getdate()) < interval_ss + 5;
2021-02-07 17:37:09,046 [16] INFO dn_lib.tools.log - reload config docs
2021-02-07 17:37:09,047 [16] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:37:09,048 [16] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:37:09,049 [16] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:37:09,050 [16] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:37:09,051 [16] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:37:09,052 [16] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:37:09,052 [16] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:37:09,053 [16] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:37:09,053 [16] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:37:09,054 [16] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:37:09,054 [16] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:37:09,055 [16] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:37:09,055 [16] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:37:09,056 [16] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:37:09,057 [16] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:37:09,057 [16] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:37:09,058 [16] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:37:09,058 [16] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:37:09,059 [16] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:37:09,060 [16] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:37:09,060 [16] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:37:09,061 [16] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:37:09,061 [16] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:37:09,062 [16] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:37:09,062 [16] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 17:37:09,065 [16] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 17:37:09,066 [16] DEBUG dn_lib.tools.log - SQL: 
 update clients set session_id = '3ravs1wcyz1oy2s0lm4cipur', dt_session_id = getdate() where client_key = 'CD54BC0E46CF621374E9';
 select top 1 1 from clients where client_key = 'CD54BC0E46CF621374E9' 
  and datediff(second, dt_refresh, getdate()) < interval_ss + 5;
2021-02-07 17:37:09,077 [18] INFO dn_lib.tools.log - reload config docs
2021-02-07 17:37:09,078 [18] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:37:09,079 [18] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:37:09,079 [18] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:37:09,080 [18] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:37:09,081 [18] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:37:09,081 [18] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:37:09,082 [18] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:37:09,082 [18] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:37:09,083 [18] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:37:09,083 [18] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:37:09,084 [18] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:37:09,084 [18] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:37:09,085 [18] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:37:09,086 [18] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:37:09,086 [18] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:37:09,087 [18] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:37:09,087 [18] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:37:09,088 [18] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:37:09,089 [18] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:37:09,089 [18] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:37:09,091 [18] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:37:09,092 [18] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:37:09,092 [18] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:37:09,093 [18] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:37:09,094 [18] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 17:37:09,096 [18] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 17:37:09,097 [18] DEBUG dn_lib.tools.log - SQL: 
 update clients set session_id = '3ravs1wcyz1oy2s0lm4cipur', dt_session_id = getdate() where client_key = 'CD54BC0E46CF621374E9';
 select top 1 1 from clients where client_key = 'CD54BC0E46CF621374E9' 
  and datediff(second, dt_refresh, getdate()) < interval_ss + 5;
2021-02-07 17:37:27,565 [7] INFO dn_lib.tools.log - reload config docs
2021-02-07 17:37:27,566 [7] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:37:27,567 [7] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:37:27,569 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:37:27,570 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:37:27,571 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:37:27,572 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:37:27,573 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:37:27,574 [7] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:37:27,574 [7] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:37:27,575 [7] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:37:27,576 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:37:27,577 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:37:27,577 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:37:27,578 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:37:27,579 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:37:27,579 [7] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:37:27,580 [7] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:37:27,581 [7] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:37:27,581 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:37:27,582 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:37:27,582 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:37:27,583 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:37:27,583 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:37:27,584 [7] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:37:27,584 [7] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 17:37:27,587 [7] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 17:37:27,588 [7] DEBUG dn_lib.tools.log - SQL: 
 update clients set session_id = '3ravs1wcyz1oy2s0lm4cipur', dt_session_id = getdate() where client_key = 'CD54BC0E46CF621374E9';
 select top 1 1 from clients where client_key = 'CD54BC0E46CF621374E9' 
  and datediff(second, dt_refresh, getdate()) < interval_ss + 5;
2021-02-07 17:37:27,600 [15] INFO dn_lib.tools.log - reload config docs
2021-02-07 17:37:27,601 [15] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:37:27,602 [15] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:37:27,602 [15] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:37:27,603 [15] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:37:27,605 [15] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:37:27,606 [15] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:37:27,606 [15] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:37:27,607 [15] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:37:27,608 [15] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:37:27,608 [15] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:37:27,609 [15] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:37:27,609 [15] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:37:27,610 [15] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:37:27,611 [15] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:37:27,611 [15] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:37:27,612 [15] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:37:27,612 [15] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:37:27,613 [15] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:37:27,613 [15] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:37:27,614 [15] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:37:27,614 [15] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:37:27,615 [15] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:37:27,615 [15] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:37:27,616 [15] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:37:27,617 [15] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 17:37:27,619 [15] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 17:37:27,621 [15] DEBUG dn_lib.tools.log - SQL: 
 update clients set session_id = '3ravs1wcyz1oy2s0lm4cipur', dt_session_id = getdate() where client_key = 'CD54BC0E46CF621374E9';
 select top 1 1 from clients where client_key = 'CD54BC0E46CF621374E9' 
  and datediff(second, dt_refresh, getdate()) < interval_ss + 5;
2021-02-07 17:37:27,624 [13] INFO dn_lib.tools.log - reload config docs
2021-02-07 17:37:27,625 [13] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:37:27,626 [13] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:37:27,626 [13] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:37:27,627 [13] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:37:27,627 [13] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:37:27,628 [13] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:37:27,628 [13] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:37:27,629 [13] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:37:27,629 [13] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:37:27,630 [13] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:37:27,630 [13] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:37:27,631 [13] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:37:27,631 [13] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:37:27,631 [13] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:37:27,632 [13] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:37:27,632 [13] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:37:27,633 [13] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:37:27,633 [13] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:37:27,634 [13] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:37:27,634 [13] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:37:27,635 [13] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:37:27,635 [13] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:37:27,636 [13] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:37:27,637 [13] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:37:27,637 [13] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 17:37:27,640 [13] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 17:37:27,641 [13] DEBUG dn_lib.tools.log - SQL: 
 update clients set session_id = '3ravs1wcyz1oy2s0lm4cipur', dt_session_id = getdate() where client_key = 'CD54BC0E46CF621374E9';
 select top 1 1 from clients where client_key = 'CD54BC0E46CF621374E9' 
  and datediff(second, dt_refresh, getdate()) < interval_ss + 5;
2021-02-07 17:37:28,205 [10] INFO dn_lib.tools.log - reload config docs
2021-02-07 17:37:28,205 [10] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:37:28,205 [10] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:37:28,209 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:37:28,209 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:37:28,209 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:37:28,209 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:37:28,209 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:37:28,209 [10] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:37:28,209 [10] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:37:28,209 [10] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:37:28,209 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:37:28,209 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:37:28,209 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:37:28,220 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:37:28,220 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:37:28,220 [10] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:37:28,220 [10] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:37:28,220 [10] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:37:28,220 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:37:28,220 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:37:28,220 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:37:28,220 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:37:28,220 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:37:28,220 [10] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:37:28,220 [10] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 17:37:28,229 [10] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 17:37:28,229 [10] DEBUG dn_lib.tools.log - SQL: 
 update clients set session_id = '3ravs1wcyz1oy2s0lm4cipur', dt_session_id = getdate() where client_key = 'CD54BC0E46CF621374E9';
 select top 1 1 from clients where client_key = 'CD54BC0E46CF621374E9' 
  and datediff(second, dt_refresh, getdate()) < interval_ss + 5;
2021-02-07 17:37:28,241 [10] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-02-07 17:37:28,241 [10] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-02-07 17:37:28,241 [10] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-02-07 17:37:28,241 [10] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-02-07 17:37:28,249 [10] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-02-07 17:37:28,249 [10] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-02-07 17:37:28,249 [10] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-02-07 17:37:28,249 [10] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-02-07 17:37:28,260 [10] DEBUG dn_lib.tools.log - elenco cartelle da sincronizzare
2021-02-07 17:37:28,260 [10] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-02-07 17:37:28,260 [10] DEBUG dn_lib.tools.log -    - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-02-07 17:37:28,260 [10] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-02-07 17:37:28,260 [10] DEBUG dn_lib.tools.log - elaboro la cartella C:\root\todd\_test\dn...
2021-02-07 17:37:28,260 [10] DEBUG dn_lib.tools.log - SQL: declare @cc_files int; declare @cc_folders int;
      select @cc_files = (select count(*) from dn_files where readed is null) 
      select @cc_folders = (select count(*) from dn_folders where readed is null)
      
      delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
      select @cc_files, @cc_folders;
2021-02-07 17:37:28,270 [10] DEBUG dn_lib.tools.log - cancellati dal database: 7 files
2021-02-07 17:37:28,270 [10] DEBUG dn_lib.tools.log - cancellati dal database: 2 folders
2021-02-07 17:37:28,280 [10] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '0')
        else update users_cache set var_value = substring('0', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-02-07 17:37:28,281 [10] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '0')
        else update users_cache set var_value = substring('0', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-02-07 17:37:28,281 [10] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/01/05 15:40:09')
        else update users_cache set var_value = substring('2021/01/05 15:40:09', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-02-07 17:37:28,281 [10] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/02/07 17:37:28')
        else update users_cache set var_value = substring('2021/02/07 17:37:28', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-02-07 17:37:35,644 [7] INFO dn_lib.tools.log - reload config docs
2021-02-07 17:37:35,645 [7] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:37:35,646 [7] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:37:35,647 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:37:35,648 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:37:35,649 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:37:35,650 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:37:35,651 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:37:35,652 [7] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:37:35,653 [7] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:37:35,654 [7] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:37:35,655 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:37:35,656 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:37:35,657 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:37:35,658 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:37:35,659 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:37:35,659 [7] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:37:35,660 [7] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:37:35,661 [7] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:37:35,662 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:37:35,663 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:37:35,663 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:37:35,664 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:37:35,665 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:37:35,665 [7] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:37:35,666 [7] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 17:37:35,669 [7] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 17:37:35,671 [7] DEBUG dn_lib.tools.log - SQL: 
 update clients set session_id = '3ravs1wcyz1oy2s0lm4cipur', dt_session_id = getdate() where client_key = 'CD54BC0E46CF621374E9';
 select top 1 1 from clients where client_key = 'CD54BC0E46CF621374E9' 
  and datediff(second, dt_refresh, getdate()) < interval_ss + 5;
2021-02-07 17:37:35,683 [17] INFO dn_lib.tools.log - reload config docs
2021-02-07 17:37:35,684 [17] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:37:35,685 [17] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:37:35,687 [17] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:37:35,687 [17] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:37:35,688 [17] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:37:35,689 [17] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:37:35,690 [17] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:37:35,690 [17] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:37:35,691 [17] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:37:35,692 [17] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:37:35,692 [17] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:37:35,693 [17] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:37:35,694 [17] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:37:35,694 [17] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:37:35,695 [17] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:37:35,695 [17] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:37:35,696 [17] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:37:35,697 [17] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:37:35,697 [17] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:37:35,698 [17] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:37:35,699 [17] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:37:35,699 [17] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:37:35,700 [17] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:37:35,701 [17] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:37:35,702 [17] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 17:37:35,704 [17] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 17:37:35,705 [17] DEBUG dn_lib.tools.log - SQL: 
 update clients set session_id = '3ravs1wcyz1oy2s0lm4cipur', dt_session_id = getdate() where client_key = 'CD54BC0E46CF621374E9';
 select top 1 1 from clients where client_key = 'CD54BC0E46CF621374E9' 
  and datediff(second, dt_refresh, getdate()) < interval_ss + 5;
2021-02-07 17:37:35,708 [5] INFO dn_lib.tools.log - reload config docs
2021-02-07 17:37:35,709 [5] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:37:35,709 [5] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:37:35,710 [5] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:37:35,711 [5] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:37:35,711 [5] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:37:35,712 [5] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:37:35,712 [5] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:37:35,713 [5] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:37:35,713 [5] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:37:35,714 [5] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:37:35,714 [5] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:37:35,715 [5] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:37:35,715 [5] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:37:35,716 [5] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:37:35,716 [5] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:37:35,717 [5] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:37:35,717 [5] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:37:35,718 [5] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:37:35,718 [5] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:37:35,719 [5] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:37:35,720 [5] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:37:35,720 [5] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:37:35,721 [5] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:37:35,722 [5] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:37:35,722 [5] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 17:37:35,725 [5] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 17:37:35,725 [5] DEBUG dn_lib.tools.log - SQL: 
 update clients set session_id = '3ravs1wcyz1oy2s0lm4cipur', dt_session_id = getdate() where client_key = 'CD54BC0E46CF621374E9';
 select top 1 1 from clients where client_key = 'CD54BC0E46CF621374E9' 
  and datediff(second, dt_refresh, getdate()) < interval_ss + 5;
2021-02-07 17:37:35,726 [5] DEBUG dn_lib.tools.log - SQL: select task_filter_id, filter_title, filter_notes, filter_def, filter_class
 from dn_tasks_filters order by filter_order
2021-02-07 17:37:35,727 [5] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 17:37:35,728 [5] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 17:37:35,728 [5] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 17:37:35,729 [5] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 17:37:35,729 [5] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 17:37:35,730 [5] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 17:37:35,730 [5] DEBUG dn_lib.tools.log - SQL: select ft.tp, ft.synch_folder_id, ft.folder_id, ft.parent_id, ft.title
       , ft.des, ft.http_path, ft.lvl, dbo.folder_path(ft.folder_id) as folder_path
       , (select top 1 1 from dn_tasks where folder_id = ft.folder_id) as is_task
      from dbo.fnc_dn_folders(null, null) ft
      
      order by ft.synch_folder_id, ft.lvl, ft.title
2021-02-07 17:37:35,731 [5] DEBUG dn_lib.tools.log - SQL: select f.synch_folder_id, f.file_id, f.folder_id, f.file_name, f.dt_ins , null as found_file
       from dn_files f
       where exists (select top 1 1 from dbo.fnc_dn_folders(null, null) ft 
        
	      where ft.synch_folder_id = f.synch_folder_id 
          and isnull(ft.folder_id, 0) = isnull(f.folder_id, 0))
2021-02-07 17:37:35,733 [5] DEBUG dn_lib.tools.log - SQL: select t3.*
      , tst.stato, tst.[order] as stato_order, isnull(tst.class, 'light') as stato_class, isnull(tst.title_plurale, '') as stato_title_plurale, isnull(tst.title_singolare, '') as stato_title_singolare
      , tp.priorita, tp.[order] as priorita_order, isnull(tp.class, 'light') as priorita_class, isnull(tp.title_plurale, '') as priorita_title_plurale, isnull(tp.title_singolare, '') as priorita_title_singolare
      , tt.tipo, tt.[order] as tipo_order, isnull(tt.class, 'light') as tipo_class, isnull(tt.title_plurale, '') as tipo_title_plurale, isnull(tt.title_singolare, '') as tipo_title_singolare
      , ts.stima, ts.[days] as stima_days, isnull(ts.class, 'light') as stima_class, isnull(ts.title_plurale, '') as stima_title_plurale, isnull(ts.title_singolare, '') as stima_title_singolare
      , (select top 1 1 from dn_tasks_notes where task_id = t3.task_id) as task_notes
      , (select top 1 1 from vw_task_allegati f2 where f2.task_id = t3.task_id 
          and not exists (select top 1 1 from dn_files_info where file_name = f2.file_name)) as task_files
  from (select t2.*, datediff(day, t2.dt_ref, getdate()) as diff_days
    from (select t.task_id, t.synch_folder_id, isnull(t.folder_id, f.folder_id) as folder_id
	   , t.file_id, t.title, t.[user], t.stato, t.priorita, t.tipo, t.stima, t.dt_ins, t.dt_upd
     , (case when t.dt_ins > t.dt_upd then t.dt_ins else t.dt_upd end) as dt_ref
	  from dn_tasks t
    
	  left join dn_files f on f.file_id = t.file_id
    where (null is null or (null is not null and t.task_id = null)) ) t2
    where exists (select top 1 1 from dbo.fnc_dn_folders(null, null) ft 
	    where  ft.synch_folder_id = t2.synch_folder_id 
       and isnull(ft.folder_id, 0) = isnull(t2.folder_id, 0))) t3
   left join dn_task_stato tst on tst.stato = t3.stato
   left join dn_task_priorita tp on tp.priorita = t3.priorita
   left join dn_task_tipo tt on tt.tipo = t3.tipo
   left join dn_task_stima ts on ts.stima = t3.stima
   where 1 = 1  and t3.stato = 'in_corso' or t3.diff_days <= 14
2021-02-07 17:37:35,734 [5] DEBUG dn_lib.tools.log - SQL: select title_singolare, stato from dn_task_stato order by [order]
2021-02-07 17:37:35,735 [5] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, priorita as [value], [order] from dn_task_priorita
      ) t order by t.[order]
2021-02-07 17:37:35,736 [5] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [days]
       union select title_singolare as title, stima as [value], [days] from dn_task_stima 
       ) t order by t.[days]
2021-02-07 17:37:35,737 [5] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, tipo as [value], [order] from dn_task_tipo
       ) t order by t.[order]
2021-02-07 17:37:35,737 [5] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value]
       union select nome as title, nome as [value] from users
       ) t order by 2
2021-02-07 17:38:17,752 [15] INFO dn_lib.tools.log - reload config docs
2021-02-07 17:38:17,753 [15] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:38:17,755 [15] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:38:17,755 [15] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:38:17,756 [15] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:38:17,757 [15] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:38:17,758 [15] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:38:17,758 [15] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:38:17,759 [15] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:38:17,760 [15] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:38:17,760 [15] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:38:17,761 [15] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:38:17,762 [15] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:38:17,763 [15] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:38:17,763 [15] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:38:17,764 [15] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:38:17,765 [15] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:38:17,765 [15] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:38:17,766 [15] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:38:17,766 [15] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:38:17,767 [15] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:38:17,768 [15] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:38:17,768 [15] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:38:17,769 [15] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:38:17,769 [15] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:38:17,770 [15] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 17:38:17,771 [15] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 17:38:17,773 [15] DEBUG dn_lib.tools.log - SQL: 
 update clients set session_id = '3ravs1wcyz1oy2s0lm4cipur', dt_session_id = getdate() where client_key = 'CD54BC0E46CF621374E9';
 select top 1 1 from clients where client_key = 'CD54BC0E46CF621374E9' 
  and datediff(second, dt_refresh, getdate()) < interval_ss + 5;
2021-02-07 17:38:17,790 [10] INFO dn_lib.tools.log - reload config docs
2021-02-07 17:38:17,791 [10] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:38:17,792 [10] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:38:17,793 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:38:17,794 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:38:17,794 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:38:17,796 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:38:17,797 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:38:17,798 [10] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:38:17,798 [10] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:38:17,799 [10] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:38:17,800 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:38:17,800 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:38:17,801 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:38:17,801 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:38:17,802 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:38:17,803 [10] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:38:17,804 [10] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:38:17,804 [10] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:38:17,805 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:38:17,806 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:38:17,807 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:38:17,808 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:38:17,809 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:38:17,810 [10] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:38:17,810 [10] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 17:38:17,815 [10] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 17:38:17,816 [10] DEBUG dn_lib.tools.log - SQL: 
 update clients set session_id = '3ravs1wcyz1oy2s0lm4cipur', dt_session_id = getdate() where client_key = 'CD54BC0E46CF621374E9';
 select top 1 1 from clients where client_key = 'CD54BC0E46CF621374E9' 
  and datediff(second, dt_refresh, getdate()) < interval_ss + 5;
2021-02-07 17:38:17,820 [16] INFO dn_lib.tools.log - reload config docs
2021-02-07 17:38:17,820 [16] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:38:17,821 [16] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:38:17,822 [16] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:38:17,823 [16] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:38:17,823 [16] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:38:17,824 [16] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:38:17,825 [16] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:38:17,826 [16] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:38:17,826 [16] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:38:17,827 [16] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:38:17,827 [16] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:38:17,828 [16] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:38:17,829 [16] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:38:17,830 [16] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:38:17,831 [16] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:38:17,831 [16] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:38:17,832 [16] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:38:17,833 [16] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:38:17,833 [16] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:38:17,834 [16] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:38:17,834 [16] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:38:17,835 [16] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:38:17,836 [16] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:38:17,836 [16] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:38:17,837 [16] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 17:38:17,839 [16] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 17:38:17,840 [16] DEBUG dn_lib.tools.log - SQL: 
 update clients set session_id = '3ravs1wcyz1oy2s0lm4cipur', dt_session_id = getdate() where client_key = 'CD54BC0E46CF621374E9';
 select top 1 1 from clients where client_key = 'CD54BC0E46CF621374E9' 
  and datediff(second, dt_refresh, getdate()) < interval_ss + 5;
2021-02-07 17:38:18,388 [15] INFO dn_lib.tools.log - reload config docs
2021-02-07 17:38:18,389 [15] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:38:18,389 [15] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:38:18,390 [15] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:38:18,391 [15] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:38:18,391 [15] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:38:18,392 [15] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:38:18,393 [15] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:38:18,393 [15] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:38:18,393 [15] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:38:18,394 [15] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:38:18,394 [15] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:38:18,395 [15] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:38:18,395 [15] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:38:18,396 [15] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:38:18,396 [15] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:38:18,397 [15] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:38:18,397 [15] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:38:18,398 [15] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:38:18,398 [15] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:38:18,399 [15] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:38:18,399 [15] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:38:18,400 [15] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:38:18,401 [15] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:38:18,401 [15] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:38:18,402 [15] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 17:38:18,405 [15] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 17:38:18,406 [15] DEBUG dn_lib.tools.log - SQL: 
 update clients set session_id = '3ravs1wcyz1oy2s0lm4cipur', dt_session_id = getdate() where client_key = 'CD54BC0E46CF621374E9';
 select top 1 1 from clients where client_key = 'CD54BC0E46CF621374E9' 
  and datediff(second, dt_refresh, getdate()) < interval_ss + 5;
2021-02-07 17:38:18,407 [15] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-02-07 17:38:18,408 [15] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-02-07 17:38:18,410 [15] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-02-07 17:38:18,412 [15] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-02-07 17:38:18,413 [15] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-02-07 17:38:18,415 [15] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-02-07 17:38:18,416 [15] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-02-07 17:38:18,417 [15] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-02-07 17:38:18,420 [15] DEBUG dn_lib.tools.log - elenco cartelle da sincronizzare
2021-02-07 17:38:18,421 [15] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-02-07 17:38:18,422 [15] DEBUG dn_lib.tools.log -    - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-02-07 17:38:18,423 [15] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-02-07 17:38:18,426 [15] DEBUG dn_lib.tools.log - elaboro la cartella C:\root\todd\_test\dn...
2021-02-07 17:38:18,428 [15] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id is null and file_name = '20200101.orco.task.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, null, '20200101.orco.task.txt', '.txt', 1, convert(datetime, '2021-02-07 17:37:47', 120), convert(datetime, '2021-02-07 17:38:05', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-02-07 17:37:47', 120), dt_upd = convert(datetime, '2021-02-07 17:38:05', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-02-07 17:37:47', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-02-07 17:38:05', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-02-07 17:38:18,433 [15] DEBUG dn_lib.tools.log - aggiunto file al database: C:\root\todd\_test\dn\20200101.orco.task.txt
2021-02-07 17:38:18,439 [15] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4317;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4317, '.txt', @content, convert(datetime, '2021-02-07 17:37:47', 120), convert(datetime, '2021-02-07 17:38:05', 120));
2021-02-07 17:38:18,441 [15] DEBUG dn_lib.tools.log - salvato contenuto file nel database: C:\root\todd\_test\dn\20200101.orco.task.txt
2021-02-07 17:38:18,448 [15] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4317;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, null, 4317, left('orco', 150)
            , NULL, convert(datetime, '2020-01-01 00:00:00', 120), convert(datetime, '2021-02-07 17:38:05', 120), 1
            , NULL, NULL, NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-01-01 00:00:00', 120), dt_upd = convert(datetime, '2021-02-07 17:38:05', 120)
         , title = left('orco', 150), [user] = NULL
         , stato = NULL, priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-01-01 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-02-07 17:38:05', 120), getdate())
          or isnull(title, '') <> isnull('orco', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull(NULL, '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-02-07 17:38:18,454 [15] DEBUG dn_lib.tools.log - inserito task nel database: C:\root\todd\_test\dn\orco
2021-02-07 17:38:18,456 [15] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1443;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1443, 4317, @content
          , convert(datetime, '2021-02-07 17:37:47', 120), convert(datetime, '2021-02-07 17:38:05', 120));
2021-02-07 17:38:18,459 [15] DEBUG dn_lib.tools.log - salvate le note del task nel database: C:\root\todd\_test\dn\20200101.orco.task.txt
2021-02-07 17:38:18,461 [15] DEBUG dn_lib.tools.log - trasformazione task file in task folder: C:\root\todd\_test\dn\20200101.orco.task.txt
2021-02-07 17:38:18,463 [15] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = '20200101.orco.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, '20200101.orco.task', 1, convert(datetime, '2021-02-07 17:37:47', 120), convert(datetime, '2021-02-07 17:37:47', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-02-07 17:37:47', 120), dt_upd = convert(datetime, '2021-02-07 17:37:47', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-02-07 17:37:47', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-02-07 17:37:47', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-02-07 17:38:18,468 [15] DEBUG dn_lib.tools.log - creato folder: C:\root\todd\_test\dn\20200101.orco.task
2021-02-07 17:38:18,469 [15] DEBUG dn_lib.tools.log - SQL: delete from dn_files where file_id = 4317;
      delete from dn_files_contents where [file_id] = 4317;
      
      delete dn from dn_tasks dn
       where file_id is not null and not exists (select top 1 1 from dn_files where file_id = dn.file_id);
  
      delete dn from dn_tasks_notes dn
       where not exists (select top 1 1 from dn_tasks where task_id = dn.task_id);
2021-02-07 17:38:18,475 [15] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1827 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1827, 'i.txt', '.txt', 1, convert(datetime, '2021-02-07 17:37:47', 120), convert(datetime, '2021-02-07 17:37:47', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-02-07 17:37:47', 120), dt_upd = convert(datetime, '2021-02-07 17:37:47', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-02-07 17:37:47', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-02-07 17:37:47', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-02-07 17:38:18,481 [15] DEBUG dn_lib.tools.log - SQL: update dn_tasks set dt_upd = convert(datetime, convert(varchar, getdate(), 120), 120), folder_id = 1827, file_id = null
        where task_id = 1443;
2021-02-07 17:38:18,484 [15] DEBUG dn_lib.tools.log - spostato file da: C:\root\todd\_test\dn\20200101.orco.task.txt, a:C:\root\todd\_test\dn\20200101.orco.task\i.txt
2021-02-07 17:38:18,485 [15] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1443;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1443, 4318, @content
          , convert(datetime, convert(varchar, getdate(), 120), 120), convert(datetime, convert(varchar, getdate(), 120), 120));
      update dn_tasks set dt_upd = convert(datetime, convert(varchar, getdate(), 120), 120) where task_id = 1443;
2021-02-07 17:38:18,488 [15] DEBUG dn_lib.tools.log - salvate le note del task: C:\root\todd\_test\dn\20200101.orco.task
2021-02-07 17:38:18,499 [15] DEBUG dn_lib.tools.log - rinominato folder: C:\root\todd\_test\dn\20200101.orco.task, in: C:\root\todd\_test\dn\orco.task
2021-02-07 17:38:18,500 [15] DEBUG dn_lib.tools.log - SQL: update dn_folders set folder_name = 'orco.task', dt_upd = convert(datetime, convert(varchar, getdate(), 120), 120)
        where folder_id = 1827
2021-02-07 17:38:18,508 [15] DEBUG dn_lib.tools.log - salvato index doc: C:\root\todd\_test\dn\orco.task\__i.xml
2021-02-07 17:38:18,509 [15] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1827 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, 1827, null, left('orco', 150)
            , NULL, convert(datetime, '2020-01-01 00:00:00', 120), convert(datetime, '2021-02-07 17:38:05', 120), 1
            , NULL, NULL, NULL, NULL, convert(datetime, '2021-02-07 17:38:18', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-01-01 00:00:00', 120), dt_upd = convert(datetime, '2021-02-07 17:38:05', 120)
         , title = left('orco', 150), [user] = NULL
         , stato = NULL, priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = convert(datetime, '2021-02-07 17:38:18', 120)
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-01-01 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-02-07 17:38:05', 120), getdate())
          or isnull(title, '') <> isnull('orco', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull(NULL, '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-02-07 17:38:18,516 [15] DEBUG dn_lib.tools.log - aggiunto task al database: orco
2021-02-07 17:38:18,516 [15] DEBUG dn_lib.tools.log - SQL: declare @cc_files int; declare @cc_folders int;
      select @cc_files = (select count(*) from dn_files where readed is null) 
      select @cc_folders = (select count(*) from dn_folders where readed is null)
      
      delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
      select @cc_files, @cc_folders;
2021-02-07 17:38:18,526 [15] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '1')
        else update users_cache set var_value = substring('1', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-02-07 17:38:18,529 [15] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '0')
        else update users_cache set var_value = substring('0', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-02-07 17:38:18,533 [15] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/02/07 17:38:05')
        else update users_cache set var_value = substring('2021/02/07 17:38:05', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-02-07 17:38:18,535 [15] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/02/07 17:38:18')
        else update users_cache set var_value = substring('2021/02/07 17:38:18', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-02-07 17:39:06,540 [18] INFO dn_lib.tools.log - reload config docs
2021-02-07 17:39:06,541 [18] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:39:06,543 [18] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:39:06,544 [18] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:39:06,545 [18] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:39:06,545 [18] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:39:06,546 [18] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:39:06,547 [18] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:39:06,548 [18] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:39:06,549 [18] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:39:06,550 [18] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:39:06,550 [18] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:39:06,551 [18] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:39:06,552 [18] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:39:06,553 [18] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:39:06,554 [18] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:39:06,555 [18] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:39:06,555 [18] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:39:06,556 [18] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:39:06,557 [18] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:39:06,558 [18] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:39:06,559 [18] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:39:06,560 [18] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:39:06,561 [18] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:39:06,562 [18] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:39:06,563 [18] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 17:39:06,566 [18] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 17:39:06,568 [18] DEBUG dn_lib.tools.log - SQL: 
 update clients set session_id = '3ravs1wcyz1oy2s0lm4cipur', dt_session_id = getdate() where client_key = 'CD54BC0E46CF621374E9';
 select top 1 1 from clients where client_key = 'CD54BC0E46CF621374E9' 
  and datediff(second, dt_refresh, getdate()) < interval_ss + 5;
2021-02-07 17:39:06,584 [15] INFO dn_lib.tools.log - reload config docs
2021-02-07 17:39:06,585 [15] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:39:06,586 [15] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:39:06,586 [15] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:39:06,587 [15] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:39:06,588 [15] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:39:06,589 [15] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:39:06,590 [15] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:39:06,590 [15] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:39:06,591 [15] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:39:06,592 [15] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:39:06,593 [15] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:39:06,593 [15] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:39:06,594 [15] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:39:06,595 [15] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:39:06,595 [15] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:39:06,596 [15] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:39:06,596 [15] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:39:06,597 [15] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:39:06,598 [15] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:39:06,598 [15] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:39:06,599 [15] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:39:06,600 [15] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:39:06,600 [15] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:39:06,601 [15] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:39:06,601 [15] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 17:39:06,604 [15] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 17:39:06,605 [15] DEBUG dn_lib.tools.log - SQL: 
 update clients set session_id = '3ravs1wcyz1oy2s0lm4cipur', dt_session_id = getdate() where client_key = 'CD54BC0E46CF621374E9';
 select top 1 1 from clients where client_key = 'CD54BC0E46CF621374E9' 
  and datediff(second, dt_refresh, getdate()) < interval_ss + 5;
2021-02-07 17:39:06,608 [7] INFO dn_lib.tools.log - reload config docs
2021-02-07 17:39:06,609 [7] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:39:06,609 [7] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:39:06,610 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:39:06,611 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:39:06,611 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:39:06,612 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:39:06,612 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:39:06,613 [7] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:39:06,613 [7] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:39:06,614 [7] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:39:06,614 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:39:06,615 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:39:06,615 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:39:06,616 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:39:06,617 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:39:06,617 [7] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:39:06,618 [7] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:39:06,619 [7] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:39:06,619 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:39:06,620 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:39:06,621 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:39:06,622 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:39:06,622 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:39:06,623 [7] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:39:06,623 [7] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 17:39:06,625 [7] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 17:39:06,626 [7] DEBUG dn_lib.tools.log - SQL: 
 update clients set session_id = '3ravs1wcyz1oy2s0lm4cipur', dt_session_id = getdate() where client_key = 'CD54BC0E46CF621374E9';
 select top 1 1 from clients where client_key = 'CD54BC0E46CF621374E9' 
  and datediff(second, dt_refresh, getdate()) < interval_ss + 5;
2021-02-07 17:39:06,627 [7] DEBUG dn_lib.tools.log - SQL: select task_filter_id, filter_title, filter_notes, filter_def, filter_class
 from dn_tasks_filters order by filter_order
2021-02-07 17:39:06,629 [7] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 17:39:06,631 [7] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 17:39:06,631 [7] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 17:39:06,632 [7] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 17:39:06,633 [7] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 17:39:06,633 [7] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 17:39:06,634 [7] DEBUG dn_lib.tools.log - SQL: select ft.tp, ft.synch_folder_id, ft.folder_id, ft.parent_id, ft.title
       , ft.des, ft.http_path, ft.lvl, dbo.folder_path(ft.folder_id) as folder_path
       , (select top 1 1 from dn_tasks where folder_id = ft.folder_id) as is_task
      from dbo.fnc_dn_folders(null, null) ft
      
      order by ft.synch_folder_id, ft.lvl, ft.title
2021-02-07 17:39:06,642 [7] DEBUG dn_lib.tools.log - SQL: select f.synch_folder_id, f.file_id, f.folder_id, f.file_name, f.dt_ins , null as found_file
       from dn_files f
       where exists (select top 1 1 from dbo.fnc_dn_folders(null, null) ft 
        
	      where ft.synch_folder_id = f.synch_folder_id 
          and isnull(ft.folder_id, 0) = isnull(f.folder_id, 0))
2021-02-07 17:39:06,647 [7] DEBUG dn_lib.tools.log - SQL: select t3.*
      , tst.stato, tst.[order] as stato_order, isnull(tst.class, 'light') as stato_class, isnull(tst.title_plurale, '') as stato_title_plurale, isnull(tst.title_singolare, '') as stato_title_singolare
      , tp.priorita, tp.[order] as priorita_order, isnull(tp.class, 'light') as priorita_class, isnull(tp.title_plurale, '') as priorita_title_plurale, isnull(tp.title_singolare, '') as priorita_title_singolare
      , tt.tipo, tt.[order] as tipo_order, isnull(tt.class, 'light') as tipo_class, isnull(tt.title_plurale, '') as tipo_title_plurale, isnull(tt.title_singolare, '') as tipo_title_singolare
      , ts.stima, ts.[days] as stima_days, isnull(ts.class, 'light') as stima_class, isnull(ts.title_plurale, '') as stima_title_plurale, isnull(ts.title_singolare, '') as stima_title_singolare
      , (select top 1 1 from dn_tasks_notes where task_id = t3.task_id) as task_notes
      , (select top 1 1 from vw_task_allegati f2 where f2.task_id = t3.task_id 
          and not exists (select top 1 1 from dn_files_info where file_name = f2.file_name)) as task_files
  from (select t2.*, datediff(day, t2.dt_ref, getdate()) as diff_days
    from (select t.task_id, t.synch_folder_id, isnull(t.folder_id, f.folder_id) as folder_id
	   , t.file_id, t.title, t.[user], t.stato, t.priorita, t.tipo, t.stima, t.dt_ins, t.dt_upd
     , (case when t.dt_ins > t.dt_upd then t.dt_ins else t.dt_upd end) as dt_ref
	  from dn_tasks t
    
	  left join dn_files f on f.file_id = t.file_id
    where (null is null or (null is not null and t.task_id = null)) ) t2
    where exists (select top 1 1 from dbo.fnc_dn_folders(null, null) ft 
	    where  ft.synch_folder_id = t2.synch_folder_id 
       and isnull(ft.folder_id, 0) = isnull(t2.folder_id, 0))) t3
   left join dn_task_stato tst on tst.stato = t3.stato
   left join dn_task_priorita tp on tp.priorita = t3.priorita
   left join dn_task_tipo tt on tt.tipo = t3.tipo
   left join dn_task_stima ts on ts.stima = t3.stima
   where 1 = 1  and t3.stato = 'in_corso' or t3.diff_days <= 14
2021-02-07 17:39:06,663 [7] DEBUG dn_lib.tools.log - SQL: select title_singolare, stato from dn_task_stato order by [order]
2021-02-07 17:39:06,666 [7] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, priorita as [value], [order] from dn_task_priorita
      ) t order by t.[order]
2021-02-07 17:39:06,668 [7] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [days]
       union select title_singolare as title, stima as [value], [days] from dn_task_stima 
       ) t order by t.[days]
2021-02-07 17:39:06,671 [7] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, tipo as [value], [order] from dn_task_tipo
       ) t order by t.[order]
2021-02-07 17:39:06,674 [7] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value]
       union select nome as title, nome as [value] from users
       ) t order by 2
2021-02-07 17:39:10,894 [16] INFO dn_lib.tools.log - reload config docs
2021-02-07 17:39:10,899 [16] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:39:10,899 [16] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:39:10,899 [16] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:39:10,899 [16] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:39:10,899 [16] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:39:10,899 [16] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:39:10,899 [16] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:39:10,899 [16] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:39:10,899 [16] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:39:10,899 [16] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:39:10,899 [16] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:39:10,910 [16] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:39:10,910 [16] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:39:10,910 [16] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:39:10,910 [16] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:39:10,910 [16] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:39:10,910 [16] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:39:10,910 [16] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:39:10,910 [16] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:39:10,910 [16] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:39:10,910 [16] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:39:10,910 [16] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:39:10,910 [16] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:39:10,910 [16] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:39:10,919 [16] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 17:39:10,919 [16] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 17:39:10,919 [16] DEBUG dn_lib.tools.log - SQL: 
 update clients set session_id = '3ravs1wcyz1oy2s0lm4cipur', dt_session_id = getdate() where client_key = 'CD54BC0E46CF621374E9';
 select top 1 1 from clients where client_key = 'CD54BC0E46CF621374E9' 
  and datediff(second, dt_refresh, getdate()) < interval_ss + 5;
2021-02-07 17:39:10,933 [16] DEBUG dn_lib.tools.log - SQL: select content from dn_tasks_notes 
       where task_id = 1444
2021-02-07 17:39:10,933 [16] DEBUG dn_lib.tools.log - SQL: select a.file_id, a.file_name, a.extension, a.http_path , null as found_file       
       , (select top 1 1 from dn_tasks where task_id = a.task_id and file_id = a.file_id) as file_task
      from vw_task_allegati a
      where a.task_id = 1444
2021-02-07 17:39:17,425 [15] INFO dn_lib.tools.log - reload config docs
2021-02-07 17:39:17,426 [15] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:39:17,427 [15] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:39:17,428 [15] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:39:17,428 [15] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:39:17,429 [15] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:39:17,430 [15] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:39:17,431 [15] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:39:17,432 [15] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:39:17,433 [15] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:39:17,433 [15] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:39:17,434 [15] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:39:17,435 [15] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:39:17,436 [15] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:39:17,438 [15] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:39:17,439 [15] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:39:17,439 [15] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:39:17,440 [15] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 17:39:17,441 [15] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 17:39:17,441 [15] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 17:39:17,442 [15] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 17:39:17,443 [15] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 17:39:17,444 [15] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 17:39:17,444 [15] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 17:39:17,445 [15] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 17:39:17,446 [15] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 17:39:17,449 [15] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 17:39:17,450 [15] DEBUG dn_lib.tools.log - SQL: 
 update clients set session_id = '3ravs1wcyz1oy2s0lm4cipur', dt_session_id = getdate() where client_key = 'CD54BC0E46CF621374E9';
 select top 1 1 from clients where client_key = 'CD54BC0E46CF621374E9' 
  and datediff(second, dt_refresh, getdate()) < interval_ss + 5;
2021-02-07 17:39:17,460 [15] DEBUG dn_lib.tools.log - SQL: insert into clients_cmds (client_key, cmd)
  select t.ck, t.cmd
   from (select 'CD54BC0E46CF621374E9' as ck, 'open_att#file_id:4318#user_id:1#user_name:molinero' as cmd) t
   join clients c on c.client_key = t.ck and datediff(second, c.dt_refresh, getdate()) < c.interval_ss + 5
2021-02-07 18:13:46,744 [7] INFO dn_lib.tools.log - reload core
2021-02-07 18:13:46,785 [7] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:13:46,787 [7] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:13:46,787 [7] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:13:46,788 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:13:46,789 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:13:46,789 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:13:46,790 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:13:46,792 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:13:46,793 [7] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:13:46,793 [7] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:13:46,795 [7] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:13:46,795 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:13:46,796 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:13:46,797 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:13:46,798 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:13:46,798 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:13:46,799 [7] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:13:46,800 [7] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:13:46,806 [7] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:13:46,808 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:13:46,810 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:13:46,811 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:13:46,812 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:13:46,813 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:13:46,814 [7] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:13:46,815 [7] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:13:46,860 [7] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:13:46,904 [8] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:13:46,905 [8] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:13:46,905 [8] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:13:46,906 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:13:46,907 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:13:46,908 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:13:46,909 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:13:46,910 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:13:46,911 [8] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:13:46,912 [8] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:13:46,913 [8] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:13:46,913 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:13:46,914 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:13:46,915 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:13:46,916 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:13:46,916 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:13:46,917 [8] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:13:46,918 [8] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:13:46,919 [8] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:13:46,920 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:13:46,920 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:13:46,921 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:13:46,922 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:13:46,923 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:13:46,923 [8] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:13:46,924 [8] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:13:46,929 [8] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:13:46,979 [9] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:13:46,980 [9] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:13:46,981 [9] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:13:46,981 [9] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:13:46,982 [9] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:13:46,983 [9] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:13:46,984 [9] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:13:46,984 [9] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:13:46,985 [9] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:13:46,985 [9] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:13:46,986 [9] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:13:46,986 [9] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:13:46,987 [9] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:13:46,987 [9] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:13:46,988 [9] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:13:46,988 [9] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:13:46,989 [9] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:13:46,990 [9] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:13:46,990 [9] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:13:46,992 [9] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:13:46,992 [9] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:13:46,993 [9] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:13:46,994 [9] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:13:46,994 [9] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:13:46,995 [9] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:13:46,998 [9] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:13:47,003 [9] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:13:47,016 [9] DEBUG dn_lib.tools.log - SQL: select task_filter_id, filter_title, filter_notes, filter_def, filter_class
 from dn_tasks_filters order by filter_order
2021-02-07 18:13:47,024 [9] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:13:47,027 [9] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:13:47,028 [9] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:13:47,029 [9] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:13:47,031 [9] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:13:47,031 [9] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:13:47,037 [9] DEBUG dn_lib.tools.log - SQL: select ft.tp, ft.synch_folder_id, ft.folder_id, ft.parent_id, ft.title
       , ft.des, ft.http_path, ft.lvl, dbo.folder_path(ft.folder_id) as folder_path
       , (select top 1 1 from dn_tasks where folder_id = ft.folder_id) as is_task
      from dbo.fnc_dn_folders(null, null) ft
      
      order by ft.synch_folder_id, ft.lvl, ft.title
2021-02-07 18:13:47,051 [9] DEBUG dn_lib.tools.log - SQL: select f.synch_folder_id, f.file_id, f.folder_id, f.file_name, f.dt_ins , null as found_file
       from dn_files f
       where exists (select top 1 1 from dbo.fnc_dn_folders(null, null) ft 
        
	      where ft.synch_folder_id = f.synch_folder_id 
          and isnull(ft.folder_id, 0) = isnull(f.folder_id, 0))
2021-02-07 18:13:47,063 [9] DEBUG dn_lib.tools.log - SQL: select t3.*
      , tst.stato, tst.[order] as stato_order, isnull(tst.class, 'light') as stato_class, isnull(tst.title_plurale, '') as stato_title_plurale, isnull(tst.title_singolare, '') as stato_title_singolare
      , tp.priorita, tp.[order] as priorita_order, isnull(tp.class, 'light') as priorita_class, isnull(tp.title_plurale, '') as priorita_title_plurale, isnull(tp.title_singolare, '') as priorita_title_singolare
      , tt.tipo, tt.[order] as tipo_order, isnull(tt.class, 'light') as tipo_class, isnull(tt.title_plurale, '') as tipo_title_plurale, isnull(tt.title_singolare, '') as tipo_title_singolare
      , ts.stima, ts.[days] as stima_days, isnull(ts.class, 'light') as stima_class, isnull(ts.title_plurale, '') as stima_title_plurale, isnull(ts.title_singolare, '') as stima_title_singolare
      , (select top 1 1 from dn_tasks_notes where task_id = t3.task_id) as task_notes
      , (select top 1 1 from vw_task_allegati f2 where f2.task_id = t3.task_id 
          and not exists (select top 1 1 from dn_files_info where file_name = f2.file_name)) as task_files
  from (select t2.*, datediff(day, t2.dt_ref, getdate()) as diff_days
    from (select t.task_id, t.synch_folder_id, isnull(t.folder_id, f.folder_id) as folder_id
	   , t.file_id, t.title, t.[user], t.stato, t.priorita, t.tipo, t.stima, t.dt_ins, t.dt_upd
     , (case when t.dt_ins > t.dt_upd then t.dt_ins else t.dt_upd end) as dt_ref
	  from dn_tasks t
    
	  left join dn_files f on f.file_id = t.file_id
    where (null is null or (null is not null and t.task_id = null)) ) t2
    where exists (select top 1 1 from dbo.fnc_dn_folders(null, null) ft 
	    where  ft.synch_folder_id = t2.synch_folder_id 
       and isnull(ft.folder_id, 0) = isnull(t2.folder_id, 0))) t3
   left join dn_task_stato tst on tst.stato = t3.stato
   left join dn_task_priorita tp on tp.priorita = t3.priorita
   left join dn_task_tipo tt on tt.tipo = t3.tipo
   left join dn_task_stima ts on ts.stima = t3.stima
   where 1 = 1  and t3.stato = 'in_corso' or t3.diff_days <= 14
2021-02-07 18:13:47,095 [9] DEBUG dn_lib.tools.log - SQL: select title_singolare, stato from dn_task_stato order by [order]
2021-02-07 18:13:47,112 [9] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, priorita as [value], [order] from dn_task_priorita
      ) t order by t.[order]
2021-02-07 18:13:47,214 [9] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [days]
       union select title_singolare as title, stima as [value], [days] from dn_task_stima 
       ) t order by t.[days]
2021-02-07 18:13:47,218 [9] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, tipo as [value], [order] from dn_task_tipo
       ) t order by t.[order]
2021-02-07 18:13:47,221 [9] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value]
       union select nome as title, nome as [value] from users
       ) t order by 2
2021-02-07 18:13:54,998 [8] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:13:55,000 [8] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:13:55,001 [8] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:13:55,001 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:13:55,002 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:13:55,003 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:13:55,003 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:13:55,004 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:13:55,005 [8] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:13:55,006 [8] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:13:55,007 [8] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:13:55,008 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:13:55,008 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:13:55,009 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:13:55,009 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:13:55,010 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:13:55,010 [8] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:13:55,011 [8] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:13:55,011 [8] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:13:55,012 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:13:55,012 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:13:55,013 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:13:55,013 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:13:55,014 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:13:55,014 [8] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:13:55,015 [8] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:13:55,018 [8] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:13:55,034 [9] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:13:55,035 [9] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:13:55,036 [9] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:13:55,037 [9] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:13:55,037 [9] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:13:55,038 [9] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:13:55,039 [9] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:13:55,040 [9] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:13:55,041 [9] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:13:55,042 [9] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:13:55,043 [9] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:13:55,043 [9] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:13:55,044 [9] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:13:55,044 [9] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:13:55,045 [9] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:13:55,045 [9] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:13:55,046 [9] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:13:55,047 [9] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:13:55,047 [9] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:13:55,048 [9] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:13:55,049 [9] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:13:55,049 [9] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:13:55,050 [9] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:13:55,050 [9] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:13:55,051 [9] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:13:55,052 [9] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:13:55,054 [9] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:13:55,083 [8] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:13:55,083 [8] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:13:55,084 [8] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:13:55,085 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:13:55,085 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:13:55,086 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:13:55,086 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:13:55,087 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:13:55,088 [8] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:13:55,089 [8] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:13:55,089 [8] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:13:55,090 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:13:55,090 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:13:55,091 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:13:55,091 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:13:55,092 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:13:55,092 [8] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:13:55,093 [8] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:13:55,094 [8] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:13:55,094 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:13:55,095 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:13:55,096 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:13:55,097 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:13:55,097 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:13:55,098 [8] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:13:55,098 [8] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:13:55,100 [8] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:13:55,651 [7] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:13:55,652 [7] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:13:55,653 [7] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:13:55,654 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:13:55,655 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:13:55,656 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:13:55,657 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:13:55,657 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:13:55,658 [7] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:13:55,659 [7] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:13:55,660 [7] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:13:55,661 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:13:55,662 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:13:55,662 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:13:55,663 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:13:55,663 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:13:55,664 [7] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:13:55,665 [7] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:13:55,665 [7] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:13:55,666 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:13:55,667 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:13:55,668 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:13:55,669 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:13:55,669 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:13:55,670 [7] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:13:55,671 [7] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:13:55,675 [7] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:13:55,712 [7] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-02-07 18:13:55,715 [7] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-02-07 18:13:55,727 [7] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-02-07 18:13:55,729 [7] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-02-07 18:13:55,732 [7] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-02-07 18:13:55,735 [7] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-02-07 18:13:55,736 [7] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-02-07 18:13:55,739 [7] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-02-07 18:13:55,746 [7] DEBUG dn_lib.tools.log - elenco cartelle da sincronizzare
2021-02-07 18:13:55,747 [7] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-02-07 18:13:55,748 [7] DEBUG dn_lib.tools.log -    - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-02-07 18:13:55,750 [7] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-02-07 18:13:55,756 [7] DEBUG dn_lib.tools.log - elaboro la cartella C:\root\todd\_test\dn...
2021-02-07 18:13:55,758 [7] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id is null and file_name = '20200101.orces.incorso.task.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, null, '20200101.orces.incorso.task.txt', '.txt', 1, convert(datetime, '2021-02-07 18:13:16', 120), convert(datetime, '2021-02-07 18:13:36', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-02-07 18:13:16', 120), dt_upd = convert(datetime, '2021-02-07 18:13:36', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-02-07 18:13:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-02-07 18:13:36', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-02-07 18:13:55,766 [7] DEBUG dn_lib.tools.log - aggiunto file al database: C:\root\todd\_test\dn\20200101.orces.incorso.task.txt
2021-02-07 18:13:55,773 [7] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4319;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4319, '.txt', @content, convert(datetime, '2021-02-07 18:13:16', 120), convert(datetime, '2021-02-07 18:13:36', 120));
2021-02-07 18:13:55,778 [7] DEBUG dn_lib.tools.log - salvato contenuto file nel database: C:\root\todd\_test\dn\20200101.orces.incorso.task.txt
2021-02-07 18:13:55,828 [7] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4319;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, null, 4319, left('orces', 150)
            , NULL, convert(datetime, '2020-01-01 00:00:00', 120), convert(datetime, '2021-02-07 18:13:36', 120), 1
            , 'in_corso', NULL, NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-01-01 00:00:00', 120), dt_upd = convert(datetime, '2021-02-07 18:13:36', 120)
         , title = left('orces', 150), [user] = NULL
         , stato = 'in_corso', priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-01-01 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-02-07 18:13:36', 120), getdate())
          or isnull(title, '') <> isnull('orces', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('in_corso', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-02-07 18:13:55,835 [7] DEBUG dn_lib.tools.log - inserito task nel database: C:\root\todd\_test\dn\orces
2021-02-07 18:13:55,836 [7] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1445;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1445, 4319, @content
          , convert(datetime, '2021-02-07 18:13:16', 120), convert(datetime, '2021-02-07 18:13:36', 120));
2021-02-07 18:13:55,838 [7] DEBUG dn_lib.tools.log - salvate le note del task nel database: C:\root\todd\_test\dn\20200101.orces.incorso.task.txt
2021-02-07 18:14:36,953 [7] DEBUG dn_lib.tools.log - trasformazione task file in task folder: C:\root\todd\_test\dn\20200101.orces.incorso.task.txt
2021-02-07 18:14:36,958 [7] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = '20200101.orces.incorso.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, '20200101.orces.incorso.task', 1, convert(datetime, '2021-02-07 18:13:16', 120), convert(datetime, '2021-02-07 18:13:16', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-02-07 18:13:16', 120), dt_upd = convert(datetime, '2021-02-07 18:13:16', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-02-07 18:13:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-02-07 18:13:16', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-02-07 18:14:36,965 [7] DEBUG dn_lib.tools.log - creato folder: C:\root\todd\_test\dn\20200101.orces.incorso.task
2021-02-07 18:14:36,967 [7] DEBUG dn_lib.tools.log - SQL: delete from dn_files where file_id = 4319;
      delete from dn_files_contents where [file_id] = 4319;
      
      delete dn from dn_tasks dn
       where file_id is not null and not exists (select top 1 1 from dn_files where file_id = dn.file_id);
  
      delete dn from dn_tasks_notes dn
       where not exists (select top 1 1 from dn_tasks where task_id = dn.task_id);
2021-02-07 18:14:36,976 [7] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1828 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1828, 'i.txt', '.txt', 1, convert(datetime, '2021-02-07 18:13:16', 120), convert(datetime, '2021-02-07 18:13:16', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-02-07 18:13:16', 120), dt_upd = convert(datetime, '2021-02-07 18:13:16', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-02-07 18:13:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-02-07 18:13:16', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-02-07 18:14:36,982 [7] DEBUG dn_lib.tools.log - SQL: update dn_tasks set dt_upd = convert(datetime, convert(varchar, getdate(), 120), 120), folder_id = 1828, file_id = null
        where task_id = 1445;
2021-02-07 18:14:36,985 [7] DEBUG dn_lib.tools.log - spostato file da: C:\root\todd\_test\dn\20200101.orces.incorso.task.txt, a:C:\root\todd\_test\dn\20200101.orces.incorso.task\i.txt
2021-02-07 18:14:36,987 [7] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1445;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1445, 4320, @content
          , convert(datetime, convert(varchar, getdate(), 120), 120), convert(datetime, convert(varchar, getdate(), 120), 120));
      update dn_tasks set dt_upd = convert(datetime, convert(varchar, getdate(), 120), 120) where task_id = 1445;
2021-02-07 18:14:36,990 [7] DEBUG dn_lib.tools.log - salvate le note del task: C:\root\todd\_test\dn\20200101.orces.incorso.task
2021-02-07 18:14:37,033 [7] DEBUG dn_lib.tools.log - rinominato folder: C:\root\todd\_test\dn\20200101.orces.incorso.task, in: C:\root\todd\_test\dn\orces.task
2021-02-07 18:14:37,035 [7] DEBUG dn_lib.tools.log - SQL: update dn_folders set folder_name = 'orces.task', dt_upd = convert(datetime, convert(varchar, getdate(), 120), 120)
        where folder_id = 1828
2021-02-07 18:14:37,042 [7] DEBUG dn_lib.tools.log - salvato index doc: C:\root\todd\_test\dn\orces.task\__i.xml
2021-02-07 18:14:37,043 [7] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1828 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, 1828, null, left('orces', 150)
            , NULL, convert(datetime, '2020-01-01 00:00:00', 120), convert(datetime, '2021-02-07 18:13:36', 120), 1
            , 'in_corso', NULL, NULL, NULL, convert(datetime, '2021-02-07 18:14:37', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-01-01 00:00:00', 120), dt_upd = convert(datetime, '2021-02-07 18:13:36', 120)
         , title = left('orces', 150), [user] = NULL
         , stato = 'in_corso', priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = convert(datetime, '2021-02-07 18:14:37', 120)
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-01-01 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-02-07 18:13:36', 120), getdate())
          or isnull(title, '') <> isnull('orces', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('in_corso', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-02-07 18:14:37,048 [7] DEBUG dn_lib.tools.log - aggiunto task al database: orces
2021-02-07 18:14:37,050 [7] DEBUG dn_lib.tools.log - SQL: declare @cc_files int; declare @cc_folders int;
      select @cc_files = (select count(*) from dn_files where readed is null) 
      select @cc_folders = (select count(*) from dn_folders where readed is null)
      
      delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
      select @cc_files, @cc_folders;
2021-02-07 18:14:37,056 [7] DEBUG dn_lib.tools.log - cancellati dal database: 1 files
2021-02-07 18:14:37,057 [7] DEBUG dn_lib.tools.log - cancellati dal database: 1 folders
2021-02-07 18:14:37,058 [7] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '1')
        else update users_cache set var_value = substring('1', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-02-07 18:14:37,061 [7] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '0')
        else update users_cache set var_value = substring('0', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-02-07 18:14:37,064 [7] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/02/07 18:13:36')
        else update users_cache set var_value = substring('2021/02/07 18:13:36', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-02-07 18:14:37,068 [7] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/02/07 18:14:37')
        else update users_cache set var_value = substring('2021/02/07 18:14:37', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-02-07 18:15:12,006 [7] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:15:12,007 [7] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:15:12,008 [7] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:15:12,010 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:15:12,011 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:15:12,012 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:15:12,013 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:15:12,014 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:15:12,015 [7] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:15:12,016 [7] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:15:12,017 [7] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:15:12,018 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:15:12,018 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:15:12,019 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:15:12,020 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:15:12,021 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:15:12,022 [7] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:15:12,023 [7] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:15:12,024 [7] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:15:12,024 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:15:12,025 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:15:12,026 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:15:12,027 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:15:12,028 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:15:12,028 [7] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:15:12,029 [7] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:15:12,033 [7] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:15:12,051 [9] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:15:12,052 [9] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:15:12,053 [9] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:15:12,053 [9] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:15:12,054 [9] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:15:12,055 [9] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:15:12,056 [9] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:15:12,057 [9] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:15:12,057 [9] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:15:12,058 [9] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:15:12,059 [9] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:15:12,060 [9] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:15:12,061 [9] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:15:12,062 [9] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:15:12,062 [9] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:15:12,063 [9] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:15:12,063 [9] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:15:12,064 [9] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:15:12,065 [9] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:15:12,065 [9] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:15:12,066 [9] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:15:12,066 [9] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:15:12,067 [9] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:15:12,068 [9] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:15:12,068 [9] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:15:12,069 [9] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:15:12,072 [9] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:15:12,101 [8] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:15:12,102 [8] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:15:12,102 [8] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:15:12,103 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:15:12,103 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:15:12,104 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:15:12,105 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:15:12,106 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:15:12,106 [8] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:15:12,107 [8] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:15:12,107 [8] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:15:12,108 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:15:12,108 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:15:12,108 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:15:12,109 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:15:12,109 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:15:12,110 [8] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:15:12,110 [8] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:15:12,111 [8] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:15:12,112 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:15:12,112 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:15:12,113 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:15:12,113 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:15:12,114 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:15:12,114 [8] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:15:12,115 [8] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:15:12,117 [8] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:15:12,672 [11] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:15:12,672 [11] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:15:12,673 [11] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:15:12,674 [11] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:15:12,674 [11] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:15:12,675 [11] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:15:12,676 [11] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:15:12,677 [11] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:15:12,677 [11] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:15:12,678 [11] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:15:12,679 [11] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:15:12,679 [11] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:15:12,680 [11] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:15:12,681 [11] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:15:12,681 [11] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:15:12,682 [11] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:15:12,682 [11] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:15:12,683 [11] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:15:12,683 [11] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:15:12,684 [11] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:15:12,684 [11] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:15:12,685 [11] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:15:12,686 [11] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:15:12,686 [11] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:15:12,687 [11] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:15:12,687 [11] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:15:12,690 [11] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:15:12,693 [11] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-02-07 18:15:12,695 [11] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-02-07 18:15:12,697 [11] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-02-07 18:15:12,699 [11] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-02-07 18:15:12,701 [11] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-02-07 18:15:12,703 [11] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-02-07 18:15:12,706 [11] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-02-07 18:15:12,707 [11] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-02-07 18:15:12,710 [11] DEBUG dn_lib.tools.log - elenco cartelle da sincronizzare
2021-02-07 18:15:12,711 [11] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-02-07 18:15:12,714 [11] DEBUG dn_lib.tools.log -    - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-02-07 18:15:12,715 [11] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-02-07 18:15:12,727 [11] DEBUG dn_lib.tools.log - elaboro la cartella C:\root\todd\_test\dn...
2021-02-07 18:15:12,728 [11] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id is null and file_name = '20200101.orc.incorso.task.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, null, '20200101.orc.incorso.task.txt', '.txt', 1, convert(datetime, '2021-02-07 18:14:50', 120), convert(datetime, '2021-02-07 18:15:06', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-02-07 18:14:50', 120), dt_upd = convert(datetime, '2021-02-07 18:15:06', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-02-07 18:14:50', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-02-07 18:15:06', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-02-07 18:15:12,734 [11] DEBUG dn_lib.tools.log - aggiunto file al database: C:\root\todd\_test\dn\20200101.orc.incorso.task.txt
2021-02-07 18:15:12,741 [11] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4321;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4321, '.txt', @content, convert(datetime, '2021-02-07 18:14:50', 120), convert(datetime, '2021-02-07 18:15:06', 120));
2021-02-07 18:15:12,744 [11] DEBUG dn_lib.tools.log - salvato contenuto file nel database: C:\root\todd\_test\dn\20200101.orc.incorso.task.txt
2021-02-07 18:15:12,773 [11] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4321;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, null, 4321, left('orc', 150)
            , NULL, convert(datetime, '2020-01-01 00:00:00', 120), convert(datetime, '2021-02-07 18:15:06', 120), 1
            , 'in_corso', NULL, NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-01-01 00:00:00', 120), dt_upd = convert(datetime, '2021-02-07 18:15:06', 120)
         , title = left('orc', 150), [user] = NULL
         , stato = 'in_corso', priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-01-01 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-02-07 18:15:06', 120), getdate())
          or isnull(title, '') <> isnull('orc', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('in_corso', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-02-07 18:15:12,779 [11] DEBUG dn_lib.tools.log - inserito task nel database: C:\root\todd\_test\dn\orc
2021-02-07 18:15:54,324 [11] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1447;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1447, 4321, @content
          , convert(datetime, '2021-02-07 18:14:50', 120), convert(datetime, '2021-02-07 18:15:06', 120));
2021-02-07 18:16:00,514 [11] DEBUG dn_lib.tools.log - salvate le note del task nel database: C:\root\todd\_test\dn\20200101.orc.incorso.task.txt
2021-02-07 18:16:09,533 [11] DEBUG dn_lib.tools.log - trasformazione task file in task folder: C:\root\todd\_test\dn\20200101.orc.incorso.task.txt
2021-02-07 18:16:14,170 [11] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = '20200101.orc.incorso.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, '20200101.orc.incorso.task', 1, convert(datetime, '2021-02-07 18:14:50', 120), convert(datetime, '2021-02-07 18:14:50', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-02-07 18:14:50', 120), dt_upd = convert(datetime, '2021-02-07 18:14:50', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-02-07 18:14:50', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-02-07 18:14:50', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-02-07 18:16:14,986 [11] DEBUG dn_lib.tools.log - creato folder: C:\root\todd\_test\dn\20200101.orc.incorso.task
2021-02-07 18:16:25,939 [11] DEBUG dn_lib.tools.log - SQL: delete from dn_files where file_id = 4321;
      delete from dn_files_contents where [file_id] = 4321;
      
      delete dn from dn_tasks dn
       where file_id is not null and not exists (select top 1 1 from dn_files where file_id = dn.file_id);
  
      delete dn from dn_tasks_notes dn
       where not exists (select top 1 1 from dn_tasks where task_id = dn.task_id);
2021-02-07 18:16:26,441 [11] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1829 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1829, 'i.txt', '.txt', 1, convert(datetime, '2021-02-07 18:14:50', 120), convert(datetime, '2021-02-07 18:14:50', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-02-07 18:14:50', 120), dt_upd = convert(datetime, '2021-02-07 18:14:50', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-02-07 18:14:50', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-02-07 18:14:50', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-02-07 18:16:26,907 [11] DEBUG dn_lib.tools.log - SQL: update dn_tasks set dt_upd = convert(datetime, convert(varchar, getdate(), 120), 120), folder_id = 1829, file_id = null
        where task_id = 1447;
2021-02-07 18:16:27,582 [11] DEBUG dn_lib.tools.log - spostato file da: C:\root\todd\_test\dn\20200101.orc.incorso.task.txt, a:C:\root\todd\_test\dn\20200101.orc.incorso.task\i.txt
2021-02-07 18:16:57,208 [11] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1447;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1447, 4322, @content
          , convert(datetime, convert(varchar, getdate(), 120), 120), convert(datetime, convert(varchar, getdate(), 120), 120));
      update dn_tasks set dt_upd = convert(datetime, convert(varchar, getdate(), 120), 120) where task_id = 1447;
2021-02-07 18:16:57,657 [11] DEBUG dn_lib.tools.log - salvate le note del task: C:\root\todd\_test\dn\20200101.orc.incorso.task
2021-02-07 18:17:55,335 [11] DEBUG dn_lib.tools.log - rinominato folder: C:\root\todd\_test\dn\20200101.orc.incorso.task, in: C:\root\todd\_test\dn\orc.task
2021-02-07 18:17:56,300 [11] DEBUG dn_lib.tools.log - SQL: update dn_folders set folder_name = 'orc.task', dt_upd = convert(datetime, convert(varchar, getdate(), 120), 120)
        where folder_id = 1829
2021-02-07 18:18:06,990 [11] DEBUG dn_lib.tools.log - salvato index doc: C:\root\todd\_test\dn\orc.task\__i.xml
2021-02-07 18:18:14,029 [11] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1829 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, 1829, null, left('orc', 150)
            , NULL, convert(datetime, '2020-01-01 00:00:00', 120), convert(datetime, '2021-02-07 18:15:06', 120), 1
            , 'in_corso', NULL, NULL, NULL, convert(datetime, '2021-02-07 18:18:04', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-01-01 00:00:00', 120), dt_upd = convert(datetime, '2021-02-07 18:15:06', 120)
         , title = left('orc', 150), [user] = NULL
         , stato = 'in_corso', priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = convert(datetime, '2021-02-07 18:18:04', 120)
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-01-01 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-02-07 18:15:06', 120), getdate())
          or isnull(title, '') <> isnull('orc', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('in_corso', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-02-07 18:18:15,035 [11] DEBUG dn_lib.tools.log - aggiunto task al database: orc
2021-02-07 18:18:18,440 [11] DEBUG dn_lib.tools.log - SQL: declare @cc_files int; declare @cc_folders int;
      select @cc_files = (select count(*) from dn_files where readed is null) 
      select @cc_folders = (select count(*) from dn_folders where readed is null)
      
      delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
      select @cc_files, @cc_folders;
2021-02-07 18:18:18,458 [11] DEBUG dn_lib.tools.log - cancellati dal database: 1 files
2021-02-07 18:18:18,460 [11] DEBUG dn_lib.tools.log - cancellati dal database: 1 folders
2021-02-07 18:18:18,460 [11] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '1')
        else update users_cache set var_value = substring('1', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-02-07 18:18:18,466 [11] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '0')
        else update users_cache set var_value = substring('0', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-02-07 18:18:18,470 [11] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/02/07 18:15:06')
        else update users_cache set var_value = substring('2021/02/07 18:15:06', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-02-07 18:18:18,473 [11] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/02/07 18:18:18')
        else update users_cache set var_value = substring('2021/02/07 18:18:18', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-02-07 18:18:23,025 [21] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:18:23,026 [21] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:18:23,027 [21] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:18:23,027 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:18:23,028 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:18:23,029 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:18:23,029 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:18:23,030 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:18:23,031 [21] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:18:23,032 [21] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:18:23,032 [21] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:18:23,033 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:18:23,033 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:18:23,034 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:18:23,034 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:18:23,035 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:18:23,035 [21] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:18:23,036 [21] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:18:23,036 [21] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:18:23,037 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:18:23,037 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:18:23,038 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:18:23,038 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:18:23,039 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:18:23,039 [21] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:18:23,040 [21] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:18:23,041 [21] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:18:23,059 [20] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:18:23,059 [20] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:18:23,060 [20] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:18:23,061 [20] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:18:23,061 [20] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:18:23,062 [20] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:18:23,064 [20] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:18:23,064 [20] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:18:23,065 [20] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:18:23,065 [20] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:18:23,066 [20] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:18:23,066 [20] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:18:23,067 [20] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:18:23,067 [20] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:18:23,068 [20] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:18:23,068 [20] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:18:23,069 [20] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:18:23,069 [20] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:18:23,070 [20] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:18:23,071 [20] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:18:23,072 [20] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:18:23,073 [20] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:18:23,073 [20] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:18:23,074 [20] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:18:23,074 [20] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:18:23,075 [20] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:18:23,078 [20] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:18:23,110 [21] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:18:23,111 [21] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:18:23,112 [21] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:18:23,113 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:18:23,114 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:18:23,115 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:18:23,115 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:18:23,116 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:18:23,117 [21] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:18:23,117 [21] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:18:23,118 [21] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:18:23,118 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:18:23,119 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:18:23,120 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:18:23,120 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:18:23,121 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:18:23,121 [21] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:18:23,122 [21] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:18:23,123 [21] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:18:23,123 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:18:23,124 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:18:23,124 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:18:23,125 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:18:23,126 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:18:23,126 [21] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:18:23,127 [21] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:18:23,130 [21] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:18:23,131 [21] DEBUG dn_lib.tools.log - SQL: select task_filter_id, filter_title, filter_notes, filter_def, filter_class
 from dn_tasks_filters order by filter_order
2021-02-07 18:18:23,133 [21] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:18:23,135 [21] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:18:23,136 [21] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:18:23,136 [21] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:18:23,138 [21] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:18:23,139 [21] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:18:23,139 [21] DEBUG dn_lib.tools.log - SQL: select ft.tp, ft.synch_folder_id, ft.folder_id, ft.parent_id, ft.title
       , ft.des, ft.http_path, ft.lvl, dbo.folder_path(ft.folder_id) as folder_path
       , (select top 1 1 from dn_tasks where folder_id = ft.folder_id) as is_task
      from dbo.fnc_dn_folders(null, null) ft
      
      order by ft.synch_folder_id, ft.lvl, ft.title
2021-02-07 18:18:23,148 [21] DEBUG dn_lib.tools.log - SQL: select f.synch_folder_id, f.file_id, f.folder_id, f.file_name, f.dt_ins , null as found_file
       from dn_files f
       where exists (select top 1 1 from dbo.fnc_dn_folders(null, null) ft 
        
	      where ft.synch_folder_id = f.synch_folder_id 
          and isnull(ft.folder_id, 0) = isnull(f.folder_id, 0))
2021-02-07 18:18:23,155 [21] DEBUG dn_lib.tools.log - SQL: select t3.*
      , tst.stato, tst.[order] as stato_order, isnull(tst.class, 'light') as stato_class, isnull(tst.title_plurale, '') as stato_title_plurale, isnull(tst.title_singolare, '') as stato_title_singolare
      , tp.priorita, tp.[order] as priorita_order, isnull(tp.class, 'light') as priorita_class, isnull(tp.title_plurale, '') as priorita_title_plurale, isnull(tp.title_singolare, '') as priorita_title_singolare
      , tt.tipo, tt.[order] as tipo_order, isnull(tt.class, 'light') as tipo_class, isnull(tt.title_plurale, '') as tipo_title_plurale, isnull(tt.title_singolare, '') as tipo_title_singolare
      , ts.stima, ts.[days] as stima_days, isnull(ts.class, 'light') as stima_class, isnull(ts.title_plurale, '') as stima_title_plurale, isnull(ts.title_singolare, '') as stima_title_singolare
      , (select top 1 1 from dn_tasks_notes where task_id = t3.task_id) as task_notes
      , (select top 1 1 from vw_task_allegati f2 where f2.task_id = t3.task_id 
          and not exists (select top 1 1 from dn_files_info where file_name = f2.file_name)) as task_files
  from (select t2.*, datediff(day, t2.dt_ref, getdate()) as diff_days
    from (select t.task_id, t.synch_folder_id, isnull(t.folder_id, f.folder_id) as folder_id
	   , t.file_id, t.title, t.[user], t.stato, t.priorita, t.tipo, t.stima, t.dt_ins, t.dt_upd
     , (case when t.dt_ins > t.dt_upd then t.dt_ins else t.dt_upd end) as dt_ref
	  from dn_tasks t
    
	  left join dn_files f on f.file_id = t.file_id
    where (null is null or (null is not null and t.task_id = null)) ) t2
    where exists (select top 1 1 from dbo.fnc_dn_folders(null, null) ft 
	    where  ft.synch_folder_id = t2.synch_folder_id 
       and isnull(ft.folder_id, 0) = isnull(t2.folder_id, 0))) t3
   left join dn_task_stato tst on tst.stato = t3.stato
   left join dn_task_priorita tp on tp.priorita = t3.priorita
   left join dn_task_tipo tt on tt.tipo = t3.tipo
   left join dn_task_stima ts on ts.stima = t3.stima
   where 1 = 1  and t3.stato = 'in_corso' or t3.diff_days <= 14
2021-02-07 18:18:23,170 [21] DEBUG dn_lib.tools.log - SQL: select title_singolare, stato from dn_task_stato order by [order]
2021-02-07 18:18:23,173 [21] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, priorita as [value], [order] from dn_task_priorita
      ) t order by t.[order]
2021-02-07 18:18:23,176 [21] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [days]
       union select title_singolare as title, stima as [value], [days] from dn_task_stima 
       ) t order by t.[days]
2021-02-07 18:18:23,178 [21] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, tipo as [value], [order] from dn_task_tipo
       ) t order by t.[order]
2021-02-07 18:18:23,180 [21] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value]
       union select nome as title, nome as [value] from users
       ) t order by 2
2021-02-07 18:18:26,214 [11] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:18:26,216 [11] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:18:26,217 [11] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:18:26,218 [11] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:18:26,220 [11] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:18:26,221 [11] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:18:26,222 [11] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:18:26,222 [11] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:18:26,223 [11] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:18:26,224 [11] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:18:26,225 [11] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:18:26,226 [11] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:18:26,227 [11] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:18:26,227 [11] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:18:26,228 [11] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:18:26,228 [11] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:18:26,229 [11] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:18:26,230 [11] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:18:26,230 [11] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:18:26,231 [11] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:18:26,232 [11] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:18:26,232 [11] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:18:26,233 [11] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:18:26,233 [11] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:18:26,234 [11] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:18:26,235 [11] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:18:26,238 [11] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:18:26,241 [11] DEBUG dn_lib.tools.log - SQL: select content from dn_tasks_notes 
       where task_id = 1448
2021-02-07 18:18:26,244 [11] DEBUG dn_lib.tools.log - SQL: select a.file_id, a.file_name, a.extension, a.http_path , null as found_file       
       , (select top 1 1 from dn_tasks where task_id = a.task_id and file_id = a.file_id) as file_task
      from vw_task_allegati a
      where a.task_id = 1448
2021-02-07 18:19:24,764 [24] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:19:24,765 [24] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:19:24,766 [24] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:19:24,767 [24] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:19:24,768 [24] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:19:24,769 [24] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:19:24,771 [24] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:19:24,772 [24] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:19:24,772 [24] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:19:24,773 [24] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:19:24,774 [24] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:19:24,774 [24] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:19:24,775 [24] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:19:24,776 [24] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:19:24,776 [24] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:19:24,777 [24] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:19:24,777 [24] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:19:24,778 [24] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:19:24,778 [24] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:19:24,779 [24] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:19:24,780 [24] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:19:24,780 [24] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:19:24,781 [24] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:19:24,782 [24] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:19:24,783 [24] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:19:24,784 [24] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:19:24,788 [24] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:19:24,810 [21] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:19:24,811 [21] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:19:24,811 [21] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:19:24,812 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:19:24,813 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:19:24,814 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:19:24,814 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:19:24,815 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:19:24,816 [21] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:19:24,817 [21] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:19:24,817 [21] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:19:24,818 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:19:24,818 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:19:24,819 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:19:24,819 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:19:24,820 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:19:24,821 [21] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:19:24,821 [21] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:19:24,822 [21] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:19:24,822 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:19:24,823 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:19:24,823 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:19:24,824 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:19:24,825 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:19:24,825 [21] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:19:24,826 [21] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:19:24,828 [21] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:19:24,855 [20] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:19:24,856 [20] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:19:24,857 [20] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:19:24,858 [20] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:19:24,858 [20] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:19:24,859 [20] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:19:24,859 [20] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:19:24,860 [20] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:19:24,861 [20] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:19:24,861 [20] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:19:24,862 [20] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:19:24,862 [20] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:19:24,863 [20] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:19:24,863 [20] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:19:24,864 [20] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:19:24,864 [20] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:19:24,864 [20] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:19:24,865 [20] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:19:24,866 [20] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:19:24,866 [20] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:19:24,867 [20] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:19:24,867 [20] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:19:24,868 [20] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:19:24,868 [20] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:19:24,869 [20] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:19:24,870 [20] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:19:24,872 [20] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:19:25,426 [29] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:19:25,429 [29] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:19:25,430 [29] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:19:25,432 [29] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:19:25,434 [29] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:19:25,435 [29] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:19:25,436 [29] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:19:25,437 [29] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:19:25,438 [29] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:19:25,439 [29] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:19:25,440 [29] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:19:25,441 [29] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:19:25,442 [29] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:19:25,442 [29] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:19:25,443 [29] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:19:25,443 [29] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:19:25,444 [29] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:19:25,445 [29] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:19:25,445 [29] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:19:25,446 [29] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:19:25,447 [29] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:19:25,448 [29] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:19:25,448 [29] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:19:25,449 [29] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:19:25,450 [29] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:19:25,451 [29] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:19:25,453 [29] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:19:25,454 [29] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-02-07 18:19:25,456 [29] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-02-07 18:19:25,458 [29] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-02-07 18:19:25,459 [29] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-02-07 18:19:25,461 [29] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-02-07 18:19:25,463 [29] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-02-07 18:19:25,464 [29] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-02-07 18:19:25,465 [29] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-02-07 18:19:25,467 [29] DEBUG dn_lib.tools.log - elenco cartelle da sincronizzare
2021-02-07 18:19:25,468 [29] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-02-07 18:19:25,469 [29] DEBUG dn_lib.tools.log -    - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-02-07 18:19:25,471 [29] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-02-07 18:19:25,483 [29] DEBUG dn_lib.tools.log - elaboro la cartella C:\root\todd\_test\dn...
2021-02-07 18:19:25,484 [29] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id is null and file_name = '20200101.kikko.ok.task.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, null, '20200101.kikko.ok.task.txt', '.txt', 1, convert(datetime, '2021-02-07 18:18:55', 120), convert(datetime, '2021-02-07 18:19:10', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-02-07 18:18:55', 120), dt_upd = convert(datetime, '2021-02-07 18:19:10', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-02-07 18:18:55', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-02-07 18:19:10', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-02-07 18:19:25,490 [29] DEBUG dn_lib.tools.log - aggiunto file al database: C:\root\todd\_test\dn\20200101.kikko.ok.task.txt
2021-02-07 18:19:25,495 [29] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4323;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4323, '.txt', @content, convert(datetime, '2021-02-07 18:18:55', 120), convert(datetime, '2021-02-07 18:19:10', 120));
2021-02-07 18:19:25,499 [29] DEBUG dn_lib.tools.log - salvato contenuto file nel database: C:\root\todd\_test\dn\20200101.kikko.ok.task.txt
2021-02-07 18:19:25,529 [29] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4323;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, null, 4323, left('kikko', 150)
            , NULL, convert(datetime, '2020-01-01 00:00:00', 120), convert(datetime, '2021-02-07 18:19:10', 120), 1
            , 'fatto', NULL, NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-01-01 00:00:00', 120), dt_upd = convert(datetime, '2021-02-07 18:19:10', 120)
         , title = left('kikko', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-01-01 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-02-07 18:19:10', 120), getdate())
          or isnull(title, '') <> isnull('kikko', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-02-07 18:19:25,535 [29] DEBUG dn_lib.tools.log - inserito task nel database: C:\root\todd\_test\dn\kikko
2021-02-07 18:19:45,788 [29] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1449;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1449, 4323, @content
          , convert(datetime, '2021-02-07 18:18:55', 120), convert(datetime, '2021-02-07 18:19:10', 120));
2021-02-07 18:19:56,058 [29] DEBUG dn_lib.tools.log - salvate le note del task nel database: C:\root\todd\_test\dn\20200101.kikko.ok.task.txt
2021-02-07 18:20:02,384 [29] DEBUG dn_lib.tools.log - trasformazione task file in task folder: C:\root\todd\_test\dn\20200101.kikko.ok.task.txt
2021-02-07 18:20:31,990 [29] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = '20200101.kikko.ok.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, '20200101.kikko.ok.task', 1, convert(datetime, '2021-02-07 18:18:55', 120), convert(datetime, '2021-02-07 18:18:55', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-02-07 18:18:55', 120), dt_upd = convert(datetime, '2021-02-07 18:18:55', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-02-07 18:18:55', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-02-07 18:18:55', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-02-07 18:20:32,444 [29] DEBUG dn_lib.tools.log - creato folder: C:\root\todd\_test\dn\20200101.kikko.ok.task
2021-02-07 18:20:41,860 [29] DEBUG dn_lib.tools.log - SQL: delete from dn_files where file_id = 4323;
      delete from dn_files_contents where [file_id] = 4323;
      
      delete dn from dn_tasks dn
       where file_id is not null and not exists (select top 1 1 from dn_files where file_id = dn.file_id);
  
      delete dn from dn_tasks_notes dn
       where not exists (select top 1 1 from dn_tasks where task_id = dn.task_id);
2021-02-07 18:20:44,660 [29] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1830 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1830, 'i.txt', '.txt', 1, convert(datetime, '2021-02-07 18:18:55', 120), convert(datetime, '2021-02-07 18:18:55', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-02-07 18:18:55', 120), dt_upd = convert(datetime, '2021-02-07 18:18:55', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-02-07 18:18:55', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-02-07 18:18:55', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-02-07 18:20:57,700 [29] DEBUG dn_lib.tools.log - SQL: update dn_tasks set dt_upd = convert(datetime, convert(varchar, getdate(), 120), 120), folder_id = 1830, file_id = null
        where task_id = 1449;
2021-02-07 18:21:19,850 [29] DEBUG dn_lib.tools.log - spostato file da: C:\root\todd\_test\dn\20200101.kikko.ok.task.txt, a:C:\root\todd\_test\dn\20200101.kikko.ok.task\i.txt
2021-02-07 18:21:19,860 [29] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1449;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1449, 4324, @content
          , convert(datetime, convert(varchar, getdate(), 120), 120), convert(datetime, convert(varchar, getdate(), 120), 120));
      update dn_tasks set dt_upd = convert(datetime, convert(varchar, getdate(), 120), 120) where task_id = 1449;
2021-02-07 18:21:19,865 [29] DEBUG dn_lib.tools.log - salvate le note del task: C:\root\todd\_test\dn\20200101.kikko.ok.task
2021-02-07 18:21:19,869 [29] DEBUG dn_lib.tools.log - rinominato folder: C:\root\todd\_test\dn\20200101.kikko.ok.task, in: C:\root\todd\_test\dn\kikko.task
2021-02-07 18:21:19,870 [29] DEBUG dn_lib.tools.log - SQL: update dn_folders set folder_name = 'kikko.task', dt_upd = convert(datetime, convert(varchar, getdate(), 120), 120)
        where folder_id = 1830
2021-02-07 18:21:19,880 [29] DEBUG dn_lib.tools.log - salvato index doc: C:\root\todd\_test\dn\kikko.task\__i.xml
2021-02-07 18:21:19,880 [29] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1830 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, 1830, null, left('kikko', 150)
            , NULL, convert(datetime, '2020-01-01 00:00:00', 120), convert(datetime, '2021-02-07 18:19:10', 120), 1
            , 'fatto', NULL, NULL, NULL, convert(datetime, '2021-02-07 18:21:19', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-01-01 00:00:00', 120), dt_upd = convert(datetime, '2021-02-07 18:19:10', 120)
         , title = left('kikko', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = convert(datetime, '2021-02-07 18:21:19', 120)
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-01-01 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-02-07 18:19:10', 120), getdate())
          or isnull(title, '') <> isnull('kikko', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-02-07 18:21:20,051 [29] DEBUG dn_lib.tools.log - aggiunto task al database: kikko
2021-02-07 18:21:20,057 [29] DEBUG dn_lib.tools.log - SQL: declare @cc_files int; declare @cc_folders int;
      select @cc_files = (select count(*) from dn_files where readed is null) 
      select @cc_folders = (select count(*) from dn_folders where readed is null)
      
      delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
      select @cc_files, @cc_folders;
2021-02-07 18:21:20,068 [29] DEBUG dn_lib.tools.log - cancellati dal database: 1 files
2021-02-07 18:21:20,068 [29] DEBUG dn_lib.tools.log - cancellati dal database: 1 folders
2021-02-07 18:21:20,069 [29] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '1')
        else update users_cache set var_value = substring('1', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-02-07 18:21:20,073 [29] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '0')
        else update users_cache set var_value = substring('0', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-02-07 18:21:20,089 [29] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/02/07 18:19:10')
        else update users_cache set var_value = substring('2021/02/07 18:19:10', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-02-07 18:21:20,107 [29] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/02/07 18:21:20')
        else update users_cache set var_value = substring('2021/02/07 18:21:20', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-02-07 18:21:58,927 [11] INFO dn_lib.tools.log - reload core
2021-02-07 18:21:58,982 [11] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:21:58,984 [11] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:21:58,985 [11] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:21:58,986 [11] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:21:58,986 [11] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:21:58,987 [11] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:21:58,987 [11] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:21:58,988 [11] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:21:58,989 [11] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:21:58,990 [11] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:21:58,991 [11] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:21:58,992 [11] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:21:58,992 [11] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:21:58,995 [11] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:21:58,997 [11] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:21:58,998 [11] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:21:58,999 [11] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:21:58,999 [11] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:21:59,017 [11] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:21:59,020 [11] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:21:59,021 [11] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:21:59,021 [11] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:21:59,022 [11] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:21:59,023 [11] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:21:59,024 [11] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:21:59,025 [11] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:21:59,041 [11] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:21:59,083 [29] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:21:59,084 [29] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:21:59,085 [29] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:21:59,086 [29] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:21:59,087 [29] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:21:59,088 [29] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:21:59,089 [29] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:21:59,090 [29] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:21:59,090 [29] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:21:59,091 [29] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:21:59,091 [29] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:21:59,092 [29] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:21:59,093 [29] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:21:59,093 [29] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:21:59,094 [29] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:21:59,095 [29] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:21:59,096 [29] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:21:59,097 [29] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:21:59,098 [29] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:21:59,099 [29] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:21:59,100 [29] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:21:59,101 [29] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:21:59,102 [29] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:21:59,103 [29] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:21:59,103 [29] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:21:59,104 [29] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:21:59,108 [29] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:21:59,165 [21] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:21:59,166 [21] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:21:59,167 [21] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:21:59,168 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:21:59,169 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:21:59,169 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:21:59,170 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:21:59,171 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:21:59,172 [21] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:21:59,172 [21] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:21:59,173 [21] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:21:59,174 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:21:59,174 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:21:59,175 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:21:59,176 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:21:59,176 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:21:59,177 [21] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:21:59,177 [21] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:21:59,178 [21] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:21:59,179 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:21:59,180 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:21:59,181 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:21:59,182 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:21:59,183 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:21:59,183 [21] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:21:59,187 [21] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:21:59,191 [21] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:21:59,203 [21] DEBUG dn_lib.tools.log - SQL: select task_filter_id, filter_title, filter_notes, filter_def, filter_class
 from dn_tasks_filters order by filter_order
2021-02-07 18:21:59,207 [21] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:21:59,210 [21] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:21:59,212 [21] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:21:59,214 [21] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:21:59,214 [21] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:21:59,215 [21] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:21:59,219 [21] DEBUG dn_lib.tools.log - SQL: select ft.tp, ft.synch_folder_id, ft.folder_id, ft.parent_id, ft.title
       , ft.des, ft.http_path, ft.lvl, dbo.folder_path(ft.folder_id) as folder_path
       , (select top 1 1 from dn_tasks where folder_id = ft.folder_id) as is_task
      from dbo.fnc_dn_folders(null, null) ft
      
      order by ft.synch_folder_id, ft.lvl, ft.title
2021-02-07 18:21:59,229 [21] DEBUG dn_lib.tools.log - SQL: select f.synch_folder_id, f.file_id, f.folder_id, f.file_name, f.dt_ins , null as found_file
       from dn_files f
       where exists (select top 1 1 from dbo.fnc_dn_folders(null, null) ft 
        
	      where ft.synch_folder_id = f.synch_folder_id 
          and isnull(ft.folder_id, 0) = isnull(f.folder_id, 0))
2021-02-07 18:21:59,239 [21] DEBUG dn_lib.tools.log - SQL: select t3.*
      , tst.stato, tst.[order] as stato_order, isnull(tst.class, 'light') as stato_class, isnull(tst.title_plurale, '') as stato_title_plurale, isnull(tst.title_singolare, '') as stato_title_singolare
      , tp.priorita, tp.[order] as priorita_order, isnull(tp.class, 'light') as priorita_class, isnull(tp.title_plurale, '') as priorita_title_plurale, isnull(tp.title_singolare, '') as priorita_title_singolare
      , tt.tipo, tt.[order] as tipo_order, isnull(tt.class, 'light') as tipo_class, isnull(tt.title_plurale, '') as tipo_title_plurale, isnull(tt.title_singolare, '') as tipo_title_singolare
      , ts.stima, ts.[days] as stima_days, isnull(ts.class, 'light') as stima_class, isnull(ts.title_plurale, '') as stima_title_plurale, isnull(ts.title_singolare, '') as stima_title_singolare
      , (select top 1 1 from dn_tasks_notes where task_id = t3.task_id) as task_notes
      , (select top 1 1 from vw_task_allegati f2 where f2.task_id = t3.task_id 
          and not exists (select top 1 1 from dn_files_info where file_name = f2.file_name)) as task_files
  from (select t2.*, datediff(day, t2.dt_ref, getdate()) as diff_days
    from (select t.task_id, t.synch_folder_id, isnull(t.folder_id, f.folder_id) as folder_id
	   , t.file_id, t.title, t.[user], t.stato, t.priorita, t.tipo, t.stima, t.dt_ins, t.dt_upd
     , (case when t.dt_ins > t.dt_upd then t.dt_ins else t.dt_upd end) as dt_ref
	  from dn_tasks t
    
	  left join dn_files f on f.file_id = t.file_id
    where (null is null or (null is not null and t.task_id = null)) ) t2
    where exists (select top 1 1 from dbo.fnc_dn_folders(null, null) ft 
	    where  ft.synch_folder_id = t2.synch_folder_id 
       and isnull(ft.folder_id, 0) = isnull(t2.folder_id, 0))) t3
   left join dn_task_stato tst on tst.stato = t3.stato
   left join dn_task_priorita tp on tp.priorita = t3.priorita
   left join dn_task_tipo tt on tt.tipo = t3.tipo
   left join dn_task_stima ts on ts.stima = t3.stima
   where 1 = 1  and t3.stato = 'in_corso' or t3.diff_days <= 14
2021-02-07 18:21:59,271 [21] DEBUG dn_lib.tools.log - SQL: select title_singolare, stato from dn_task_stato order by [order]
2021-02-07 18:21:59,288 [21] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, priorita as [value], [order] from dn_task_priorita
      ) t order by t.[order]
2021-02-07 18:21:59,371 [21] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [days]
       union select title_singolare as title, stima as [value], [days] from dn_task_stima 
       ) t order by t.[days]
2021-02-07 18:21:59,373 [21] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, tipo as [value], [order] from dn_task_tipo
       ) t order by t.[order]
2021-02-07 18:21:59,376 [21] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value]
       union select nome as title, nome as [value] from users
       ) t order by 2
2021-02-07 18:22:11,664 [11] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:22:11,665 [11] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:22:11,666 [11] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:22:11,667 [11] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:22:11,668 [11] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:22:11,669 [11] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:22:11,669 [11] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:22:11,670 [11] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:22:11,671 [11] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:22:11,672 [11] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:22:11,672 [11] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:22:11,673 [11] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:22:11,674 [11] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:22:11,674 [11] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:22:11,675 [11] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:22:11,675 [11] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:22:11,676 [11] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:22:11,677 [11] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:22:11,678 [11] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:22:11,678 [11] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:22:11,679 [11] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:22:11,679 [11] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:22:11,680 [11] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:22:11,681 [11] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:22:11,681 [11] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:22:11,682 [11] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:22:11,684 [11] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:22:11,702 [29] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:22:11,703 [29] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:22:11,703 [29] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:22:11,704 [29] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:22:11,705 [29] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:22:11,705 [29] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:22:11,706 [29] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:22:11,706 [29] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:22:11,707 [29] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:22:11,707 [29] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:22:11,708 [29] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:22:11,708 [29] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:22:11,709 [29] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:22:11,709 [29] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:22:11,710 [29] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:22:11,711 [29] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:22:11,711 [29] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:22:11,712 [29] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:22:11,712 [29] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:22:11,713 [29] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:22:11,713 [29] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:22:11,714 [29] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:22:11,715 [29] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:22:11,715 [29] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:22:11,716 [29] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:22:11,716 [29] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:22:11,718 [29] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:22:11,748 [21] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:22:11,749 [21] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:22:11,750 [21] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:22:11,750 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:22:11,751 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:22:11,752 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:22:11,753 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:22:11,754 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:22:11,754 [21] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:22:11,755 [21] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:22:11,755 [21] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:22:11,756 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:22:11,756 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:22:11,757 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:22:11,757 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:22:11,758 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:22:11,758 [21] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:22:11,759 [21] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:22:11,759 [21] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:22:11,760 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:22:11,761 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:22:11,761 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:22:11,762 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:22:11,762 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:22:11,763 [21] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:22:11,764 [21] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:22:11,766 [21] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:22:12,335 [33] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:22:12,336 [33] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:22:12,337 [33] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:22:12,337 [33] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:22:12,338 [33] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:22:12,339 [33] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:22:12,340 [33] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:22:12,341 [33] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:22:12,341 [33] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:22:12,342 [33] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:22:12,343 [33] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:22:12,344 [33] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:22:12,344 [33] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:22:12,345 [33] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:22:12,345 [33] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:22:12,346 [33] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:22:12,346 [33] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:22:12,347 [33] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:22:12,347 [33] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:22:12,348 [33] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:22:12,349 [33] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:22:12,349 [33] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:22:12,350 [33] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:22:12,350 [33] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:22:12,351 [33] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:22:12,352 [33] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:22:12,354 [33] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:22:12,389 [33] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-02-07 18:22:12,393 [33] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-02-07 18:22:12,397 [33] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-02-07 18:22:12,399 [33] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-02-07 18:22:12,401 [33] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-02-07 18:22:12,403 [33] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-02-07 18:22:12,404 [33] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-02-07 18:22:12,406 [33] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-02-07 18:22:12,413 [33] DEBUG dn_lib.tools.log - elenco cartelle da sincronizzare
2021-02-07 18:22:12,414 [33] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-02-07 18:22:12,416 [33] DEBUG dn_lib.tools.log -    - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-02-07 18:22:12,418 [33] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-02-07 18:22:12,422 [33] DEBUG dn_lib.tools.log - elaboro la cartella C:\root\todd\_test\dn...
2021-02-07 18:22:12,423 [33] DEBUG dn_lib.tools.log - SQL: declare @cc_files int; declare @cc_folders int;
      select @cc_files = (select count(*) from dn_files where readed is null) 
      select @cc_folders = (select count(*) from dn_folders where readed is null)
      
      delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
      select @cc_files, @cc_folders;
2021-02-07 18:22:12,431 [33] DEBUG dn_lib.tools.log - cancellati dal database: 1 files
2021-02-07 18:22:12,432 [33] DEBUG dn_lib.tools.log - cancellati dal database: 1 folders
2021-02-07 18:22:12,433 [33] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '0')
        else update users_cache set var_value = substring('0', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-02-07 18:22:12,436 [33] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '0')
        else update users_cache set var_value = substring('0', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-02-07 18:22:12,440 [33] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/01/05 15:40:09')
        else update users_cache set var_value = substring('2021/01/05 15:40:09', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-02-07 18:22:12,443 [33] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/02/07 18:22:12')
        else update users_cache set var_value = substring('2021/02/07 18:22:12', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-02-07 18:22:39,480 [11] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:22:39,481 [11] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:22:39,482 [11] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:22:39,483 [11] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:22:39,484 [11] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:22:39,485 [11] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:22:39,486 [11] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:22:39,487 [11] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:22:39,487 [11] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:22:39,488 [11] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:22:39,489 [11] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:22:39,490 [11] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:22:39,490 [11] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:22:39,491 [11] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:22:39,492 [11] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:22:39,493 [11] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:22:39,493 [11] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:22:39,494 [11] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:22:39,494 [11] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:22:39,495 [11] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:22:39,496 [11] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:22:39,496 [11] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:22:39,497 [11] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:22:39,497 [11] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:22:39,498 [11] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:22:39,498 [11] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:22:39,500 [11] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:22:39,515 [29] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:22:39,516 [29] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:22:39,517 [29] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:22:39,517 [29] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:22:39,518 [29] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:22:39,518 [29] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:22:39,519 [29] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:22:39,520 [29] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:22:39,520 [29] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:22:39,521 [29] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:22:39,522 [29] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:22:39,523 [29] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:22:39,523 [29] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:22:39,524 [29] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:22:39,524 [29] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:22:39,525 [29] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:22:39,525 [29] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:22:39,526 [29] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:22:39,526 [29] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:22:39,527 [29] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:22:39,527 [29] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:22:39,528 [29] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:22:39,528 [29] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:22:39,529 [29] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:22:39,529 [29] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:22:39,530 [29] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:22:39,532 [29] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:22:39,559 [21] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:22:39,559 [21] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:22:39,560 [21] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:22:39,561 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:22:39,561 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:22:39,562 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:22:39,563 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:22:39,563 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:22:39,564 [21] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:22:39,564 [21] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:22:39,565 [21] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:22:39,565 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:22:39,566 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:22:39,566 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:22:39,567 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:22:39,567 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:22:39,568 [21] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:22:39,569 [21] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:22:39,569 [21] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:22:39,570 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:22:39,571 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:22:39,571 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:22:39,572 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:22:39,573 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:22:39,574 [21] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:22:39,575 [21] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:22:39,577 [21] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:22:40,145 [44] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:22:40,146 [44] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:22:40,147 [44] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:22:40,147 [44] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:22:40,148 [44] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:22:40,149 [44] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:22:40,150 [44] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:22:40,150 [44] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:22:40,151 [44] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:22:40,152 [44] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:22:40,152 [44] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:22:40,153 [44] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:22:40,153 [44] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:22:40,154 [44] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:22:40,154 [44] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:22:40,155 [44] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:22:40,156 [44] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:22:40,156 [44] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:22:40,157 [44] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:22:40,157 [44] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:22:40,158 [44] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:22:40,159 [44] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:22:40,159 [44] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:22:40,160 [44] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:22:40,161 [44] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:22:40,161 [44] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:22:40,164 [44] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:22:40,165 [44] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-02-07 18:22:40,166 [44] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-02-07 18:22:40,167 [44] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-02-07 18:22:40,168 [44] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-02-07 18:22:40,169 [44] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-02-07 18:22:40,169 [44] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-02-07 18:22:40,170 [44] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-02-07 18:22:40,171 [44] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-02-07 18:22:40,172 [44] DEBUG dn_lib.tools.log - elenco cartelle da sincronizzare
2021-02-07 18:22:40,173 [44] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-02-07 18:22:40,174 [44] DEBUG dn_lib.tools.log -    - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-02-07 18:22:40,174 [44] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-02-07 18:22:40,175 [44] DEBUG dn_lib.tools.log - elaboro la cartella C:\root\todd\_test\dn...
2021-02-07 18:22:40,177 [44] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id is null and file_name = '20200101.mimmo.ok.task.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, null, '20200101.mimmo.ok.task.txt', '.txt', 1, convert(datetime, '2021-02-07 18:22:18', 120), convert(datetime, '2021-02-07 18:22:34', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-02-07 18:22:18', 120), dt_upd = convert(datetime, '2021-02-07 18:22:34', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-02-07 18:22:18', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-02-07 18:22:34', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-02-07 18:22:40,191 [44] DEBUG dn_lib.tools.log - aggiunto file al database: C:\root\todd\_test\dn\20200101.mimmo.ok.task.txt
2021-02-07 18:22:40,197 [44] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4325;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4325, '.txt', @content, convert(datetime, '2021-02-07 18:22:18', 120), convert(datetime, '2021-02-07 18:22:34', 120));
2021-02-07 18:22:40,200 [44] DEBUG dn_lib.tools.log - salvato contenuto file nel database: C:\root\todd\_test\dn\20200101.mimmo.ok.task.txt
2021-02-07 18:22:40,249 [44] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4325;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, null, 4325, left('mimmo', 150)
            , NULL, convert(datetime, '2020-01-01 00:00:00', 120), convert(datetime, '2021-02-07 18:22:34', 120), 1
            , 'fatto', NULL, NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-01-01 00:00:00', 120), dt_upd = convert(datetime, '2021-02-07 18:22:34', 120)
         , title = left('mimmo', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-01-01 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-02-07 18:22:34', 120), getdate())
          or isnull(title, '') <> isnull('mimmo', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-02-07 18:22:40,255 [44] DEBUG dn_lib.tools.log - inserito task nel database: C:\root\todd\_test\dn\mimmo
2021-02-07 18:22:56,095 [44] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1451;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1451, 4325, @content
          , convert(datetime, '2021-02-07 18:22:18', 120), convert(datetime, '2021-02-07 18:22:34', 120));
2021-02-07 18:22:58,740 [44] DEBUG dn_lib.tools.log - salvate le note del task nel database: C:\root\todd\_test\dn\20200101.mimmo.ok.task.txt
2021-02-07 18:23:13,250 [44] DEBUG dn_lib.tools.log - trasformazione task file in task folder: C:\root\todd\_test\dn\20200101.mimmo.ok.task.txt
2021-02-07 18:23:17,401 [44] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = '20200101.mimmo.ok.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, '20200101.mimmo.ok.task', 1, convert(datetime, '2021-02-07 18:22:18', 120), convert(datetime, '2021-02-07 18:22:18', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-02-07 18:22:18', 120), dt_upd = convert(datetime, '2021-02-07 18:22:18', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-02-07 18:22:18', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-02-07 18:22:18', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-02-07 18:23:18,080 [44] DEBUG dn_lib.tools.log - creato folder: C:\root\todd\_test\dn\20200101.mimmo.ok.task
2021-02-07 18:24:05,515 [44] DEBUG dn_lib.tools.log - SQL: delete from dn_files where file_id = 4325;
      delete from dn_files_contents where [file_id] = 4325;
      
      delete dn from dn_tasks dn
       where file_id is not null and not exists (select top 1 1 from dn_files where file_id = dn.file_id);
  
      delete dn from dn_tasks_notes dn
       where not exists (select top 1 1 from dn_tasks where task_id = dn.task_id);
2021-02-07 18:24:07,660 [44] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1831 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1831, 'i.txt', '.txt', 1, convert(datetime, '2021-02-07 18:22:18', 120), convert(datetime, '2021-02-07 18:22:18', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-02-07 18:22:18', 120), dt_upd = convert(datetime, '2021-02-07 18:22:18', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-02-07 18:22:18', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-02-07 18:22:18', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-02-07 18:24:38,050 [44] DEBUG dn_lib.tools.log - SQL: update dn_tasks set dt_upd = convert(datetime, convert(varchar, getdate(), 120), 120), folder_id = 1831, file_id = null
        where task_id = 1451;
2021-02-07 18:24:38,065 [44] DEBUG dn_lib.tools.log - spostato file da: C:\root\todd\_test\dn\20200101.mimmo.ok.task.txt, a:C:\root\todd\_test\dn\20200101.mimmo.ok.task\i.txt
2021-02-07 18:24:38,067 [44] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1451;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1451, 4326, @content
          , convert(datetime, convert(varchar, getdate(), 120), 120), convert(datetime, convert(varchar, getdate(), 120), 120));
      update dn_tasks set dt_upd = convert(datetime, convert(varchar, getdate(), 120), 120) where task_id = 1451;
2021-02-07 18:24:38,077 [44] DEBUG dn_lib.tools.log - salvate le note del task: C:\root\todd\_test\dn\20200101.mimmo.ok.task
2021-02-07 18:24:38,086 [44] DEBUG dn_lib.tools.log - rinominato folder: C:\root\todd\_test\dn\20200101.mimmo.ok.task, in: C:\root\todd\_test\dn\mimmo.task
2021-02-07 18:24:38,088 [44] DEBUG dn_lib.tools.log - SQL: update dn_folders set folder_name = 'mimmo.task', dt_upd = convert(datetime, convert(varchar, getdate(), 120), 120)
        where folder_id = 1831
2021-02-07 18:24:38,100 [44] DEBUG dn_lib.tools.log - salvato index doc: C:\root\todd\_test\dn\mimmo.task\__i.xml
2021-02-07 18:24:38,100 [44] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1831 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, 1831, null, left('mimmo', 150)
            , NULL, convert(datetime, '2020-01-01 00:00:00', 120), convert(datetime, '2021-02-07 18:22:34', 120), 1
            , 'fatto', NULL, NULL, NULL, convert(datetime, '2021-02-07 18:24:38', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-01-01 00:00:00', 120), dt_upd = convert(datetime, '2021-02-07 18:22:34', 120)
         , title = left('mimmo', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = convert(datetime, '2021-02-07 18:24:38', 120)
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-01-01 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-02-07 18:22:34', 120), getdate())
          or isnull(title, '') <> isnull('mimmo', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-02-07 18:24:38,110 [44] DEBUG dn_lib.tools.log - aggiunto task al database: mimmo
2021-02-07 18:24:38,110 [44] DEBUG dn_lib.tools.log - SQL: declare @cc_files int; declare @cc_folders int;
      select @cc_files = (select count(*) from dn_files where readed is null) 
      select @cc_folders = (select count(*) from dn_folders where readed is null)
      
      delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
      select @cc_files, @cc_folders;
2021-02-07 18:24:38,136 [44] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '1')
        else update users_cache set var_value = substring('1', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-02-07 18:24:38,142 [44] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '0')
        else update users_cache set var_value = substring('0', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-02-07 18:24:38,147 [44] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/02/07 18:22:34')
        else update users_cache set var_value = substring('2021/02/07 18:22:34', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-02-07 18:24:38,154 [44] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/02/07 18:24:38')
        else update users_cache set var_value = substring('2021/02/07 18:24:38', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-02-07 18:32:03,383 [10] INFO dn_lib.tools.log - reload core
2021-02-07 18:32:03,411 [10] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:32:03,413 [10] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:32:03,414 [10] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:32:03,415 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:32:03,416 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:32:03,425 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:32:03,435 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:32:03,436 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:32:03,438 [10] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:32:03,439 [10] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:32:03,442 [10] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:32:03,442 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:32:03,442 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:32:03,444 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:32:03,446 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:32:03,446 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:32:03,447 [10] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:32:03,448 [10] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:32:03,455 [10] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:32:03,458 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:32:03,458 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:32:03,459 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:32:03,460 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:32:03,461 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:32:03,462 [10] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:32:03,463 [10] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:32:03,473 [10] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:32:03,487 [28] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:32:03,488 [28] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:32:03,489 [28] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:32:03,489 [28] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:32:03,490 [28] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:32:03,491 [28] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:32:03,492 [28] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:32:03,492 [28] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:32:03,493 [28] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:32:03,493 [28] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:32:03,494 [28] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:32:03,494 [28] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:32:03,495 [28] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:32:03,495 [28] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:32:03,496 [28] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:32:03,496 [28] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:32:03,497 [28] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:32:03,497 [28] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:32:03,498 [28] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:32:03,500 [28] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:32:03,501 [28] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:32:03,501 [28] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:32:03,502 [28] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:32:03,502 [28] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:32:03,503 [28] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:32:03,503 [28] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:32:03,507 [28] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:32:03,527 [12] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:32:03,528 [12] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:32:03,528 [12] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:32:03,530 [12] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:32:03,531 [12] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:32:03,532 [12] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:32:03,533 [12] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:32:03,534 [12] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:32:03,535 [12] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:32:03,536 [12] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:32:03,536 [12] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:32:03,537 [12] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:32:03,538 [12] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:32:03,539 [12] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:32:03,540 [12] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:32:03,540 [12] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:32:03,541 [12] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:32:03,542 [12] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:32:03,543 [12] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:32:03,543 [12] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:32:03,544 [12] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:32:03,545 [12] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:32:03,546 [12] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:32:03,547 [12] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:32:03,547 [12] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:32:03,551 [12] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:32:03,557 [12] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:32:03,569 [12] DEBUG dn_lib.tools.log - SQL: select task_filter_id, filter_title, filter_notes, filter_def, filter_class
 from dn_tasks_filters order by filter_order
2021-02-07 18:32:03,574 [12] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:32:03,576 [12] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:32:03,577 [12] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:32:03,578 [12] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:32:03,579 [12] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:32:03,580 [12] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:32:03,585 [12] DEBUG dn_lib.tools.log - SQL: select ft.tp, ft.synch_folder_id, ft.folder_id, ft.parent_id, ft.title
       , ft.des, ft.http_path, ft.lvl, dbo.folder_path(ft.folder_id) as folder_path
       , (select top 1 1 from dn_tasks where folder_id = ft.folder_id) as is_task
      from dbo.fnc_dn_folders(null, null) ft
      
      order by ft.synch_folder_id, ft.lvl, ft.title
2021-02-07 18:32:03,595 [12] DEBUG dn_lib.tools.log - SQL: select f.synch_folder_id, f.file_id, f.folder_id, f.file_name, f.dt_ins , null as found_file
       from dn_files f
       where exists (select top 1 1 from dbo.fnc_dn_folders(null, null) ft 
        
	      where ft.synch_folder_id = f.synch_folder_id 
          and isnull(ft.folder_id, 0) = isnull(f.folder_id, 0))
2021-02-07 18:32:03,604 [12] DEBUG dn_lib.tools.log - SQL: select t3.*
      , tst.stato, tst.[order] as stato_order, isnull(tst.class, 'light') as stato_class, isnull(tst.title_plurale, '') as stato_title_plurale, isnull(tst.title_singolare, '') as stato_title_singolare
      , tp.priorita, tp.[order] as priorita_order, isnull(tp.class, 'light') as priorita_class, isnull(tp.title_plurale, '') as priorita_title_plurale, isnull(tp.title_singolare, '') as priorita_title_singolare
      , tt.tipo, tt.[order] as tipo_order, isnull(tt.class, 'light') as tipo_class, isnull(tt.title_plurale, '') as tipo_title_plurale, isnull(tt.title_singolare, '') as tipo_title_singolare
      , ts.stima, ts.[days] as stima_days, isnull(ts.class, 'light') as stima_class, isnull(ts.title_plurale, '') as stima_title_plurale, isnull(ts.title_singolare, '') as stima_title_singolare
      , (select top 1 1 from dn_tasks_notes where task_id = t3.task_id) as task_notes
      , (select top 1 1 from vw_task_allegati f2 where f2.task_id = t3.task_id 
          and not exists (select top 1 1 from dn_files_info where file_name = f2.file_name)) as task_files
  from (select t2.*, datediff(day, t2.dt_ref, getdate()) as diff_days
    from (select t.task_id, t.synch_folder_id, isnull(t.folder_id, f.folder_id) as folder_id
	   , t.file_id, t.title, t.[user], t.stato, t.priorita, t.tipo, t.stima, t.dt_ins, t.dt_upd
     , (case when t.dt_ins > t.dt_upd then t.dt_ins else t.dt_upd end) as dt_ref
	  from dn_tasks t
    
	  left join dn_files f on f.file_id = t.file_id
    where (null is null or (null is not null and t.task_id = null)) ) t2
    where exists (select top 1 1 from dbo.fnc_dn_folders(null, null) ft 
	    where  ft.synch_folder_id = t2.synch_folder_id 
       and isnull(ft.folder_id, 0) = isnull(t2.folder_id, 0))) t3
   left join dn_task_stato tst on tst.stato = t3.stato
   left join dn_task_priorita tp on tp.priorita = t3.priorita
   left join dn_task_tipo tt on tt.tipo = t3.tipo
   left join dn_task_stima ts on ts.stima = t3.stima
   where 1 = 1  and t3.stato = 'in_corso' or t3.diff_days <= 14
2021-02-07 18:32:03,631 [12] DEBUG dn_lib.tools.log - SQL: select title_singolare, stato from dn_task_stato order by [order]
2021-02-07 18:32:03,643 [12] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, priorita as [value], [order] from dn_task_priorita
      ) t order by t.[order]
2021-02-07 18:32:03,725 [12] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [days]
       union select title_singolare as title, stima as [value], [days] from dn_task_stima 
       ) t order by t.[days]
2021-02-07 18:32:03,728 [12] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, tipo as [value], [order] from dn_task_tipo
       ) t order by t.[order]
2021-02-07 18:32:03,730 [12] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value]
       union select nome as title, nome as [value] from users
       ) t order by 2
2021-02-07 18:32:28,038 [47] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:32:28,039 [47] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:32:28,040 [47] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:32:28,041 [47] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:32:28,041 [47] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:32:28,042 [47] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:32:28,042 [47] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:32:28,043 [47] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:32:28,044 [47] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:32:28,044 [47] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:32:28,045 [47] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:32:28,046 [47] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:32:28,047 [47] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:32:28,047 [47] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:32:28,048 [47] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:32:28,048 [47] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:32:28,049 [47] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:32:28,050 [47] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:32:28,051 [47] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:32:28,051 [47] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:32:28,052 [47] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:32:28,053 [47] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:32:28,054 [47] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:32:28,054 [47] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:32:28,055 [47] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:32:28,055 [47] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:32:28,059 [47] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:32:28,064 [21] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:32:28,065 [21] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:32:28,065 [21] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:32:28,066 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:32:28,067 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:32:28,067 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:32:28,068 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:32:28,069 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:32:28,069 [21] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:32:28,070 [21] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:32:28,070 [21] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:32:28,071 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:32:28,071 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:32:28,072 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:32:28,072 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:32:28,073 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:32:28,073 [21] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:32:28,074 [21] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:32:28,074 [21] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:32:28,075 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:32:28,075 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:32:28,076 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:32:28,077 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:32:28,077 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:32:28,078 [21] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:32:28,079 [21] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:32:28,081 [21] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:32:28,084 [12] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:32:28,085 [12] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:32:28,086 [12] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:32:28,087 [12] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:32:28,087 [12] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:32:28,088 [12] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:32:28,089 [12] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:32:28,089 [12] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:32:28,090 [12] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:32:28,090 [12] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:32:28,090 [12] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:32:28,091 [12] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:32:28,091 [12] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:32:28,092 [12] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:32:28,092 [12] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:32:28,093 [12] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:32:28,094 [12] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:32:28,095 [12] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:32:28,095 [12] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:32:28,096 [12] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:32:28,097 [12] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:32:28,097 [12] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:32:28,098 [12] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:32:28,098 [12] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:32:28,098 [12] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:32:28,099 [12] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:32:28,101 [12] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:32:28,672 [28] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:32:28,674 [28] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:32:28,675 [28] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:32:28,676 [28] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:32:28,677 [28] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:32:28,678 [28] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:32:28,679 [28] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:32:28,680 [28] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:32:28,681 [28] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:32:28,682 [28] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:32:28,683 [28] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:32:28,684 [28] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:32:28,684 [28] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:32:28,685 [28] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:32:28,686 [28] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:32:28,687 [28] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:32:28,687 [28] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:32:28,688 [28] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:32:28,688 [28] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:32:28,689 [28] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:32:28,690 [28] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:32:28,691 [28] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:32:28,691 [28] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:32:28,692 [28] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:32:28,693 [28] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:32:28,694 [28] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:32:28,697 [28] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:32:28,734 [28] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-02-07 18:32:28,736 [28] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-02-07 18:32:28,740 [28] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-02-07 18:32:28,742 [28] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-02-07 18:32:28,744 [28] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-02-07 18:32:28,746 [28] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-02-07 18:32:28,748 [28] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-02-07 18:32:28,750 [28] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-02-07 18:32:28,755 [28] DEBUG dn_lib.tools.log - elenco cartelle da sincronizzare
2021-02-07 18:32:28,756 [28] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-02-07 18:32:28,757 [28] DEBUG dn_lib.tools.log -    - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-02-07 18:32:28,759 [28] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-02-07 18:32:28,771 [28] DEBUG dn_lib.tools.log - elaboro la cartella C:\root\todd\_test\dn...
2021-02-07 18:32:28,773 [28] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id is null and file_name = '20200101.illo.ok.task.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, null, '20200101.illo.ok.task.txt', '.txt', 1, convert(datetime, '2021-02-07 18:32:09', 120), convert(datetime, '2021-02-07 18:32:22', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-02-07 18:32:09', 120), dt_upd = convert(datetime, '2021-02-07 18:32:22', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-02-07 18:32:09', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-02-07 18:32:22', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-02-07 18:32:28,779 [28] DEBUG dn_lib.tools.log - aggiunto file al database: C:\root\todd\_test\dn\20200101.illo.ok.task.txt
2021-02-07 18:32:28,785 [28] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4327;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4327, '.txt', @content, convert(datetime, '2021-02-07 18:32:09', 120), convert(datetime, '2021-02-07 18:32:22', 120));
2021-02-07 18:32:28,787 [28] DEBUG dn_lib.tools.log - salvato contenuto file nel database: C:\root\todd\_test\dn\20200101.illo.ok.task.txt
2021-02-07 18:32:28,793 [28] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4327;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, null, 4327, left('illo', 150)
            , NULL, convert(datetime, '2020-01-01 00:00:00', 120), convert(datetime, '2021-02-07 18:32:22', 120), 1
            , 'fatto', NULL, NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-01-01 00:00:00', 120), dt_upd = convert(datetime, '2021-02-07 18:32:22', 120)
         , title = left('illo', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-01-01 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-02-07 18:32:22', 120), getdate())
          or isnull(title, '') <> isnull('illo', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-02-07 18:32:28,799 [28] DEBUG dn_lib.tools.log - inserito task nel database: C:\root\todd\_test\dn\illo
2021-02-07 18:32:28,800 [28] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1453;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1453, 4327, @content
          , convert(datetime, '2021-02-07 18:32:09', 120), convert(datetime, '2021-02-07 18:32:22', 120));
2021-02-07 18:32:28,804 [28] DEBUG dn_lib.tools.log - salvate le note del task nel database: C:\root\todd\_test\dn\20200101.illo.ok.task.txt
2021-02-07 18:32:28,806 [28] DEBUG dn_lib.tools.log - trasformazione task file in task folder: C:\root\todd\_test\dn\20200101.illo.ok.task.txt
2021-02-07 18:32:28,807 [28] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = '20200101.illo.ok.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, '20200101.illo.ok.task', 1, convert(datetime, '2021-02-07 18:32:09', 120), convert(datetime, '2021-02-07 18:32:09', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-02-07 18:32:09', 120), dt_upd = convert(datetime, '2021-02-07 18:32:09', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-02-07 18:32:09', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-02-07 18:32:09', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-02-07 18:32:28,812 [28] DEBUG dn_lib.tools.log - creato folder: C:\root\todd\_test\dn\20200101.illo.ok.task
2021-02-07 18:32:28,813 [28] DEBUG dn_lib.tools.log - SQL: update dn_files set synch_folder_id = 1, folder_id = 1832, dt_upd = getdate()
        where file_id = 4327;
      
2021-02-07 18:32:28,816 [28] DEBUG dn_lib.tools.log - SQL: update dn_tasks set dt_upd = convert(datetime, convert(varchar, getdate(), 120), 120), folder_id = 1832, file_id = null
        where task_id = 1453;
2021-02-07 18:32:28,819 [28] DEBUG dn_lib.tools.log - spostato file da: C:\root\todd\_test\dn\20200101.illo.ok.task.txt, a:C:\root\todd\_test\dn\20200101.illo.ok.task\i.txt
2021-02-07 18:32:28,820 [28] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1453;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1453, 4327, @content
          , convert(datetime, convert(varchar, getdate(), 120), 120), convert(datetime, convert(varchar, getdate(), 120), 120));
      update dn_tasks set dt_upd = convert(datetime, convert(varchar, getdate(), 120), 120) where task_id = 1453;
2021-02-07 18:32:28,825 [28] DEBUG dn_lib.tools.log - salvate le note del task: C:\root\todd\_test\dn\20200101.illo.ok.task
2021-02-07 18:32:28,832 [28] DEBUG dn_lib.tools.log - rinominato folder: C:\root\todd\_test\dn\20200101.illo.ok.task, in: C:\root\todd\_test\dn\illo.task
2021-02-07 18:32:28,833 [28] DEBUG dn_lib.tools.log - SQL: update dn_folders set folder_name = 'illo.task', dt_upd = convert(datetime, convert(varchar, getdate(), 120), 120)
        where folder_id = 1832
2021-02-07 18:32:28,843 [28] DEBUG dn_lib.tools.log - salvato index doc: C:\root\todd\_test\dn\illo.task\__i.xml
2021-02-07 18:32:28,844 [28] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1832 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, 1832, null, left('illo', 150)
            , NULL, convert(datetime, '2020-01-01 00:00:00', 120), convert(datetime, '2021-02-07 18:32:22', 120), 1
            , 'fatto', NULL, NULL, NULL, convert(datetime, '2021-02-07 18:32:28', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-01-01 00:00:00', 120), dt_upd = convert(datetime, '2021-02-07 18:32:22', 120)
         , title = left('illo', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = convert(datetime, '2021-02-07 18:32:28', 120)
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-01-01 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-02-07 18:32:22', 120), getdate())
          or isnull(title, '') <> isnull('illo', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-02-07 18:32:28,850 [28] DEBUG dn_lib.tools.log - SQL: declare @cc_files int; declare @cc_folders int;
      select @cc_files = (select count(*) from dn_files where readed is null) 
      select @cc_folders = (select count(*) from dn_folders where readed is null)
      
      delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
      select @cc_files, @cc_folders;
2021-02-07 18:32:28,859 [28] DEBUG dn_lib.tools.log - cancellati dal database: 1 files
2021-02-07 18:32:28,860 [28] DEBUG dn_lib.tools.log - cancellati dal database: 1 folders
2021-02-07 18:32:28,861 [28] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '1')
        else update users_cache set var_value = substring('1', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-02-07 18:32:28,865 [28] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '0')
        else update users_cache set var_value = substring('0', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-02-07 18:32:28,868 [28] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/02/07 18:32:22')
        else update users_cache set var_value = substring('2021/02/07 18:32:22', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-02-07 18:32:28,871 [28] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/02/07 18:32:28')
        else update users_cache set var_value = substring('2021/02/07 18:32:28', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-02-07 18:32:40,394 [14] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:32:40,395 [14] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:32:40,396 [14] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:32:40,397 [14] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:32:40,397 [14] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:32:40,398 [14] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:32:40,398 [14] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:32:40,399 [14] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:32:40,399 [14] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:32:40,400 [14] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:32:40,400 [14] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:32:40,401 [14] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:32:40,401 [14] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:32:40,402 [14] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:32:40,402 [14] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:32:40,403 [14] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:32:40,403 [14] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:32:40,404 [14] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:32:40,404 [14] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:32:40,405 [14] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:32:40,405 [14] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:32:40,406 [14] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:32:40,406 [14] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:32:40,407 [14] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:32:40,407 [14] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:32:40,409 [14] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:32:40,413 [14] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:32:40,418 [47] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:32:40,418 [47] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:32:40,419 [47] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:32:40,420 [47] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:32:40,421 [47] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:32:40,421 [47] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:32:40,421 [47] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:32:40,422 [47] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:32:40,422 [47] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:32:40,423 [47] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:32:40,423 [47] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:32:40,424 [47] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:32:40,424 [47] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:32:40,425 [47] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:32:40,426 [47] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:32:40,426 [47] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:32:40,427 [47] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:32:40,427 [47] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:32:40,428 [47] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:32:40,428 [47] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:32:40,429 [47] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:32:40,430 [47] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:32:40,431 [47] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:32:40,431 [47] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:32:40,431 [47] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:32:40,432 [47] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:32:40,434 [47] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:32:40,437 [30] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:32:40,438 [30] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:32:40,439 [30] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:32:40,439 [30] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:32:40,440 [30] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:32:40,441 [30] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:32:40,442 [30] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:32:40,442 [30] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:32:40,443 [30] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:32:40,443 [30] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:32:40,443 [30] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:32:40,444 [30] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:32:40,444 [30] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:32:40,445 [30] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:32:40,445 [30] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:32:40,446 [30] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:32:40,446 [30] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:32:40,447 [30] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:32:40,447 [30] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:32:40,448 [30] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:32:40,448 [30] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:32:40,449 [30] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:32:40,449 [30] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:32:40,450 [30] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:32:40,450 [30] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:32:40,451 [30] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:32:40,453 [30] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:32:40,454 [30] DEBUG dn_lib.tools.log - SQL: select task_filter_id, filter_title, filter_notes, filter_def, filter_class
 from dn_tasks_filters order by filter_order
2021-02-07 18:32:40,455 [30] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:32:40,458 [30] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:32:40,459 [30] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:32:40,460 [30] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:32:40,460 [30] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:32:40,461 [30] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:32:40,461 [30] DEBUG dn_lib.tools.log - SQL: select ft.tp, ft.synch_folder_id, ft.folder_id, ft.parent_id, ft.title
       , ft.des, ft.http_path, ft.lvl, dbo.folder_path(ft.folder_id) as folder_path
       , (select top 1 1 from dn_tasks where folder_id = ft.folder_id) as is_task
      from dbo.fnc_dn_folders(null, null) ft
      
      order by ft.synch_folder_id, ft.lvl, ft.title
2021-02-07 18:32:40,478 [30] DEBUG dn_lib.tools.log - SQL: select f.synch_folder_id, f.file_id, f.folder_id, f.file_name, f.dt_ins , null as found_file
       from dn_files f
       where exists (select top 1 1 from dbo.fnc_dn_folders(null, null) ft 
        
	      where ft.synch_folder_id = f.synch_folder_id 
          and isnull(ft.folder_id, 0) = isnull(f.folder_id, 0))
2021-02-07 18:32:40,495 [30] DEBUG dn_lib.tools.log - SQL: select t3.*
      , tst.stato, tst.[order] as stato_order, isnull(tst.class, 'light') as stato_class, isnull(tst.title_plurale, '') as stato_title_plurale, isnull(tst.title_singolare, '') as stato_title_singolare
      , tp.priorita, tp.[order] as priorita_order, isnull(tp.class, 'light') as priorita_class, isnull(tp.title_plurale, '') as priorita_title_plurale, isnull(tp.title_singolare, '') as priorita_title_singolare
      , tt.tipo, tt.[order] as tipo_order, isnull(tt.class, 'light') as tipo_class, isnull(tt.title_plurale, '') as tipo_title_plurale, isnull(tt.title_singolare, '') as tipo_title_singolare
      , ts.stima, ts.[days] as stima_days, isnull(ts.class, 'light') as stima_class, isnull(ts.title_plurale, '') as stima_title_plurale, isnull(ts.title_singolare, '') as stima_title_singolare
      , (select top 1 1 from dn_tasks_notes where task_id = t3.task_id) as task_notes
      , (select top 1 1 from vw_task_allegati f2 where f2.task_id = t3.task_id 
          and not exists (select top 1 1 from dn_files_info where file_name = f2.file_name)) as task_files
  from (select t2.*, datediff(day, t2.dt_ref, getdate()) as diff_days
    from (select t.task_id, t.synch_folder_id, isnull(t.folder_id, f.folder_id) as folder_id
	   , t.file_id, t.title, t.[user], t.stato, t.priorita, t.tipo, t.stima, t.dt_ins, t.dt_upd
     , (case when t.dt_ins > t.dt_upd then t.dt_ins else t.dt_upd end) as dt_ref
	  from dn_tasks t
    
	  left join dn_files f on f.file_id = t.file_id
    where (null is null or (null is not null and t.task_id = null)) ) t2
    where exists (select top 1 1 from dbo.fnc_dn_folders(null, null) ft 
	    where  ft.synch_folder_id = t2.synch_folder_id 
       and isnull(ft.folder_id, 0) = isnull(t2.folder_id, 0))) t3
   left join dn_task_stato tst on tst.stato = t3.stato
   left join dn_task_priorita tp on tp.priorita = t3.priorita
   left join dn_task_tipo tt on tt.tipo = t3.tipo
   left join dn_task_stima ts on ts.stima = t3.stima
   where 1 = 1  and t3.stato = 'in_corso' or t3.diff_days <= 14
2021-02-07 18:32:40,523 [30] DEBUG dn_lib.tools.log - SQL: select title_singolare, stato from dn_task_stato order by [order]
2021-02-07 18:32:40,526 [30] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, priorita as [value], [order] from dn_task_priorita
      ) t order by t.[order]
2021-02-07 18:32:40,529 [30] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [days]
       union select title_singolare as title, stima as [value], [days] from dn_task_stima 
       ) t order by t.[days]
2021-02-07 18:32:40,532 [30] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, tipo as [value], [order] from dn_task_tipo
       ) t order by t.[order]
2021-02-07 18:32:40,534 [30] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value]
       union select nome as title, nome as [value] from users
       ) t order by 2
2021-02-07 18:32:43,089 [11] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:32:43,090 [11] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:32:43,092 [11] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:32:43,093 [11] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:32:43,093 [11] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:32:43,094 [11] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:32:43,095 [11] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:32:43,095 [11] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:32:43,096 [11] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:32:43,096 [11] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:32:43,097 [11] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:32:43,097 [11] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:32:43,097 [11] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:32:43,098 [11] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:32:43,098 [11] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:32:43,099 [11] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:32:43,099 [11] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:32:43,100 [11] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:32:43,100 [11] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:32:43,101 [11] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:32:43,101 [11] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:32:43,102 [11] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:32:43,102 [11] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:32:43,103 [11] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:32:43,103 [11] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:32:43,104 [11] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:32:43,106 [11] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:32:43,109 [11] DEBUG dn_lib.tools.log - SQL: select content from dn_tasks_notes 
       where task_id = 1453
2021-02-07 18:32:43,112 [11] DEBUG dn_lib.tools.log - SQL: select a.file_id, a.file_name, a.extension, a.http_path , null as found_file       
       , (select top 1 1 from dn_tasks where task_id = a.task_id and file_id = a.file_id) as file_task
      from vw_task_allegati a
      where a.task_id = 1453
2021-02-07 18:36:15,498 [8] INFO dn_lib.tools.log - reload core
2021-02-07 18:36:15,529 [8] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:36:15,532 [8] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:36:15,533 [8] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:36:15,534 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:36:15,535 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:36:15,536 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:36:15,546 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:36:15,548 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:36:15,549 [8] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:36:15,550 [8] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:36:15,552 [8] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:36:15,552 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:36:15,553 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:36:15,554 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:36:15,555 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:36:15,556 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:36:15,557 [8] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:36:15,558 [8] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:36:15,565 [8] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:36:15,566 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:36:15,568 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:36:15,569 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:36:15,570 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:36:15,571 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:36:15,571 [8] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:36:15,574 [8] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:36:15,584 [8] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:36:15,599 [49] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:36:15,600 [49] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:36:15,601 [49] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:36:15,603 [49] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:36:15,603 [49] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:36:15,604 [49] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:36:15,605 [49] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:36:15,606 [49] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:36:15,607 [49] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:36:15,607 [49] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:36:15,608 [49] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:36:15,609 [49] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:36:15,610 [49] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:36:15,610 [49] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:36:15,611 [49] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:36:15,612 [49] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:36:15,613 [49] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:36:15,613 [49] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:36:15,614 [49] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:36:15,615 [49] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:36:15,616 [49] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:36:15,616 [49] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:36:15,617 [49] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:36:15,618 [49] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:36:15,619 [49] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:36:15,620 [49] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:36:15,624 [49] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:36:15,647 [17] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:36:15,648 [17] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:36:15,649 [17] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:36:15,650 [17] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:36:15,651 [17] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:36:15,652 [17] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:36:15,653 [17] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:36:15,654 [17] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:36:15,654 [17] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:36:15,655 [17] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:36:15,656 [17] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:36:15,657 [17] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:36:15,657 [17] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:36:15,658 [17] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:36:15,659 [17] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:36:15,660 [17] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:36:15,660 [17] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:36:15,661 [17] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:36:15,662 [17] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:36:15,663 [17] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:36:15,663 [17] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:36:15,664 [17] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:36:15,665 [17] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:36:15,665 [17] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:36:15,666 [17] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:36:15,669 [17] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:36:15,676 [17] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:36:15,687 [17] DEBUG dn_lib.tools.log - SQL: select task_filter_id, filter_title, filter_notes, filter_def, filter_class
 from dn_tasks_filters order by filter_order
2021-02-07 18:36:15,692 [17] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:36:15,695 [17] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:36:15,696 [17] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:36:15,697 [17] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:36:15,698 [17] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:36:15,700 [17] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:36:15,704 [17] DEBUG dn_lib.tools.log - SQL: select ft.tp, ft.synch_folder_id, ft.folder_id, ft.parent_id, ft.title
       , ft.des, ft.http_path, ft.lvl, dbo.folder_path(ft.folder_id) as folder_path
       , (select top 1 1 from dn_tasks where folder_id = ft.folder_id) as is_task
      from dbo.fnc_dn_folders(null, null) ft
      
      order by ft.synch_folder_id, ft.lvl, ft.title
2021-02-07 18:36:15,714 [17] DEBUG dn_lib.tools.log - SQL: select f.synch_folder_id, f.file_id, f.folder_id, f.file_name, f.dt_ins , null as found_file
       from dn_files f
       where exists (select top 1 1 from dbo.fnc_dn_folders(null, null) ft 
        
	      where ft.synch_folder_id = f.synch_folder_id 
          and isnull(ft.folder_id, 0) = isnull(f.folder_id, 0))
2021-02-07 18:36:15,722 [17] DEBUG dn_lib.tools.log - SQL: select t3.*
      , tst.stato, tst.[order] as stato_order, isnull(tst.class, 'light') as stato_class, isnull(tst.title_plurale, '') as stato_title_plurale, isnull(tst.title_singolare, '') as stato_title_singolare
      , tp.priorita, tp.[order] as priorita_order, isnull(tp.class, 'light') as priorita_class, isnull(tp.title_plurale, '') as priorita_title_plurale, isnull(tp.title_singolare, '') as priorita_title_singolare
      , tt.tipo, tt.[order] as tipo_order, isnull(tt.class, 'light') as tipo_class, isnull(tt.title_plurale, '') as tipo_title_plurale, isnull(tt.title_singolare, '') as tipo_title_singolare
      , ts.stima, ts.[days] as stima_days, isnull(ts.class, 'light') as stima_class, isnull(ts.title_plurale, '') as stima_title_plurale, isnull(ts.title_singolare, '') as stima_title_singolare
      , (select top 1 1 from dn_tasks_notes where task_id = t3.task_id) as task_notes
      , (select top 1 1 from vw_task_allegati f2 where f2.task_id = t3.task_id 
          and not exists (select top 1 1 from dn_files_info where file_name = f2.file_name)) as task_files
  from (select t2.*, datediff(day, t2.dt_ref, getdate()) as diff_days
    from (select t.task_id, t.synch_folder_id, isnull(t.folder_id, f.folder_id) as folder_id
	   , t.file_id, t.title, t.[user], t.stato, t.priorita, t.tipo, t.stima, t.dt_ins, t.dt_upd
     , (case when t.dt_ins > t.dt_upd then t.dt_ins else t.dt_upd end) as dt_ref
	  from dn_tasks t
    
	  left join dn_files f on f.file_id = t.file_id
    where (null is null or (null is not null and t.task_id = null)) ) t2
    where exists (select top 1 1 from dbo.fnc_dn_folders(null, null) ft 
	    where  ft.synch_folder_id = t2.synch_folder_id 
       and isnull(ft.folder_id, 0) = isnull(t2.folder_id, 0))) t3
   left join dn_task_stato tst on tst.stato = t3.stato
   left join dn_task_priorita tp on tp.priorita = t3.priorita
   left join dn_task_tipo tt on tt.tipo = t3.tipo
   left join dn_task_stima ts on ts.stima = t3.stima
   where 1 = 1  and t3.stato = 'in_corso' or t3.diff_days <= 14
2021-02-07 18:36:15,749 [17] DEBUG dn_lib.tools.log - SQL: select title_singolare, stato from dn_task_stato order by [order]
2021-02-07 18:36:15,764 [17] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, priorita as [value], [order] from dn_task_priorita
      ) t order by t.[order]
2021-02-07 18:36:15,847 [17] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [days]
       union select title_singolare as title, stima as [value], [days] from dn_task_stima 
       ) t order by t.[days]
2021-02-07 18:36:15,850 [17] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, tipo as [value], [order] from dn_task_tipo
       ) t order by t.[order]
2021-02-07 18:36:15,853 [17] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value]
       union select nome as title, nome as [value] from users
       ) t order by 2
2021-02-07 18:36:20,424 [47] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:36:20,426 [47] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:36:20,427 [47] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:36:20,428 [47] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:36:20,428 [47] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:36:20,429 [47] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:36:20,430 [47] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:36:20,431 [47] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:36:20,432 [47] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:36:20,433 [47] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:36:20,434 [47] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:36:20,434 [47] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:36:20,435 [47] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:36:20,435 [47] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:36:20,436 [47] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:36:20,436 [47] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:36:20,437 [47] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:36:20,437 [47] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:36:20,438 [47] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:36:20,439 [47] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:36:20,440 [47] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:36:20,440 [47] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:36:20,441 [47] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:36:20,442 [47] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:36:20,442 [47] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:36:20,443 [47] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:36:20,446 [47] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:36:20,451 [8] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:36:20,452 [8] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:36:20,452 [8] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:36:20,453 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:36:20,454 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:36:20,454 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:36:20,455 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:36:20,455 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:36:20,456 [8] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:36:20,457 [8] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:36:20,457 [8] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:36:20,458 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:36:20,458 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:36:20,459 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:36:20,459 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:36:20,460 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:36:20,460 [8] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:36:20,461 [8] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:36:20,461 [8] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:36:20,462 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:36:20,462 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:36:20,463 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:36:20,463 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:36:20,464 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:36:20,464 [8] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:36:20,465 [8] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:36:20,467 [8] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:36:20,470 [46] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:36:20,471 [46] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:36:20,472 [46] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:36:20,473 [46] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:36:20,474 [46] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:36:20,474 [46] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:36:20,475 [46] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:36:20,476 [46] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:36:20,477 [46] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:36:20,478 [46] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:36:20,478 [46] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:36:20,479 [46] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:36:20,479 [46] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:36:20,480 [46] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:36:20,480 [46] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:36:20,480 [46] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:36:20,481 [46] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:36:20,481 [46] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:36:20,482 [46] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:36:20,483 [46] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:36:20,483 [46] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:36:20,484 [46] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:36:20,484 [46] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:36:20,485 [46] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:36:20,485 [46] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:36:20,486 [46] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:36:20,488 [46] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:36:21,040 [14] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:36:21,042 [14] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:36:21,044 [14] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:36:21,045 [14] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:36:21,046 [14] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:36:21,047 [14] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:36:21,049 [14] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:36:21,049 [14] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:36:21,050 [14] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:36:21,051 [14] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:36:21,051 [14] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:36:21,052 [14] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:36:21,053 [14] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:36:21,054 [14] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:36:21,054 [14] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:36:21,055 [14] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:36:21,056 [14] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:36:21,057 [14] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:36:21,057 [14] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:36:21,058 [14] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:36:21,058 [14] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:36:21,059 [14] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:36:21,060 [14] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:36:21,060 [14] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:36:21,061 [14] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:36:21,061 [14] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:36:21,064 [14] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:36:21,099 [14] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-02-07 18:36:21,102 [14] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-02-07 18:36:21,104 [14] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-02-07 18:36:21,106 [14] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-02-07 18:36:21,108 [14] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-02-07 18:36:21,110 [14] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-02-07 18:36:21,111 [14] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-02-07 18:36:21,113 [14] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-02-07 18:36:21,119 [14] DEBUG dn_lib.tools.log - elenco cartelle da sincronizzare
2021-02-07 18:36:21,121 [14] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-02-07 18:36:21,122 [14] DEBUG dn_lib.tools.log -    - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-02-07 18:36:21,124 [14] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-02-07 18:36:21,128 [14] DEBUG dn_lib.tools.log - elaboro la cartella C:\root\todd\_test\dn...
2021-02-07 18:36:21,129 [14] DEBUG dn_lib.tools.log - SQL: declare @cc_files int; declare @cc_folders int;
      select @cc_files = (select count(*) from dn_files where readed is null) 
      select @cc_folders = (select count(*) from dn_folders where readed is null)
      
      delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
      select @cc_files, @cc_folders;
2021-02-07 18:36:21,138 [14] DEBUG dn_lib.tools.log - cancellati dal database: 1 files
2021-02-07 18:36:21,139 [14] DEBUG dn_lib.tools.log - cancellati dal database: 1 folders
2021-02-07 18:36:21,140 [14] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '0')
        else update users_cache set var_value = substring('0', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-02-07 18:36:21,143 [14] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '0')
        else update users_cache set var_value = substring('0', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-02-07 18:36:21,146 [14] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/01/05 15:40:09')
        else update users_cache set var_value = substring('2021/01/05 15:40:09', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-02-07 18:36:21,149 [14] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/02/07 18:36:21')
        else update users_cache set var_value = substring('2021/02/07 18:36:21', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-02-07 18:36:25,749 [28] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:36:25,750 [28] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:36:25,752 [28] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:36:25,753 [28] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:36:25,754 [28] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:36:25,754 [28] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:36:25,755 [28] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:36:25,757 [28] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:36:25,758 [28] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:36:25,758 [28] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:36:25,759 [28] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:36:25,760 [28] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:36:25,760 [28] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:36:25,761 [28] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:36:25,762 [28] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:36:25,762 [28] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:36:25,763 [28] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:36:25,763 [28] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:36:25,764 [28] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:36:25,764 [28] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:36:25,765 [28] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:36:25,765 [28] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:36:25,766 [28] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:36:25,767 [28] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:36:25,767 [28] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:36:25,768 [28] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:36:25,770 [28] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:36:25,774 [11] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:36:25,775 [11] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:36:25,775 [11] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:36:25,776 [11] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:36:25,777 [11] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:36:25,777 [11] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:36:25,777 [11] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:36:25,778 [11] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:36:25,778 [11] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:36:25,779 [11] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:36:25,779 [11] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:36:25,780 [11] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:36:25,780 [11] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:36:25,781 [11] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:36:25,781 [11] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:36:25,782 [11] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:36:25,782 [11] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:36:25,782 [11] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:36:25,783 [11] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:36:25,783 [11] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:36:25,784 [11] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:36:25,784 [11] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:36:25,785 [11] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:36:25,785 [11] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:36:25,786 [11] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:36:25,786 [11] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:36:25,789 [11] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:36:25,793 [49] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:36:25,793 [49] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:36:25,794 [49] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:36:25,795 [49] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:36:25,795 [49] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:36:25,796 [49] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:36:25,797 [49] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:36:25,797 [49] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:36:25,798 [49] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:36:25,798 [49] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:36:25,799 [49] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:36:25,799 [49] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:36:25,800 [49] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:36:25,800 [49] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:36:25,801 [49] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:36:25,801 [49] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:36:25,802 [49] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:36:25,802 [49] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:36:25,803 [49] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:36:25,803 [49] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:36:25,804 [49] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:36:25,804 [49] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:36:25,805 [49] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:36:25,805 [49] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:36:25,806 [49] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:36:25,807 [49] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:36:25,809 [49] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:36:25,810 [49] DEBUG dn_lib.tools.log - SQL: select task_filter_id, filter_title, filter_notes, filter_def, filter_class
 from dn_tasks_filters order by filter_order
2021-02-07 18:36:25,811 [49] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:36:25,812 [49] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:36:25,813 [49] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:36:25,813 [49] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:36:25,814 [49] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:36:25,814 [49] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:36:25,815 [49] DEBUG dn_lib.tools.log - SQL: select ft.tp, ft.synch_folder_id, ft.folder_id, ft.parent_id, ft.title
       , ft.des, ft.http_path, ft.lvl, dbo.folder_path(ft.folder_id) as folder_path
       , (select top 1 1 from dn_tasks where folder_id = ft.folder_id) as is_task
      from dbo.fnc_dn_folders(null, null) ft
      
      order by ft.synch_folder_id, ft.lvl, ft.title
2021-02-07 18:36:25,816 [49] DEBUG dn_lib.tools.log - SQL: select f.synch_folder_id, f.file_id, f.folder_id, f.file_name, f.dt_ins , null as found_file
       from dn_files f
       where exists (select top 1 1 from dbo.fnc_dn_folders(null, null) ft 
        
	      where ft.synch_folder_id = f.synch_folder_id 
          and isnull(ft.folder_id, 0) = isnull(f.folder_id, 0))
2021-02-07 18:36:25,816 [49] DEBUG dn_lib.tools.log - SQL: select t3.*
      , tst.stato, tst.[order] as stato_order, isnull(tst.class, 'light') as stato_class, isnull(tst.title_plurale, '') as stato_title_plurale, isnull(tst.title_singolare, '') as stato_title_singolare
      , tp.priorita, tp.[order] as priorita_order, isnull(tp.class, 'light') as priorita_class, isnull(tp.title_plurale, '') as priorita_title_plurale, isnull(tp.title_singolare, '') as priorita_title_singolare
      , tt.tipo, tt.[order] as tipo_order, isnull(tt.class, 'light') as tipo_class, isnull(tt.title_plurale, '') as tipo_title_plurale, isnull(tt.title_singolare, '') as tipo_title_singolare
      , ts.stima, ts.[days] as stima_days, isnull(ts.class, 'light') as stima_class, isnull(ts.title_plurale, '') as stima_title_plurale, isnull(ts.title_singolare, '') as stima_title_singolare
      , (select top 1 1 from dn_tasks_notes where task_id = t3.task_id) as task_notes
      , (select top 1 1 from vw_task_allegati f2 where f2.task_id = t3.task_id 
          and not exists (select top 1 1 from dn_files_info where file_name = f2.file_name)) as task_files
  from (select t2.*, datediff(day, t2.dt_ref, getdate()) as diff_days
    from (select t.task_id, t.synch_folder_id, isnull(t.folder_id, f.folder_id) as folder_id
	   , t.file_id, t.title, t.[user], t.stato, t.priorita, t.tipo, t.stima, t.dt_ins, t.dt_upd
     , (case when t.dt_ins > t.dt_upd then t.dt_ins else t.dt_upd end) as dt_ref
	  from dn_tasks t
    
	  left join dn_files f on f.file_id = t.file_id
    where (null is null or (null is not null and t.task_id = null)) ) t2
    where exists (select top 1 1 from dbo.fnc_dn_folders(null, null) ft 
	    where  ft.synch_folder_id = t2.synch_folder_id 
       and isnull(ft.folder_id, 0) = isnull(t2.folder_id, 0))) t3
   left join dn_task_stato tst on tst.stato = t3.stato
   left join dn_task_priorita tp on tp.priorita = t3.priorita
   left join dn_task_tipo tt on tt.tipo = t3.tipo
   left join dn_task_stima ts on ts.stima = t3.stima
   where 1 = 1  and t3.stato = 'in_corso' or t3.diff_days <= 14
2021-02-07 18:36:25,817 [49] DEBUG dn_lib.tools.log - SQL: select title_singolare, stato from dn_task_stato order by [order]
2021-02-07 18:36:25,818 [49] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, priorita as [value], [order] from dn_task_priorita
      ) t order by t.[order]
2021-02-07 18:36:25,819 [49] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [days]
       union select title_singolare as title, stima as [value], [days] from dn_task_stima 
       ) t order by t.[days]
2021-02-07 18:36:25,820 [49] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, tipo as [value], [order] from dn_task_tipo
       ) t order by t.[order]
2021-02-07 18:36:25,820 [49] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value]
       union select nome as title, nome as [value] from users
       ) t order by 2
2021-02-07 18:36:27,441 [30] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:36:27,443 [30] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:36:27,444 [30] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:36:27,445 [30] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:36:27,446 [30] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:36:27,447 [30] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:36:27,448 [30] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:36:27,449 [30] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:36:27,449 [30] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:36:27,450 [30] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:36:27,451 [30] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:36:27,452 [30] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:36:27,452 [30] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:36:27,453 [30] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:36:27,454 [30] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:36:27,455 [30] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:36:27,456 [30] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:36:27,457 [30] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:36:27,457 [30] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:36:27,458 [30] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:36:27,459 [30] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:36:27,459 [30] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:36:27,460 [30] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:36:27,460 [30] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:36:27,461 [30] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:36:27,462 [30] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:36:27,464 [30] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:36:27,468 [12] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:36:27,469 [12] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:36:27,470 [12] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:36:27,470 [12] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:36:27,471 [12] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:36:27,472 [12] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:36:27,473 [12] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:36:27,474 [12] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:36:27,474 [12] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:36:27,475 [12] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:36:27,475 [12] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:36:27,476 [12] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:36:27,476 [12] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:36:27,477 [12] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:36:27,477 [12] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:36:27,477 [12] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:36:27,478 [12] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:36:27,478 [12] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:36:27,479 [12] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:36:27,479 [12] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:36:27,480 [12] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:36:27,480 [12] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:36:27,481 [12] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:36:27,482 [12] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:36:27,482 [12] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:36:27,483 [12] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:36:27,485 [12] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:36:27,486 [12] DEBUG dn_lib.tools.log - SQL: select task_filter_id, filter_title, filter_notes, filter_def, filter_class
 from dn_tasks_filters order by filter_order
2021-02-07 18:36:27,487 [12] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:36:27,488 [12] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:36:27,489 [12] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:36:27,490 [12] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:36:27,490 [12] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:36:27,491 [12] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:36:27,492 [12] DEBUG dn_lib.tools.log - SQL: select ft.tp, ft.synch_folder_id, ft.folder_id, ft.parent_id, ft.title
       , ft.des, ft.http_path, ft.lvl, dbo.folder_path(ft.folder_id) as folder_path
       , (select top 1 1 from dn_tasks where folder_id = ft.folder_id) as is_task
      from dbo.fnc_dn_folders(null, 1) ft
      
      order by ft.synch_folder_id, ft.lvl, ft.title
2021-02-07 18:36:27,497 [12] DEBUG dn_lib.tools.log - SQL: select f.synch_folder_id, f.file_id, f.folder_id, f.file_name, f.dt_ins , null as found_file
       from dn_files f
       where exists (select top 1 1 from dbo.fnc_dn_folders(null, 1) ft 
        
	      where ft.synch_folder_id = f.synch_folder_id 
          and isnull(ft.folder_id, 0) = isnull(f.folder_id, 0))
2021-02-07 18:36:27,505 [12] DEBUG dn_lib.tools.log - SQL: select t3.*
      , tst.stato, tst.[order] as stato_order, isnull(tst.class, 'light') as stato_class, isnull(tst.title_plurale, '') as stato_title_plurale, isnull(tst.title_singolare, '') as stato_title_singolare
      , tp.priorita, tp.[order] as priorita_order, isnull(tp.class, 'light') as priorita_class, isnull(tp.title_plurale, '') as priorita_title_plurale, isnull(tp.title_singolare, '') as priorita_title_singolare
      , tt.tipo, tt.[order] as tipo_order, isnull(tt.class, 'light') as tipo_class, isnull(tt.title_plurale, '') as tipo_title_plurale, isnull(tt.title_singolare, '') as tipo_title_singolare
      , ts.stima, ts.[days] as stima_days, isnull(ts.class, 'light') as stima_class, isnull(ts.title_plurale, '') as stima_title_plurale, isnull(ts.title_singolare, '') as stima_title_singolare
      , (select top 1 1 from dn_tasks_notes where task_id = t3.task_id) as task_notes
      , (select top 1 1 from vw_task_allegati f2 where f2.task_id = t3.task_id 
          and not exists (select top 1 1 from dn_files_info where file_name = f2.file_name)) as task_files
  from (select t2.*, datediff(day, t2.dt_ref, getdate()) as diff_days
    from (select t.task_id, t.synch_folder_id, isnull(t.folder_id, f.folder_id) as folder_id
	   , t.file_id, t.title, t.[user], t.stato, t.priorita, t.tipo, t.stima, t.dt_ins, t.dt_upd
     , (case when t.dt_ins > t.dt_upd then t.dt_ins else t.dt_upd end) as dt_ref
	  from dn_tasks t
    
	  left join dn_files f on f.file_id = t.file_id
    where (null is null or (null is not null and t.task_id = null)) ) t2
    where exists (select top 1 1 from dbo.fnc_dn_folders(null, 1) ft 
	    where  ft.synch_folder_id = t2.synch_folder_id 
       and isnull(ft.folder_id, 0) = isnull(t2.folder_id, 0))) t3
   left join dn_task_stato tst on tst.stato = t3.stato
   left join dn_task_priorita tp on tp.priorita = t3.priorita
   left join dn_task_tipo tt on tt.tipo = t3.tipo
   left join dn_task_stima ts on ts.stima = t3.stima
   where 1 = 1  and t3.stato = 'in_corso' or t3.diff_days <= 14
2021-02-07 18:36:27,528 [12] DEBUG dn_lib.tools.log - SQL: select title_singolare, stato from dn_task_stato order by [order]
2021-02-07 18:36:27,530 [12] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, priorita as [value], [order] from dn_task_priorita
      ) t order by t.[order]
2021-02-07 18:36:27,531 [12] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [days]
       union select title_singolare as title, stima as [value], [days] from dn_task_stima 
       ) t order by t.[days]
2021-02-07 18:36:27,532 [12] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, tipo as [value], [order] from dn_task_tipo
       ) t order by t.[order]
2021-02-07 18:36:27,534 [12] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value]
       union select nome as title, nome as [value] from users
       ) t order by 2
2021-02-07 18:36:41,734 [21] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:36:41,735 [21] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:36:41,736 [21] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:36:41,736 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:36:41,737 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:36:41,738 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:36:41,739 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:36:41,739 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:36:41,740 [21] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:36:41,741 [21] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:36:41,742 [21] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:36:41,742 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:36:41,744 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:36:41,745 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:36:41,746 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:36:41,746 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:36:41,747 [21] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:36:41,748 [21] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:36:41,748 [21] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:36:41,749 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:36:41,750 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:36:41,750 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:36:41,751 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:36:41,752 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:36:41,752 [21] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:36:41,753 [21] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:36:41,756 [21] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:36:41,760 [21] DEBUG dn_lib.tools.log - SQL: select local_path, synch_folder_id, title as name 
        from synch_folders where synch_folder_id = 1
2021-02-07 18:36:41,762 [21] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-02-07 18:36:41,764 [21] DEBUG dn_lib.tools.log - SQL: insert into dn_folders (synch_folder_id, parent_id, folder_name, dt_ins, readed, dt_upd)
    values (1, null, '210207.orco.molinero.ok.mh.task', convert(datetime, convert(varchar, getdate(), 120), 120), 1, convert(datetime, convert(varchar, getdate(), 120), 120));select SCOPE_IDENTITY();
2021-02-07 18:36:41,768 [21] DEBUG dn_lib.tools.log - SQL: insert into dn_tasks (synch_folder_id, folder_id, title, [user], stato, dt_upd, readed, priorita, tipo, stima, dt_ins)
 select synch_folder_id, folder_id, 'orco', 'molinero', 'fatto', dt_upd, 1, NULL, NULL, 'mezzora', dt_ins
  from dn_folders where folder_id = 1833;select SCOPE_IDENTITY();
2021-02-07 18:36:41,779 [18] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:36:41,780 [18] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:36:41,781 [18] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:36:41,782 [18] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:36:41,783 [18] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:36:41,783 [18] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:36:41,785 [18] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:36:41,786 [18] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:36:41,786 [18] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:36:41,787 [18] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:36:41,787 [18] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:36:41,788 [18] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:36:41,788 [18] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:36:41,789 [18] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:36:41,789 [18] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:36:41,790 [18] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:36:41,791 [18] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:36:41,791 [18] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:36:41,792 [18] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:36:41,792 [18] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:36:41,794 [18] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:36:41,794 [18] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:36:41,794 [18] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:36:41,795 [18] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:36:41,795 [18] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:36:41,796 [18] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:36:41,799 [18] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:36:41,800 [18] DEBUG dn_lib.tools.log - SQL: select task_filter_id, filter_title, filter_notes, filter_def, filter_class
 from dn_tasks_filters order by filter_order
2021-02-07 18:36:41,801 [18] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:36:41,801 [18] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:36:41,802 [18] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:36:41,803 [18] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:36:41,804 [18] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:36:41,805 [18] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:36:41,805 [18] DEBUG dn_lib.tools.log - SQL: select ft.tp, ft.synch_folder_id, ft.folder_id, ft.parent_id, ft.title
       , ft.des, ft.http_path, ft.lvl, dbo.folder_path(ft.folder_id) as folder_path
       , (select top 1 1 from dn_tasks where folder_id = ft.folder_id) as is_task
      from dbo.fnc_dn_folders(null, 1) ft
      
      order by ft.synch_folder_id, ft.lvl, ft.title
2021-02-07 18:36:41,812 [18] DEBUG dn_lib.tools.log - SQL: select f.synch_folder_id, f.file_id, f.folder_id, f.file_name, f.dt_ins , null as found_file
       from dn_files f
       where exists (select top 1 1 from dbo.fnc_dn_folders(null, 1) ft 
        
	      where ft.synch_folder_id = f.synch_folder_id 
          and isnull(ft.folder_id, 0) = isnull(f.folder_id, 0))
2021-02-07 18:36:41,820 [18] DEBUG dn_lib.tools.log - SQL: select t3.*
      , tst.stato, tst.[order] as stato_order, isnull(tst.class, 'light') as stato_class, isnull(tst.title_plurale, '') as stato_title_plurale, isnull(tst.title_singolare, '') as stato_title_singolare
      , tp.priorita, tp.[order] as priorita_order, isnull(tp.class, 'light') as priorita_class, isnull(tp.title_plurale, '') as priorita_title_plurale, isnull(tp.title_singolare, '') as priorita_title_singolare
      , tt.tipo, tt.[order] as tipo_order, isnull(tt.class, 'light') as tipo_class, isnull(tt.title_plurale, '') as tipo_title_plurale, isnull(tt.title_singolare, '') as tipo_title_singolare
      , ts.stima, ts.[days] as stima_days, isnull(ts.class, 'light') as stima_class, isnull(ts.title_plurale, '') as stima_title_plurale, isnull(ts.title_singolare, '') as stima_title_singolare
      , (select top 1 1 from dn_tasks_notes where task_id = t3.task_id) as task_notes
      , (select top 1 1 from vw_task_allegati f2 where f2.task_id = t3.task_id 
          and not exists (select top 1 1 from dn_files_info where file_name = f2.file_name)) as task_files
  from (select t2.*, datediff(day, t2.dt_ref, getdate()) as diff_days
    from (select t.task_id, t.synch_folder_id, isnull(t.folder_id, f.folder_id) as folder_id
	   , t.file_id, t.title, t.[user], t.stato, t.priorita, t.tipo, t.stima, t.dt_ins, t.dt_upd
     , (case when t.dt_ins > t.dt_upd then t.dt_ins else t.dt_upd end) as dt_ref
	  from dn_tasks t
    
	  left join dn_files f on f.file_id = t.file_id
    where (null is null or (null is not null and t.task_id = null)) ) t2
    where exists (select top 1 1 from dbo.fnc_dn_folders(null, 1) ft 
	    where  ft.synch_folder_id = t2.synch_folder_id 
       and isnull(ft.folder_id, 0) = isnull(t2.folder_id, 0))) t3
   left join dn_task_stato tst on tst.stato = t3.stato
   left join dn_task_priorita tp on tp.priorita = t3.priorita
   left join dn_task_tipo tt on tt.tipo = t3.tipo
   left join dn_task_stima ts on ts.stima = t3.stima
   where 1 = 1  and t3.stato = 'in_corso' or t3.diff_days <= 14
2021-02-07 18:36:41,836 [18] DEBUG dn_lib.tools.log - SQL: select title_singolare, stato from dn_task_stato order by [order]
2021-02-07 18:36:41,839 [18] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, priorita as [value], [order] from dn_task_priorita
      ) t order by t.[order]
2021-02-07 18:36:41,841 [18] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [days]
       union select title_singolare as title, stima as [value], [days] from dn_task_stima 
       ) t order by t.[days]
2021-02-07 18:36:41,842 [18] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, tipo as [value], [order] from dn_task_tipo
       ) t order by t.[order]
2021-02-07 18:36:41,843 [18] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value]
       union select nome as title, nome as [value] from users
       ) t order by 2
2021-02-07 18:36:43,834 [14] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:36:43,835 [14] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:36:43,837 [14] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:36:43,838 [14] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:36:43,839 [14] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:36:43,840 [14] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:36:43,841 [14] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:36:43,842 [14] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:36:43,843 [14] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:36:43,843 [14] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:36:43,845 [14] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:36:43,846 [14] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:36:43,846 [14] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:36:43,847 [14] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:36:43,848 [14] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:36:43,849 [14] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:36:43,849 [14] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:36:43,850 [14] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:36:43,851 [14] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:36:43,852 [14] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:36:43,852 [14] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:36:43,853 [14] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:36:43,854 [14] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:36:43,854 [14] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:36:43,855 [14] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:36:43,856 [14] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:36:43,858 [14] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:36:43,860 [14] DEBUG dn_lib.tools.log - SQL: select content from dn_tasks_notes 
       where task_id = 1454
2021-02-07 18:36:43,862 [14] DEBUG dn_lib.tools.log - SQL: select a.file_id, a.file_name, a.extension, a.http_path , null as found_file       
       , (select top 1 1 from dn_tasks where task_id = a.task_id and file_id = a.file_id) as file_task
      from vw_task_allegati a
      where a.task_id = 1454
2021-02-07 18:36:51,909 [17] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:36:51,911 [17] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:36:51,913 [17] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:36:51,914 [17] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:36:51,916 [17] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:36:51,917 [17] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:36:51,918 [17] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:36:51,919 [17] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:36:51,920 [17] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:36:51,921 [17] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:36:51,922 [17] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:36:51,923 [17] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:36:51,923 [17] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:36:51,924 [17] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:36:51,925 [17] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:36:51,926 [17] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:36:51,926 [17] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:36:51,927 [17] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:36:51,927 [17] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:36:51,928 [17] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:36:51,929 [17] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:36:51,929 [17] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:36:51,930 [17] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:36:51,930 [17] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:36:51,931 [17] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:36:51,932 [17] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:36:51,934 [17] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:36:51,936 [17] ERROR dn_lib.tools.log - error
System.Exception: il parametro 'user_id' per la request non  specificato!
   in dn_lib.tools.json_request.val_str(String code) in C:\root\todd\git\dn\dn_lib\tools\json_request.cs:riga 28
   in dn_lib.tools.json_request.val_int(String code, Int32 def) in C:\root\todd\git\dn\dn_lib\tools\json_request.cs:riga 30
   in _notes.OnInit(EventArgs e) in c:\root\todd\git\dn\deepanotes\notes.aspx.cs:riga 245
2021-02-07 18:37:19,724 [46] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:37:19,730 [46] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:37:19,731 [46] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:37:19,732 [46] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:37:19,733 [46] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:37:19,734 [46] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:37:19,734 [46] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:37:19,735 [46] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:37:19,735 [46] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:37:19,736 [46] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:37:19,738 [46] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:37:19,738 [46] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:37:19,738 [46] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:37:19,739 [46] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:37:19,740 [46] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:37:19,741 [46] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:37:19,742 [46] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:37:19,743 [46] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:37:19,744 [46] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:37:19,744 [46] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:37:19,745 [46] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:37:19,746 [46] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:37:19,747 [46] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:37:19,748 [46] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:37:19,748 [46] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:37:19,750 [46] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:37:19,753 [46] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:37:19,755 [46] ERROR dn_lib.tools.log - error
System.Exception: il parametro 'user_id' per la request non  specificato!
   in dn_lib.tools.json_request.val_str(String code) in C:\root\todd\git\dn\dn_lib\tools\json_request.cs:riga 28
   in dn_lib.tools.json_request.val_int(String code, Int32 def) in C:\root\todd\git\dn\dn_lib\tools\json_request.cs:riga 30
   in _notes.OnInit(EventArgs e) in c:\root\todd\git\dn\deepanotes\notes.aspx.cs:riga 245
2021-02-07 18:39:16,864 [18] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:39:16,866 [18] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:39:16,866 [18] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:39:16,867 [18] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:39:16,868 [18] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:39:16,869 [18] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:39:16,870 [18] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:39:16,871 [18] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:39:16,872 [18] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:39:16,872 [18] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:39:16,873 [18] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:39:16,874 [18] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:39:16,874 [18] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:39:16,875 [18] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:39:16,876 [18] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:39:16,877 [18] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:39:16,878 [18] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:39:16,879 [18] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:39:16,879 [18] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:39:16,880 [18] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:39:16,881 [18] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:39:16,882 [18] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:39:16,882 [18] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:39:16,883 [18] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:39:16,884 [18] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:39:16,885 [18] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:39:16,891 [18] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:39:16,902 [18] DEBUG dn_lib.tools.log - SQL: select task_filter_id, filter_title, filter_notes, filter_def, filter_class
 from dn_tasks_filters order by filter_order
2021-02-07 18:39:16,904 [18] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:39:16,906 [18] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:39:16,908 [18] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:39:16,909 [18] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:39:16,909 [18] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:39:16,910 [18] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:39:16,911 [18] DEBUG dn_lib.tools.log - SQL: select ft.tp, ft.synch_folder_id, ft.folder_id, ft.parent_id, ft.title
       , ft.des, ft.http_path, ft.lvl, dbo.folder_path(ft.folder_id) as folder_path
       , (select top 1 1 from dn_tasks where folder_id = ft.folder_id) as is_task
      from dbo.fnc_dn_folders(null, 1) ft
      
      order by ft.synch_folder_id, ft.lvl, ft.title
2021-02-07 18:39:16,920 [18] DEBUG dn_lib.tools.log - SQL: select f.synch_folder_id, f.file_id, f.folder_id, f.file_name, f.dt_ins , null as found_file
       from dn_files f
       where exists (select top 1 1 from dbo.fnc_dn_folders(null, 1) ft 
        
	      where ft.synch_folder_id = f.synch_folder_id 
          and isnull(ft.folder_id, 0) = isnull(f.folder_id, 0))
2021-02-07 18:39:16,927 [18] DEBUG dn_lib.tools.log - SQL: select t3.*
      , tst.stato, tst.[order] as stato_order, isnull(tst.class, 'light') as stato_class, isnull(tst.title_plurale, '') as stato_title_plurale, isnull(tst.title_singolare, '') as stato_title_singolare
      , tp.priorita, tp.[order] as priorita_order, isnull(tp.class, 'light') as priorita_class, isnull(tp.title_plurale, '') as priorita_title_plurale, isnull(tp.title_singolare, '') as priorita_title_singolare
      , tt.tipo, tt.[order] as tipo_order, isnull(tt.class, 'light') as tipo_class, isnull(tt.title_plurale, '') as tipo_title_plurale, isnull(tt.title_singolare, '') as tipo_title_singolare
      , ts.stima, ts.[days] as stima_days, isnull(ts.class, 'light') as stima_class, isnull(ts.title_plurale, '') as stima_title_plurale, isnull(ts.title_singolare, '') as stima_title_singolare
      , (select top 1 1 from dn_tasks_notes where task_id = t3.task_id) as task_notes
      , (select top 1 1 from vw_task_allegati f2 where f2.task_id = t3.task_id 
          and not exists (select top 1 1 from dn_files_info where file_name = f2.file_name)) as task_files
  from (select t2.*, datediff(day, t2.dt_ref, getdate()) as diff_days
    from (select t.task_id, t.synch_folder_id, isnull(t.folder_id, f.folder_id) as folder_id
	   , t.file_id, t.title, t.[user], t.stato, t.priorita, t.tipo, t.stima, t.dt_ins, t.dt_upd
     , (case when t.dt_ins > t.dt_upd then t.dt_ins else t.dt_upd end) as dt_ref
	  from dn_tasks t
    
	  left join dn_files f on f.file_id = t.file_id
    where (null is null or (null is not null and t.task_id = null)) ) t2
    where exists (select top 1 1 from dbo.fnc_dn_folders(null, 1) ft 
	    where  ft.synch_folder_id = t2.synch_folder_id 
       and isnull(ft.folder_id, 0) = isnull(t2.folder_id, 0))) t3
   left join dn_task_stato tst on tst.stato = t3.stato
   left join dn_task_priorita tp on tp.priorita = t3.priorita
   left join dn_task_tipo tt on tt.tipo = t3.tipo
   left join dn_task_stima ts on ts.stima = t3.stima
   where 1 = 1  and t3.stato = 'in_corso' or t3.diff_days <= 14
2021-02-07 18:39:16,950 [18] DEBUG dn_lib.tools.log - SQL: select title_singolare, stato from dn_task_stato order by [order]
2021-02-07 18:39:16,960 [18] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, priorita as [value], [order] from dn_task_priorita
      ) t order by t.[order]
2021-02-07 18:39:16,962 [18] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [days]
       union select title_singolare as title, stima as [value], [days] from dn_task_stima 
       ) t order by t.[days]
2021-02-07 18:39:16,964 [18] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, tipo as [value], [order] from dn_task_tipo
       ) t order by t.[order]
2021-02-07 18:39:16,966 [18] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value]
       union select nome as title, nome as [value] from users
       ) t order by 2
2021-02-07 18:39:19,892 [12] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:39:19,894 [12] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:39:19,895 [12] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:39:19,896 [12] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:39:19,897 [12] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:39:19,898 [12] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:39:19,899 [12] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:39:19,900 [12] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:39:19,901 [12] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:39:19,902 [12] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:39:19,902 [12] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:39:19,903 [12] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:39:19,904 [12] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:39:19,905 [12] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:39:19,906 [12] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:39:19,907 [12] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:39:19,908 [12] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:39:19,908 [12] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:39:19,909 [12] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:39:19,910 [12] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:39:19,910 [12] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:39:19,911 [12] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:39:19,911 [12] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:39:19,912 [12] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:39:19,913 [12] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:39:19,914 [12] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:39:19,917 [12] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:39:19,918 [12] DEBUG dn_lib.tools.log - SQL: select content from dn_tasks_notes 
       where task_id = 1454
2021-02-07 18:39:19,920 [12] DEBUG dn_lib.tools.log - SQL: select a.file_id, a.file_name, a.extension, a.http_path , null as found_file       
       , (select top 1 1 from dn_tasks where task_id = a.task_id and file_id = a.file_id) as file_task
      from vw_task_allegati a
      where a.task_id = 1454
2021-02-07 18:39:24,771 [30] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:39:24,773 [30] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:39:24,774 [30] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:39:24,776 [30] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:39:24,778 [30] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:39:24,779 [30] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:39:24,781 [30] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:39:24,782 [30] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:39:24,782 [30] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:39:24,783 [30] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:39:24,784 [30] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:39:24,785 [30] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:39:24,785 [30] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:39:24,786 [30] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:39:24,787 [30] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:39:24,788 [30] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:39:24,789 [30] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:39:24,790 [30] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:39:24,791 [30] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:39:24,792 [30] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:39:24,792 [30] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:39:24,793 [30] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:39:24,794 [30] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:39:24,795 [30] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:39:24,795 [30] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:39:24,796 [30] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:39:24,799 [30] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:39:24,802 [30] DEBUG dn_lib.tools.log - SQL: select t.synch_folder_id, t.task_id, t.title, f.folder_id as parent_folder_id, t.folder_id
  , sf.local_path + isnull(replace(dbo.folder_path(t.folder_id), '/', '\'), '') as folder_path
  , t.file_id, ft.type_content, ft.open_comment, ft.close_comment
  , sf.local_path + replace(isnull(dbo.folder_path(f.folder_id), '\') + f.file_name, '/', '\') as file_path
  , tn.file_id as file_id_notes
  , sf.local_path + replace(isnull(dbo.folder_path(fn.folder_id), '\') + fn.file_name, '/', '\') as file_path_notes
 from dn_tasks t
 left join synch_folders sf on sf.synch_folder_id = t.synch_folder_id
 left join dn_files f on f.file_id = t.file_id
 left join dn_files_types ft on ft.extension = f.extension
 left join dn_tasks_notes tn on tn.task_id = t.task_id
 left join dn_files fn on fn.file_id = tn.file_id
 where t.task_id = 1454
2021-02-07 18:39:24,814 [30] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1833 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1833, 'i.txt', '.txt', 1, convert(datetime, '2021-02-07 18:39:24', 120), convert(datetime, '2021-02-07 18:39:24', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-02-07 18:39:24', 120), dt_upd = convert(datetime, '2021-02-07 18:39:24', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-02-07 18:39:24', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-02-07 18:39:24', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-02-07 18:39:24,828 [30] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4328;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4328, '.txt', @content, convert(datetime, '2021-02-07 18:39:24', 120), convert(datetime, '2021-02-07 18:39:24', 120));
2021-02-07 18:39:24,831 [30] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1454;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1454, 4328, @content
          , convert(datetime, convert(varchar, getdate(), 120), 120), convert(datetime, convert(varchar, getdate(), 120), 120));
      update dn_tasks set dt_upd = convert(datetime, convert(varchar, getdate(), 120), 120) where task_id = 1454;
2021-02-07 18:39:41,009 [21] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:39:41,011 [21] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:39:41,012 [21] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:39:41,012 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:39:41,013 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:39:41,014 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:39:41,015 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:39:41,015 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:39:41,016 [21] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:39:41,017 [21] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:39:41,017 [21] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:39:41,018 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:39:41,019 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:39:41,019 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:39:41,020 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:39:41,020 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:39:41,021 [21] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:39:41,022 [21] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:39:41,022 [21] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:39:41,023 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:39:41,024 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:39:41,024 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:39:41,025 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:39:41,026 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:39:41,026 [21] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:39:41,027 [21] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:39:41,028 [21] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:39:41,029 [21] DEBUG dn_lib.tools.log - SQL: select task_filter_id, filter_title, filter_notes, filter_def, filter_class
 from dn_tasks_filters order by filter_order
2021-02-07 18:39:41,030 [21] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:39:41,032 [21] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:39:41,033 [21] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:39:41,034 [21] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:39:41,035 [21] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:39:41,036 [21] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:39:41,038 [21] DEBUG dn_lib.tools.log - SQL: select ft.tp, ft.synch_folder_id, ft.folder_id, ft.parent_id, ft.title
       , ft.des, ft.http_path, ft.lvl, dbo.folder_path(ft.folder_id) as folder_path
       , (select top 1 1 from dn_tasks where folder_id = ft.folder_id) as is_task
      from dbo.fnc_dn_folders(null, 1) ft
      
      order by ft.synch_folder_id, ft.lvl, ft.title
2021-02-07 18:39:41,045 [21] DEBUG dn_lib.tools.log - SQL: select f.synch_folder_id, f.file_id, f.folder_id, f.file_name, f.dt_ins , null as found_file
       from dn_files f
       where exists (select top 1 1 from dbo.fnc_dn_folders(null, 1) ft 
        
	      where ft.synch_folder_id = f.synch_folder_id 
          and isnull(ft.folder_id, 0) = isnull(f.folder_id, 0))
2021-02-07 18:39:41,052 [21] DEBUG dn_lib.tools.log - SQL: select t3.*
      , tst.stato, tst.[order] as stato_order, isnull(tst.class, 'light') as stato_class, isnull(tst.title_plurale, '') as stato_title_plurale, isnull(tst.title_singolare, '') as stato_title_singolare
      , tp.priorita, tp.[order] as priorita_order, isnull(tp.class, 'light') as priorita_class, isnull(tp.title_plurale, '') as priorita_title_plurale, isnull(tp.title_singolare, '') as priorita_title_singolare
      , tt.tipo, tt.[order] as tipo_order, isnull(tt.class, 'light') as tipo_class, isnull(tt.title_plurale, '') as tipo_title_plurale, isnull(tt.title_singolare, '') as tipo_title_singolare
      , ts.stima, ts.[days] as stima_days, isnull(ts.class, 'light') as stima_class, isnull(ts.title_plurale, '') as stima_title_plurale, isnull(ts.title_singolare, '') as stima_title_singolare
      , (select top 1 1 from dn_tasks_notes where task_id = t3.task_id) as task_notes
      , (select top 1 1 from vw_task_allegati f2 where f2.task_id = t3.task_id 
          and not exists (select top 1 1 from dn_files_info where file_name = f2.file_name)) as task_files
  from (select t2.*, datediff(day, t2.dt_ref, getdate()) as diff_days
    from (select t.task_id, t.synch_folder_id, isnull(t.folder_id, f.folder_id) as folder_id
	   , t.file_id, t.title, t.[user], t.stato, t.priorita, t.tipo, t.stima, t.dt_ins, t.dt_upd
     , (case when t.dt_ins > t.dt_upd then t.dt_ins else t.dt_upd end) as dt_ref
	  from dn_tasks t
    
	  left join dn_files f on f.file_id = t.file_id
    where (null is null or (null is not null and t.task_id = null)) ) t2
    where exists (select top 1 1 from dbo.fnc_dn_folders(null, 1) ft 
	    where  ft.synch_folder_id = t2.synch_folder_id 
       and isnull(ft.folder_id, 0) = isnull(t2.folder_id, 0))) t3
   left join dn_task_stato tst on tst.stato = t3.stato
   left join dn_task_priorita tp on tp.priorita = t3.priorita
   left join dn_task_tipo tt on tt.tipo = t3.tipo
   left join dn_task_stima ts on ts.stima = t3.stima
   where 1 = 1  and t3.stato = 'in_corso' or t3.diff_days <= 14
2021-02-07 18:39:41,069 [21] DEBUG dn_lib.tools.log - SQL: select title_singolare, stato from dn_task_stato order by [order]
2021-02-07 18:39:41,071 [21] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, priorita as [value], [order] from dn_task_priorita
      ) t order by t.[order]
2021-02-07 18:39:41,073 [21] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [days]
       union select title_singolare as title, stima as [value], [days] from dn_task_stima 
       ) t order by t.[days]
2021-02-07 18:39:41,076 [21] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, tipo as [value], [order] from dn_task_tipo
       ) t order by t.[order]
2021-02-07 18:39:41,079 [21] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value]
       union select nome as title, nome as [value] from users
       ) t order by 2
2021-02-07 18:41:11,823 [11] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:41:11,825 [11] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:41:11,826 [11] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:41:11,828 [11] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:41:11,829 [11] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:41:11,830 [11] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:41:11,831 [11] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:41:11,831 [11] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:41:11,832 [11] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:41:11,832 [11] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:41:11,834 [11] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:41:11,835 [11] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:41:11,835 [11] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:41:11,836 [11] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:41:11,836 [11] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:41:11,837 [11] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:41:11,838 [11] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:41:11,839 [11] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:41:11,839 [11] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:41:11,840 [11] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:41:11,841 [11] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:41:11,843 [11] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:41:11,843 [11] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:41:11,843 [11] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:41:11,844 [11] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:41:11,845 [11] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:41:11,848 [11] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:41:11,861 [12] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:41:11,862 [12] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:41:11,863 [12] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:41:11,864 [12] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:41:11,865 [12] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:41:11,866 [12] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:41:11,867 [12] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:41:11,868 [12] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:41:11,869 [12] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:41:11,869 [12] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:41:11,870 [12] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:41:11,871 [12] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:41:11,872 [12] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:41:11,872 [12] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:41:11,873 [12] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:41:11,874 [12] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:41:11,874 [12] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:41:11,875 [12] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:41:11,876 [12] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:41:11,877 [12] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:41:11,877 [12] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:41:11,878 [12] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:41:11,879 [12] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:41:11,880 [12] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:41:11,881 [12] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:41:11,882 [12] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:41:11,887 [12] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:41:11,899 [8] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:41:11,900 [8] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:41:11,901 [8] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:41:11,902 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:41:11,903 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:41:11,904 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:41:11,905 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:41:11,906 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:41:11,907 [8] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:41:11,907 [8] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:41:11,908 [8] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:41:11,909 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:41:11,910 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:41:11,910 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:41:11,911 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:41:11,912 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:41:11,912 [8] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:41:11,913 [8] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:41:11,914 [8] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:41:11,914 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:41:11,915 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:41:11,915 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:41:11,916 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:41:11,917 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:41:11,917 [8] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:41:11,918 [8] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:41:11,921 [8] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:41:12,466 [17] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:41:12,477 [17] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:41:12,479 [17] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:41:12,480 [17] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:41:12,482 [17] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:41:12,483 [17] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:41:12,484 [17] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:41:12,485 [17] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:41:12,486 [17] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:41:12,487 [17] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:41:12,488 [17] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:41:12,489 [17] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:41:12,490 [17] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:41:12,491 [17] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:41:12,491 [17] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:41:12,492 [17] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:41:12,493 [17] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:41:12,493 [17] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:41:12,494 [17] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:41:12,495 [17] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:41:12,495 [17] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:41:12,496 [17] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:41:12,497 [17] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:41:12,498 [17] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:41:12,498 [17] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:41:12,499 [17] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:41:12,503 [17] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:41:12,504 [17] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-02-07 18:41:12,506 [17] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-02-07 18:41:12,508 [17] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-02-07 18:41:12,508 [17] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-02-07 18:41:12,511 [17] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-02-07 18:41:12,512 [17] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-02-07 18:41:12,513 [17] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-02-07 18:41:12,515 [17] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-02-07 18:41:12,517 [17] DEBUG dn_lib.tools.log - elenco cartelle da sincronizzare
2021-02-07 18:41:12,518 [17] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-02-07 18:41:12,519 [17] DEBUG dn_lib.tools.log -    - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-02-07 18:41:12,520 [17] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-02-07 18:41:12,524 [17] DEBUG dn_lib.tools.log - elaboro la cartella C:\root\todd\_test\dn...
2021-02-07 18:41:12,525 [17] DEBUG dn_lib.tools.log - SQL: declare @cc_files int; declare @cc_folders int;
      select @cc_files = (select count(*) from dn_files where readed is null) 
      select @cc_folders = (select count(*) from dn_folders where readed is null)
      
      delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
      select @cc_files, @cc_folders;
2021-02-07 18:41:12,533 [17] DEBUG dn_lib.tools.log - cancellati dal database: 1 files
2021-02-07 18:41:12,534 [17] DEBUG dn_lib.tools.log - cancellati dal database: 1 folders
2021-02-07 18:41:12,535 [17] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '0')
        else update users_cache set var_value = substring('0', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-02-07 18:41:12,538 [17] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '0')
        else update users_cache set var_value = substring('0', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-02-07 18:41:12,542 [17] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/01/05 15:40:09')
        else update users_cache set var_value = substring('2021/01/05 15:40:09', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-02-07 18:41:12,545 [17] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/02/07 18:41:12')
        else update users_cache set var_value = substring('2021/02/07 18:41:12', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-02-07 18:41:48,667 [11] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:41:48,669 [11] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:41:48,670 [11] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:41:48,671 [11] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:41:48,672 [11] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:41:48,673 [11] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:41:48,674 [11] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:41:48,675 [11] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:41:48,675 [11] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:41:48,676 [11] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:41:48,677 [11] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:41:48,677 [11] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:41:48,678 [11] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:41:48,679 [11] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:41:48,679 [11] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:41:48,680 [11] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:41:48,680 [11] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:41:48,681 [11] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:41:48,681 [11] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:41:48,682 [11] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:41:48,683 [11] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:41:48,683 [11] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:41:48,684 [11] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:41:48,684 [11] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:41:48,685 [11] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:41:48,685 [11] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:41:48,688 [11] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:41:48,693 [8] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:41:48,693 [8] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:41:48,693 [8] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:41:48,694 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:41:48,695 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:41:48,695 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:41:48,696 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:41:48,697 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:41:48,697 [8] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:41:48,698 [8] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:41:48,698 [8] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:41:48,699 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:41:48,699 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:41:48,700 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:41:48,700 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:41:48,701 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:41:48,701 [8] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:41:48,702 [8] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:41:48,703 [8] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:41:48,703 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:41:48,704 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:41:48,705 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:41:48,706 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:41:48,707 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:41:48,707 [8] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:41:48,708 [8] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:41:48,710 [8] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:41:48,713 [10] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:41:48,714 [10] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:41:48,715 [10] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:41:48,715 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:41:48,716 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:41:48,717 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:41:48,717 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:41:48,718 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:41:48,718 [10] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:41:48,719 [10] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:41:48,720 [10] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:41:48,720 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:41:48,721 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:41:48,721 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:41:48,722 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:41:48,722 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:41:48,723 [10] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:41:48,723 [10] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:41:48,724 [10] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:41:48,725 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:41:48,726 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:41:48,726 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:41:48,727 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:41:48,727 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:41:48,728 [10] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:41:48,728 [10] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:41:48,731 [10] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:41:49,279 [48] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:41:49,281 [48] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:41:49,283 [48] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:41:49,285 [48] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:41:49,287 [48] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:41:49,288 [48] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:41:49,290 [48] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:41:49,291 [48] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:41:49,292 [48] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:41:49,293 [48] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:41:49,294 [48] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:41:49,294 [48] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:41:49,295 [48] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:41:49,296 [48] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:41:49,296 [48] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:41:49,297 [48] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:41:49,298 [48] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:41:49,299 [48] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:41:49,299 [48] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:41:49,300 [48] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:41:49,301 [48] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:41:49,302 [48] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:41:49,302 [48] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:41:49,303 [48] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:41:49,304 [48] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:41:49,305 [48] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:41:49,308 [48] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:41:49,309 [48] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-02-07 18:41:49,311 [48] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-02-07 18:41:49,313 [48] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-02-07 18:41:49,315 [48] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-02-07 18:41:49,316 [48] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-02-07 18:41:49,318 [48] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-02-07 18:41:49,319 [48] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-02-07 18:41:49,321 [48] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-02-07 18:41:49,324 [48] DEBUG dn_lib.tools.log - elenco cartelle da sincronizzare
2021-02-07 18:41:49,325 [48] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-02-07 18:41:49,326 [48] DEBUG dn_lib.tools.log -    - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-02-07 18:41:49,327 [48] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-02-07 18:41:49,329 [48] DEBUG dn_lib.tools.log - elaboro la cartella C:\root\todd\_test\dn...
2021-02-07 18:41:49,330 [48] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id is null and file_name = '20200101.iollo.incorso.task.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, null, '20200101.iollo.incorso.task.txt', '.txt', 1, convert(datetime, '2021-02-07 18:41:28', 120), convert(datetime, '2021-02-07 18:41:43', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-02-07 18:41:28', 120), dt_upd = convert(datetime, '2021-02-07 18:41:43', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-02-07 18:41:28', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-02-07 18:41:43', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-02-07 18:41:49,344 [48] DEBUG dn_lib.tools.log - aggiunto file al database: C:\root\todd\_test\dn\20200101.iollo.incorso.task.txt
2021-02-07 18:41:49,350 [48] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4329;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4329, '.txt', @content, convert(datetime, '2021-02-07 18:41:28', 120), convert(datetime, '2021-02-07 18:41:43', 120));
2021-02-07 18:41:49,354 [48] DEBUG dn_lib.tools.log - salvato contenuto file nel database: C:\root\todd\_test\dn\20200101.iollo.incorso.task.txt
2021-02-07 18:41:49,359 [48] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4329;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, null, 4329, left('iollo', 150)
            , NULL, convert(datetime, '2020-01-01 00:00:00', 120), convert(datetime, '2021-02-07 18:41:43', 120), 1
            , 'in_corso', NULL, NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-01-01 00:00:00', 120), dt_upd = convert(datetime, '2021-02-07 18:41:43', 120)
         , title = left('iollo', 150), [user] = NULL
         , stato = 'in_corso', priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-01-01 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-02-07 18:41:43', 120), getdate())
          or isnull(title, '') <> isnull('iollo', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('in_corso', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-02-07 18:41:49,365 [48] DEBUG dn_lib.tools.log - inserito task nel database: C:\root\todd\_test\dn\iollo
2021-02-07 18:41:49,367 [48] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1455;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1455, 4329, @content
          , convert(datetime, '2021-02-07 18:41:28', 120), convert(datetime, '2021-02-07 18:41:43', 120));
2021-02-07 18:41:49,370 [48] DEBUG dn_lib.tools.log - salvate le note del task nel database: C:\root\todd\_test\dn\20200101.iollo.incorso.task.txt
2021-02-07 18:41:49,371 [48] DEBUG dn_lib.tools.log - trasformazione task file in task folder: C:\root\todd\_test\dn\20200101.iollo.incorso.task.txt
2021-02-07 18:41:49,373 [48] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = '20200101.iollo.incorso.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, '20200101.iollo.incorso.task', 1, convert(datetime, '2021-02-07 18:41:28', 120), convert(datetime, '2021-02-07 18:41:28', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-02-07 18:41:28', 120), dt_upd = convert(datetime, '2021-02-07 18:41:28', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-02-07 18:41:28', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-02-07 18:41:28', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-02-07 18:41:49,379 [48] DEBUG dn_lib.tools.log - creato folder: C:\root\todd\_test\dn\20200101.iollo.incorso.task
2021-02-07 18:41:49,381 [48] DEBUG dn_lib.tools.log - SQL: update dn_files set synch_folder_id = 1, folder_id = 1834, file_name = 'i', dt_upd = getdate()
        where file_id = 4329;
      
2021-02-07 18:41:49,384 [48] DEBUG dn_lib.tools.log - SQL: update dn_tasks set dt_upd = convert(datetime, convert(varchar, getdate(), 120), 120), folder_id = 1834, file_id = null
        where task_id = 1455;
2021-02-07 18:41:49,387 [48] DEBUG dn_lib.tools.log - spostato file da: C:\root\todd\_test\dn\20200101.iollo.incorso.task.txt, a:C:\root\todd\_test\dn\20200101.iollo.incorso.task\i.txt
2021-02-07 18:41:49,387 [48] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1455;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1455, 4329, @content
          , convert(datetime, convert(varchar, getdate(), 120), 120), convert(datetime, convert(varchar, getdate(), 120), 120));
      update dn_tasks set dt_upd = convert(datetime, convert(varchar, getdate(), 120), 120) where task_id = 1455;
2021-02-07 18:41:49,392 [48] DEBUG dn_lib.tools.log - salvate le note del task: C:\root\todd\_test\dn\20200101.iollo.incorso.task
2021-02-07 18:41:49,397 [48] DEBUG dn_lib.tools.log - rinominato folder: C:\root\todd\_test\dn\20200101.iollo.incorso.task, in: C:\root\todd\_test\dn\iollo.task
2021-02-07 18:41:49,398 [48] DEBUG dn_lib.tools.log - SQL: update dn_folders set folder_name = 'iollo.task', dt_upd = convert(datetime, convert(varchar, getdate(), 120), 120)
        where folder_id = 1834
2021-02-07 18:41:49,405 [48] DEBUG dn_lib.tools.log - salvato index doc: C:\root\todd\_test\dn\iollo.task\__i.xml
2021-02-07 18:41:49,406 [48] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1834 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, 1834, null, left('iollo', 150)
            , NULL, convert(datetime, '2020-01-01 00:00:00', 120), convert(datetime, '2021-02-07 18:41:43', 120), 1
            , 'in_corso', NULL, NULL, NULL, convert(datetime, '2021-02-07 18:41:49', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-01-01 00:00:00', 120), dt_upd = convert(datetime, '2021-02-07 18:41:43', 120)
         , title = left('iollo', 150), [user] = NULL
         , stato = 'in_corso', priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = convert(datetime, '2021-02-07 18:41:49', 120)
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-01-01 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-02-07 18:41:43', 120), getdate())
          or isnull(title, '') <> isnull('iollo', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('in_corso', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-02-07 18:41:49,413 [48] DEBUG dn_lib.tools.log - SQL: declare @cc_files int; declare @cc_folders int;
      select @cc_files = (select count(*) from dn_files where readed is null) 
      select @cc_folders = (select count(*) from dn_folders where readed is null)
      
      delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
      select @cc_files, @cc_folders;
2021-02-07 18:41:49,420 [48] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '1')
        else update users_cache set var_value = substring('1', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-02-07 18:41:49,423 [48] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '0')
        else update users_cache set var_value = substring('0', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-02-07 18:41:49,427 [48] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/02/07 18:41:43')
        else update users_cache set var_value = substring('2021/02/07 18:41:43', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-02-07 18:41:49,430 [48] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/02/07 18:41:49')
        else update users_cache set var_value = substring('2021/02/07 18:41:49', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-02-07 18:42:45,844 [12] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:42:45,845 [12] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:42:45,846 [12] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:42:45,847 [12] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:42:45,848 [12] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:42:45,849 [12] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:42:45,849 [12] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:42:45,850 [12] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:42:45,851 [12] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:42:45,852 [12] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:42:45,853 [12] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:42:45,854 [12] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:42:45,855 [12] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:42:45,856 [12] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:42:45,856 [12] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:42:45,857 [12] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:42:45,858 [12] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:42:45,858 [12] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:42:45,859 [12] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:42:45,860 [12] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:42:45,860 [12] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:42:45,861 [12] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:42:45,862 [12] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:42:45,863 [12] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:42:45,863 [12] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:42:45,864 [12] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:42:45,865 [12] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:42:46,411 [21] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:42:46,412 [21] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:42:46,413 [21] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:42:46,414 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:42:46,415 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:42:46,416 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:42:46,417 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:42:46,417 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:42:46,418 [21] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:42:46,419 [21] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:42:46,420 [21] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:42:46,420 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:42:46,421 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:42:46,422 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:42:46,423 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:42:46,424 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:42:46,425 [21] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:42:46,425 [21] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:42:46,426 [21] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:42:46,427 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:42:46,428 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:42:46,428 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:42:46,429 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:42:46,430 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:42:46,431 [21] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:42:46,432 [21] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:42:46,434 [21] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:42:46,435 [21] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-02-07 18:42:46,438 [21] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-02-07 18:42:46,440 [21] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-02-07 18:42:46,442 [21] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-02-07 18:42:46,443 [21] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-02-07 18:42:46,446 [21] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-02-07 18:42:46,447 [21] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-02-07 18:42:46,449 [21] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-02-07 18:42:46,452 [21] DEBUG dn_lib.tools.log - elenco cartelle da sincronizzare
2021-02-07 18:42:46,453 [21] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-02-07 18:42:46,454 [21] DEBUG dn_lib.tools.log -    - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-02-07 18:42:46,455 [21] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-02-07 18:42:46,466 [21] DEBUG dn_lib.tools.log - elaboro la cartella C:\root\todd\_test\dn...
2021-02-07 18:42:46,467 [21] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = 'iollo.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, 'iollo.task', 1, convert(datetime, '2021-02-07 18:41:49', 120), convert(datetime, '2021-02-07 18:41:49', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-02-07 18:41:49', 120), dt_upd = convert(datetime, '2021-02-07 18:41:49', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-02-07 18:41:49', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-02-07 18:41:49', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-02-07 18:42:46,472 [21] DEBUG dn_lib.tools.log - aggiornato folder nel database: C:\root\todd\_test\dn\iollo.task
2021-02-07 18:42:46,474 [21] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1834 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, 1834, null, left('iollo', 150)
            , NULL, convert(datetime, '2021-02-07 18:41:49', 120), convert(datetime, '2021-02-07 18:41:49', 120), 1
            , 'in_corso', NULL, NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-02-07 18:41:49', 120), dt_upd = convert(datetime, '2021-02-07 18:41:49', 120)
         , title = left('iollo', 150), [user] = NULL
         , stato = 'in_corso', priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-02-07 18:41:49', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-02-07 18:41:49', 120), getdate())
          or isnull(title, '') <> isnull('iollo', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('in_corso', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-02-07 18:42:46,479 [21] DEBUG dn_lib.tools.log - aggiornato task nel database: iollo
2021-02-07 18:42:46,480 [21] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1834 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1834, 'i.txt', '.txt', 1, convert(datetime, '2021-02-07 18:41:28', 120), convert(datetime, '2021-02-07 18:41:43', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-02-07 18:41:28', 120), dt_upd = convert(datetime, '2021-02-07 18:41:43', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-02-07 18:41:28', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-02-07 18:41:43', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-02-07 18:42:46,485 [21] DEBUG dn_lib.tools.log - aggiunto file al database: C:\root\todd\_test\dn\iollo.task\i.txt
2021-02-07 18:42:46,486 [21] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4330;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4330, '.txt', @content, convert(datetime, '2021-02-07 18:41:28', 120), convert(datetime, '2021-02-07 18:41:43', 120));
2021-02-07 18:42:46,488 [21] DEBUG dn_lib.tools.log - salvato contenuto file nel database: C:\root\todd\_test\dn\iollo.task\i.txt
2021-02-07 18:42:46,489 [21] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1455;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1455, 4330, @content
          , convert(datetime, '2021-02-07 18:41:28', 120), convert(datetime, '2021-02-07 18:41:43', 120));
2021-02-07 18:42:46,491 [21] DEBUG dn_lib.tools.log - salvate le note del task nel database: C:\root\todd\_test\dn\iollo.task\i.txt
2021-02-07 18:42:46,492 [21] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1455) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-02-07 18:42:46,500 [21] DEBUG dn_lib.tools.log - aggiornato task date nel database: C:\root\todd\_test\dn\iollo
2021-02-07 18:42:46,501 [21] DEBUG dn_lib.tools.log - SQL: declare @cc_files int; declare @cc_folders int;
      select @cc_files = (select count(*) from dn_files where readed is null) 
      select @cc_folders = (select count(*) from dn_folders where readed is null)
      
      delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
      select @cc_files, @cc_folders;
2021-02-07 18:42:46,507 [21] DEBUG dn_lib.tools.log - cancellati dal database: 1 files
2021-02-07 18:42:46,508 [21] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '2')
        else update users_cache set var_value = substring('2', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-02-07 18:42:46,511 [21] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '1')
        else update users_cache set var_value = substring('1', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-02-07 18:42:46,514 [21] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/02/07 18:41:49')
        else update users_cache set var_value = substring('2021/02/07 18:41:49', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-02-07 18:42:46,518 [21] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/02/07 18:42:46')
        else update users_cache set var_value = substring('2021/02/07 18:42:46', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-02-07 18:42:53,010 [8] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:42:53,011 [8] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:42:53,012 [8] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:42:53,013 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:42:53,014 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:42:53,015 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:42:53,016 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:42:53,017 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:42:53,018 [8] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:42:53,019 [8] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:42:53,019 [8] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:42:53,020 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:42:53,020 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:42:53,021 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:42:53,022 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:42:53,022 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:42:53,023 [8] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:42:53,023 [8] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:42:53,024 [8] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:42:53,024 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:42:53,025 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:42:53,026 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:42:53,026 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:42:53,027 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:42:53,028 [8] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:42:53,028 [8] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:42:53,031 [8] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:42:53,572 [17] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:42:53,574 [17] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:42:53,576 [17] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:42:53,577 [17] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:42:53,579 [17] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:42:53,580 [17] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:42:53,582 [17] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:42:53,583 [17] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:42:53,584 [17] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:42:53,585 [17] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:42:53,586 [17] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:42:53,586 [17] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:42:53,587 [17] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:42:53,588 [17] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:42:53,588 [17] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:42:53,589 [17] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:42:53,589 [17] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:42:53,590 [17] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:42:53,591 [17] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:42:53,592 [17] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:42:53,593 [17] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:42:53,594 [17] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:42:53,595 [17] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:42:53,595 [17] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:42:53,596 [17] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:42:53,597 [17] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:42:53,601 [17] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:42:53,602 [17] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-02-07 18:42:53,603 [17] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-02-07 18:42:53,605 [17] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-02-07 18:42:53,605 [17] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-02-07 18:42:53,606 [17] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-02-07 18:42:53,607 [17] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-02-07 18:42:53,608 [17] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-02-07 18:42:53,608 [17] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-02-07 18:42:53,610 [17] DEBUG dn_lib.tools.log - elenco cartelle da sincronizzare
2021-02-07 18:42:53,610 [17] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-02-07 18:42:53,611 [17] DEBUG dn_lib.tools.log -    - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-02-07 18:42:53,612 [17] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-02-07 18:42:53,614 [17] DEBUG dn_lib.tools.log - elaboro la cartella C:\root\todd\_test\dn...
2021-02-07 18:42:53,614 [17] DEBUG dn_lib.tools.log - SQL: declare @cc_files int; declare @cc_folders int;
      select @cc_files = (select count(*) from dn_files where readed is null) 
      select @cc_folders = (select count(*) from dn_folders where readed is null)
      
      delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
      select @cc_files, @cc_folders;
2021-02-07 18:42:53,616 [17] DEBUG dn_lib.tools.log - cancellati dal database: 1 files
2021-02-07 18:42:53,616 [17] DEBUG dn_lib.tools.log - cancellati dal database: 1 folders
2021-02-07 18:42:53,617 [17] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '0')
        else update users_cache set var_value = substring('0', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-02-07 18:42:53,619 [17] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '0')
        else update users_cache set var_value = substring('0', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-02-07 18:42:53,622 [17] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/01/05 15:40:09')
        else update users_cache set var_value = substring('2021/01/05 15:40:09', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-02-07 18:42:53,625 [17] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/02/07 18:42:53')
        else update users_cache set var_value = substring('2021/02/07 18:42:53', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-02-07 18:43:26,076 [11] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:43:26,077 [11] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:43:26,078 [11] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:43:26,079 [11] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:43:26,080 [11] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:43:26,081 [11] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:43:26,082 [11] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:43:26,082 [11] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:43:26,083 [11] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:43:26,084 [11] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:43:26,085 [11] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:43:26,085 [11] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:43:26,086 [11] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:43:26,087 [11] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:43:26,087 [11] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:43:26,088 [11] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:43:26,089 [11] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:43:26,090 [11] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:43:26,091 [11] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:43:26,091 [11] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:43:26,092 [11] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:43:26,092 [11] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:43:26,093 [11] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:43:26,094 [11] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:43:26,094 [11] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:43:26,095 [11] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:43:26,097 [11] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:43:26,650 [46] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:43:26,652 [46] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:43:26,654 [46] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:43:26,656 [46] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:43:26,658 [46] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:43:26,659 [46] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:43:26,660 [46] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:43:26,661 [46] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:43:26,662 [46] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:43:26,663 [46] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:43:26,664 [46] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:43:26,665 [46] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:43:26,665 [46] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:43:26,666 [46] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:43:26,667 [46] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:43:26,667 [46] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:43:26,668 [46] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:43:26,669 [46] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:43:26,670 [46] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:43:26,671 [46] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:43:26,672 [46] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:43:26,672 [46] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:43:26,673 [46] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:43:26,673 [46] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:43:26,674 [46] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:43:26,675 [46] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:43:26,677 [46] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:43:26,678 [46] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-02-07 18:43:26,679 [46] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-02-07 18:43:26,680 [46] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-02-07 18:43:26,681 [46] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-02-07 18:43:26,681 [46] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-02-07 18:43:26,682 [46] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-02-07 18:43:26,683 [46] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-02-07 18:43:26,683 [46] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-02-07 18:43:26,684 [46] DEBUG dn_lib.tools.log - elenco cartelle da sincronizzare
2021-02-07 18:43:26,685 [46] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-02-07 18:43:26,686 [46] DEBUG dn_lib.tools.log -    - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-02-07 18:43:26,686 [46] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-02-07 18:43:26,687 [46] DEBUG dn_lib.tools.log - elaboro la cartella C:\root\todd\_test\dn...
2021-02-07 18:43:26,687 [46] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id is null and file_name = '20200101.pippo.wait.task.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, null, '20200101.pippo.wait.task.txt', '.txt', 1, convert(datetime, '2021-02-07 18:43:09', 120), convert(datetime, '2021-02-07 18:43:23', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-02-07 18:43:09', 120), dt_upd = convert(datetime, '2021-02-07 18:43:23', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-02-07 18:43:09', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-02-07 18:43:23', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-02-07 18:43:26,701 [46] DEBUG dn_lib.tools.log - aggiunto file al database: C:\root\todd\_test\dn\20200101.pippo.wait.task.txt
2021-02-07 18:43:26,706 [46] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4331;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4331, '.txt', @content, convert(datetime, '2021-02-07 18:43:09', 120), convert(datetime, '2021-02-07 18:43:23', 120));
2021-02-07 18:43:26,709 [46] DEBUG dn_lib.tools.log - salvato contenuto file nel database: C:\root\todd\_test\dn\20200101.pippo.wait.task.txt
2021-02-07 18:43:26,710 [46] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4331;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, null, 4331, left('pippo', 150)
            , NULL, convert(datetime, '2020-01-01 00:00:00', 120), convert(datetime, '2021-02-07 18:43:23', 120), 1
            , NULL, NULL, NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-01-01 00:00:00', 120), dt_upd = convert(datetime, '2021-02-07 18:43:23', 120)
         , title = left('pippo', 150), [user] = NULL
         , stato = NULL, priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-01-01 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-02-07 18:43:23', 120), getdate())
          or isnull(title, '') <> isnull('pippo', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull(NULL, '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-02-07 18:43:26,716 [46] DEBUG dn_lib.tools.log - inserito task nel database: C:\root\todd\_test\dn\pippo
2021-02-07 18:43:26,717 [46] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1456;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1456, 4331, @content
          , convert(datetime, '2021-02-07 18:43:09', 120), convert(datetime, '2021-02-07 18:43:23', 120));
2021-02-07 18:43:26,719 [46] DEBUG dn_lib.tools.log - salvate le note del task nel database: C:\root\todd\_test\dn\20200101.pippo.wait.task.txt
2021-02-07 18:43:26,720 [46] DEBUG dn_lib.tools.log - trasformazione task file in task folder: C:\root\todd\_test\dn\20200101.pippo.wait.task.txt
2021-02-07 18:43:26,721 [46] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = '20200101.pippo.wait.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, '20200101.pippo.wait.task', 1, convert(datetime, '2021-02-07 18:43:09', 120), convert(datetime, '2021-02-07 18:43:09', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-02-07 18:43:09', 120), dt_upd = convert(datetime, '2021-02-07 18:43:09', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-02-07 18:43:09', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-02-07 18:43:09', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-02-07 18:43:26,725 [46] DEBUG dn_lib.tools.log - creato folder: C:\root\todd\_test\dn\20200101.pippo.wait.task
2021-02-07 18:43:26,726 [46] DEBUG dn_lib.tools.log - SQL: update dn_files set synch_folder_id = 1, folder_id = 1835, file_name = 'i', dt_upd = getdate()
        where file_id = 4331;
      
2021-02-07 18:43:26,730 [46] DEBUG dn_lib.tools.log - SQL: update dn_tasks set dt_upd = convert(datetime, convert(varchar, getdate(), 120), 120), folder_id = 1835, file_id = null
        where task_id = 1456;
2021-02-07 18:43:26,734 [46] DEBUG dn_lib.tools.log - spostato file da: C:\root\todd\_test\dn\20200101.pippo.wait.task.txt, a:C:\root\todd\_test\dn\20200101.pippo.wait.task\i.txt
2021-02-07 18:43:26,735 [46] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1456;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1456, 4331, @content
          , convert(datetime, convert(varchar, getdate(), 120), 120), convert(datetime, convert(varchar, getdate(), 120), 120));
      update dn_tasks set dt_upd = convert(datetime, convert(varchar, getdate(), 120), 120) where task_id = 1456;
2021-02-07 18:43:26,739 [46] DEBUG dn_lib.tools.log - salvate le note del task: C:\root\todd\_test\dn\20200101.pippo.wait.task
2021-02-07 18:43:26,741 [46] DEBUG dn_lib.tools.log - rinominato folder: C:\root\todd\_test\dn\20200101.pippo.wait.task, in: C:\root\todd\_test\dn\pippo.task
2021-02-07 18:43:26,742 [46] DEBUG dn_lib.tools.log - SQL: update dn_folders set folder_name = 'pippo.task', dt_upd = convert(datetime, convert(varchar, getdate(), 120), 120)
        where folder_id = 1835
2021-02-07 18:43:26,748 [46] DEBUG dn_lib.tools.log - salvato index doc: C:\root\todd\_test\dn\pippo.task\__i.xml
2021-02-07 18:43:26,749 [46] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1835 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, 1835, null, left('pippo', 150)
            , NULL, convert(datetime, '2020-01-01 00:00:00', 120), convert(datetime, '2021-02-07 18:43:23', 120), 1
            , NULL, NULL, NULL, NULL, convert(datetime, '2021-02-07 18:43:26', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-01-01 00:00:00', 120), dt_upd = convert(datetime, '2021-02-07 18:43:23', 120)
         , title = left('pippo', 150), [user] = NULL
         , stato = NULL, priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = convert(datetime, '2021-02-07 18:43:26', 120)
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-01-01 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-02-07 18:43:23', 120), getdate())
          or isnull(title, '') <> isnull('pippo', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull(NULL, '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-02-07 18:43:26,754 [46] DEBUG dn_lib.tools.log - SQL: declare @cc_files int; declare @cc_folders int;
      select @cc_files = (select count(*) from dn_files where readed is null) 
      select @cc_folders = (select count(*) from dn_folders where readed is null)
      
      delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
      select @cc_files, @cc_folders;
2021-02-07 18:43:26,756 [46] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '1')
        else update users_cache set var_value = substring('1', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-02-07 18:43:26,759 [46] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '0')
        else update users_cache set var_value = substring('0', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-02-07 18:43:26,760 [46] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/02/07 18:43:23')
        else update users_cache set var_value = substring('2021/02/07 18:43:23', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-02-07 18:43:26,764 [46] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/02/07 18:43:26')
        else update users_cache set var_value = substring('2021/02/07 18:43:26', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-02-07 18:44:04,952 [21] INFO dn_lib.tools.log - reload core
2021-02-07 18:44:04,985 [21] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:44:04,987 [21] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:44:04,988 [21] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:44:04,989 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:44:04,990 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:44:04,992 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:44:05,003 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:44:05,004 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:44:05,006 [21] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:44:05,006 [21] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:44:05,007 [21] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:44:05,008 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:44:05,009 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:44:05,010 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:44:05,011 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:44:05,012 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:44:05,012 [21] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:44:05,013 [21] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:44:05,023 [21] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:44:05,025 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:44:05,026 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:44:05,027 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:44:05,028 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:44:05,029 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:44:05,030 [21] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:44:05,035 [21] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:44:05,045 [21] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:44:05,615 [47] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:44:05,617 [47] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:44:05,618 [47] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:44:05,619 [47] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:44:05,621 [47] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:44:05,622 [47] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:44:05,623 [47] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:44:05,624 [47] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:44:05,625 [47] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:44:05,625 [47] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:44:05,626 [47] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:44:05,627 [47] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:44:05,628 [47] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:44:05,628 [47] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:44:05,629 [47] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:44:05,630 [47] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:44:05,630 [47] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:44:05,631 [47] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:44:05,632 [47] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:44:05,632 [47] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:44:05,633 [47] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:44:05,634 [47] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:44:05,635 [47] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:44:05,635 [47] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:44:05,636 [47] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:44:05,637 [47] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:44:05,641 [47] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:44:05,679 [47] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-02-07 18:44:05,682 [47] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-02-07 18:44:05,685 [47] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-02-07 18:44:05,687 [47] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-02-07 18:44:05,691 [47] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-02-07 18:44:05,693 [47] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-02-07 18:44:05,695 [47] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-02-07 18:44:05,698 [47] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-02-07 18:44:05,704 [47] DEBUG dn_lib.tools.log - elenco cartelle da sincronizzare
2021-02-07 18:44:05,705 [47] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-02-07 18:44:05,706 [47] DEBUG dn_lib.tools.log -    - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-02-07 18:44:05,709 [47] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-02-07 18:44:05,721 [47] DEBUG dn_lib.tools.log - elaboro la cartella C:\root\todd\_test\dn...
2021-02-07 18:44:05,722 [47] DEBUG dn_lib.tools.log - SQL: declare @cc_files int; declare @cc_folders int;
      select @cc_files = (select count(*) from dn_files where readed is null) 
      select @cc_folders = (select count(*) from dn_folders where readed is null)
      
      delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
      select @cc_files, @cc_folders;
2021-02-07 18:44:05,732 [47] DEBUG dn_lib.tools.log - cancellati dal database: 1 files
2021-02-07 18:44:05,732 [47] DEBUG dn_lib.tools.log - cancellati dal database: 1 folders
2021-02-07 18:44:05,734 [47] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '0')
        else update users_cache set var_value = substring('0', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-02-07 18:44:05,738 [47] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '0')
        else update users_cache set var_value = substring('0', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-02-07 18:44:05,741 [47] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/01/05 15:40:09')
        else update users_cache set var_value = substring('2021/01/05 15:40:09', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-02-07 18:44:05,744 [47] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/02/07 18:44:05')
        else update users_cache set var_value = substring('2021/02/07 18:44:05', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-02-07 18:44:28,651 [16] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:44:28,652 [16] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:44:28,653 [16] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:44:28,654 [16] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:44:28,654 [16] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:44:28,655 [16] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:44:28,655 [16] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:44:28,656 [16] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:44:28,656 [16] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:44:28,657 [16] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:44:28,657 [16] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:44:28,658 [16] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:44:28,658 [16] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:44:28,659 [16] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:44:28,659 [16] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:44:28,660 [16] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:44:28,660 [16] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:44:28,661 [16] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:44:28,662 [16] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:44:28,663 [16] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:44:28,664 [16] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:44:28,664 [16] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:44:28,665 [16] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:44:28,665 [16] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:44:28,666 [16] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:44:28,667 [16] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:44:28,669 [16] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:44:29,215 [17] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:44:29,217 [17] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:44:29,219 [17] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:44:29,221 [17] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:44:29,222 [17] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:44:29,223 [17] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:44:29,224 [17] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:44:29,225 [17] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:44:29,226 [17] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:44:29,227 [17] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:44:29,228 [17] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:44:29,229 [17] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:44:29,230 [17] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:44:29,230 [17] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:44:29,231 [17] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:44:29,232 [17] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:44:29,233 [17] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:44:29,233 [17] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:44:29,234 [17] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:44:29,235 [17] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:44:29,236 [17] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:44:29,237 [17] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:44:29,238 [17] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:44:29,238 [17] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:44:29,239 [17] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:44:29,240 [17] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:44:29,243 [17] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:44:29,244 [17] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-02-07 18:44:29,245 [17] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-02-07 18:44:29,246 [17] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-02-07 18:44:29,246 [17] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-02-07 18:44:29,247 [17] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-02-07 18:44:29,248 [17] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-02-07 18:44:29,249 [17] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-02-07 18:44:29,250 [17] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-02-07 18:44:29,251 [17] DEBUG dn_lib.tools.log - elenco cartelle da sincronizzare
2021-02-07 18:44:29,252 [17] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-02-07 18:44:29,253 [17] DEBUG dn_lib.tools.log -    - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-02-07 18:44:29,254 [17] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-02-07 18:44:29,255 [17] DEBUG dn_lib.tools.log - elaboro la cartella C:\root\todd\_test\dn...
2021-02-07 18:44:29,257 [17] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id is null and file_name = '20200102.mimmo.wait.task.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, null, '20200102.mimmo.wait.task.txt', '.txt', 1, convert(datetime, '2021-02-07 18:44:10', 120), convert(datetime, '2021-02-07 18:44:24', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-02-07 18:44:10', 120), dt_upd = convert(datetime, '2021-02-07 18:44:24', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-02-07 18:44:10', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-02-07 18:44:24', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-02-07 18:44:29,271 [17] DEBUG dn_lib.tools.log - aggiunto file al database: C:\root\todd\_test\dn\20200102.mimmo.wait.task.txt
2021-02-07 18:44:29,277 [17] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4332;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4332, '.txt', @content, convert(datetime, '2021-02-07 18:44:10', 120), convert(datetime, '2021-02-07 18:44:24', 120));
2021-02-07 18:44:29,280 [17] DEBUG dn_lib.tools.log - salvato contenuto file nel database: C:\root\todd\_test\dn\20200102.mimmo.wait.task.txt
2021-02-07 18:44:29,286 [17] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4332;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, null, 4332, left('mimmo', 150)
            , NULL, convert(datetime, '2020-01-02 00:00:00', 120), convert(datetime, '2021-02-07 18:44:24', 120), 1
            , NULL, NULL, NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-01-02 00:00:00', 120), dt_upd = convert(datetime, '2021-02-07 18:44:24', 120)
         , title = left('mimmo', 150), [user] = NULL
         , stato = NULL, priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-01-02 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-02-07 18:44:24', 120), getdate())
          or isnull(title, '') <> isnull('mimmo', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull(NULL, '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-02-07 18:44:29,292 [17] DEBUG dn_lib.tools.log - inserito task nel database: C:\root\todd\_test\dn\mimmo
2021-02-07 18:44:29,293 [17] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1457;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1457, 4332, @content
          , convert(datetime, '2021-02-07 18:44:10', 120), convert(datetime, '2021-02-07 18:44:24', 120));
2021-02-07 18:44:29,298 [17] DEBUG dn_lib.tools.log - salvate le note del task nel database: C:\root\todd\_test\dn\20200102.mimmo.wait.task.txt
2021-02-07 18:44:29,299 [17] DEBUG dn_lib.tools.log - trasformazione task file in task folder: C:\root\todd\_test\dn\20200102.mimmo.wait.task.txt
2021-02-07 18:44:29,300 [17] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = '20200102.mimmo.wait.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, '20200102.mimmo.wait.task', 1, convert(datetime, '2021-02-07 18:44:10', 120), convert(datetime, '2021-02-07 18:44:10', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-02-07 18:44:10', 120), dt_upd = convert(datetime, '2021-02-07 18:44:10', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-02-07 18:44:10', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-02-07 18:44:10', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-02-07 18:44:29,305 [17] DEBUG dn_lib.tools.log - creato folder: C:\root\todd\_test\dn\20200102.mimmo.wait.task
2021-02-07 18:44:29,306 [17] DEBUG dn_lib.tools.log - SQL: update dn_files set synch_folder_id = 1, folder_id = 1836, file_name = 'i.txt', dt_upd = getdate()
        where file_id = 4332;
      
2021-02-07 18:44:29,310 [17] DEBUG dn_lib.tools.log - SQL: update dn_tasks set dt_upd = convert(datetime, convert(varchar, getdate(), 120), 120), folder_id = 1836, file_id = null
        where task_id = 1457;
2021-02-07 18:44:29,313 [17] DEBUG dn_lib.tools.log - spostato file da: C:\root\todd\_test\dn\20200102.mimmo.wait.task.txt, a:C:\root\todd\_test\dn\20200102.mimmo.wait.task\i.txt
2021-02-07 18:44:29,314 [17] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1457;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1457, 4332, @content
          , convert(datetime, convert(varchar, getdate(), 120), 120), convert(datetime, convert(varchar, getdate(), 120), 120));
      update dn_tasks set dt_upd = convert(datetime, convert(varchar, getdate(), 120), 120) where task_id = 1457;
2021-02-07 18:44:29,318 [17] DEBUG dn_lib.tools.log - salvate le note del task: C:\root\todd\_test\dn\20200102.mimmo.wait.task
2021-02-07 18:44:29,324 [17] DEBUG dn_lib.tools.log - rinominato folder: C:\root\todd\_test\dn\20200102.mimmo.wait.task, in: C:\root\todd\_test\dn\mimmo.task
2021-02-07 18:44:29,325 [17] DEBUG dn_lib.tools.log - SQL: update dn_folders set folder_name = 'mimmo.task', dt_upd = convert(datetime, convert(varchar, getdate(), 120), 120)
        where folder_id = 1836
2021-02-07 18:44:29,332 [17] DEBUG dn_lib.tools.log - salvato index doc: C:\root\todd\_test\dn\mimmo.task\__i.xml
2021-02-07 18:44:29,333 [17] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1836 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, 1836, null, left('mimmo', 150)
            , NULL, convert(datetime, '2020-01-02 00:00:00', 120), convert(datetime, '2021-02-07 18:44:24', 120), 1
            , NULL, NULL, NULL, NULL, convert(datetime, '2021-02-07 18:44:29', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-01-02 00:00:00', 120), dt_upd = convert(datetime, '2021-02-07 18:44:24', 120)
         , title = left('mimmo', 150), [user] = NULL
         , stato = NULL, priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = convert(datetime, '2021-02-07 18:44:29', 120)
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-01-02 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-02-07 18:44:24', 120), getdate())
          or isnull(title, '') <> isnull('mimmo', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull(NULL, '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-02-07 18:44:29,339 [17] DEBUG dn_lib.tools.log - SQL: declare @cc_files int; declare @cc_folders int;
      select @cc_files = (select count(*) from dn_files where readed is null) 
      select @cc_folders = (select count(*) from dn_folders where readed is null)
      
      delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
      select @cc_files, @cc_folders;
2021-02-07 18:44:29,340 [17] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '1')
        else update users_cache set var_value = substring('1', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-02-07 18:44:29,343 [17] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '0')
        else update users_cache set var_value = substring('0', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-02-07 18:44:29,344 [17] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/02/07 18:44:24')
        else update users_cache set var_value = substring('2021/02/07 18:44:24', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-02-07 18:44:29,348 [17] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/02/07 18:44:29')
        else update users_cache set var_value = substring('2021/02/07 18:44:29', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-02-07 18:44:52,214 [30] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:44:52,216 [30] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:44:52,217 [30] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:44:52,218 [30] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:44:52,219 [30] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:44:52,220 [30] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:44:52,221 [30] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:44:52,222 [30] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:44:52,222 [30] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:44:52,223 [30] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:44:52,224 [30] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:44:52,226 [30] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:44:52,227 [30] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:44:52,228 [30] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:44:52,228 [30] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:44:52,229 [30] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:44:52,229 [30] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:44:52,229 [30] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:44:52,230 [30] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:44:52,230 [30] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:44:52,231 [30] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:44:52,231 [30] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:44:52,232 [30] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:44:52,233 [30] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:44:52,233 [30] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:44:52,234 [30] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:44:52,236 [30] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:44:52,249 [48] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:44:52,250 [48] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:44:52,251 [48] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:44:52,252 [48] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:44:52,252 [48] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:44:52,253 [48] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:44:52,254 [48] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:44:52,255 [48] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:44:52,255 [48] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:44:52,256 [48] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:44:52,257 [48] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:44:52,257 [48] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:44:52,258 [48] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:44:52,259 [48] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:44:52,259 [48] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:44:52,260 [48] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:44:52,261 [48] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:44:52,261 [48] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:44:52,262 [48] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:44:52,262 [48] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:44:52,263 [48] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:44:52,263 [48] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:44:52,264 [48] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:44:52,265 [48] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:44:52,265 [48] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:44:52,266 [48] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:44:52,270 [48] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:44:52,283 [21] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:44:52,284 [21] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:44:52,285 [21] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:44:52,286 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:44:52,286 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:44:52,287 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:44:52,288 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:44:52,289 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:44:52,290 [21] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:44:52,290 [21] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:44:52,291 [21] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:44:52,292 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:44:52,293 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:44:52,293 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:44:52,294 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:44:52,294 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:44:52,295 [21] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:44:52,296 [21] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:44:52,296 [21] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:44:52,297 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:44:52,297 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:44:52,298 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:44:52,299 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:44:52,299 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:44:52,300 [21] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:44:52,301 [21] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:44:52,303 [21] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:44:52,305 [21] DEBUG dn_lib.tools.log - SQL: select task_filter_id, filter_title, filter_notes, filter_def, filter_class
 from dn_tasks_filters order by filter_order
2021-02-07 18:44:52,308 [21] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:44:52,310 [21] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:44:52,310 [21] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:44:52,312 [21] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:44:52,312 [21] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:44:52,312 [21] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:44:52,316 [21] DEBUG dn_lib.tools.log - SQL: select ft.tp, ft.synch_folder_id, ft.folder_id, ft.parent_id, ft.title
       , ft.des, ft.http_path, ft.lvl, dbo.folder_path(ft.folder_id) as folder_path
       , (select top 1 1 from dn_tasks where folder_id = ft.folder_id) as is_task
      from dbo.fnc_dn_folders(null, null) ft
      
      order by ft.synch_folder_id, ft.lvl, ft.title
2021-02-07 18:44:52,324 [21] DEBUG dn_lib.tools.log - SQL: select f.synch_folder_id, f.file_id, f.folder_id, f.file_name, f.dt_ins , null as found_file
       from dn_files f
       where exists (select top 1 1 from dbo.fnc_dn_folders(null, null) ft 
        
	      where ft.synch_folder_id = f.synch_folder_id 
          and isnull(ft.folder_id, 0) = isnull(f.folder_id, 0))
2021-02-07 18:44:52,333 [21] DEBUG dn_lib.tools.log - SQL: select t3.*
      , tst.stato, tst.[order] as stato_order, isnull(tst.class, 'light') as stato_class, isnull(tst.title_plurale, '') as stato_title_plurale, isnull(tst.title_singolare, '') as stato_title_singolare
      , tp.priorita, tp.[order] as priorita_order, isnull(tp.class, 'light') as priorita_class, isnull(tp.title_plurale, '') as priorita_title_plurale, isnull(tp.title_singolare, '') as priorita_title_singolare
      , tt.tipo, tt.[order] as tipo_order, isnull(tt.class, 'light') as tipo_class, isnull(tt.title_plurale, '') as tipo_title_plurale, isnull(tt.title_singolare, '') as tipo_title_singolare
      , ts.stima, ts.[days] as stima_days, isnull(ts.class, 'light') as stima_class, isnull(ts.title_plurale, '') as stima_title_plurale, isnull(ts.title_singolare, '') as stima_title_singolare
      , (select top 1 1 from dn_tasks_notes where task_id = t3.task_id) as task_notes
      , (select top 1 1 from vw_task_allegati f2 where f2.task_id = t3.task_id 
          and not exists (select top 1 1 from dn_files_info where file_name = f2.file_name)) as task_files
  from (select t2.*, datediff(day, t2.dt_ref, getdate()) as diff_days
    from (select t.task_id, t.synch_folder_id, isnull(t.folder_id, f.folder_id) as folder_id
	   , t.file_id, t.title, t.[user], t.stato, t.priorita, t.tipo, t.stima, t.dt_ins, t.dt_upd
     , (case when t.dt_ins > t.dt_upd then t.dt_ins else t.dt_upd end) as dt_ref
	  from dn_tasks t
    
	  left join dn_files f on f.file_id = t.file_id
    where (null is null or (null is not null and t.task_id = null)) ) t2
    where exists (select top 1 1 from dbo.fnc_dn_folders(null, null) ft 
	    where  ft.synch_folder_id = t2.synch_folder_id 
       and isnull(ft.folder_id, 0) = isnull(t2.folder_id, 0))) t3
   left join dn_task_stato tst on tst.stato = t3.stato
   left join dn_task_priorita tp on tp.priorita = t3.priorita
   left join dn_task_tipo tt on tt.tipo = t3.tipo
   left join dn_task_stima ts on ts.stima = t3.stima
   where 1 = 1  and t3.stato = 'in_corso' or t3.diff_days <= 14
2021-02-07 18:44:52,355 [21] DEBUG dn_lib.tools.log - SQL: select title_singolare, stato from dn_task_stato order by [order]
2021-02-07 18:44:52,366 [21] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, priorita as [value], [order] from dn_task_priorita
      ) t order by t.[order]
2021-02-07 18:44:52,373 [21] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [days]
       union select title_singolare as title, stima as [value], [days] from dn_task_stima 
       ) t order by t.[days]
2021-02-07 18:44:52,375 [21] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, tipo as [value], [order] from dn_task_tipo
       ) t order by t.[order]
2021-02-07 18:44:52,377 [21] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value]
       union select nome as title, nome as [value] from users
       ) t order by 2
2021-02-07 18:44:56,048 [18] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:44:56,049 [18] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:44:56,051 [18] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:44:56,052 [18] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:44:56,054 [18] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:44:56,055 [18] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:44:56,056 [18] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:44:56,057 [18] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:44:56,058 [18] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:44:56,059 [18] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:44:56,060 [18] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:44:56,061 [18] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:44:56,061 [18] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:44:56,062 [18] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:44:56,063 [18] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:44:56,064 [18] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:44:56,065 [18] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:44:56,066 [18] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:44:56,067 [18] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:44:56,067 [18] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:44:56,068 [18] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:44:56,068 [18] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:44:56,069 [18] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:44:56,070 [18] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:44:56,071 [18] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:44:56,072 [18] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:44:56,074 [18] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:44:56,076 [18] DEBUG dn_lib.tools.log - SQL: select content from dn_tasks_notes 
       where task_id = 1457
2021-02-07 18:44:56,078 [18] DEBUG dn_lib.tools.log - SQL: select a.file_id, a.file_name, a.extension, a.http_path , null as found_file       
       , (select top 1 1 from dn_tasks where task_id = a.task_id and file_id = a.file_id) as file_task
      from vw_task_allegati a
      where a.task_id = 1457
2021-02-07 18:45:42,444 [49] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:45:42,445 [49] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:45:42,447 [49] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:45:42,448 [49] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:45:42,448 [49] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:45:42,449 [49] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:45:42,450 [49] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:45:42,451 [49] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:45:42,452 [49] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:45:42,453 [49] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:45:42,454 [49] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:45:42,454 [49] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:45:42,455 [49] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:45:42,456 [49] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:45:42,456 [49] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:45:42,457 [49] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:45:42,457 [49] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:45:42,458 [49] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:45:42,459 [49] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:45:42,459 [49] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:45:42,460 [49] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:45:42,461 [49] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:45:42,461 [49] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:45:42,462 [49] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:45:42,463 [49] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:45:42,463 [49] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:45:42,467 [49] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:45:42,471 [21] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:45:42,472 [21] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:45:42,472 [21] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:45:42,473 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:45:42,473 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:45:42,474 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:45:42,475 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:45:42,475 [21] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:45:42,476 [21] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:45:42,477 [21] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:45:42,477 [21] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:45:42,478 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:45:42,479 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:45:42,479 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:45:42,480 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:45:42,481 [21] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:45:42,481 [21] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:45:42,482 [21] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:45:42,482 [21] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:45:42,483 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:45:42,484 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:45:42,485 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:45:42,486 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:45:42,486 [21] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:45:42,487 [21] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:45:42,487 [21] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:45:42,489 [21] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:45:42,493 [30] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:45:42,493 [30] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:45:42,494 [30] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:45:42,495 [30] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:45:42,495 [30] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:45:42,496 [30] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:45:42,497 [30] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:45:42,497 [30] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:45:42,498 [30] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:45:42,498 [30] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:45:42,499 [30] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:45:42,499 [30] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:45:42,500 [30] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:45:42,501 [30] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:45:42,502 [30] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:45:42,503 [30] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:45:42,503 [30] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:45:42,504 [30] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:45:42,504 [30] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:45:42,505 [30] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:45:42,506 [30] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:45:42,506 [30] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:45:42,507 [30] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:45:42,507 [30] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:45:42,508 [30] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:45:42,508 [30] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:45:42,511 [30] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:45:43,057 [8] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:45:43,059 [8] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:45:43,061 [8] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:45:43,063 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:45:43,064 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:45:43,066 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:45:43,067 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:45:43,068 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:45:43,069 [8] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:45:43,070 [8] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:45:43,071 [8] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:45:43,071 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:45:43,072 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:45:43,073 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:45:43,073 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:45:43,074 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:45:43,075 [8] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:45:43,076 [8] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:45:43,077 [8] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:45:43,077 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:45:43,078 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:45:43,079 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:45:43,080 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:45:43,080 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:45:43,081 [8] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:45:43,082 [8] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:45:43,086 [8] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:45:43,087 [8] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-02-07 18:45:43,089 [8] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-02-07 18:45:43,091 [8] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-02-07 18:45:43,092 [8] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-02-07 18:45:43,093 [8] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-02-07 18:45:43,095 [8] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-02-07 18:45:43,096 [8] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-02-07 18:45:43,097 [8] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-02-07 18:45:43,099 [8] DEBUG dn_lib.tools.log - elenco cartelle da sincronizzare
2021-02-07 18:45:43,100 [8] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-02-07 18:45:43,102 [8] DEBUG dn_lib.tools.log -    - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-02-07 18:45:43,102 [8] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-02-07 18:45:43,117 [8] DEBUG dn_lib.tools.log - elaboro la cartella C:\root\todd\_test\dn...
2021-02-07 18:45:43,117 [8] DEBUG dn_lib.tools.log - SQL: declare @cc_files int; declare @cc_folders int;
      select @cc_files = (select count(*) from dn_files where readed is null) 
      select @cc_folders = (select count(*) from dn_folders where readed is null)
      
      delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
      select @cc_files, @cc_folders;
2021-02-07 18:45:43,125 [8] DEBUG dn_lib.tools.log - cancellati dal database: 1 files
2021-02-07 18:45:43,126 [8] DEBUG dn_lib.tools.log - cancellati dal database: 1 folders
2021-02-07 18:45:43,127 [8] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '0')
        else update users_cache set var_value = substring('0', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-02-07 18:45:43,131 [8] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '0')
        else update users_cache set var_value = substring('0', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-02-07 18:45:43,134 [8] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/01/05 15:40:09')
        else update users_cache set var_value = substring('2021/01/05 15:40:09', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-02-07 18:45:43,139 [8] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/02/07 18:45:43')
        else update users_cache set var_value = substring('2021/02/07 18:45:43', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-02-07 18:48:42,176 [47] INFO dn_lib.tools.log - reload core
2021-02-07 18:48:42,218 [47] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:48:42,220 [47] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:48:42,221 [47] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:48:42,222 [47] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:48:42,224 [47] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:48:42,225 [47] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:48:42,226 [47] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:48:42,227 [47] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:48:42,229 [47] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:48:42,230 [47] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:48:42,232 [47] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:48:42,232 [47] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:48:42,233 [47] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:48:42,235 [47] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:48:42,236 [47] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:48:42,238 [47] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:48:42,240 [47] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:48:42,249 [47] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:48:42,258 [47] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:48:42,504 [47] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:48:42,506 [47] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:48:42,506 [47] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:48:42,507 [47] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:48:42,508 [47] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:48:42,508 [47] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:48:42,510 [47] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:48:42,527 [47] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:48:42,569 [10] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:48:42,570 [10] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:48:42,572 [10] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:48:42,573 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:48:42,573 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:48:42,574 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:48:42,575 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:48:42,576 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:48:42,577 [10] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:48:42,578 [10] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:48:42,578 [10] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:48:42,579 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:48:42,580 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:48:42,580 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:48:42,581 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:48:42,581 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:48:42,582 [10] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:48:42,582 [10] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:48:42,583 [10] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:48:42,584 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:48:42,585 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:48:42,585 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:48:42,586 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:48:42,587 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:48:42,587 [10] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:48:42,588 [10] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:48:42,592 [10] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:48:42,664 [47] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:48:42,665 [47] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:48:42,666 [47] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:48:42,668 [47] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:48:42,669 [47] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:48:42,670 [47] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:48:42,672 [47] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:48:42,673 [47] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:48:42,674 [47] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:48:42,675 [47] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:48:42,675 [47] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:48:42,676 [47] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:48:42,677 [47] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:48:42,678 [47] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:48:42,679 [47] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:48:42,679 [47] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:48:42,680 [47] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:48:42,681 [47] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:48:42,681 [47] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:48:42,682 [47] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:48:42,682 [47] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:48:42,683 [47] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:48:42,684 [47] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:48:42,684 [47] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:48:42,685 [47] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:48:42,690 [47] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:48:42,696 [47] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:48:42,712 [47] DEBUG dn_lib.tools.log - SQL: select task_filter_id, filter_title, filter_notes, filter_def, filter_class
 from dn_tasks_filters order by filter_order
2021-02-07 18:48:42,716 [47] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:48:42,719 [47] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:48:42,719 [47] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:48:42,721 [47] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:48:42,723 [47] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:48:42,724 [47] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:48:42,728 [47] DEBUG dn_lib.tools.log - SQL: select ft.tp, ft.synch_folder_id, ft.folder_id, ft.parent_id, ft.title
       , ft.des, ft.http_path, ft.lvl, dbo.folder_path(ft.folder_id) as folder_path
       , (select top 1 1 from dn_tasks where folder_id = ft.folder_id) as is_task
      from dbo.fnc_dn_folders(null, null) ft
      
      order by ft.synch_folder_id, ft.lvl, ft.title
2021-02-07 18:48:42,741 [47] DEBUG dn_lib.tools.log - SQL: select f.synch_folder_id, f.file_id, f.folder_id, f.file_name, f.dt_ins , null as found_file
       from dn_files f
       where exists (select top 1 1 from dbo.fnc_dn_folders(null, null) ft 
        
	      where ft.synch_folder_id = f.synch_folder_id 
          and isnull(ft.folder_id, 0) = isnull(f.folder_id, 0))
2021-02-07 18:48:42,750 [47] DEBUG dn_lib.tools.log - SQL: select t3.*
      , tst.stato, tst.[order] as stato_order, isnull(tst.class, 'light') as stato_class, isnull(tst.title_plurale, '') as stato_title_plurale, isnull(tst.title_singolare, '') as stato_title_singolare
      , tp.priorita, tp.[order] as priorita_order, isnull(tp.class, 'light') as priorita_class, isnull(tp.title_plurale, '') as priorita_title_plurale, isnull(tp.title_singolare, '') as priorita_title_singolare
      , tt.tipo, tt.[order] as tipo_order, isnull(tt.class, 'light') as tipo_class, isnull(tt.title_plurale, '') as tipo_title_plurale, isnull(tt.title_singolare, '') as tipo_title_singolare
      , ts.stima, ts.[days] as stima_days, isnull(ts.class, 'light') as stima_class, isnull(ts.title_plurale, '') as stima_title_plurale, isnull(ts.title_singolare, '') as stima_title_singolare
      , (select top 1 1 from dn_tasks_notes where task_id = t3.task_id) as task_notes
      , (select top 1 1 from vw_task_allegati f2 where f2.task_id = t3.task_id 
          and not exists (select top 1 1 from dn_files_info where file_name = f2.file_name)) as task_files
  from (select t2.*, datediff(day, t2.dt_ref, getdate()) as diff_days
    from (select t.task_id, t.synch_folder_id, isnull(t.folder_id, f.folder_id) as folder_id
	   , t.file_id, t.title, t.[user], t.stato, t.priorita, t.tipo, t.stima, t.dt_ins, t.dt_upd
     , (case when t.dt_ins > t.dt_upd then t.dt_ins else t.dt_upd end) as dt_ref
	  from dn_tasks t
    
	  left join dn_files f on f.file_id = t.file_id
    where (null is null or (null is not null and t.task_id = null)) ) t2
    where exists (select top 1 1 from dbo.fnc_dn_folders(null, null) ft 
	    where  ft.synch_folder_id = t2.synch_folder_id 
       and isnull(ft.folder_id, 0) = isnull(t2.folder_id, 0))) t3
   left join dn_task_stato tst on tst.stato = t3.stato
   left join dn_task_priorita tp on tp.priorita = t3.priorita
   left join dn_task_tipo tt on tt.tipo = t3.tipo
   left join dn_task_stima ts on ts.stima = t3.stima
   where 1 = 1  and t3.stato = 'in_corso' or t3.diff_days <= 14
2021-02-07 18:48:42,777 [47] DEBUG dn_lib.tools.log - SQL: select title_singolare, stato from dn_task_stato order by [order]
2021-02-07 18:48:42,784 [47] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, priorita as [value], [order] from dn_task_priorita
      ) t order by t.[order]
2021-02-07 18:48:42,890 [47] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [days]
       union select title_singolare as title, stima as [value], [days] from dn_task_stima 
       ) t order by t.[days]
2021-02-07 18:48:42,893 [47] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, tipo as [value], [order] from dn_task_tipo
       ) t order by t.[order]
2021-02-07 18:48:42,895 [47] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value]
       union select nome as title, nome as [value] from users
       ) t order by 2
2021-02-07 18:48:50,202 [47] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:48:50,204 [47] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:48:50,204 [47] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:48:50,205 [47] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:48:50,206 [47] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:48:50,206 [47] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:48:50,207 [47] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:48:50,208 [47] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:48:50,208 [47] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:48:50,209 [47] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:48:50,209 [47] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:48:50,210 [47] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:48:50,210 [47] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:48:50,211 [47] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:48:50,211 [47] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:48:50,212 [47] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:48:50,212 [47] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:48:50,213 [47] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:48:50,213 [47] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:48:50,214 [47] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:48:50,214 [47] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:48:50,215 [47] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:48:50,216 [47] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:48:50,216 [47] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:48:50,217 [47] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:48:50,217 [47] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:48:50,222 [47] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:48:50,241 [10] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:48:50,242 [10] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:48:50,243 [10] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:48:50,243 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:48:50,244 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:48:50,244 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:48:50,245 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:48:50,246 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:48:50,246 [10] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:48:50,247 [10] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:48:50,248 [10] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:48:50,248 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:48:50,249 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:48:50,249 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:48:50,250 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:48:50,251 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:48:50,252 [10] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:48:50,252 [10] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:48:50,254 [10] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:48:50,254 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:48:50,255 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:48:50,256 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:48:50,257 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:48:50,258 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:48:50,258 [10] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:48:50,259 [10] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:48:50,263 [10] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:48:50,295 [47] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:48:50,296 [47] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:48:50,296 [47] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:48:50,297 [47] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:48:50,298 [47] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:48:50,298 [47] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:48:50,299 [47] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:48:50,300 [47] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:48:50,300 [47] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:48:50,301 [47] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:48:50,301 [47] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:48:50,302 [47] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:48:50,302 [47] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:48:50,303 [47] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:48:50,304 [47] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:48:50,304 [47] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:48:50,305 [47] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:48:50,305 [47] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:48:50,306 [47] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:48:50,306 [47] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:48:50,307 [47] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:48:50,307 [47] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:48:50,308 [47] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:48:50,308 [47] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:48:50,309 [47] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:48:50,309 [47] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:48:50,311 [47] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:48:50,861 [14] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:48:50,862 [14] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:48:50,863 [14] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:48:50,864 [14] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:48:50,864 [14] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:48:50,866 [14] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:48:50,866 [14] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:48:50,867 [14] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:48:50,868 [14] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:48:50,869 [14] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:48:50,870 [14] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:48:50,871 [14] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:48:50,872 [14] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:48:50,873 [14] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:48:50,873 [14] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:48:50,874 [14] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:48:50,875 [14] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:48:50,876 [14] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:48:50,876 [14] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:48:50,877 [14] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:48:50,878 [14] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:48:50,879 [14] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:48:50,880 [14] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:48:50,881 [14] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:48:50,882 [14] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:48:50,883 [14] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:48:50,887 [14] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:48:50,926 [14] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-02-07 18:48:50,928 [14] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-02-07 18:48:50,931 [14] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-02-07 18:48:50,934 [14] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-02-07 18:48:50,936 [14] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-02-07 18:48:50,938 [14] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-02-07 18:48:50,940 [14] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-02-07 18:48:50,942 [14] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-02-07 18:48:50,948 [14] DEBUG dn_lib.tools.log - elenco cartelle da sincronizzare
2021-02-07 18:48:50,949 [14] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-02-07 18:48:50,951 [14] DEBUG dn_lib.tools.log -    - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-02-07 18:48:50,953 [14] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-02-07 18:48:50,956 [14] DEBUG dn_lib.tools.log - elaboro la cartella C:\root\todd\_test\dn...
2021-02-07 18:48:50,958 [14] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id is null and file_name = '20200101.jolllo.incorso.task.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, null, '20200101.jolllo.incorso.task.txt', '.txt', 1, convert(datetime, '2021-02-07 18:48:04', 120), convert(datetime, '2021-02-07 18:48:28', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-02-07 18:48:04', 120), dt_upd = convert(datetime, '2021-02-07 18:48:28', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-02-07 18:48:04', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-02-07 18:48:28', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-02-07 18:48:50,964 [14] DEBUG dn_lib.tools.log - aggiunto file al database: C:\root\todd\_test\dn\20200101.jolllo.incorso.task.txt
2021-02-07 18:48:50,970 [14] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4333;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4333, '.txt', @content, convert(datetime, '2021-02-07 18:48:04', 120), convert(datetime, '2021-02-07 18:48:28', 120));
2021-02-07 18:48:50,973 [14] DEBUG dn_lib.tools.log - salvato contenuto file nel database: C:\root\todd\_test\dn\20200101.jolllo.incorso.task.txt
2021-02-07 18:48:51,027 [14] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4333;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, null, 4333, left('jolllo', 150)
            , NULL, convert(datetime, '2020-01-01 00:00:00', 120), convert(datetime, '2021-02-07 18:48:28', 120), 1
            , 'in_corso', NULL, NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-01-01 00:00:00', 120), dt_upd = convert(datetime, '2021-02-07 18:48:28', 120)
         , title = left('jolllo', 150), [user] = NULL
         , stato = 'in_corso', priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-01-01 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-02-07 18:48:28', 120), getdate())
          or isnull(title, '') <> isnull('jolllo', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('in_corso', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-02-07 18:48:51,034 [14] DEBUG dn_lib.tools.log - inserito task nel database: C:\root\todd\_test\dn\jolllo
2021-02-07 18:48:51,037 [14] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1458;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1458, 4333, @content
          , convert(datetime, '2021-02-07 18:48:04', 120), convert(datetime, '2021-02-07 18:48:28', 120));
2021-02-07 18:48:51,040 [14] DEBUG dn_lib.tools.log - salvate le note del task nel database: C:\root\todd\_test\dn\20200101.jolllo.incorso.task.txt
2021-02-07 18:48:51,041 [14] DEBUG dn_lib.tools.log - trasformazione task file in task folder: C:\root\todd\_test\dn\20200101.jolllo.incorso.task.txt
2021-02-07 18:48:51,043 [14] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = '20200101.jolllo.incorso.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, '20200101.jolllo.incorso.task', 1, convert(datetime, '2021-02-07 18:48:04', 120), convert(datetime, '2021-02-07 18:48:04', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-02-07 18:48:04', 120), dt_upd = convert(datetime, '2021-02-07 18:48:04', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-02-07 18:48:04', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-02-07 18:48:04', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-02-07 18:48:51,047 [14] DEBUG dn_lib.tools.log - creato folder: C:\root\todd\_test\dn\20200101.jolllo.incorso.task
2021-02-07 18:48:51,049 [14] DEBUG dn_lib.tools.log - SQL: update dn_files set synch_folder_id = 1, folder_id = 1837, file_name = 'i.txt', dt_upd = getdate()
        where file_id = 4333;
      
2021-02-07 18:48:51,052 [14] DEBUG dn_lib.tools.log - SQL: update dn_tasks set dt_upd = convert(datetime, convert(varchar, getdate(), 120), 120), folder_id = 1837, file_id = null
        where task_id = 1458;
2021-02-07 18:48:51,056 [14] DEBUG dn_lib.tools.log - spostato file da: C:\root\todd\_test\dn\20200101.jolllo.incorso.task.txt, a:C:\root\todd\_test\dn\20200101.jolllo.incorso.task\i.txt
2021-02-07 18:48:51,057 [14] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1458;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1458, 4333, @content
          , convert(datetime, convert(varchar, getdate(), 120), 120), convert(datetime, convert(varchar, getdate(), 120), 120));
      update dn_tasks set dt_upd = convert(datetime, convert(varchar, getdate(), 120), 120) where task_id = 1458;
2021-02-07 18:48:51,061 [14] DEBUG dn_lib.tools.log - salvate le note del task: C:\root\todd\_test\dn\20200101.jolllo.incorso.task
2021-02-07 18:52:01,163 [14] DEBUG dn_lib.tools.log - rinominato folder: C:\root\todd\_test\dn\20200101.jolllo.incorso.task, in: C:\root\todd\_test\dn\jolllo.task
2021-02-07 18:52:01,163 [14] DEBUG dn_lib.tools.log - SQL: update dn_folders set folder_name = 'jolllo.task', dt_upd = convert(datetime, convert(varchar, getdate(), 120), 120)
        where folder_id = 1837
2021-02-07 18:52:01,189 [14] DEBUG dn_lib.tools.log - salvato index doc: C:\root\todd\_test\dn\jolllo.task\__i.xml
2021-02-07 18:52:01,191 [14] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1837 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, 1837, null, left('jolllo', 150)
            , NULL, convert(datetime, '2020-01-01 00:00:00', 120), convert(datetime, '2021-02-07 18:48:28', 120), 1
            , 'in_corso', NULL, NULL, NULL, convert(datetime, '2021-02-07 18:52:01', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-01-01 00:00:00', 120), dt_upd = convert(datetime, '2021-02-07 18:48:28', 120)
         , title = left('jolllo', 150), [user] = NULL
         , stato = 'in_corso', priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = convert(datetime, '2021-02-07 18:52:01', 120)
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-01-01 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-02-07 18:48:28', 120), getdate())
          or isnull(title, '') <> isnull('jolllo', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('in_corso', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-02-07 18:52:01,191 [14] DEBUG dn_lib.tools.log - SQL: declare @cc_files int; declare @cc_folders int;
      select @cc_files = (select count(*) from dn_files where readed is null) 
      select @cc_folders = (select count(*) from dn_folders where readed is null)
      
      delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
      select @cc_files, @cc_folders;
2021-02-07 18:52:01,209 [14] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '1')
        else update users_cache set var_value = substring('1', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-02-07 18:52:01,215 [14] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '0')
        else update users_cache set var_value = substring('0', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-02-07 18:52:01,217 [14] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/02/07 18:48:28')
        else update users_cache set var_value = substring('2021/02/07 18:48:28', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-02-07 18:52:01,221 [14] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/02/07 18:52:01')
        else update users_cache set var_value = substring('2021/02/07 18:52:01', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-02-07 18:53:04,060 [52] INFO dn_lib.tools.log - reload core
2021-02-07 18:53:04,098 [52] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:53:04,100 [52] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:53:04,101 [52] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:53:04,102 [52] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:53:04,103 [52] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:53:04,104 [52] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:53:04,115 [52] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:53:04,117 [52] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:53:04,118 [52] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:53:04,119 [52] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:53:04,120 [52] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:53:04,121 [52] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:53:04,122 [52] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:53:04,123 [52] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:53:04,124 [52] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:53:04,125 [52] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:53:04,126 [52] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:53:04,127 [52] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:53:04,141 [52] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:53:04,143 [52] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:53:04,144 [52] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:53:04,144 [52] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:53:04,147 [52] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:53:04,148 [52] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:53:04,149 [52] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:53:04,150 [52] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:53:04,164 [52] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:53:04,200 [39] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:53:04,201 [39] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:53:04,202 [39] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:53:04,202 [39] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:53:04,203 [39] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:53:04,204 [39] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:53:04,205 [39] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:53:04,206 [39] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:53:04,207 [39] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:53:04,208 [39] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:53:04,208 [39] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:53:04,209 [39] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:53:04,210 [39] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:53:04,210 [39] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:53:04,211 [39] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:53:04,212 [39] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:53:04,213 [39] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:53:04,214 [39] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:53:04,215 [39] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:53:04,216 [39] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:53:04,217 [39] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:53:04,217 [39] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:53:04,218 [39] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:53:04,219 [39] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:53:04,220 [39] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:53:04,220 [39] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:53:04,225 [39] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:53:04,282 [32] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:53:04,283 [32] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:53:04,284 [32] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:53:04,285 [32] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:53:04,285 [32] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:53:04,286 [32] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:53:04,287 [32] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:53:04,287 [32] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:53:04,288 [32] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:53:04,288 [32] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:53:04,289 [32] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:53:04,289 [32] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:53:04,290 [32] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:53:04,291 [32] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:53:04,291 [32] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:53:04,292 [32] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:53:04,292 [32] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:53:04,293 [32] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:53:04,293 [32] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:53:04,294 [32] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:53:04,294 [32] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:53:04,295 [32] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:53:04,296 [32] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:53:04,297 [32] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:53:04,297 [32] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:53:04,301 [32] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:53:04,306 [32] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:53:04,318 [32] DEBUG dn_lib.tools.log - SQL: select task_filter_id, filter_title, filter_notes, filter_def, filter_class
 from dn_tasks_filters order by filter_order
2021-02-07 18:53:04,322 [32] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:53:04,325 [32] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:53:04,326 [32] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:53:04,327 [32] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:53:04,328 [32] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:53:04,329 [32] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:53:04,334 [32] DEBUG dn_lib.tools.log - SQL: select ft.tp, ft.synch_folder_id, ft.folder_id, ft.parent_id, ft.title
       , ft.des, ft.http_path, ft.lvl, dbo.folder_path(ft.folder_id) as folder_path
       , (select top 1 1 from dn_tasks where folder_id = ft.folder_id) as is_task
      from dbo.fnc_dn_folders(null, null) ft
      
      order by ft.synch_folder_id, ft.lvl, ft.title
2021-02-07 18:53:04,343 [32] DEBUG dn_lib.tools.log - SQL: select f.synch_folder_id, f.file_id, f.folder_id, f.file_name, f.dt_ins , null as found_file
       from dn_files f
       where exists (select top 1 1 from dbo.fnc_dn_folders(null, null) ft 
        
	      where ft.synch_folder_id = f.synch_folder_id 
          and isnull(ft.folder_id, 0) = isnull(f.folder_id, 0))
2021-02-07 18:53:04,352 [32] DEBUG dn_lib.tools.log - SQL: select t3.*
      , tst.stato, tst.[order] as stato_order, isnull(tst.class, 'light') as stato_class, isnull(tst.title_plurale, '') as stato_title_plurale, isnull(tst.title_singolare, '') as stato_title_singolare
      , tp.priorita, tp.[order] as priorita_order, isnull(tp.class, 'light') as priorita_class, isnull(tp.title_plurale, '') as priorita_title_plurale, isnull(tp.title_singolare, '') as priorita_title_singolare
      , tt.tipo, tt.[order] as tipo_order, isnull(tt.class, 'light') as tipo_class, isnull(tt.title_plurale, '') as tipo_title_plurale, isnull(tt.title_singolare, '') as tipo_title_singolare
      , ts.stima, ts.[days] as stima_days, isnull(ts.class, 'light') as stima_class, isnull(ts.title_plurale, '') as stima_title_plurale, isnull(ts.title_singolare, '') as stima_title_singolare
      , (select top 1 1 from dn_tasks_notes where task_id = t3.task_id) as task_notes
      , (select top 1 1 from vw_task_allegati f2 where f2.task_id = t3.task_id 
          and not exists (select top 1 1 from dn_files_info where file_name = f2.file_name)) as task_files
  from (select t2.*, datediff(day, t2.dt_ref, getdate()) as diff_days
    from (select t.task_id, t.synch_folder_id, isnull(t.folder_id, f.folder_id) as folder_id
	   , t.file_id, t.title, t.[user], t.stato, t.priorita, t.tipo, t.stima, t.dt_ins, t.dt_upd
     , (case when t.dt_ins > t.dt_upd then t.dt_ins else t.dt_upd end) as dt_ref
	  from dn_tasks t
    
	  left join dn_files f on f.file_id = t.file_id
    where (null is null or (null is not null and t.task_id = null)) ) t2
    where exists (select top 1 1 from dbo.fnc_dn_folders(null, null) ft 
	    where  ft.synch_folder_id = t2.synch_folder_id 
       and isnull(ft.folder_id, 0) = isnull(t2.folder_id, 0))) t3
   left join dn_task_stato tst on tst.stato = t3.stato
   left join dn_task_priorita tp on tp.priorita = t3.priorita
   left join dn_task_tipo tt on tt.tipo = t3.tipo
   left join dn_task_stima ts on ts.stima = t3.stima
   where 1 = 1  and t3.stato = 'in_corso' or t3.diff_days <= 14
2021-02-07 18:53:04,382 [32] DEBUG dn_lib.tools.log - SQL: select title_singolare, stato from dn_task_stato order by [order]
2021-02-07 18:53:04,396 [32] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, priorita as [value], [order] from dn_task_priorita
      ) t order by t.[order]
2021-02-07 18:53:04,482 [32] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [days]
       union select title_singolare as title, stima as [value], [days] from dn_task_stima 
       ) t order by t.[days]
2021-02-07 18:53:04,484 [32] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, tipo as [value], [order] from dn_task_tipo
       ) t order by t.[order]
2021-02-07 18:53:04,487 [32] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value]
       union select nome as title, nome as [value] from users
       ) t order by 2
2021-02-07 18:53:09,148 [52] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:53:09,150 [52] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:53:09,151 [52] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:53:09,151 [52] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:53:09,152 [52] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:53:09,153 [52] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:53:09,154 [52] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:53:09,155 [52] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:53:09,155 [52] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:53:09,155 [52] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:53:09,156 [52] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:53:09,157 [52] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:53:09,157 [52] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:53:09,157 [52] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:53:09,158 [52] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:53:09,158 [52] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:53:09,159 [52] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:53:09,159 [52] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:53:09,160 [52] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:53:09,161 [52] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:53:09,161 [52] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:53:09,162 [52] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:53:09,163 [52] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:53:09,164 [52] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:53:09,164 [52] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:53:09,165 [52] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:53:09,167 [52] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:53:09,186 [32] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:53:09,187 [32] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:53:09,188 [32] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:53:09,188 [32] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:53:09,189 [32] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:53:09,190 [32] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:53:09,191 [32] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:53:09,191 [32] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:53:09,192 [32] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:53:09,192 [32] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:53:09,193 [32] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:53:09,193 [32] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:53:09,194 [32] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:53:09,195 [32] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:53:09,195 [32] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:53:09,195 [32] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:53:09,196 [32] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:53:09,196 [32] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:53:09,197 [32] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:53:09,197 [32] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:53:09,198 [32] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:53:09,198 [32] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:53:09,199 [32] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:53:09,199 [32] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:53:09,200 [32] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:53:09,201 [32] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:53:09,204 [32] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:53:09,234 [39] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:53:09,235 [39] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:53:09,236 [39] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:53:09,237 [39] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:53:09,238 [39] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:53:09,238 [39] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:53:09,239 [39] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:53:09,240 [39] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:53:09,240 [39] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:53:09,241 [39] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:53:09,241 [39] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:53:09,242 [39] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:53:09,242 [39] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:53:09,243 [39] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:53:09,243 [39] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:53:09,244 [39] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:53:09,244 [39] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:53:09,245 [39] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:53:09,246 [39] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:53:09,246 [39] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:53:09,247 [39] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:53:09,247 [39] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:53:09,248 [39] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:53:09,248 [39] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:53:09,249 [39] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:53:09,250 [39] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:53:09,252 [39] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:53:09,811 [35] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:53:09,811 [35] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:53:09,811 [35] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:53:09,811 [35] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:53:09,811 [35] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:53:09,811 [35] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:53:09,821 [35] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:53:09,821 [35] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:53:09,821 [35] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:53:09,821 [35] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:53:09,821 [35] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:53:09,821 [35] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:53:09,821 [35] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:53:09,821 [35] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:53:09,821 [35] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:53:09,821 [35] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:53:09,821 [35] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:53:09,821 [35] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:53:09,830 [35] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:53:09,830 [35] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:53:09,830 [35] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:53:09,830 [35] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:53:09,830 [35] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:53:09,830 [35] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:53:09,830 [35] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:53:09,830 [35] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:53:09,830 [35] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:53:09,870 [35] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-02-07 18:53:09,881 [35] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-02-07 18:53:09,881 [35] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-02-07 18:53:09,881 [35] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-02-07 18:53:09,881 [35] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-02-07 18:53:09,881 [35] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-02-07 18:53:09,890 [35] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-02-07 18:53:09,893 [35] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-02-07 18:53:09,893 [35] DEBUG dn_lib.tools.log - elenco cartelle da sincronizzare
2021-02-07 18:53:09,893 [35] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-02-07 18:53:09,900 [35] DEBUG dn_lib.tools.log -    - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-02-07 18:53:09,900 [35] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-02-07 18:53:09,900 [35] DEBUG dn_lib.tools.log - elaboro la cartella C:\root\todd\_test\dn...
2021-02-07 18:53:09,900 [35] DEBUG dn_lib.tools.log - SQL: declare @cc_files int; declare @cc_folders int;
      select @cc_files = (select count(*) from dn_files where readed is null) 
      select @cc_folders = (select count(*) from dn_folders where readed is null)
      
      delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
      select @cc_files, @cc_folders;
2021-02-07 18:53:09,910 [35] DEBUG dn_lib.tools.log - cancellati dal database: 1 files
2021-02-07 18:53:09,910 [35] DEBUG dn_lib.tools.log - cancellati dal database: 1 folders
2021-02-07 18:53:09,910 [35] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '0')
        else update users_cache set var_value = substring('0', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-02-07 18:53:09,920 [35] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '0')
        else update users_cache set var_value = substring('0', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-02-07 18:53:09,920 [35] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/01/05 15:40:09')
        else update users_cache set var_value = substring('2021/01/05 15:40:09', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-02-07 18:53:09,930 [35] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/02/07 18:53:09')
        else update users_cache set var_value = substring('2021/02/07 18:53:09', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-02-07 18:53:46,051 [52] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:53:46,052 [52] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:53:46,052 [52] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:53:46,053 [52] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:53:46,054 [52] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:53:46,055 [52] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:53:46,056 [52] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:53:46,057 [52] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:53:46,059 [52] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:53:46,059 [52] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:53:46,059 [52] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:53:46,060 [52] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:53:46,060 [52] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:53:46,061 [52] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:53:46,062 [52] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:53:46,062 [52] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:53:46,063 [52] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:53:46,064 [52] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:53:46,064 [52] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:53:46,065 [52] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:53:46,067 [52] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:53:46,067 [52] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:53:46,068 [52] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:53:46,068 [52] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:53:46,069 [52] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:53:46,070 [52] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:53:46,074 [52] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:53:46,092 [32] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:53:46,093 [32] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:53:46,094 [32] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:53:46,094 [32] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:53:46,095 [32] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:53:46,095 [32] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:53:46,096 [32] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:53:46,097 [32] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:53:46,098 [32] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:53:46,098 [32] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:53:46,099 [32] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:53:46,099 [32] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:53:46,099 [32] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:53:46,100 [32] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:53:46,100 [32] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:53:46,101 [32] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:53:46,102 [32] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:53:46,102 [32] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:53:46,103 [32] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:53:46,103 [32] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:53:46,104 [32] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:53:46,105 [32] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:53:46,106 [32] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:53:46,107 [32] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:53:46,107 [32] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:53:46,108 [32] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:53:46,110 [32] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:53:46,138 [39] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:53:46,139 [39] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:53:46,140 [39] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:53:46,141 [39] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:53:46,142 [39] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:53:46,143 [39] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:53:46,144 [39] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:53:46,145 [39] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:53:46,146 [39] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:53:46,147 [39] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:53:46,148 [39] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:53:46,149 [39] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:53:46,150 [39] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:53:46,151 [39] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:53:46,151 [39] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:53:46,152 [39] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:53:46,153 [39] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:53:46,154 [39] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:53:46,155 [39] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:53:46,156 [39] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:53:46,157 [39] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:53:46,157 [39] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:53:46,158 [39] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:53:46,159 [39] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:53:46,160 [39] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:53:46,161 [39] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:53:46,165 [39] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:53:46,731 [62] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:53:46,731 [62] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:53:46,741 [62] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:53:46,741 [62] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:53:46,741 [62] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:53:46,741 [62] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:53:46,741 [62] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:53:46,741 [62] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:53:46,741 [62] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:53:46,741 [62] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:53:46,741 [62] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:53:46,741 [62] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:53:46,751 [62] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:53:46,751 [62] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:53:46,752 [62] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:53:46,752 [62] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:53:46,752 [62] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:53:46,752 [62] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:53:46,752 [62] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:53:46,752 [62] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:53:46,752 [62] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:53:46,752 [62] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:53:46,752 [62] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:53:46,752 [62] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:53:46,760 [62] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:53:46,760 [62] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:53:46,760 [62] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:53:46,760 [62] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-02-07 18:53:46,760 [62] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-02-07 18:53:46,770 [62] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-02-07 18:53:46,770 [62] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-02-07 18:53:46,776 [62] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-02-07 18:53:46,776 [62] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-02-07 18:53:46,776 [62] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-02-07 18:53:46,781 [62] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-02-07 18:53:46,781 [62] DEBUG dn_lib.tools.log - elenco cartelle da sincronizzare
2021-02-07 18:53:46,781 [62] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-02-07 18:53:46,781 [62] DEBUG dn_lib.tools.log -    - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-02-07 18:53:46,781 [62] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-02-07 18:53:46,790 [62] DEBUG dn_lib.tools.log - elaboro la cartella C:\root\todd\_test\dn...
2021-02-07 18:53:46,790 [62] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id is null and file_name = '20200202.kikko.incorso.task.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, null, '20200202.kikko.incorso.task.txt', '.txt', 1, convert(datetime, '2021-02-07 18:53:15', 120), convert(datetime, '2021-02-07 18:53:37', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-02-07 18:53:15', 120), dt_upd = convert(datetime, '2021-02-07 18:53:37', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-02-07 18:53:15', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-02-07 18:53:37', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-02-07 18:53:46,807 [62] DEBUG dn_lib.tools.log - aggiunto file al database: C:\root\todd\_test\dn\20200202.kikko.incorso.task.txt
2021-02-07 18:53:46,811 [62] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4334;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4334, '.txt', @content, convert(datetime, '2021-02-07 18:53:15', 120), convert(datetime, '2021-02-07 18:53:37', 120));
2021-02-07 18:53:46,811 [62] DEBUG dn_lib.tools.log - salvato contenuto file nel database: C:\root\todd\_test\dn\20200202.kikko.incorso.task.txt
2021-02-07 18:53:46,861 [62] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4334;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, null, 4334, left('kikko', 150)
            , NULL, convert(datetime, '2020-02-02 00:00:00', 120), convert(datetime, '2021-02-07 18:53:37', 120), 1
            , 'in_corso', NULL, NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-02-02 00:00:00', 120), dt_upd = convert(datetime, '2021-02-07 18:53:37', 120)
         , title = left('kikko', 150), [user] = NULL
         , stato = 'in_corso', priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-02-02 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-02-07 18:53:37', 120), getdate())
          or isnull(title, '') <> isnull('kikko', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('in_corso', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-02-07 18:53:46,871 [62] DEBUG dn_lib.tools.log - inserito task nel database: C:\root\todd\_test\dn\kikko
2021-02-07 18:53:46,871 [62] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1459;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1459, 4334, @content
          , convert(datetime, '2021-02-07 18:53:15', 120), convert(datetime, '2021-02-07 18:53:37', 120));
2021-02-07 18:53:46,876 [62] DEBUG dn_lib.tools.log - salvate le note del task nel database: C:\root\todd\_test\dn\20200202.kikko.incorso.task.txt
2021-02-07 18:53:46,876 [62] DEBUG dn_lib.tools.log - trasformazione task file in task folder: C:\root\todd\_test\dn\20200202.kikko.incorso.task.txt
2021-02-07 18:53:46,881 [62] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = '20200202.kikko.incorso.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, '20200202.kikko.incorso.task', 1, convert(datetime, '2021-02-07 18:53:15', 120), convert(datetime, '2021-02-07 18:53:15', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-02-07 18:53:15', 120), dt_upd = convert(datetime, '2021-02-07 18:53:15', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-02-07 18:53:15', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-02-07 18:53:15', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-02-07 18:53:46,881 [62] DEBUG dn_lib.tools.log - creato folder: C:\root\todd\_test\dn\20200202.kikko.incorso.task
2021-02-07 18:53:46,881 [62] DEBUG dn_lib.tools.log - SQL: update dn_files set synch_folder_id = 1, folder_id = 1838, file_name = 'i.txt', dt_upd = getdate()
        where file_id = 4334;
      
2021-02-07 18:53:46,881 [62] DEBUG dn_lib.tools.log - SQL: update dn_tasks set dt_upd = convert(datetime, convert(varchar, getdate(), 120), 120), folder_id = 1838, file_id = null
        where task_id = 1459;
2021-02-07 18:53:46,891 [62] DEBUG dn_lib.tools.log - spostato file da: C:\root\todd\_test\dn\20200202.kikko.incorso.task.txt, a:C:\root\todd\_test\dn\20200202.kikko.incorso.task\i.txt
2021-02-07 18:53:46,891 [62] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1459;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1459, 4334, @content
          , convert(datetime, convert(varchar, getdate(), 120), 120), convert(datetime, convert(varchar, getdate(), 120), 120));
      update dn_tasks set dt_upd = convert(datetime, convert(varchar, getdate(), 120), 120) where task_id = 1459;
2021-02-07 18:53:46,891 [62] DEBUG dn_lib.tools.log - salvate le note del task: C:\root\todd\_test\dn\20200202.kikko.incorso.task
2021-02-07 18:53:54,708 [62] DEBUG dn_lib.tools.log - rinominato folder: C:\root\todd\_test\dn\20200202.kikko.incorso.task, in: C:\root\todd\_test\dn\kikko.task
2021-02-07 18:53:54,708 [62] DEBUG dn_lib.tools.log - SQL: update dn_folders set folder_name = 'kikko.task', dt_upd = convert(datetime, convert(varchar, getdate(), 120), 120)
        where folder_id = 1838
2021-02-07 18:53:54,711 [62] DEBUG dn_lib.tools.log - salvato index doc: C:\root\todd\_test\dn\kikko.task\__i.xml
2021-02-07 18:53:54,711 [62] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1838 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, 1838, null, left('kikko', 150)
            , NULL, convert(datetime, '2020-02-02 00:00:00', 120), convert(datetime, '2021-02-07 18:53:37', 120), 1
            , 'in_corso', NULL, NULL, NULL, convert(datetime, '2021-02-07 18:53:54', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-02-02 00:00:00', 120), dt_upd = convert(datetime, '2021-02-07 18:53:37', 120)
         , title = left('kikko', 150), [user] = NULL
         , stato = 'in_corso', priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = convert(datetime, '2021-02-07 18:53:54', 120)
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-02-02 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-02-07 18:53:37', 120), getdate())
          or isnull(title, '') <> isnull('kikko', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('in_corso', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-02-07 18:53:57,632 [62] DEBUG dn_lib.tools.log - SQL: declare @cc_files int; declare @cc_folders int;
      select @cc_files = (select count(*) from dn_files where readed is null) 
      select @cc_folders = (select count(*) from dn_folders where readed is null)
      
      delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
      select @cc_files, @cc_folders;
2021-02-07 18:53:57,641 [62] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '1')
        else update users_cache set var_value = substring('1', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-02-07 18:53:57,651 [62] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '0')
        else update users_cache set var_value = substring('0', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-02-07 18:53:57,651 [62] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/02/07 18:53:37')
        else update users_cache set var_value = substring('2021/02/07 18:53:37', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-02-07 18:53:57,651 [62] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/02/07 18:53:57')
        else update users_cache set var_value = substring('2021/02/07 18:53:57', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-02-07 18:54:24,545 [39] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:54:24,546 [39] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:54:24,547 [39] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:54:24,548 [39] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:54:24,548 [39] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:54:24,549 [39] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:54:24,550 [39] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:54:24,551 [39] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:54:24,552 [39] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:54:24,553 [39] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:54:24,553 [39] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:54:24,554 [39] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:54:24,555 [39] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:54:24,556 [39] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:54:24,556 [39] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:54:24,557 [39] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:54:24,557 [39] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:54:24,558 [39] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:54:24,559 [39] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:54:24,560 [39] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:54:24,561 [39] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:54:24,562 [39] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:54:24,563 [39] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:54:24,564 [39] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:54:24,564 [39] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:54:24,565 [39] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:54:24,568 [39] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:54:24,572 [60] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:54:24,573 [60] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:54:24,574 [60] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:54:24,574 [60] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:54:24,575 [60] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:54:24,575 [60] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:54:24,576 [60] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:54:24,577 [60] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:54:24,578 [60] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:54:24,578 [60] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:54:24,579 [60] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:54:24,579 [60] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:54:24,580 [60] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:54:24,581 [60] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:54:24,581 [60] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:54:24,582 [60] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:54:24,583 [60] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:54:24,583 [60] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:54:24,584 [60] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:54:24,584 [60] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:54:24,585 [60] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:54:24,585 [60] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:54:24,586 [60] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:54:24,586 [60] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:54:24,587 [60] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:54:24,588 [60] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:54:24,590 [60] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:54:24,593 [35] INFO dn_lib.tools.log - reload config docs
2021-02-07 18:54:24,594 [35] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:54:24,595 [35] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:54:24,595 [35] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:54:24,596 [35] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:54:24,596 [35] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:54:24,597 [35] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:54:24,597 [35] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:54:24,598 [35] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:54:24,598 [35] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:54:24,599 [35] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:54:24,599 [35] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:54:24,600 [35] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:54:24,601 [35] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:54:24,601 [35] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:54:24,602 [35] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:54:24,602 [35] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:54:24,603 [35] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-02-07 18:54:24,603 [35] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-02-07 18:54:24,604 [35] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-02-07 18:54:24,604 [35] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-02-07 18:54:24,605 [35] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-02-07 18:54:24,605 [35] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-02-07 18:54:24,606 [35] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-02-07 18:54:24,606 [35] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-02-07 18:54:24,607 [35] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-02-07 18:54:24,609 [35] DEBUG dn_lib.tools.log - SQL: select nome, email, isnull(activated, 0) as activated 
          from users where user_id = 1
2021-02-07 18:54:24,610 [35] DEBUG dn_lib.tools.log - SQL: select task_filter_id, filter_title, filter_notes, filter_def, filter_class
 from dn_tasks_filters order by filter_order
2021-02-07 18:54:24,611 [35] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:54:24,613 [35] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:54:24,614 [35] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:54:24,614 [35] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:54:24,615 [35] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:54:24,616 [35] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 1 and var_name in ('active-task-filter')
2021-02-07 18:54:24,617 [35] DEBUG dn_lib.tools.log - SQL: select ft.tp, ft.synch_folder_id, ft.folder_id, ft.parent_id, ft.title
       , ft.des, ft.http_path, ft.lvl, dbo.folder_path(ft.folder_id) as folder_path
       , (select top 1 1 from dn_tasks where folder_id = ft.folder_id) as is_task
      from dbo.fnc_dn_folders(null, null) ft
      
      order by ft.synch_folder_id, ft.lvl, ft.title
2021-02-07 18:54:24,625 [35] DEBUG dn_lib.tools.log - SQL: select f.synch_folder_id, f.file_id, f.folder_id, f.file_name, f.dt_ins , null as found_file
       from dn_files f
       where exists (select top 1 1 from dbo.fnc_dn_folders(null, null) ft 
        
	      where ft.synch_folder_id = f.synch_folder_id 
          and isnull(ft.folder_id, 0) = isnull(f.folder_id, 0))
2021-02-07 18:54:24,630 [35] DEBUG dn_lib.tools.log - SQL: select t3.*
      , tst.stato, tst.[order] as stato_order, isnull(tst.class, 'light') as stato_class, isnull(tst.title_plurale, '') as stato_title_plurale, isnull(tst.title_singolare, '') as stato_title_singolare
      , tp.priorita, tp.[order] as priorita_order, isnull(tp.class, 'light') as priorita_class, isnull(tp.title_plurale, '') as priorita_title_plurale, isnull(tp.title_singolare, '') as priorita_title_singolare
      , tt.tipo, tt.[order] as tipo_order, isnull(tt.class, 'light') as tipo_class, isnull(tt.title_plurale, '') as tipo_title_plurale, isnull(tt.title_singolare, '') as tipo_title_singolare
      , ts.stima, ts.[days] as stima_days, isnull(ts.class, 'light') as stima_class, isnull(ts.title_plurale, '') as stima_title_plurale, isnull(ts.title_singolare, '') as stima_title_singolare
      , (select top 1 1 from dn_tasks_notes where task_id = t3.task_id) as task_notes
      , (select top 1 1 from vw_task_allegati f2 where f2.task_id = t3.task_id 
          and not exists (select top 1 1 from dn_files_info where file_name = f2.file_name)) as task_files
  from (select t2.*, datediff(day, t2.dt_ref, getdate()) as diff_days
    from (select t.task_id, t.synch_folder_id, isnull(t.folder_id, f.folder_id) as folder_id
	   , t.file_id, t.title, t.[user], t.stato, t.priorita, t.tipo, t.stima, t.dt_ins, t.dt_upd
     , (case when t.dt_ins > t.dt_upd then t.dt_ins else t.dt_upd end) as dt_ref
	  from dn_tasks t
    
	  left join dn_files f on f.file_id = t.file_id
    where (null is null or (null is not null and t.task_id = null)) ) t2
    where exists (select top 1 1 from dbo.fnc_dn_folders(null, null) ft 
	    where  ft.synch_folder_id = t2.synch_folder_id 
       and isnull(ft.folder_id, 0) = isnull(t2.folder_id, 0))) t3
   left join dn_task_stato tst on tst.stato = t3.stato
   left join dn_task_priorita tp on tp.priorita = t3.priorita
   left join dn_task_tipo tt on tt.tipo = t3.tipo
   left join dn_task_stima ts on ts.stima = t3.stima
   where 1 = 1  and t3.stato = 'in_corso' or t3.diff_days <= 14
2021-02-07 18:54:24,645 [35] DEBUG dn_lib.tools.log - SQL: select title_singolare, stato from dn_task_stato order by [order]
2021-02-07 18:54:24,648 [35] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, priorita as [value], [order] from dn_task_priorita
      ) t order by t.[order]
2021-02-07 18:54:24,650 [35] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [days]
       union select title_singolare as title, stima as [value], [days] from dn_task_stima 
       ) t order by t.[days]
2021-02-07 18:54:24,653 [35] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, tipo as [value], [order] from dn_task_tipo
       ) t order by t.[order]
2021-02-07 18:54:24,655 [35] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value]
       union select nome as title, nome as [value] from users
       ) t order by 2
