2021-01-10 15:29:21,698 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\PickToLight\Flowlight\Flowlight15E_Setup_x86
2021-01-10 15:29:21,712 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1585 and file_name = 'Flowlight15E_Setup_x86.msi';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1585, 'Flowlight15E_Setup_x86.msi', '.msi', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2019-11-27 16:30:20', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2019-11-27 16:30:20', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2019-11-27 16:30:20', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:21,720 [64] DEBUG dn_lib.tools.log - added file 3812: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\PickToLight\Flowlight\Flowlight15E_Setup_x86\Flowlight15E_Setup_x86.msi
2021-01-10 15:29:21,721 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1203) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:21,723 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1203) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:21,725 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1530 
        and folder_name = 'Lightstep104e';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1530, 'Lightstep104e', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-12 10:21:56', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-12 10:21:56', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-12 10:21:56', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:21,731 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\PickToLight\Lightstep104e
2021-01-10 15:29:21,732 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1586 
        and folder_name = 'Manual';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1586, 'Manual', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-12 10:21:56', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-12 10:21:56', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-12 10:21:56', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:21,738 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\PickToLight\Lightstep104e\Manual
2021-01-10 15:29:21,740 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1587 and file_name = 'Lightstep10_PG30E.pdf';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1587, 'Lightstep10_PG30E.pdf', '.pdf', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2019-11-27 16:30:46', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2019-11-27 16:30:46', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2019-11-27 16:30:46', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:21,745 [64] DEBUG dn_lib.tools.log - added file 3813: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\PickToLight\Lightstep104e\Manual\Lightstep10_PG30E.pdf
2021-01-10 15:29:21,746 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1203) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:21,749 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1586 and file_name = 'Lightstep10E_Setup_x64.msi';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1586, 'Lightstep10E_Setup_x64.msi', '.msi', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2019-11-27 16:30:46', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2019-11-27 16:30:46', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2019-11-27 16:30:46', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:21,755 [64] DEBUG dn_lib.tools.log - added file 3814: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\PickToLight\Lightstep104e\Lightstep10E_Setup_x64.msi
2021-01-10 15:29:21,757 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1586 and file_name = 'Lightstep10E_Setup_x86.msi';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1586, 'Lightstep10E_Setup_x86.msi', '.msi', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2019-11-27 16:30:46', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2019-11-27 16:30:46', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2019-11-27 16:30:46', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:21,764 [64] DEBUG dn_lib.tools.log - added file 3815: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\PickToLight\Lightstep104e\Lightstep10E_Setup_x86.msi
2021-01-10 15:29:21,765 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1586 and file_name = 'Read_at_the_beginning.rtf';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1586, 'Read_at_the_beginning.rtf', '.rtf', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2019-11-27 16:30:46', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2019-11-27 16:30:46', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2019-11-27 16:30:46', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:21,770 [64] DEBUG dn_lib.tools.log - added file 3816: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\PickToLight\Lightstep104e\Read_at_the_beginning.rtf
2021-01-10 15:29:21,773 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1586 and file_name = 'Revision_history.rtf';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1586, 'Revision_history.rtf', '.rtf', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2019-11-27 16:30:46', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2019-11-27 16:30:46', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2019-11-27 16:30:46', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:21,780 [64] DEBUG dn_lib.tools.log - added file 3817: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\PickToLight\Lightstep104e\Revision_history.rtf
2021-01-10 15:29:21,781 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1203) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:21,782 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1530 
        and folder_name = 'Reflexer1.2.5e';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1530, 'Reflexer1.2.5e', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-12 10:21:58', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-12 10:21:58', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-12 10:21:58', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:21,786 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\PickToLight\Reflexer1.2.5e
2021-01-10 15:29:21,788 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1588 
        and folder_name = 'Manual';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1588, 'Manual', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-12 10:21:57', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-12 10:21:57', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-12 10:21:57', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:21,793 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\PickToLight\Reflexer1.2.5e\Manual
2021-01-10 15:29:21,794 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1589 and file_name = 'ReflexerUM12e.pdf';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1589, 'ReflexerUM12e.pdf', '.pdf', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2019-11-27 16:45:02', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2019-11-27 16:45:02', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2019-11-27 16:45:02', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:21,799 [64] DEBUG dn_lib.tools.log - added file 3818: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\PickToLight\Reflexer1.2.5e\Manual\ReflexerUM12e.pdf
2021-01-10 15:29:21,800 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1203) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:21,801 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1588 
        and folder_name = 'x64';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1588, 'x64', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-12 10:21:58', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-12 10:21:58', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-12 10:21:58', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:21,807 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\PickToLight\Reflexer1.2.5e\x64
2021-01-10 15:29:21,808 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1590 and file_name = 'Reflexer12E_LE_Setup_x64.msi';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1590, 'Reflexer12E_LE_Setup_x64.msi', '.msi', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2019-11-27 16:45:02', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2019-11-27 16:45:02', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2019-11-27 16:45:02', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:21,812 [64] DEBUG dn_lib.tools.log - added file 3819: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\PickToLight\Reflexer1.2.5e\x64\Reflexer12E_LE_Setup_x64.msi
2021-01-10 15:29:21,813 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1590 and file_name = 'setup.exe';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1590, 'setup.exe', '.exe', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2019-11-27 16:45:02', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2019-11-27 16:45:02', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2019-11-27 16:45:02', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:21,818 [64] DEBUG dn_lib.tools.log - added file 3820: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\PickToLight\Reflexer1.2.5e\x64\setup.exe
2021-01-10 15:29:21,819 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1203) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:21,821 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1588 
        and folder_name = 'x86';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1588, 'x86', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-12 10:21:58', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-12 10:21:58', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-12 10:21:58', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:21,826 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\PickToLight\Reflexer1.2.5e\x86
2021-01-10 15:29:21,827 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1591 and file_name = 'Reflexer12E_LE_Setup_x86.msi';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1591, 'Reflexer12E_LE_Setup_x86.msi', '.msi', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2019-11-27 16:45:02', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2019-11-27 16:45:02', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2019-11-27 16:45:02', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:21,833 [64] DEBUG dn_lib.tools.log - added file 3821: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\PickToLight\Reflexer1.2.5e\x86\Reflexer12E_LE_Setup_x86.msi
2021-01-10 15:29:21,834 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1591 and file_name = 'setup.exe';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1591, 'setup.exe', '.exe', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2019-11-27 16:45:02', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2019-11-27 16:45:02', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2019-11-27 16:45:02', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:21,840 [64] DEBUG dn_lib.tools.log - added file 3822: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\PickToLight\Reflexer1.2.5e\x86\setup.exe
2021-01-10 15:29:21,841 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1203) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:21,842 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1588 and file_name = 'readme.rtf';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1588, 'readme.rtf', '.rtf', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2019-11-27 16:45:02', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2019-11-27 16:45:02', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2019-11-27 16:45:02', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:21,847 [64] DEBUG dn_lib.tools.log - added file 3823: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\PickToLight\Reflexer1.2.5e\readme.rtf
2021-01-10 15:29:21,848 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1203) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:21,850 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1530 
        and folder_name = 'Software development manual and software package';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1530, 'Software development manual and software package', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-12 10:21:59', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-12 10:21:59', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-12 10:21:59', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:21,853 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\PickToLight\Software development manual and software package
2021-01-10 15:29:21,855 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1592 
        and folder_name = '7 Color light';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1592, '7 Color light', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-12 10:21:59', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-12 10:21:59', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-12 10:21:59', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:21,860 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\PickToLight\Software development manual and software package\7 Color light
2021-01-10 15:29:21,861 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1593 and file_name = 'PP505 command creating process.pdf';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1593, 'PP505 command creating process.pdf', '.pdf', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2019-11-27 16:30:06', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2019-11-27 16:30:06', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2019-11-27 16:30:06', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:21,865 [64] DEBUG dn_lib.tools.log - added file 3824: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\PickToLight\Software development manual and software package\7 Color light\PP505 command creating process.pdf
2021-01-10 15:29:21,866 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1593 and file_name = 'PP505 command examples for 7 colors.pdf';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1593, 'PP505 command examples for 7 colors.pdf', '.pdf', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2019-11-27 16:30:06', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2019-11-27 16:30:06', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2019-11-27 16:30:06', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:21,871 [64] DEBUG dn_lib.tools.log - added file 3825: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\PickToLight\Software development manual and software package\7 Color light\PP505 command examples for 7 colors.pdf
2021-01-10 15:29:21,873 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1593 and file_name = 'PP505 command manual description.pdf';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1593, 'PP505 command manual description.pdf', '.pdf', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2019-11-27 16:30:06', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2019-11-27 16:30:06', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2019-11-27 16:30:06', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:21,878 [64] DEBUG dn_lib.tools.log - added file 3826: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\PickToLight\Software development manual and software package\7 Color light\PP505 command manual description.pdf
2021-01-10 15:29:21,879 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1203) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:21,880 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1592 
        and folder_name = 'MWU2414';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1592, 'MWU2414', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-12 10:21:59', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-12 10:21:59', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-12 10:21:59', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:21,885 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\PickToLight\Software development manual and software package\MWU2414
2021-01-10 15:29:21,886 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1594 and file_name = 'MWU2414 Commands V1.1.pdf';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1594, 'MWU2414 Commands V1.1.pdf', '.pdf', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2019-11-27 16:30:06', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2019-11-27 16:30:06', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2019-11-27 16:30:06', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:21,891 [64] DEBUG dn_lib.tools.log - added file 3827: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\PickToLight\Software development manual and software package\MWU2414\MWU2414 Commands V1.1.pdf
2021-01-10 15:29:21,892 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1203) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:21,894 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1592 
        and folder_name = 'Reflexer';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1592, 'Reflexer', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-12 10:21:59', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-12 10:21:59', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-12 10:21:59', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:21,898 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\PickToLight\Software development manual and software package\Reflexer
2021-01-10 15:29:21,899 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1595 and file_name = 'Reflexer.pdf';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1595, 'Reflexer.pdf', '.pdf', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2019-11-27 16:30:06', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2019-11-27 16:30:06', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2019-11-27 16:30:06', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:21,904 [64] DEBUG dn_lib.tools.log - added file 3828: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\PickToLight\Software development manual and software package\Reflexer\Reflexer.pdf
2021-01-10 15:29:21,909 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1203) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:21,914 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1592 and file_name = 'S- Key.pdf';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1592, 'S- Key.pdf', '.pdf', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2019-11-27 16:30:06', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2019-11-27 16:30:06', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2019-11-27 16:30:06', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:21,918 [64] DEBUG dn_lib.tools.log - added file 3829: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\PickToLight\Software development manual and software package\S- Key.pdf
2021-01-10 15:29:21,919 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1592 and file_name = 'TCP_IP Command Reference V6.0.pdf';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1592, 'TCP_IP Command Reference V6.0.pdf', '.pdf', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2019-11-27 16:30:06', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2019-11-27 16:30:06', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2019-11-27 16:30:06', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:21,924 [64] DEBUG dn_lib.tools.log - added file 3830: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\PickToLight\Software development manual and software package\TCP_IP Command Reference V6.0.pdf
2021-01-10 15:29:21,925 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1203) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:21,926 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1530 and file_name = 'How to configure the DPDs with Flowlight.pdf';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1530, 'How to configure the DPDs with Flowlight.pdf', '.pdf', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2019-11-27 16:11:00', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2019-11-27 16:11:00', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2019-11-27 16:11:00', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:21,931 [64] DEBUG dn_lib.tools.log - added file 3831: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\PickToLight\How to configure the DPDs with Flowlight.pdf
2021-01-10 15:29:21,932 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1530 and file_name = 'MWU series installation user manual.pdf';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1530, 'MWU series installation user manual.pdf', '.pdf', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2019-11-27 16:11:16', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2019-11-27 16:11:16', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2019-11-27 16:11:16', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:21,936 [64] DEBUG dn_lib.tools.log - added file 3832: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\PickToLight\MWU series installation user manual.pdf
2021-01-10 15:29:21,937 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1530 and file_name = 'PTL system communication overview.pdf';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1530, 'PTL system communication overview.pdf', '.pdf', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2019-11-27 16:10:56', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2019-11-27 16:10:56', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2019-11-27 16:10:56', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:21,942 [64] DEBUG dn_lib.tools.log - added file 3833: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\PickToLight\PTL system communication overview.pdf
2021-01-10 15:29:21,943 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1203) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:21,945 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1529 
        and folder_name = 'ptl';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1529, 'ptl', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-12 10:22:03', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-12 10:22:03', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-12 10:22:03', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:21,949 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl
2021-01-10 15:29:21,950 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1596 
        and folder_name = '.vs';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1596, '.vs', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-12 10:22:01', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-12 10:22:01', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-12 10:22:01', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:21,954 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\.vs
2021-01-10 15:29:21,956 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1597 
        and folder_name = 'LsSample1a';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1597, 'LsSample1a', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-12 10:22:00', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-12 10:22:00', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-12 10:22:00', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:21,961 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\.vs\LsSample1a
2021-01-10 15:29:21,962 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1598 
        and folder_name = 'v15';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1598, 'v15', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-12 10:22:00', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-12 10:22:00', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-12 10:22:00', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:21,967 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\.vs\LsSample1a\v15
2021-01-10 15:29:21,968 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1599 
        and folder_name = 'Server';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1599, 'Server', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-12 10:22:00', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-12 10:22:00', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-12 10:22:00', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:21,972 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\.vs\LsSample1a\v15\Server
2021-01-10 15:29:21,973 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1600 
        and folder_name = 'sqlite3';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1600, 'sqlite3', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-12 10:22:01', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-12 10:22:01', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-12 10:22:01', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:21,978 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\.vs\LsSample1a\v15\Server\sqlite3
2021-01-10 15:29:21,980 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1601 and file_name = 'db.lock';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1601, 'db.lock', '.lock', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-01-24 17:04:30', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-01-24 17:04:30', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-01-24 17:04:30', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:21,984 [64] DEBUG dn_lib.tools.log - added file 3834: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\.vs\LsSample1a\v15\Server\sqlite3\db.lock
2021-01-10 15:29:21,985 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1601 and file_name = 'storage.ide';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1601, 'storage.ide', '.ide', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-01-24 17:04:30', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-01-24 17:04:30', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-01-24 17:04:30', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:21,990 [64] DEBUG dn_lib.tools.log - added file 3835: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\.vs\LsSample1a\v15\Server\sqlite3\storage.ide
2021-01-10 15:29:21,990 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1601 and file_name = 'storage.ide-shm';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1601, 'storage.ide-shm', '.ide-shm', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-01-24 17:04:30', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-01-24 17:04:30', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-01-24 17:04:30', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:21,994 [64] DEBUG dn_lib.tools.log - added file 3836: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\.vs\LsSample1a\v15\Server\sqlite3\storage.ide-shm
2021-01-10 15:29:21,995 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1601 and file_name = 'storage.ide-wal';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1601, 'storage.ide-wal', '.ide-wal', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-01-24 17:07:42', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-01-24 17:07:42', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-01-24 17:07:42', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:22,000 [64] DEBUG dn_lib.tools.log - added file 3837: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\.vs\LsSample1a\v15\Server\sqlite3\storage.ide-wal
2021-01-10 15:29:22,001 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1203) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:22,003 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1203) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:22,004 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1599 and file_name = '.suo';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1599, '.suo', '.suo', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-01-24 17:37:49', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-01-24 17:37:49', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-01-24 17:37:49', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:22,009 [64] DEBUG dn_lib.tools.log - added file 3838: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\.vs\LsSample1a\v15\.suo
2021-01-10 15:29:22,010 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1203) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:22,011 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1203) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:22,013 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1597 
        and folder_name = 'ptl';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1597, 'ptl', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-12 10:22:01', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-12 10:22:01', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-12 10:22:01', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:22,018 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\.vs\ptl
2021-01-10 15:29:22,019 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1602 
        and folder_name = 'v15';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1602, 'v15', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-12 10:22:01', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-12 10:22:01', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-12 10:22:01', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:22,023 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\.vs\ptl\v15
2021-01-10 15:29:22,024 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1603 
        and folder_name = 'Server';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1603, 'Server', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-12 10:22:01', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-12 10:22:01', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-12 10:22:01', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:22,031 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\.vs\ptl\v15\Server
2021-01-10 15:29:22,032 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1604 
        and folder_name = 'sqlite3';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1604, 'sqlite3', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-12 10:22:01', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-12 10:22:01', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-12 10:22:01', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:22,036 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\.vs\ptl\v15\Server\sqlite3
2021-01-10 15:29:22,038 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1605 and file_name = 'db.lock';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1605, 'db.lock', '.lock', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-01-24 17:39:32', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-01-24 17:39:32', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-01-24 17:39:32', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:22,043 [64] DEBUG dn_lib.tools.log - added file 3839: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\.vs\ptl\v15\Server\sqlite3\db.lock
2021-01-10 15:29:22,045 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1605 and file_name = 'storage.ide';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1605, 'storage.ide', '.ide', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-01-24 17:39:33', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-01-24 17:39:33', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-01-24 17:39:33', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:22,050 [64] DEBUG dn_lib.tools.log - added file 3840: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\.vs\ptl\v15\Server\sqlite3\storage.ide
2021-01-10 15:29:22,052 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1605 and file_name = 'storage.ide-shm';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1605, 'storage.ide-shm', '.ide-shm', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-01-24 17:39:33', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-01-24 17:39:33', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-01-24 17:39:33', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:22,057 [64] DEBUG dn_lib.tools.log - added file 3841: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\.vs\ptl\v15\Server\sqlite3\storage.ide-shm
2021-01-10 15:29:22,058 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1605 and file_name = 'storage.ide-wal';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1605, 'storage.ide-wal', '.ide-wal', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-01-29 10:50:19', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-01-29 10:50:19', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-01-29 10:50:19', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:22,063 [64] DEBUG dn_lib.tools.log - added file 3842: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\.vs\ptl\v15\Server\sqlite3\storage.ide-wal
2021-01-10 15:29:22,064 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1203) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:22,066 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1203) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:22,067 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1603 and file_name = '.suo';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1603, '.suo', '.suo', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-02-04 09:54:15', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-02-04 09:54:15', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-02-04 09:54:15', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:22,073 [64] DEBUG dn_lib.tools.log - added file 3843: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\.vs\ptl\v15\.suo
2021-01-10 15:29:22,074 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1203) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:22,075 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1203) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:22,076 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1203) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:22,078 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1596 
        and folder_name = 'bin';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1596, 'bin', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-12 10:22:01', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-12 10:22:01', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-12 10:22:01', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:22,082 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\bin
2021-01-10 15:29:22,083 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1606 
        and folder_name = 'Debug';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1606, 'Debug', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-12 10:22:02', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-12 10:22:02', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-12 10:22:02', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:22,087 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\bin\Debug
2021-01-10 15:29:22,088 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1607 and file_name = 'AioiSystems.Lightstep.dll';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1607, 'AioiSystems.Lightstep.dll', '.dll', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2015-12-24 13:50:38', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2015-12-24 13:50:38', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2015-12-24 13:50:38', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:22,094 [64] DEBUG dn_lib.tools.log - added file 3844: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\bin\Debug\AioiSystems.Lightstep.dll
2021-01-10 15:29:22,095 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1607 and file_name = 'AioiSystems.Lightstep.xml';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1607, 'AioiSystems.Lightstep.xml', '.xml', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2012-06-29 11:53:42', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2012-06-29 11:53:42', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2012-06-29 11:53:42', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:22,099 [64] DEBUG dn_lib.tools.log - added file 3845: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\bin\Debug\AioiSystems.Lightstep.xml
2021-01-10 15:29:22,100 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1607 and file_name = 'LsSample1a.exe';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1607, 'LsSample1a.exe', '.exe', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-01-24 18:07:59', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-01-24 18:07:59', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-01-24 18:07:59', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:22,104 [64] DEBUG dn_lib.tools.log - added file 3846: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\bin\Debug\LsSample1a.exe
2021-01-10 15:29:22,105 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1607 and file_name = 'LsSample1a.pdb';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1607, 'LsSample1a.pdb', '.pdb', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-01-24 18:07:59', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-01-24 18:07:59', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-01-24 18:07:59', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:22,110 [64] DEBUG dn_lib.tools.log - added file 3847: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\bin\Debug\LsSample1a.pdb
2021-01-10 15:29:22,110 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1203) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:22,112 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1203) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:22,113 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1596 
        and folder_name = 'obj';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1596, 'obj', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-12 10:22:02', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-12 10:22:02', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-12 10:22:02', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:22,118 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\obj
2021-01-10 15:29:22,119 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1608 
        and folder_name = 'Debug';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1608, 'Debug', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-12 10:22:03', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-12 10:22:03', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-12 10:22:03', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:22,123 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\obj\Debug
2021-01-10 15:29:22,124 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1609 
        and folder_name = 'TempPE';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1609, 'TempPE', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-12 10:22:03', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-12 10:22:03', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-12 10:22:03', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:22,128 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\obj\Debug\TempPE
2021-01-10 15:29:22,129 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1610 and file_name = 'Properties.Resources.Designer.cs.dll';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1610, 'Properties.Resources.Designer.cs.dll', '.dll', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2019-11-27 16:39:40', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2019-11-27 16:39:40', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2019-11-27 16:39:40', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:22,133 [64] DEBUG dn_lib.tools.log - added file 3848: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\obj\Debug\TempPE\Properties.Resources.Designer.cs.dll
2021-01-10 15:29:22,134 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1203) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:22,136 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1609 and file_name = 'DesignTimeResolveAssemblyReferences.cache';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1609, 'DesignTimeResolveAssemblyReferences.cache', '.cache', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2019-11-27 17:39:56', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2019-11-27 17:39:56', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2019-11-27 17:39:56', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:22,143 [64] DEBUG dn_lib.tools.log - added file 3849: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\obj\Debug\DesignTimeResolveAssemblyReferences.cache
2021-01-10 15:29:22,144 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1609 and file_name = 'DesignTimeResolveAssemblyReferencesInput.cache';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1609, 'DesignTimeResolveAssemblyReferencesInput.cache', '.cache', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-01-24 18:00:51', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-01-24 18:00:51', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-01-24 18:00:51', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:22,149 [64] DEBUG dn_lib.tools.log - added file 3850: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\obj\Debug\DesignTimeResolveAssemblyReferencesInput.cache
2021-01-10 15:29:22,150 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1609 and file_name = 'LsSample1a.csproj.CopyComplete';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1609, 'LsSample1a.csproj.CopyComplete', '.copycomplete', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-01-23 11:03:10', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-01-23 11:03:10', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-01-23 11:03:10', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:22,155 [64] DEBUG dn_lib.tools.log - added file 3851: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\obj\Debug\LsSample1a.csproj.CopyComplete
2021-01-10 15:29:22,156 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1609 and file_name = 'LsSample1a.csproj.CoreCompileInputs.cache';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1609, 'LsSample1a.csproj.CoreCompileInputs.cache', '.cache', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-01-24 17:04:21', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-01-24 17:04:21', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-01-24 17:04:21', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:22,160 [64] DEBUG dn_lib.tools.log - added file 3852: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\obj\Debug\LsSample1a.csproj.CoreCompileInputs.cache
2021-01-10 15:29:22,161 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1609 and file_name = 'LsSample1a.csproj.FileListAbsolute.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1609, 'LsSample1a.csproj.FileListAbsolute.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2019-11-27 16:39:50', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2019-11-27 16:39:50', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2019-11-27 16:39:50', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:22,166 [64] DEBUG dn_lib.tools.log - added file 3853: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\obj\Debug\LsSample1a.csproj.FileListAbsolute.txt
2021-01-10 15:29:22,167 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3853;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3853, '.txt', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2019-11-27 16:39:50', 120));
2021-01-10 15:29:22,169 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\obj\Debug\LsSample1a.csproj.FileListAbsolute.txt'
2021-01-10 15:29:22,170 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1609 and file_name = 'LsSample1a.csproj.GenerateResource.cache';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1609, 'LsSample1a.csproj.GenerateResource.cache', '.cache', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-01-23 10:58:32', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-01-23 10:58:32', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-01-23 10:58:32', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:22,175 [64] DEBUG dn_lib.tools.log - added file 3854: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\obj\Debug\LsSample1a.csproj.GenerateResource.cache
2021-01-10 15:29:22,176 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1609 and file_name = 'LsSample1a.csprojAssemblyReference.cache';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1609, 'LsSample1a.csprojAssemblyReference.cache', '.cache', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-01-24 17:04:21', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-01-24 17:04:21', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-01-24 17:04:21', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:22,181 [64] DEBUG dn_lib.tools.log - added file 3855: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\obj\Debug\LsSample1a.csprojAssemblyReference.cache
2021-01-10 15:29:22,182 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1609 and file_name = 'LsSample1a.exe';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1609, 'LsSample1a.exe', '.exe', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-01-24 18:07:59', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-01-24 18:07:59', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-01-24 18:07:59', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:22,188 [64] DEBUG dn_lib.tools.log - added file 3856: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\obj\Debug\LsSample1a.exe
2021-01-10 15:29:22,189 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1609 and file_name = 'LsSample1a.Form1.resources';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1609, 'LsSample1a.Form1.resources', '.resources', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-01-23 10:58:32', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-01-23 10:58:32', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-01-23 10:58:32', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:22,194 [64] DEBUG dn_lib.tools.log - added file 3857: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\obj\Debug\LsSample1a.Form1.resources
2021-01-10 15:29:22,195 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1609 and file_name = 'LsSample1a.frm_main.resources';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1609, 'LsSample1a.frm_main.resources', '.resources', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-01-24 18:07:58', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-01-24 18:07:58', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-01-24 18:07:58', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:22,201 [64] DEBUG dn_lib.tools.log - added file 3858: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\obj\Debug\LsSample1a.frm_main.resources
2021-01-10 15:29:22,202 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1609 and file_name = 'LsSample1a.pdb';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1609, 'LsSample1a.pdb', '.pdb', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-01-24 18:07:59', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-01-24 18:07:59', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-01-24 18:07:59', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:22,208 [64] DEBUG dn_lib.tools.log - added file 3859: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\obj\Debug\LsSample1a.pdb
2021-01-10 15:29:22,209 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1609 and file_name = 'LsSample1a.Properties.Resources.resources';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1609, 'LsSample1a.Properties.Resources.resources', '.resources', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-01-24 18:07:58', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-01-24 18:07:58', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-01-24 18:07:58', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:22,214 [64] DEBUG dn_lib.tools.log - added file 3860: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\obj\Debug\LsSample1a.Properties.Resources.resources
2021-01-10 15:29:22,215 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1609 and file_name = 'ptl.csproj.CopyComplete';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1609, 'ptl.csproj.CopyComplete', '.copycomplete', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-01-24 18:07:59', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-01-24 18:07:59', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-01-24 18:07:59', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:22,220 [64] DEBUG dn_lib.tools.log - added file 3861: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\obj\Debug\ptl.csproj.CopyComplete
2021-01-10 15:29:22,222 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1609 and file_name = 'ptl.csproj.CoreCompileInputs.cache';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1609, 'ptl.csproj.CoreCompileInputs.cache', '.cache', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-01-24 18:00:51', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-01-24 18:00:51', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-01-24 18:00:51', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:22,227 [64] DEBUG dn_lib.tools.log - added file 3862: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\obj\Debug\ptl.csproj.CoreCompileInputs.cache
2021-01-10 15:29:22,228 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1609 and file_name = 'ptl.csproj.FileListAbsolute.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1609, 'ptl.csproj.FileListAbsolute.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-01-24 17:45:06', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-01-24 17:45:06', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-01-24 17:45:06', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:22,234 [64] DEBUG dn_lib.tools.log - added file 3863: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\obj\Debug\ptl.csproj.FileListAbsolute.txt
2021-01-10 15:29:22,235 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3863;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3863, '.txt', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-01-24 17:45:06', 120));
2021-01-10 15:29:22,238 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\obj\Debug\ptl.csproj.FileListAbsolute.txt'
2021-01-10 15:29:22,239 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1609 and file_name = 'ptl.csproj.GenerateResource.cache';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1609, 'ptl.csproj.GenerateResource.cache', '.cache', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-01-24 17:52:54', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-01-24 17:52:54', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-01-24 17:52:54', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:22,245 [64] DEBUG dn_lib.tools.log - added file 3864: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\obj\Debug\ptl.csproj.GenerateResource.cache
2021-01-10 15:29:22,246 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1609 and file_name = 'ptl.csprojAssemblyReference.cache';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1609, 'ptl.csprojAssemblyReference.cache', '.cache', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-01-24 17:39:22', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-01-24 17:39:22', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-01-24 17:39:22', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:22,250 [64] DEBUG dn_lib.tools.log - added file 3865: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\obj\Debug\ptl.csprojAssemblyReference.cache
2021-01-10 15:29:22,251 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1203) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:22,253 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1203) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:22,254 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1596 
        and folder_name = 'Properties';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1596, 'Properties', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-12 10:22:03', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-12 10:22:03', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-12 10:22:03', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:22,259 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\Properties
2021-01-10 15:29:22,260 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1611 and file_name = 'AssemblyInfo.cs';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1611, 'AssemblyInfo.cs', '.cs', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2011-08-03 16:29:58', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2011-08-03 16:29:58', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2011-08-03 16:29:58', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:22,269 [64] DEBUG dn_lib.tools.log - added file 3866: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\Properties\AssemblyInfo.cs
2021-01-10 15:29:22,270 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3866;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3866, '.cs', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2011-08-03 16:29:58', 120));
2021-01-10 15:29:22,274 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\Properties\AssemblyInfo.cs'
2021-01-10 15:29:22,275 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1611 and file_name = 'Resources.Designer.cs';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1611, 'Resources.Designer.cs', '.cs', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2019-11-27 16:39:32', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2019-11-27 16:39:32', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2019-11-27 16:39:32', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:22,279 [64] DEBUG dn_lib.tools.log - added file 3867: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\Properties\Resources.Designer.cs
2021-01-10 15:29:22,280 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3867;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3867, '.cs', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2019-11-27 16:39:32', 120));
2021-01-10 15:29:22,283 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\Properties\Resources.Designer.cs'
2021-01-10 15:29:22,283 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1611 and file_name = 'Resources.resx';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1611, 'Resources.resx', '.resx', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2011-08-03 16:30:00', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2011-08-03 16:30:00', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2011-08-03 16:30:00', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:22,288 [64] DEBUG dn_lib.tools.log - added file 3868: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\Properties\Resources.resx
2021-01-10 15:29:22,289 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1611 and file_name = 'Settings.Designer.cs';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1611, 'Settings.Designer.cs', '.cs', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2019-11-27 16:39:34', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2019-11-27 16:39:34', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2019-11-27 16:39:34', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:22,294 [64] DEBUG dn_lib.tools.log - added file 3869: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\Properties\Settings.Designer.cs
2021-01-10 15:29:22,295 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3869;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3869, '.cs', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2019-11-27 16:39:34', 120));
2021-01-10 15:29:22,297 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\Properties\Settings.Designer.cs'
2021-01-10 15:29:22,298 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1611 and file_name = 'Settings.settings';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1611, 'Settings.settings', '.settings', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2011-08-03 16:29:58', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2011-08-03 16:29:58', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2011-08-03 16:29:58', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:22,302 [64] DEBUG dn_lib.tools.log - added file 3870: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\Properties\Settings.settings
2021-01-10 15:29:22,303 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1203) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:22,304 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1596 and file_name = 'Form1.cs';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1596, 'Form1.cs', '.cs', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-01-24 17:52:51', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-01-24 17:52:51', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-01-24 17:52:51', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:22,310 [64] DEBUG dn_lib.tools.log - added file 3871: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\Form1.cs
2021-01-10 15:29:22,311 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3871;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3871, '.cs', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-01-24 17:52:51', 120));
2021-01-10 15:29:22,314 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\Form1.cs'
2021-01-10 15:29:22,315 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1596 and file_name = 'Form1.Designer.cs';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1596, 'Form1.Designer.cs', '.cs', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-01-24 17:52:34', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-01-24 17:52:34', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-01-24 17:52:34', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:22,320 [64] DEBUG dn_lib.tools.log - added file 3872: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\Form1.Designer.cs
2021-01-10 15:29:22,321 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3872;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3872, '.cs', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-01-24 17:52:34', 120));
2021-01-10 15:29:22,325 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\Form1.Designer.cs'
2021-01-10 15:29:22,326 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1596 and file_name = 'Form1.resx';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1596, 'Form1.resx', '.resx', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-01-24 17:52:34', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-01-24 17:52:34', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-01-24 17:52:34', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:22,331 [64] DEBUG dn_lib.tools.log - added file 3873: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\Form1.resx
2021-01-10 15:29:22,332 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1596 and file_name = 'pick_to_light.cs';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1596, 'pick_to_light.cs', '.cs', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-01-24 18:07:43', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-01-24 18:07:43', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-01-24 18:07:43', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:22,337 [64] DEBUG dn_lib.tools.log - added file 3874: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\pick_to_light.cs
2021-01-10 15:29:22,338 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3874;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3874, '.cs', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-01-24 18:07:43', 120));
2021-01-10 15:29:22,343 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\pick_to_light.cs'
2021-01-10 15:29:22,344 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1596 and file_name = 'Program.cs';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1596, 'Program.cs', '.cs', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-01-24 17:40:23', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-01-24 17:40:23', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-01-24 17:40:23', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:22,349 [64] DEBUG dn_lib.tools.log - added file 3875: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\Program.cs
2021-01-10 15:29:22,350 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3875;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3875, '.cs', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-01-24 17:40:23', 120));
2021-01-10 15:29:22,353 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\Program.cs'
2021-01-10 15:29:22,354 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1596 and file_name = 'ptl.csproj';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1596, 'ptl.csproj', '.csproj', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-01-24 18:07:57', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-01-24 18:07:57', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-01-24 18:07:57', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:22,360 [64] DEBUG dn_lib.tools.log - added file 3876: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\ptl.csproj
2021-01-10 15:29:22,361 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1596 and file_name = 'ptl.sln';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1596, 'ptl.sln', '.sln', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-01-24 17:38:59', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-01-24 17:38:59', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-01-24 17:38:59', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:22,366 [64] DEBUG dn_lib.tools.log - added file 3877: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\ptl.sln
2021-01-10 15:29:22,367 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1596 and file_name = 'UpgradeLog.htm';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1596, 'UpgradeLog.htm', '.htm', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2019-11-27 16:39:34', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2019-11-27 16:39:34', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2019-11-27 16:39:34', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:22,373 [64] DEBUG dn_lib.tools.log - added file 3878: C:\root\todd\_test\dn\magazzino\200124.leds magazzino elettronico.dafare.new.3w.molina.task\ptl\UpgradeLog.htm
2021-01-10 15:29:22,374 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1203) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:22,376 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1203) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:22,378 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1528 
        and folder_name = '200706.gli ordini in viola li deve processare nino .upd.2h.ok.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1528, '200706.gli ordini in viola li deve processare nino .upd.2h.ok.molina.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-06 09:30:11', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-07-06 09:30:11', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-06 09:30:11', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:22,383 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\magazzino\200706.gli ordini in viola li deve processare nino .upd.2h.ok.molina.task
2021-01-10 15:29:22,429 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1612 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1612, null, left('gli ordini in viola li deve processare nino ', 150)
            , NULL, convert(datetime, '2020-07-06 00:00:00', 120), convert(datetime, '2020-07-06 09:30:11', 120), 1
            , 'fatto', NULL, 'modifica', 'due_ore');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-07-06 00:00:00', 120), dt_upd = convert(datetime, '2020-07-06 09:30:11', 120)
         , title = left('gli ordini in viola li deve processare nino ', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'modifica', stima = 'due_ore'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-07-06 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-07-06 09:30:11', 120), getdate())
          or isnull(title, '') <> isnull('gli ordini in viola li deve processare nino ', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('modifica', '') or isnull(stima, '') <> isnull('due_ore', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:22,434 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\magazzino\gli ordini in viola li deve processare nino 
2021-01-10 15:29:22,435 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1612 and file_name = 'sql.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1612, 'sql.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-06 09:30:11', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-07-06 09:30:11', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-06 09:30:11', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:22,440 [64] DEBUG dn_lib.tools.log - added file 3879: C:\root\todd\_test\dn\magazzino\200706.gli ordini in viola li deve processare nino .upd.2h.ok.molina.task\sql.sql
2021-01-10 15:29:22,441 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3879;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3879, '.sql', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-06 09:30:11', 120));
2021-01-10 15:29:22,443 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\magazzino\200706.gli ordini in viola li deve processare nino .upd.2h.ok.molina.task\sql.sql'
2021-01-10 15:29:22,444 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1204) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:22,451 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1528 
        and folder_name = '200730.carico dei codici DIP nel pedonale.ok.check.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1528, '200730.carico dei codici DIP nel pedonale.ok.check.molina.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-30 14:10:31', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-07-30 14:10:31', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-30 14:10:31', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:22,456 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\magazzino\200730.carico dei codici DIP nel pedonale.ok.check.molina.task
2021-01-10 15:29:22,487 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1613 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1613, null, left('carico dei codici DIP nel pedonale', 150)
            , NULL, convert(datetime, '2020-07-30 00:00:00', 120), convert(datetime, '2020-07-30 14:10:31', 120), 1
            , 'fatto', NULL, 'controllo', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-07-30 00:00:00', 120), dt_upd = convert(datetime, '2020-07-30 14:10:31', 120)
         , title = left('carico dei codici DIP nel pedonale', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'controllo', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-07-30 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-07-30 14:10:31', 120), getdate())
          or isnull(title, '') <> isnull('carico dei codici DIP nel pedonale', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('controllo', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:22,493 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\magazzino\carico dei codici DIP nel pedonale
2021-01-10 15:29:22,494 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1613 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1613, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-30 14:22:55', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-07-30 14:22:55', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-30 14:22:55', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:22,499 [64] DEBUG dn_lib.tools.log - added file 3880: C:\root\todd\_test\dn\magazzino\200730.carico dei codici DIP nel pedonale.ok.check.molina.task\i.txt
2021-01-10 15:29:22,500 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3880;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3880, '.txt', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-30 14:22:55', 120));
2021-01-10 15:29:22,503 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1205;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1205, 3880, @content
          , convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-30 14:22:55', 120));
2021-01-10 15:29:22,505 [64] DEBUG dn_lib.tools.log - lette note task 1205
2021-01-10 15:29:22,506 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\magazzino\200730.carico dei codici DIP nel pedonale.ok.check.molina.task\i.txt'
2021-01-10 15:29:22,507 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1205) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:22,514 [64] DEBUG dn_lib.tools.log - updated task: C:\root\todd\_test\dn\magazzino\carico dei codici DIP nel pedonale
2021-01-10 15:29:22,515 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1528 
        and folder_name = '201202.mi refreshi il bertello.molina.ok.fix.2h.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1528, '201202.mi refreshi il bertello.molina.ok.fix.2h.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-12-03 11:12:03', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-12-03 11:12:03', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-12-03 11:12:03', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:22,521 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\magazzino\201202.mi refreshi il bertello.molina.ok.fix.2h.task
2021-01-10 15:29:22,563 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1614 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1614, null, left('mi refreshi il bertello', 150)
            , NULL, convert(datetime, '2020-12-02 00:00:00', 120), convert(datetime, '2020-12-03 11:12:03', 120), 1
            , 'fatto', NULL, 'fix', 'due_ore');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-12-02 00:00:00', 120), dt_upd = convert(datetime, '2020-12-03 11:12:03', 120)
         , title = left('mi refreshi il bertello', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = 'due_ore'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-12-02 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-12-03 11:12:03', 120), getdate())
          or isnull(title, '') <> isnull('mi refreshi il bertello', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull('due_ore', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:22,569 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\magazzino\mi refreshi il bertello
2021-01-10 15:29:22,570 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1614 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1614, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-12-03 11:12:03', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-12-03 11:12:03', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-12-03 11:12:03', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:22,574 [64] DEBUG dn_lib.tools.log - added file 3881: C:\root\todd\_test\dn\magazzino\201202.mi refreshi il bertello.molina.ok.fix.2h.task\i.txt
2021-01-10 15:29:22,575 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3881;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3881, '.txt', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-12-03 11:12:03', 120));
2021-01-10 15:29:22,577 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1206;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1206, 3881, @content
          , convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-12-03 11:12:03', 120));
2021-01-10 15:29:22,579 [64] DEBUG dn_lib.tools.log - lette note task 1206
2021-01-10 15:29:22,580 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\magazzino\201202.mi refreshi il bertello.molina.ok.fix.2h.task\i.txt'
2021-01-10 15:29:22,580 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1206) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:22,588 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1528 
        and folder_name = 'gestione nuovo magazzino pallets.ok.new.3g.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1528, 'gestione nuovo magazzino pallets.ok.new.3g.molina.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-08 09:54:15', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-07-08 09:54:15', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-08 09:54:15', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:22,592 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\magazzino\gestione nuovo magazzino pallets.ok.new.3g.molina.task
2021-01-10 15:29:22,664 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1615 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1615, null, left('gestione nuovo magazzino pallets', 150)
            , NULL, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-08 09:54:15', 120), 1
            , 'fatto', NULL, 'aggiunta', 'tre_giorni');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-07-08 09:54:15', 120)
         , title = left('gestione nuovo magazzino pallets', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'aggiunta', stima = 'tre_giorni'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-07-08 09:54:15', 120), getdate())
          or isnull(title, '') <> isnull('gestione nuovo magazzino pallets', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('aggiunta', '') or isnull(stima, '') <> isnull('tre_giorni', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:22,670 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\magazzino\gestione nuovo magazzino pallets
2021-01-10 15:29:22,671 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1615 and file_name = 'dipaQuoteXY_trl2.xlsx';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1615, 'dipaQuoteXY_trl2.xlsx', '.xlsx', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-05-07 16:34:25', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-05-07 16:34:25', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-05-07 16:34:25', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:22,676 [64] DEBUG dn_lib.tools.log - added file 3882: C:\root\todd\_test\dn\magazzino\gestione nuovo magazzino pallets.ok.new.3g.molina.task\dipaQuoteXY_trl2.xlsx
2021-01-10 15:29:22,677 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1615 and file_name = 'patch.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1615, 'patch.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-08 09:26:31', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-07-08 09:26:31', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-08 09:26:31', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:22,682 [64] DEBUG dn_lib.tools.log - added file 3883: C:\root\todd\_test\dn\magazzino\gestione nuovo magazzino pallets.ok.new.3g.molina.task\patch.sql
2021-01-10 15:29:22,683 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3883;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3883, '.sql', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-08 09:26:31', 120));
2021-01-10 15:29:22,686 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\magazzino\gestione nuovo magazzino pallets.ok.new.3g.molina.task\patch.sql'
2021-01-10 15:29:22,687 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1615 and file_name = 'script_bck.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1615, 'script_bck.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-07 12:22:22', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-07-07 12:22:22', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-07 12:22:22', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:22,692 [64] DEBUG dn_lib.tools.log - added file 3884: C:\root\todd\_test\dn\magazzino\gestione nuovo magazzino pallets.ok.new.3g.molina.task\script_bck.sql
2021-01-10 15:29:22,693 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3884;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3884, '.sql', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-07 12:22:22', 120));
2021-01-10 15:29:22,698 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\magazzino\gestione nuovo magazzino pallets.ok.new.3g.molina.task\script_bck.sql'
2021-01-10 15:29:22,699 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1615 and file_name = 'sql.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1615, 'sql.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-08 09:25:31', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-07-08 09:25:31', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-08 09:25:31', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:22,704 [64] DEBUG dn_lib.tools.log - added file 3885: C:\root\todd\_test\dn\magazzino\gestione nuovo magazzino pallets.ok.new.3g.molina.task\sql.sql
2021-01-10 15:29:22,705 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3885;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3885, '.sql', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-08 09:25:31', 120));
2021-01-10 15:29:22,708 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\magazzino\gestione nuovo magazzino pallets.ok.new.3g.molina.task\sql.sql'
2021-01-10 15:29:22,709 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1207) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:22,717 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1528 
        and folder_name = 'stato aggiuntivo casse - semi piena - molto piena.dafare.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1528, 'stato aggiuntivo casse - semi piena - molto piena.dafare.molina.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-15 11:49:05', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-15 11:49:05', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-15 11:49:05', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:22,721 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\magazzino\stato aggiuntivo casse - semi piena - molto piena.dafare.molina.task
2021-01-10 15:29:22,747 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1616 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1616, null, left('stato aggiuntivo casse - semi piena - molto piena', 150)
            , NULL, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-15 11:49:05', 120), 1
            , 'da_fare', NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-15 11:49:05', 120)
         , title = left('stato aggiuntivo casse - semi piena - molto piena', 150), [user] = NULL
         , stato = 'da_fare', priorita = NULL
         , tipo = NULL, stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-15 11:49:05', 120), getdate())
          or isnull(title, '') <> isnull('stato aggiuntivo casse - semi piena - molto piena', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('da_fare', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:22,753 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\magazzino\stato aggiuntivo casse - semi piena - molto piena
2021-01-10 15:29:22,754 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1208) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:22,761 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1528 and file_name = 'bertello - melo refresci.dafare.alta.fix.2h.molina.task.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1528, 'bertello - melo refresci.dafare.alta.fix.2h.molina.task.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-15 11:52:55', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-15 11:52:55', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-15 11:52:55', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:22,766 [64] DEBUG dn_lib.tools.log - added file 3886: C:\root\todd\_test\dn\magazzino\bertello - melo refresci.dafare.alta.fix.2h.molina.task.txt
2021-01-10 15:29:22,766 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3886;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3886, '.txt', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-15 11:52:55', 120));
2021-01-10 15:29:22,769 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\magazzino\bertello - melo refresci.dafare.alta.fix.2h.molina.task.txt'
2021-01-10 15:29:22,820 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 3886;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, null, 3886, left('bertello - melo refresci', 150)
            , NULL, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-15 11:52:55', 120), 1
            , 'da_fare', 'alta', 'fix', 'due_ore');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-15 11:52:55', 120)
         , title = left('bertello - melo refresci', 150), [user] = NULL
         , stato = 'da_fare', priorita = 'alta'
         , tipo = 'fix', stima = 'due_ore'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-15 11:52:55', 120), getdate())
          or isnull(title, '') <> isnull('bertello - melo refresci', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('da_fare', '') or isnull(priorita, '') <> isnull('alta', '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull('due_ore', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:22,826 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\magazzino\bertello - melo refresci
2021-01-10 15:29:22,827 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1209;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1209, 3886, @content
          , convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-15 11:52:55', 120));
2021-01-10 15:29:22,830 [64] DEBUG dn_lib.tools.log - lette note task 1209
2021-01-10 15:29:22,831 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1528 and file_name = 'magazzino inchiodato.ok.check.molina.task.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1528, 'magazzino inchiodato.ok.check.molina.task.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-06 15:23:26', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-07-06 15:23:26', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-06 15:23:26', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:22,837 [64] DEBUG dn_lib.tools.log - added file 3887: C:\root\todd\_test\dn\magazzino\magazzino inchiodato.ok.check.molina.task.sql
2021-01-10 15:29:22,838 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3887;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3887, '.sql', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-06 15:23:26', 120));
2021-01-10 15:29:22,840 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\magazzino\magazzino inchiodato.ok.check.molina.task.sql'
2021-01-10 15:29:22,873 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 3887;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, null, 3887, left('magazzino inchiodato', 150)
            , NULL, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-06 15:23:26', 120), 1
            , 'fatto', NULL, 'controllo', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-07-06 15:23:26', 120)
         , title = left('magazzino inchiodato', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'controllo', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-07-06 15:23:26', 120), getdate())
          or isnull(title, '') <> isnull('magazzino inchiodato', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('controllo', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:22,879 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\magazzino\magazzino inchiodato
2021-01-10 15:29:22,880 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = 'manager';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, 'manager', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-09-21 14:45:58', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-09-21 14:45:58', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-09-21 14:45:58', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:22,882 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\manager
2021-01-10 15:29:22,883 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1617 
        and folder_name = '200921.griglia articoli .molina.ok.new.2h.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1617, '200921.griglia articoli .molina.ok.new.2h.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-09-21 14:46:58', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-09-21 14:46:58', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-09-21 14:46:58', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:22,886 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\manager\200921.griglia articoli .molina.ok.new.2h.task
2021-01-10 15:29:22,924 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1618 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1618, null, left('griglia articoli ', 150)
            , NULL, convert(datetime, '2020-09-21 00:00:00', 120), convert(datetime, '2020-09-21 14:46:58', 120), 1
            , 'fatto', NULL, 'aggiunta', 'due_ore');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-09-21 00:00:00', 120), dt_upd = convert(datetime, '2020-09-21 14:46:58', 120)
         , title = left('griglia articoli ', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'aggiunta', stima = 'due_ore'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-09-21 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-09-21 14:46:58', 120), getdate())
          or isnull(title, '') <> isnull('griglia articoli ', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('aggiunta', '') or isnull(stima, '') <> isnull('due_ore', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:22,929 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\manager\griglia articoli 
2021-01-10 15:29:22,930 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1618 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1618, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-09-21 14:46:58', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-09-21 14:46:58', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-09-21 14:46:58', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:22,935 [64] DEBUG dn_lib.tools.log - added file 3888: C:\root\todd\_test\dn\manager\200921.griglia articoli .molina.ok.new.2h.task\i.txt
2021-01-10 15:29:22,936 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3888;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3888, '.txt', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-09-21 14:46:58', 120));
2021-01-10 15:29:22,938 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1211;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1211, 3888, @content
          , convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-09-21 14:46:58', 120));
2021-01-10 15:29:22,940 [64] DEBUG dn_lib.tools.log - lette note task 1211
2021-01-10 15:29:22,940 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\manager\200921.griglia articoli .molina.ok.new.2h.task\i.txt'
2021-01-10 15:29:22,941 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1211) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:22,947 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1617 
        and folder_name = '20200902.restyling maschera principale.ok.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1617, '20200902.restyling maschera principale.ok.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-09-02 09:19:36', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-09-02 09:19:36', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-09-02 09:19:36', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:22,952 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\manager\20200902.restyling maschera principale.ok.task
2021-01-10 15:29:22,970 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1619 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1619, null, left('restyling maschera principale', 150)
            , NULL, convert(datetime, '2020-09-02 00:00:00', 120), convert(datetime, '2020-09-02 09:19:36', 120), 1
            , 'fatto', NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-09-02 00:00:00', 120), dt_upd = convert(datetime, '2020-09-02 09:19:36', 120)
         , title = left('restyling maschera principale', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = NULL, stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-09-02 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-09-02 09:19:36', 120), getdate())
          or isnull(title, '') <> isnull('restyling maschera principale', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:22,976 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\manager\restyling maschera principale
2021-01-10 15:29:22,977 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1619 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1619, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-09-02 09:19:52', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-09-02 09:19:52', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-09-02 09:19:52', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:22,981 [64] DEBUG dn_lib.tools.log - added file 3889: C:\root\todd\_test\dn\manager\20200902.restyling maschera principale.ok.task\i.txt
2021-01-10 15:29:22,982 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3889;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3889, '.txt', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-09-02 09:19:52', 120));
2021-01-10 15:29:22,985 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1212;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1212, 3889, @content
          , convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-09-02 09:19:52', 120));
2021-01-10 15:29:22,987 [64] DEBUG dn_lib.tools.log - lette note task 1212
2021-01-10 15:29:22,987 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\manager\20200902.restyling maschera principale.ok.task\i.txt'
2021-01-10 15:29:22,988 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1212) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:22,996 [64] DEBUG dn_lib.tools.log - updated task: C:\root\todd\_test\dn\manager\restyling maschera principale
2021-01-10 15:29:22,997 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = 'obelisk';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, 'obelisk', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-12-18 09:42:45', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-12-18 09:42:45', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-12-18 09:42:45', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:23,000 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\obelisk
2021-01-10 15:29:23,000 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1620 
        and folder_name = '200727.impostazione porta com scanner lavorazioni.fix.h.ok.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1620, '200727.impostazione porta com scanner lavorazioni.fix.h.ok.molina.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-27 17:14:56', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-07-27 17:14:56', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-27 17:14:56', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:23,005 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\obelisk\200727.impostazione porta com scanner lavorazioni.fix.h.ok.molina.task
2021-01-10 15:29:23,044 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1621 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1621, null, left('impostazione porta com scanner lavorazioni', 150)
            , NULL, convert(datetime, '2020-07-27 00:00:00', 120), convert(datetime, '2020-07-27 17:14:56', 120), 1
            , 'fatto', NULL, 'fix', 'ora');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-07-27 00:00:00', 120), dt_upd = convert(datetime, '2020-07-27 17:14:56', 120)
         , title = left('impostazione porta com scanner lavorazioni', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = 'ora'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-07-27 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-07-27 17:14:56', 120), getdate())
          or isnull(title, '') <> isnull('impostazione porta com scanner lavorazioni', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull('ora', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:23,050 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\obelisk\impostazione porta com scanner lavorazioni
2021-01-10 15:29:23,051 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1621 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1621, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-27 17:56:33', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-07-27 17:56:33', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-27 17:56:33', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:23,055 [64] DEBUG dn_lib.tools.log - added file 3890: C:\root\todd\_test\dn\obelisk\200727.impostazione porta com scanner lavorazioni.fix.h.ok.molina.task\i.txt
2021-01-10 15:29:23,056 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3890;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3890, '.txt', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-27 17:56:33', 120));
2021-01-10 15:29:23,058 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1213;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1213, 3890, @content
          , convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-27 17:56:33', 120));
2021-01-10 15:29:23,061 [64] DEBUG dn_lib.tools.log - lette note task 1213
2021-01-10 15:29:23,061 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\obelisk\200727.impostazione porta com scanner lavorazioni.fix.h.ok.molina.task\i.txt'
2021-01-10 15:29:23,062 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1213) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:23,070 [64] DEBUG dn_lib.tools.log - updated task: C:\root\todd\_test\dn\obelisk\impostazione porta com scanner lavorazioni
2021-01-10 15:29:23,070 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1620 
        and folder_name = '200728.prodotti compatibili lunghissimi.ok.rev.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1620, '200728.prodotti compatibili lunghissimi.ok.rev.molina.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-28 18:16:04', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-07-28 18:16:04', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-28 18:16:04', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:23,075 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\obelisk\200728.prodotti compatibili lunghissimi.ok.rev.molina.task
2021-01-10 15:29:23,108 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1622 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1622, null, left('prodotti compatibili lunghissimi', 150)
            , NULL, convert(datetime, '2020-07-28 00:00:00', 120), convert(datetime, '2020-07-28 18:16:04', 120), 1
            , 'fatto', NULL, 'revisione', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-07-28 00:00:00', 120), dt_upd = convert(datetime, '2020-07-28 18:16:04', 120)
         , title = left('prodotti compatibili lunghissimi', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'revisione', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-07-28 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-07-28 18:16:04', 120), getdate())
          or isnull(title, '') <> isnull('prodotti compatibili lunghissimi', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('revisione', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:23,115 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\obelisk\prodotti compatibili lunghissimi
2021-01-10 15:29:23,116 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1622 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1622, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-28 18:16:04', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-07-28 18:16:04', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-28 18:16:04', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:23,121 [64] DEBUG dn_lib.tools.log - added file 3891: C:\root\todd\_test\dn\obelisk\200728.prodotti compatibili lunghissimi.ok.rev.molina.task\i.txt
2021-01-10 15:29:23,122 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3891;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3891, '.txt', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-28 18:16:04', 120));
2021-01-10 15:29:23,125 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1214;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1214, 3891, @content
          , convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-28 18:16:04', 120));
2021-01-10 15:29:23,127 [64] DEBUG dn_lib.tools.log - lette note task 1214
2021-01-10 15:29:23,128 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\obelisk\200728.prodotti compatibili lunghissimi.ok.rev.molina.task\i.txt'
2021-01-10 15:29:23,129 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1214) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:23,136 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1620 
        and folder_name = '200731.sistemata alla griglia del fatturato - non si vedono i totali.ok.fix.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1620, '200731.sistemata alla griglia del fatturato - non si vedono i totali.ok.fix.molina.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-31 16:40:38', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-07-31 16:40:38', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-31 16:40:38', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:23,140 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\obelisk\200731.sistemata alla griglia del fatturato - non si vedono i totali.ok.fix.molina.task
2021-01-10 15:29:23,174 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1623 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1623, null, left('sistemata alla griglia del fatturato - non si vedono i totali', 150)
            , NULL, convert(datetime, '2020-07-31 00:00:00', 120), convert(datetime, '2020-07-31 16:40:38', 120), 1
            , 'fatto', NULL, 'fix', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-07-31 00:00:00', 120), dt_upd = convert(datetime, '2020-07-31 16:40:38', 120)
         , title = left('sistemata alla griglia del fatturato - non si vedono i totali', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-07-31 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-07-31 16:40:38', 120), getdate())
          or isnull(title, '') <> isnull('sistemata alla griglia del fatturato - non si vedono i totali', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:23,180 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\obelisk\sistemata alla griglia del fatturato - non si vedono i totali
2021-01-10 15:29:23,181 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1215) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:23,188 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1620 
        and folder_name = '200821.aggiunta marca alle info prodotto.molina.ok.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1620, '200821.aggiunta marca alle info prodotto.molina.ok.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-21 16:58:58', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-08-21 16:58:58', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-21 16:58:58', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:23,192 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\obelisk\200821.aggiunta marca alle info prodotto.molina.ok.task
2021-01-10 15:29:23,219 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1624 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1624, null, left('aggiunta marca alle info prodotto', 150)
            , NULL, convert(datetime, '2020-08-21 00:00:00', 120), convert(datetime, '2020-08-21 16:58:58', 120), 1
            , 'fatto', NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-08-21 00:00:00', 120), dt_upd = convert(datetime, '2020-08-21 16:58:58', 120)
         , title = left('aggiunta marca alle info prodotto', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = NULL, stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-08-21 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-08-21 16:58:58', 120), getdate())
          or isnull(title, '') <> isnull('aggiunta marca alle info prodotto', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:23,224 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\obelisk\aggiunta marca alle info prodotto
2021-01-10 15:29:23,225 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1216) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:23,233 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1620 
        and folder_name = '200821.tab cross per gestione aggiunta (o eliminazione) cross.ok.molina.new.h.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1620, '200821.tab cross per gestione aggiunta (o eliminazione) cross.ok.molina.new.h.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-24 12:33:07', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-08-24 12:33:07', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-24 12:33:07', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:23,238 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\obelisk\200821.tab cross per gestione aggiunta (o eliminazione) cross.ok.molina.new.h.task
2021-01-10 15:29:23,280 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1625 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1625, null, left('tab cross per gestione aggiunta (o eliminazione) cross', 150)
            , NULL, convert(datetime, '2020-08-21 00:00:00', 120), convert(datetime, '2020-08-24 12:33:07', 120), 1
            , 'fatto', NULL, 'aggiunta', 'ora');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-08-21 00:00:00', 120), dt_upd = convert(datetime, '2020-08-24 12:33:07', 120)
         , title = left('tab cross per gestione aggiunta (o eliminazione) cross', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'aggiunta', stima = 'ora'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-08-21 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-08-24 12:33:07', 120), getdate())
          or isnull(title, '') <> isnull('tab cross per gestione aggiunta (o eliminazione) cross', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('aggiunta', '') or isnull(stima, '') <> isnull('ora', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:23,286 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\obelisk\tab cross per gestione aggiunta (o eliminazione) cross
2021-01-10 15:29:23,287 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1625 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1625, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-26 18:19:07', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-08-26 18:19:07', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-26 18:19:07', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:23,291 [64] DEBUG dn_lib.tools.log - added file 3892: C:\root\todd\_test\dn\obelisk\200821.tab cross per gestione aggiunta (o eliminazione) cross.ok.molina.new.h.task\i.txt
2021-01-10 15:29:23,292 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3892;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3892, '.txt', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-26 18:19:07', 120));
2021-01-10 15:29:23,294 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1217;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1217, 3892, @content
          , convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-26 18:19:07', 120));
2021-01-10 15:29:23,296 [64] DEBUG dn_lib.tools.log - lette note task 1217
2021-01-10 15:29:23,297 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\obelisk\200821.tab cross per gestione aggiunta (o eliminazione) cross.ok.molina.new.h.task\i.txt'
2021-01-10 15:29:23,300 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1625 and file_name = 'sql.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1625, 'sql.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-24 12:33:07', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-08-24 12:33:07', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-24 12:33:07', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:23,305 [64] DEBUG dn_lib.tools.log - added file 3893: C:\root\todd\_test\dn\obelisk\200821.tab cross per gestione aggiunta (o eliminazione) cross.ok.molina.new.h.task\sql.sql
2021-01-10 15:29:23,306 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3893;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3893, '.sql', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-24 12:33:07', 120));
2021-01-10 15:29:23,309 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\obelisk\200821.tab cross per gestione aggiunta (o eliminazione) cross.ok.molina.new.h.task\sql.sql'
2021-01-10 15:29:23,310 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1217) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:23,317 [64] DEBUG dn_lib.tools.log - updated task: C:\root\todd\_test\dn\obelisk\tab cross per gestione aggiunta (o eliminazione) cross
2021-01-10 15:29:23,318 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1620 
        and folder_name = '200825.aggiornamento numero K.ok.easy.h.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1620, '200825.aggiornamento numero K.ok.easy.h.molina.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-25 09:06:14', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-08-25 09:06:14', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-25 09:06:14', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:23,323 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\obelisk\200825.aggiornamento numero K.ok.easy.h.molina.task
2021-01-10 15:29:23,363 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1626 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1626, null, left('aggiornamento numero K', 150)
            , NULL, convert(datetime, '2020-08-25 00:00:00', 120), convert(datetime, '2020-08-25 09:06:14', 120), 1
            , 'fatto', NULL, 'facile', 'ora');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-08-25 00:00:00', 120), dt_upd = convert(datetime, '2020-08-25 09:06:14', 120)
         , title = left('aggiornamento numero K', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'facile', stima = 'ora'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-08-25 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-08-25 09:06:14', 120), getdate())
          or isnull(title, '') <> isnull('aggiornamento numero K', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('facile', '') or isnull(stima, '') <> isnull('ora', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:23,369 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\obelisk\aggiornamento numero K
2021-01-10 15:29:23,370 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1626 and file_name = 'sql.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1626, 'sql.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-25 09:06:14', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-08-25 09:06:14', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-25 09:06:14', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:23,374 [64] DEBUG dn_lib.tools.log - added file 3894: C:\root\todd\_test\dn\obelisk\200825.aggiornamento numero K.ok.easy.h.molina.task\sql.sql
2021-01-10 15:29:23,375 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3894;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3894, '.sql', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-25 09:06:14', 120));
2021-01-10 15:29:23,378 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\obelisk\200825.aggiornamento numero K.ok.easy.h.molina.task\sql.sql'
2021-01-10 15:29:23,379 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1218) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:23,386 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1620 
        and folder_name = '200828.revisione ricerca prodotti.molina.ok.rev.h.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1620, '200828.revisione ricerca prodotti.molina.ok.rev.h.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-28 08:46:37', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-08-28 08:46:37', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-28 08:46:37', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:23,391 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\obelisk\200828.revisione ricerca prodotti.molina.ok.rev.h.task
2021-01-10 15:29:23,434 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1627 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1627, null, left('revisione ricerca prodotti', 150)
            , NULL, convert(datetime, '2020-08-28 00:00:00', 120), convert(datetime, '2020-08-28 08:46:37', 120), 1
            , 'fatto', NULL, 'revisione', 'ora');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-08-28 00:00:00', 120), dt_upd = convert(datetime, '2020-08-28 08:46:37', 120)
         , title = left('revisione ricerca prodotti', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'revisione', stima = 'ora'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-08-28 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-08-28 08:46:37', 120), getdate())
          or isnull(title, '') <> isnull('revisione ricerca prodotti', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('revisione', '') or isnull(stima, '') <> isnull('ora', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:23,440 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\obelisk\revisione ricerca prodotti
2021-01-10 15:29:23,441 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1627 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1627, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-31 14:50:37', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-08-31 14:50:37', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-31 14:50:37', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:23,445 [64] DEBUG dn_lib.tools.log - added file 3895: C:\root\todd\_test\dn\obelisk\200828.revisione ricerca prodotti.molina.ok.rev.h.task\i.txt
2021-01-10 15:29:23,446 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3895;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3895, '.txt', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-31 14:50:37', 120));
2021-01-10 15:29:23,449 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1219;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1219, 3895, @content
          , convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-31 14:50:37', 120));
2021-01-10 15:29:23,451 [64] DEBUG dn_lib.tools.log - lette note task 1219
2021-01-10 15:29:23,451 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\obelisk\200828.revisione ricerca prodotti.molina.ok.rev.h.task\i.txt'
2021-01-10 15:29:23,452 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1219) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:23,459 [64] DEBUG dn_lib.tools.log - updated task: C:\root\todd\_test\dn\obelisk\revisione ricerca prodotti
2021-01-10 15:29:23,460 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1620 
        and folder_name = '200831.aggiunta ordinamento ricerca prodotti.molina.ok.upd.mh.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1620, '200831.aggiunta ordinamento ricerca prodotti.molina.ok.upd.mh.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-31 18:31:51', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-08-31 18:31:51', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-31 18:31:51', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:23,464 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\obelisk\200831.aggiunta ordinamento ricerca prodotti.molina.ok.upd.mh.task
2021-01-10 15:29:23,502 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1628 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1628, null, left('aggiunta ordinamento ricerca prodotti', 150)
            , NULL, convert(datetime, '2020-08-31 00:00:00', 120), convert(datetime, '2020-08-31 18:31:51', 120), 1
            , 'fatto', NULL, 'modifica', 'mezzora');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-08-31 00:00:00', 120), dt_upd = convert(datetime, '2020-08-31 18:31:51', 120)
         , title = left('aggiunta ordinamento ricerca prodotti', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'modifica', stima = 'mezzora'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-08-31 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-08-31 18:31:51', 120), getdate())
          or isnull(title, '') <> isnull('aggiunta ordinamento ricerca prodotti', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('modifica', '') or isnull(stima, '') <> isnull('mezzora', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:23,508 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\obelisk\aggiunta ordinamento ricerca prodotti
2021-01-10 15:29:23,509 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1628 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1628, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-31 18:31:51', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-08-31 18:31:51', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-31 18:31:51', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:23,513 [64] DEBUG dn_lib.tools.log - added file 3896: C:\root\todd\_test\dn\obelisk\200831.aggiunta ordinamento ricerca prodotti.molina.ok.upd.mh.task\i.txt
2021-01-10 15:29:23,514 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3896;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3896, '.txt', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-31 18:31:51', 120));
2021-01-10 15:29:23,516 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1220;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1220, 3896, @content
          , convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-31 18:31:51', 120));
2021-01-10 15:29:23,518 [64] DEBUG dn_lib.tools.log - lette note task 1220
2021-01-10 15:29:23,519 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\obelisk\200831.aggiunta ordinamento ricerca prodotti.molina.ok.upd.mh.task\i.txt'
2021-01-10 15:29:23,519 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1220) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:23,527 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1620 
        and folder_name = '200903.aggiunta colonna nota operatore.molina.ok.easy.h.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1620, '200903.aggiunta colonna nota operatore.molina.ok.easy.h.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-09-03 12:11:52', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-09-03 12:11:52', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-09-03 12:11:52', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:23,531 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\obelisk\200903.aggiunta colonna nota operatore.molina.ok.easy.h.task
2021-01-10 15:29:23,574 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1629 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1629, null, left('aggiunta colonna nota operatore', 150)
            , NULL, convert(datetime, '2020-09-03 00:00:00', 120), convert(datetime, '2020-09-03 12:11:52', 120), 1
            , 'fatto', NULL, 'facile', 'ora');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-09-03 00:00:00', 120), dt_upd = convert(datetime, '2020-09-03 12:11:52', 120)
         , title = left('aggiunta colonna nota operatore', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'facile', stima = 'ora'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-09-03 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-09-03 12:11:52', 120), getdate())
          or isnull(title, '') <> isnull('aggiunta colonna nota operatore', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('facile', '') or isnull(stima, '') <> isnull('ora', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:23,579 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\obelisk\aggiunta colonna nota operatore
2021-01-10 15:29:23,581 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1629 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1629, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-09-03 12:11:52', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-09-03 12:11:52', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-09-03 12:11:52', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:23,585 [64] DEBUG dn_lib.tools.log - added file 3897: C:\root\todd\_test\dn\obelisk\200903.aggiunta colonna nota operatore.molina.ok.easy.h.task\i.txt
2021-01-10 15:29:23,586 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3897;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3897, '.txt', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-09-03 12:11:52', 120));
2021-01-10 15:29:23,588 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1221;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1221, 3897, @content
          , convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-09-03 12:11:52', 120));
2021-01-10 15:29:23,590 [64] DEBUG dn_lib.tools.log - lette note task 1221
2021-01-10 15:29:23,591 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\obelisk\200903.aggiunta colonna nota operatore.molina.ok.easy.h.task\i.txt'
2021-01-10 15:29:23,592 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1221) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:23,599 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1620 
        and folder_name = '200903.revisione cross segnalati.molina.ok.rev.h.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1620, '200903.revisione cross segnalati.molina.ok.rev.h.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-09-03 17:52:02', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-09-03 17:52:02', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-09-03 17:52:02', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:23,603 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\obelisk\200903.revisione cross segnalati.molina.ok.rev.h.task
2021-01-10 15:29:23,645 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1630 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1630, null, left('revisione cross segnalati', 150)
            , NULL, convert(datetime, '2020-09-03 00:00:00', 120), convert(datetime, '2020-09-03 17:52:02', 120), 1
            , 'fatto', NULL, 'revisione', 'ora');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-09-03 00:00:00', 120), dt_upd = convert(datetime, '2020-09-03 17:52:02', 120)
         , title = left('revisione cross segnalati', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'revisione', stima = 'ora'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-09-03 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-09-03 17:52:02', 120), getdate())
          or isnull(title, '') <> isnull('revisione cross segnalati', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('revisione', '') or isnull(stima, '') <> isnull('ora', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:23,651 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\obelisk\revisione cross segnalati
2021-01-10 15:29:23,652 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1630 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1630, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-09-03 17:52:02', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-09-03 17:52:02', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-09-03 17:52:02', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:23,657 [64] DEBUG dn_lib.tools.log - added file 3898: C:\root\todd\_test\dn\obelisk\200903.revisione cross segnalati.molina.ok.rev.h.task\i.txt
2021-01-10 15:29:23,658 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3898;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3898, '.txt', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-09-03 17:52:02', 120));
2021-01-10 15:29:23,660 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1222;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1222, 3898, @content
          , convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-09-03 17:52:02', 120));
2021-01-10 15:29:23,662 [64] DEBUG dn_lib.tools.log - lette note task 1222
2021-01-10 15:29:23,663 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\obelisk\200903.revisione cross segnalati.molina.ok.rev.h.task\i.txt'
2021-01-10 15:29:23,663 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1222) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:23,671 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1620 
        and folder_name = '200914.Made in PRC sulle etichette.molina.ok.new.2h.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1620, '200914.Made in PRC sulle etichette.molina.ok.new.2h.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-09-14 15:43:16', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-09-14 15:43:16', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-09-14 15:43:16', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:23,676 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\obelisk\200914.Made in PRC sulle etichette.molina.ok.new.2h.task
2021-01-10 15:29:23,718 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1631 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1631, null, left('Made in PRC sulle etichette', 150)
            , NULL, convert(datetime, '2020-09-14 00:00:00', 120), convert(datetime, '2020-09-14 15:43:16', 120), 1
            , 'fatto', NULL, 'aggiunta', 'due_ore');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-09-14 00:00:00', 120), dt_upd = convert(datetime, '2020-09-14 15:43:16', 120)
         , title = left('Made in PRC sulle etichette', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'aggiunta', stima = 'due_ore'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-09-14 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-09-14 15:43:16', 120), getdate())
          or isnull(title, '') <> isnull('Made in PRC sulle etichette', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('aggiunta', '') or isnull(stima, '') <> isnull('due_ore', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:23,724 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\obelisk\Made in PRC sulle etichette
2021-01-10 15:29:23,725 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1631 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1631, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-09-14 15:43:16', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-09-14 15:43:16', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-09-14 15:43:16', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:23,729 [64] DEBUG dn_lib.tools.log - added file 3899: C:\root\todd\_test\dn\obelisk\200914.Made in PRC sulle etichette.molina.ok.new.2h.task\i.txt
2021-01-10 15:29:23,730 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3899;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3899, '.txt', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-09-14 15:43:16', 120));
2021-01-10 15:29:23,732 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1223;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1223, 3899, @content
          , convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-09-14 15:43:16', 120));
2021-01-10 15:29:23,734 [64] DEBUG dn_lib.tools.log - lette note task 1223
2021-01-10 15:29:23,735 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\obelisk\200914.Made in PRC sulle etichette.molina.ok.new.2h.task\i.txt'
2021-01-10 15:29:23,735 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1631 and file_name = 'sql.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1631, 'sql.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-09-14 13:54:13', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-09-14 13:54:13', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-09-14 13:54:13', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:23,740 [64] DEBUG dn_lib.tools.log - added file 3900: C:\root\todd\_test\dn\obelisk\200914.Made in PRC sulle etichette.molina.ok.new.2h.task\sql.sql
2021-01-10 15:29:23,740 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3900;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3900, '.sql', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-09-14 13:54:13', 120));
2021-01-10 15:29:23,743 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\obelisk\200914.Made in PRC sulle etichette.molina.ok.new.2h.task\sql.sql'
2021-01-10 15:29:23,744 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1223) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:23,751 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1620 
        and folder_name = '200917.aggiunta DEVONO ARRIVARE al tooltip.molina.ok.fix.mh.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1620, '200917.aggiunta DEVONO ARRIVARE al tooltip.molina.ok.fix.mh.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-09-17 14:37:16', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-09-17 14:37:16', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-09-17 14:37:16', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:23,756 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\obelisk\200917.aggiunta DEVONO ARRIVARE al tooltip.molina.ok.fix.mh.task
2021-01-10 15:29:23,797 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1632 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1632, null, left('aggiunta DEVONO ARRIVARE al tooltip', 150)
            , NULL, convert(datetime, '2020-09-17 00:00:00', 120), convert(datetime, '2020-09-17 14:37:16', 120), 1
            , 'fatto', NULL, 'fix', 'mezzora');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-09-17 00:00:00', 120), dt_upd = convert(datetime, '2020-09-17 14:37:16', 120)
         , title = left('aggiunta DEVONO ARRIVARE al tooltip', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = 'mezzora'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-09-17 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-09-17 14:37:16', 120), getdate())
          or isnull(title, '') <> isnull('aggiunta DEVONO ARRIVARE al tooltip', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull('mezzora', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:23,802 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\obelisk\aggiunta DEVONO ARRIVARE al tooltip
2021-01-10 15:29:23,803 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1224) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:23,810 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1620 
        and folder_name = '200921.ricerca clienti web.molina.ok.rev.2h.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1620, '200921.ricerca clienti web.molina.ok.rev.2h.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-09-21 17:43:14', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-09-21 17:43:14', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-09-21 17:43:14', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:23,815 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\obelisk\200921.ricerca clienti web.molina.ok.rev.2h.task
2021-01-10 15:29:23,858 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1633 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1633, null, left('ricerca clienti web', 150)
            , NULL, convert(datetime, '2020-09-21 00:00:00', 120), convert(datetime, '2020-09-21 17:43:14', 120), 1
            , 'fatto', NULL, 'revisione', 'due_ore');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-09-21 00:00:00', 120), dt_upd = convert(datetime, '2020-09-21 17:43:14', 120)
         , title = left('ricerca clienti web', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'revisione', stima = 'due_ore'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-09-21 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-09-21 17:43:14', 120), getdate())
          or isnull(title, '') <> isnull('ricerca clienti web', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('revisione', '') or isnull(stima, '') <> isnull('due_ore', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:23,864 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\obelisk\ricerca clienti web
2021-01-10 15:29:23,865 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1633 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1633, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-09-21 17:43:14', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-09-21 17:43:14', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-09-21 17:43:14', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:23,869 [64] DEBUG dn_lib.tools.log - added file 3901: C:\root\todd\_test\dn\obelisk\200921.ricerca clienti web.molina.ok.rev.2h.task\i.txt
2021-01-10 15:29:23,870 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3901;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3901, '.txt', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-09-21 17:43:14', 120));
2021-01-10 15:29:23,872 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1225;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1225, 3901, @content
          , convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-09-21 17:43:14', 120));
2021-01-10 15:29:23,874 [64] DEBUG dn_lib.tools.log - lette note task 1225
2021-01-10 15:29:23,875 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\obelisk\200921.ricerca clienti web.molina.ok.rev.2h.task\i.txt'
2021-01-10 15:29:23,876 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1225) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:23,883 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1620 
        and folder_name = '200922.codici CA in obelisk.molina.ok.new.mg.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1620, '200922.codici CA in obelisk.molina.ok.new.mg.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-09-22 13:54:51', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-09-22 13:54:51', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-09-22 13:54:51', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:23,887 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\obelisk\200922.codici CA in obelisk.molina.ok.new.mg.task
2021-01-10 15:29:23,927 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1634 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1634, null, left('codici CA in obelisk', 150)
            , NULL, convert(datetime, '2020-09-22 00:00:00', 120), convert(datetime, '2020-09-22 13:54:51', 120), 1
            , 'fatto', NULL, 'aggiunta', 'mezza');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-09-22 00:00:00', 120), dt_upd = convert(datetime, '2020-09-22 13:54:51', 120)
         , title = left('codici CA in obelisk', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'aggiunta', stima = 'mezza'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-09-22 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-09-22 13:54:51', 120), getdate())
          or isnull(title, '') <> isnull('codici CA in obelisk', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('aggiunta', '') or isnull(stima, '') <> isnull('mezza', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:23,932 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\obelisk\codici CA in obelisk
2021-01-10 15:29:23,933 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1634 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1634, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-09-22 13:54:51', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-09-22 13:54:51', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-09-22 13:54:51', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:23,938 [64] DEBUG dn_lib.tools.log - added file 3902: C:\root\todd\_test\dn\obelisk\200922.codici CA in obelisk.molina.ok.new.mg.task\i.txt
2021-01-10 15:29:23,939 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3902;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3902, '.txt', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-09-22 13:54:51', 120));
2021-01-10 15:29:23,941 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1226;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1226, 3902, @content
          , convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-09-22 13:54:51', 120));
2021-01-10 15:29:23,943 [64] DEBUG dn_lib.tools.log - lette note task 1226
2021-01-10 15:29:23,944 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\obelisk\200922.codici CA in obelisk.molina.ok.new.mg.task\i.txt'
2021-01-10 15:29:23,944 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1226) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:23,952 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1620 
        and folder_name = '200930.stampa pdf con acrobat.molina.ok.fix.2h.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1620, '200930.stampa pdf con acrobat.molina.ok.fix.2h.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-09-30 15:44:59', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-09-30 15:44:59', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-09-30 15:44:59', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:23,957 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\obelisk\200930.stampa pdf con acrobat.molina.ok.fix.2h.task
2021-01-10 15:29:24,000 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1635 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1635, null, left('stampa pdf con acrobat', 150)
            , NULL, convert(datetime, '2020-09-30 00:00:00', 120), convert(datetime, '2020-09-30 15:44:59', 120), 1
            , 'fatto', NULL, 'fix', 'due_ore');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-09-30 00:00:00', 120), dt_upd = convert(datetime, '2020-09-30 15:44:59', 120)
         , title = left('stampa pdf con acrobat', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = 'due_ore'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-09-30 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-09-30 15:44:59', 120), getdate())
          or isnull(title, '') <> isnull('stampa pdf con acrobat', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull('due_ore', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:24,005 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\obelisk\stampa pdf con acrobat
2021-01-10 15:29:24,006 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1227) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:24,013 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1620 
        and folder_name = '201027.ricerca prodotti per marca - modello - versione.molina.incompleta.new.mg.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1620, '201027.ricerca prodotti per marca - modello - versione.molina.incompleta.new.mg.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-28 16:13:30', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-10-28 16:13:30', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-28 16:13:30', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:24,017 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\obelisk\201027.ricerca prodotti per marca - modello - versione.molina.incompleta.new.mg.task
2021-01-10 15:29:24,057 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1636 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1636, null, left('ricerca prodotti per marca - modello - versione', 150)
            , NULL, convert(datetime, '2020-10-27 00:00:00', 120), convert(datetime, '2020-10-28 16:13:30', 120), 1
            , 'incompleto', NULL, 'aggiunta', 'mezza');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-10-27 00:00:00', 120), dt_upd = convert(datetime, '2020-10-28 16:13:30', 120)
         , title = left('ricerca prodotti per marca - modello - versione', 150), [user] = NULL
         , stato = 'incompleto', priorita = NULL
         , tipo = 'aggiunta', stima = 'mezza'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-10-27 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-10-28 16:13:30', 120), getdate())
          or isnull(title, '') <> isnull('ricerca prodotti per marca - modello - versione', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('incompleto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('aggiunta', '') or isnull(stima, '') <> isnull('mezza', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:24,063 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\obelisk\ricerca prodotti per marca - modello - versione
2021-01-10 15:29:24,064 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1636 and file_name = 'ComboBoxClienti.cs';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1636, 'ComboBoxClienti.cs', '.cs', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-27 17:47:51', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-10-27 17:47:51', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-27 17:47:51', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:24,069 [64] DEBUG dn_lib.tools.log - added file 3903: C:\root\todd\_test\dn\obelisk\201027.ricerca prodotti per marca - modello - versione.molina.incompleta.new.mg.task\ComboBoxClienti.cs
2021-01-10 15:29:24,070 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3903;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3903, '.cs', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-27 17:47:51', 120));
2021-01-10 15:29:24,073 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\obelisk\201027.ricerca prodotti per marca - modello - versione.molina.incompleta.new.mg.task\ComboBoxClienti.cs'
2021-01-10 15:29:24,074 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1636 and file_name = 'ComboBoxMarche.cs';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1636, 'ComboBoxMarche.cs', '.cs', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-28 15:36:59', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-10-28 15:36:59', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-28 15:36:59', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:24,078 [64] DEBUG dn_lib.tools.log - added file 3904: C:\root\todd\_test\dn\obelisk\201027.ricerca prodotti per marca - modello - versione.molina.incompleta.new.mg.task\ComboBoxMarche.cs
2021-01-10 15:29:24,079 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3904;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3904, '.cs', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-28 15:36:59', 120));
2021-01-10 15:29:24,082 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\obelisk\201027.ricerca prodotti per marca - modello - versione.molina.incompleta.new.mg.task\ComboBoxMarche.cs'
2021-01-10 15:29:24,082 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1636 and file_name = 'ComboBoxModelli.cs';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1636, 'ComboBoxModelli.cs', '.cs', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-28 15:59:26', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-10-28 15:59:26', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-28 15:59:26', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:24,087 [64] DEBUG dn_lib.tools.log - added file 3905: C:\root\todd\_test\dn\obelisk\201027.ricerca prodotti per marca - modello - versione.molina.incompleta.new.mg.task\ComboBoxModelli.cs
2021-01-10 15:29:24,089 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3905;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3905, '.cs', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-28 15:59:26', 120));
2021-01-10 15:29:24,091 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\obelisk\201027.ricerca prodotti per marca - modello - versione.molina.incompleta.new.mg.task\ComboBoxModelli.cs'
2021-01-10 15:29:24,093 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1636 and file_name = 'ComboBoxSpecial.cs';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1636, 'ComboBoxSpecial.cs', '.cs', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-28 15:48:58', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-10-28 15:48:58', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-28 15:48:58', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:24,098 [64] DEBUG dn_lib.tools.log - added file 3906: C:\root\todd\_test\dn\obelisk\201027.ricerca prodotti per marca - modello - versione.molina.incompleta.new.mg.task\ComboBoxSpecial.cs
2021-01-10 15:29:24,099 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3906;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3906, '.cs', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-28 15:48:58', 120));
2021-01-10 15:29:24,102 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\obelisk\201027.ricerca prodotti per marca - modello - versione.molina.incompleta.new.mg.task\ComboBoxSpecial.cs'
2021-01-10 15:29:24,103 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1636 and file_name = 'ComboBoxVersioni.cs';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1636, 'ComboBoxVersioni.cs', '.cs', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-28 16:04:19', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-10-28 16:04:19', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-28 16:04:19', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:24,109 [64] DEBUG dn_lib.tools.log - added file 3907: C:\root\todd\_test\dn\obelisk\201027.ricerca prodotti per marca - modello - versione.molina.incompleta.new.mg.task\ComboBoxVersioni.cs
2021-01-10 15:29:24,110 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3907;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3907, '.cs', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-28 16:04:19', 120));
2021-01-10 15:29:24,114 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\obelisk\201027.ricerca prodotti per marca - modello - versione.molina.incompleta.new.mg.task\ComboBoxVersioni.cs'
2021-01-10 15:29:24,115 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1636 and file_name = 'FormMain.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1636, 'FormMain.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-28 16:13:34', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-10-28 16:13:34', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-28 16:13:34', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:24,120 [64] DEBUG dn_lib.tools.log - added file 3908: C:\root\todd\_test\dn\obelisk\201027.ricerca prodotti per marca - modello - versione.molina.incompleta.new.mg.task\FormMain.txt
2021-01-10 15:29:24,121 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3908;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3908, '.txt', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-28 16:13:34', 120));
2021-01-10 15:29:24,124 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\obelisk\201027.ricerca prodotti per marca - modello - versione.molina.incompleta.new.mg.task\FormMain.txt'
2021-01-10 15:29:24,125 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1636 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1636, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-28 17:21:30', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-10-28 17:21:30', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-28 17:21:30', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:24,131 [64] DEBUG dn_lib.tools.log - added file 3909: C:\root\todd\_test\dn\obelisk\201027.ricerca prodotti per marca - modello - versione.molina.incompleta.new.mg.task\i.txt
2021-01-10 15:29:24,132 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3909;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3909, '.txt', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-28 17:21:30', 120));
2021-01-10 15:29:24,135 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1228;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1228, 3909, @content
          , convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-28 17:21:30', 120));
2021-01-10 15:29:24,138 [64] DEBUG dn_lib.tools.log - lette note task 1228
2021-01-10 15:29:24,139 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\obelisk\201027.ricerca prodotti per marca - modello - versione.molina.incompleta.new.mg.task\i.txt'
2021-01-10 15:29:24,140 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1636 and file_name = 'marca.cs';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1636, 'marca.cs', '.cs', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-28 15:42:07', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-10-28 15:42:07', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-28 15:42:07', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:24,147 [64] DEBUG dn_lib.tools.log - added file 3910: C:\root\todd\_test\dn\obelisk\201027.ricerca prodotti per marca - modello - versione.molina.incompleta.new.mg.task\marca.cs
2021-01-10 15:29:24,148 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3910;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3910, '.cs', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-28 15:42:07', 120));
2021-01-10 15:29:24,151 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\obelisk\201027.ricerca prodotti per marca - modello - versione.molina.incompleta.new.mg.task\marca.cs'
2021-01-10 15:29:24,152 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1636 and file_name = 'modello.cs';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1636, 'modello.cs', '.cs', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-28 16:01:37', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-10-28 16:01:37', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-28 16:01:37', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:24,158 [64] DEBUG dn_lib.tools.log - added file 3911: C:\root\todd\_test\dn\obelisk\201027.ricerca prodotti per marca - modello - versione.molina.incompleta.new.mg.task\modello.cs
2021-01-10 15:29:24,160 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3911;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3911, '.cs', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-28 16:01:37', 120));
2021-01-10 15:29:24,163 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\obelisk\201027.ricerca prodotti per marca - modello - versione.molina.incompleta.new.mg.task\modello.cs'
2021-01-10 15:29:24,164 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1636 and file_name = 'refresh.crm.export-car-parts.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1636, 'refresh.crm.export-car-parts.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-28 12:03:52', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-10-28 12:03:52', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-28 12:03:52', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:24,170 [64] DEBUG dn_lib.tools.log - added file 3912: C:\root\todd\_test\dn\obelisk\201027.ricerca prodotti per marca - modello - versione.molina.incompleta.new.mg.task\refresh.crm.export-car-parts.sql
2021-01-10 15:29:24,172 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3912;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3912, '.sql', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-28 12:03:52', 120));
2021-01-10 15:29:24,174 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\obelisk\201027.ricerca prodotti per marca - modello - versione.molina.incompleta.new.mg.task\refresh.crm.export-car-parts.sql'
2021-01-10 15:29:24,175 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1636 and file_name = 'refresh.crm.export-td-defs.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1636, 'refresh.crm.export-td-defs.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-27 16:49:25', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-10-27 16:49:25', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-27 16:49:25', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:24,181 [64] DEBUG dn_lib.tools.log - added file 3913: C:\root\todd\_test\dn\obelisk\201027.ricerca prodotti per marca - modello - versione.molina.incompleta.new.mg.task\refresh.crm.export-td-defs.sql
2021-01-10 15:29:24,182 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3913;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3913, '.sql', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-27 16:49:25', 120));
2021-01-10 15:29:24,185 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\obelisk\201027.ricerca prodotti per marca - modello - versione.molina.incompleta.new.mg.task\refresh.crm.export-td-defs.sql'
2021-01-10 15:29:24,185 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1636 and file_name = 'task.ricerca per marca.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1636, 'task.ricerca per marca.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-28 16:12:15', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-10-28 16:12:15', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-28 16:12:15', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:24,190 [64] DEBUG dn_lib.tools.log - added file 3914: C:\root\todd\_test\dn\obelisk\201027.ricerca prodotti per marca - modello - versione.molina.incompleta.new.mg.task\task.ricerca per marca.sql
2021-01-10 15:29:24,191 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3914;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3914, '.sql', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-28 16:12:15', 120));
2021-01-10 15:29:24,195 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\obelisk\201027.ricerca prodotti per marca - modello - versione.molina.incompleta.new.mg.task\task.ricerca per marca.sql'
2021-01-10 15:29:24,196 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1636 and file_name = 'versione.cs';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1636, 'versione.cs', '.cs', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-28 16:02:32', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-10-28 16:02:32', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-28 16:02:32', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:24,200 [64] DEBUG dn_lib.tools.log - added file 3915: C:\root\todd\_test\dn\obelisk\201027.ricerca prodotti per marca - modello - versione.molina.incompleta.new.mg.task\versione.cs
2021-01-10 15:29:24,202 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3915;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3915, '.cs', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-28 16:02:32', 120));
2021-01-10 15:29:24,205 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\obelisk\201027.ricerca prodotti per marca - modello - versione.molina.incompleta.new.mg.task\versione.cs'
2021-01-10 15:29:24,205 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1228) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:24,212 [64] DEBUG dn_lib.tools.log - updated task: C:\root\todd\_test\dn\obelisk\ricerca prodotti per marca - modello - versione
2021-01-10 15:29:24,213 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1620 
        and folder_name = '201126.nuova griglia domande risposte per codice.molina.ok.new.mg.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1620, '201126.nuova griglia domande risposte per codice.molina.ok.new.mg.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-11-26 11:15:21', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-11-26 11:15:21', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-11-26 11:15:21', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:24,217 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\obelisk\201126.nuova griglia domande risposte per codice.molina.ok.new.mg.task
2021-01-10 15:29:24,262 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1637 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1637, null, left('nuova griglia domande risposte per codice', 150)
            , NULL, convert(datetime, '2020-11-26 00:00:00', 120), convert(datetime, '2020-11-26 11:15:21', 120), 1
            , 'fatto', NULL, 'aggiunta', 'mezza');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-11-26 00:00:00', 120), dt_upd = convert(datetime, '2020-11-26 11:15:21', 120)
         , title = left('nuova griglia domande risposte per codice', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'aggiunta', stima = 'mezza'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-11-26 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-11-26 11:15:21', 120), getdate())
          or isnull(title, '') <> isnull('nuova griglia domande risposte per codice', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('aggiunta', '') or isnull(stima, '') <> isnull('mezza', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:24,270 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\obelisk\nuova griglia domande risposte per codice
2021-01-10 15:29:24,271 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1229) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:24,279 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1620 
        and folder_name = '201218.supporto 3CX.molina.ok.new.2h.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1620, '201218.supporto 3CX.molina.ok.new.2h.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-12-18 09:43:34', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-12-18 09:43:34', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-12-18 09:43:34', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:24,284 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\obelisk\201218.supporto 3CX.molina.ok.new.2h.task
2021-01-10 15:29:24,324 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1638 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1638, null, left('supporto 3CX', 150)
            , NULL, convert(datetime, '2020-12-18 00:00:00', 120), convert(datetime, '2020-12-18 09:43:34', 120), 1
            , 'fatto', NULL, 'aggiunta', 'due_ore');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-12-18 00:00:00', 120), dt_upd = convert(datetime, '2020-12-18 09:43:34', 120)
         , title = left('supporto 3CX', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'aggiunta', stima = 'due_ore'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-12-18 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-12-18 09:43:34', 120), getdate())
          or isnull(title, '') <> isnull('supporto 3CX', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('aggiunta', '') or isnull(stima, '') <> isnull('due_ore', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:24,329 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\obelisk\supporto 3CX
2021-01-10 15:29:24,330 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1638 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1638, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-12-18 09:43:34', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-12-18 09:43:34', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-12-18 09:43:34', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:24,334 [64] DEBUG dn_lib.tools.log - added file 3916: C:\root\todd\_test\dn\obelisk\201218.supporto 3CX.molina.ok.new.2h.task\i.txt
2021-01-10 15:29:24,335 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3916;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3916, '.txt', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-12-18 09:43:34', 120));
2021-01-10 15:29:24,337 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1230;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1230, 3916, @content
          , convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-12-18 09:43:34', 120));
2021-01-10 15:29:24,339 [64] DEBUG dn_lib.tools.log - lette note task 1230
2021-01-10 15:29:24,340 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\obelisk\201218.supporto 3CX.molina.ok.new.2h.task\i.txt'
2021-01-10 15:29:24,340 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1230) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:24,347 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1620 
        and folder_name = 'Aggiugnere campo ricerca nel carrellino nero.molina.fatta.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1620, 'Aggiugnere campo ricerca nel carrellino nero.molina.fatta.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-24 11:33:23', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-24 11:33:23', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-24 11:33:23', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:24,352 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\obelisk\Aggiugnere campo ricerca nel carrellino nero.molina.fatta.task
2021-01-10 15:29:24,377 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1639 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1639, null, left('Aggiugnere campo ricerca nel carrellino nero', 150)
            , NULL, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-24 11:33:23', 120), 1
            , 'fatto', NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-24 11:33:23', 120)
         , title = left('Aggiugnere campo ricerca nel carrellino nero', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = NULL, stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-24 11:33:23', 120), getdate())
          or isnull(title, '') <> isnull('Aggiugnere campo ricerca nel carrellino nero', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:24,383 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\obelisk\Aggiugnere campo ricerca nel carrellino nero
2021-01-10 15:29:24,384 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1639 and file_name = 'Thumbs.db';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1639, 'Thumbs.db', '.db', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-18 09:31:15', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-18 09:31:15', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-18 09:31:15', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:24,388 [64] DEBUG dn_lib.tools.log - added file 3917: C:\root\todd\_test\dn\obelisk\Aggiugnere campo ricerca nel carrellino nero.molina.fatta.task\Thumbs.db
2021-01-10 15:29:24,389 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1639 and file_name = 'untitled.png';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1639, 'untitled.png', '.png', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-17 08:28:27', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-17 08:28:27', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-17 08:28:27', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:24,394 [64] DEBUG dn_lib.tools.log - added file 3918: C:\root\todd\_test\dn\obelisk\Aggiugnere campo ricerca nel carrellino nero.molina.fatta.task\untitled.png
2021-01-10 15:29:24,395 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1231) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:24,403 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1620 and file_name = 'carrello nero - filtri.fatto.molina.task.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1620, 'carrello nero - filtri.fatto.molina.task.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-12 11:11:06', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-12 11:11:06', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-12 11:11:06', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:24,410 [64] DEBUG dn_lib.tools.log - added file 3919: C:\root\todd\_test\dn\obelisk\carrello nero - filtri.fatto.molina.task.sql
2021-01-10 15:29:24,411 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3919;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3919, '.sql', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-12 11:11:06', 120));
2021-01-10 15:29:24,414 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\obelisk\carrello nero - filtri.fatto.molina.task.sql'
2021-01-10 15:29:24,442 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 3919;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, null, 3919, left('carrello nero - filtri', 150)
            , NULL, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-12 11:11:06', 120), 1
            , 'fatto', NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-12 11:11:06', 120)
         , title = left('carrello nero - filtri', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = NULL, stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-12 11:11:06', 120), getdate())
          or isnull(title, '') <> isnull('carrello nero - filtri', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:24,448 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\obelisk\carrello nero - filtri
2021-01-10 15:29:24,449 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1620 and file_name = 'check tooltip prevista consegna.ok.molina.fix.task.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1620, 'check tooltip prevista consegna.ok.molina.fix.task.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-24 14:30:53', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-24 14:30:53', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-24 14:30:53', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:24,454 [64] DEBUG dn_lib.tools.log - added file 3920: C:\root\todd\_test\dn\obelisk\check tooltip prevista consegna.ok.molina.fix.task.sql
2021-01-10 15:29:24,455 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3920;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3920, '.sql', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-24 14:30:53', 120));
2021-01-10 15:29:24,457 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\obelisk\check tooltip prevista consegna.ok.molina.fix.task.sql'
2021-01-10 15:29:24,487 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 3920;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, null, 3920, left('check tooltip prevista consegna', 150)
            , NULL, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-24 14:30:53', 120), 1
            , 'fatto', NULL, 'fix', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-24 14:30:53', 120)
         , title = left('check tooltip prevista consegna', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-24 14:30:53', 120), getdate())
          or isnull(title, '') <> isnull('check tooltip prevista consegna', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:24,493 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\obelisk\check tooltip prevista consegna
2021-01-10 15:29:24,494 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1620 and file_name = 'tooltip obelisk consegna prevista.fatto.fix.molina.task.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1620, 'tooltip obelisk consegna prevista.fatto.fix.molina.task.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-05 12:46:13', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-05 12:46:13', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-05 12:46:13', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:24,498 [64] DEBUG dn_lib.tools.log - added file 3921: C:\root\todd\_test\dn\obelisk\tooltip obelisk consegna prevista.fatto.fix.molina.task.sql
2021-01-10 15:29:24,499 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3921;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3921, '.sql', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-05 12:46:13', 120));
2021-01-10 15:29:24,501 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\obelisk\tooltip obelisk consegna prevista.fatto.fix.molina.task.sql'
2021-01-10 15:29:24,531 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 3921;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, null, 3921, left('tooltip obelisk consegna prevista', 150)
            , NULL, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-05 12:46:13', 120), 1
            , 'fatto', NULL, 'fix', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-05 12:46:13', 120)
         , title = left('tooltip obelisk consegna prevista', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-05 12:46:13', 120), getdate())
          or isnull(title, '') <> isnull('tooltip obelisk consegna prevista', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:24,537 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\obelisk\tooltip obelisk consegna prevista
2021-01-10 15:29:24,538 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = 'obsolete';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, 'obsolete', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-21 11:18:34', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-08-21 11:18:34', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-21 11:18:34', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:24,540 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\obsolete
2021-01-10 15:29:24,541 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1640 
        and folder_name = '190913.remsa nota.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1640, '190913.remsa nota.molina.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-12 10:21:41', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-12 10:21:41', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-12 10:21:41', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:24,545 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\obsolete\190913.remsa nota.molina.task
2021-01-10 15:29:24,563 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1641 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1641, null, left('remsa nota', 150)
            , NULL, convert(datetime, '2019-09-13 00:00:00', 120), convert(datetime, '2020-06-12 10:21:41', 120), 1
            , NULL, NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2019-09-13 00:00:00', 120), dt_upd = convert(datetime, '2020-06-12 10:21:41', 120)
         , title = left('remsa nota', 150), [user] = NULL
         , stato = NULL, priorita = NULL
         , tipo = NULL, stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2019-09-13 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-12 10:21:41', 120), getdate())
          or isnull(title, '') <> isnull('remsa nota', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull(NULL, '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:24,569 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\obsolete\remsa nota
2021-01-10 15:29:24,570 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1641 and file_name = 'sql.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1641, 'sql.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2019-09-16 10:27:36', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2019-09-16 10:27:36', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2019-09-16 10:27:36', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:24,576 [64] DEBUG dn_lib.tools.log - added file 3922: C:\root\todd\_test\dn\obsolete\190913.remsa nota.molina.task\sql.sql
2021-01-10 15:29:24,577 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3922;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3922, '.sql', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2019-09-16 10:27:36', 120));
2021-01-10 15:29:24,579 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\obsolete\190913.remsa nota.molina.task\sql.sql'
2021-01-10 15:29:24,580 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1235) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:24,588 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1640 
        and folder_name = '191004.ECUFILE.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1640, '191004.ECUFILE.molina.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-12 10:21:41', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-12 10:21:41', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-12 10:21:41', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:24,592 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\obsolete\191004.ECUFILE.molina.task
2021-01-10 15:29:24,611 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1642 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1642, null, left('ECUFILE', 150)
            , NULL, convert(datetime, '2019-10-04 00:00:00', 120), convert(datetime, '2020-06-12 10:21:41', 120), 1
            , NULL, NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2019-10-04 00:00:00', 120), dt_upd = convert(datetime, '2020-06-12 10:21:41', 120)
         , title = left('ECUFILE', 150), [user] = NULL
         , stato = NULL, priorita = NULL
         , tipo = NULL, stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2019-10-04 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-12 10:21:41', 120), getdate())
          or isnull(title, '') <> isnull('ECUFILE', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull(NULL, '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:24,617 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\obsolete\ECUFILE
2021-01-10 15:29:24,618 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1642 and file_name = 'mysql.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1642, 'mysql.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2019-10-04 09:23:16', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2019-10-04 09:23:16', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2019-10-04 09:23:16', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:24,622 [64] DEBUG dn_lib.tools.log - added file 3923: C:\root\todd\_test\dn\obsolete\191004.ECUFILE.molina.task\mysql.sql
2021-01-10 15:29:24,623 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3923;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3923, '.sql', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2019-10-04 09:23:16', 120));
2021-01-10 15:29:24,626 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\obsolete\191004.ECUFILE.molina.task\mysql.sql'
2021-01-10 15:29:24,627 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1642 and file_name = 'sql.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1642, 'sql.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2019-10-04 09:21:20', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2019-10-04 09:21:20', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2019-10-04 09:21:20', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:24,632 [64] DEBUG dn_lib.tools.log - added file 3924: C:\root\todd\_test\dn\obsolete\191004.ECUFILE.molina.task\sql.sql
2021-01-10 15:29:24,633 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3924;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3924, '.sql', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2019-10-04 09:21:20', 120));
2021-01-10 15:29:24,635 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\obsolete\191004.ECUFILE.molina.task\sql.sql'
2021-01-10 15:29:24,636 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1236) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:24,644 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1640 
        and folder_name = '200219.reso funzionante.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1640, '200219.reso funzionante.molina.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-12 10:22:04', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-12 10:22:04', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-12 10:22:04', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:24,648 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\obsolete\200219.reso funzionante.molina.task
2021-01-10 15:29:24,668 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1643 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1643, null, left('reso funzionante', 150)
            , NULL, convert(datetime, '2020-02-19 00:00:00', 120), convert(datetime, '2020-06-12 10:22:04', 120), 1
            , NULL, NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-02-19 00:00:00', 120), dt_upd = convert(datetime, '2020-06-12 10:22:04', 120)
         , title = left('reso funzionante', 150), [user] = NULL
         , stato = NULL, priorita = NULL
         , tipo = NULL, stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-02-19 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-12 10:22:04', 120), getdate())
          or isnull(title, '') <> isnull('reso funzionante', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull(NULL, '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:24,673 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\obsolete\reso funzionante
2021-01-10 15:29:24,674 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1643 and file_name = 'documenti.xlsx';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1643, 'documenti.xlsx', '.xlsx', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-02-20 15:27:33', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-02-20 15:27:33', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-02-20 15:27:33', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:24,678 [64] DEBUG dn_lib.tools.log - added file 3925: C:\root\todd\_test\dn\obsolete\200219.reso funzionante.molina.task\documenti.xlsx
2021-01-10 15:29:24,679 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1643 and file_name = 'I problemi magazzino 2.msg';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1643, 'I problemi magazzino 2.msg', '.msg', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-02-19 17:30:24', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-02-19 17:30:24', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-02-19 17:30:24', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:24,683 [64] DEBUG dn_lib.tools.log - added file 3926: C:\root\todd\_test\dn\obsolete\200219.reso funzionante.molina.task\I problemi magazzino 2.msg
2021-01-10 15:29:24,684 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1643 and file_name = 'I problemi magazzino 3.msg';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1643, 'I problemi magazzino 3.msg', '.msg', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-02-19 17:30:32', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-02-19 17:30:32', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-02-19 17:30:32', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:24,689 [64] DEBUG dn_lib.tools.log - added file 3927: C:\root\todd\_test\dn\obsolete\200219.reso funzionante.molina.task\I problemi magazzino 3.msg
2021-01-10 15:29:24,690 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1643 and file_name = 'partitario.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1643, 'partitario.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-02-20 12:32:52', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-02-20 12:32:52', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-02-20 12:32:52', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:24,695 [64] DEBUG dn_lib.tools.log - added file 3928: C:\root\todd\_test\dn\obsolete\200219.reso funzionante.molina.task\partitario.sql
2021-01-10 15:29:24,697 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3928;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3928, '.sql', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-02-20 12:32:52', 120));
2021-01-10 15:29:24,703 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\obsolete\200219.reso funzionante.molina.task\partitario.sql'
2021-01-10 15:29:24,704 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1643 and file_name = 'reso.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1643, 'reso.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-02-20 15:06:04', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-02-20 15:06:04', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-02-20 15:06:04', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:24,710 [64] DEBUG dn_lib.tools.log - added file 3929: C:\root\todd\_test\dn\obsolete\200219.reso funzionante.molina.task\reso.sql
2021-01-10 15:29:24,713 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3929;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3929, '.sql', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-02-20 15:06:04', 120));
2021-01-10 15:29:24,730 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\obsolete\200219.reso funzionante.molina.task\reso.sql'
2021-01-10 15:29:24,731 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1643 and file_name = 'SPMG_ELABPARTITARI.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1643, 'SPMG_ELABPARTITARI.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-02-20 12:32:53', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-02-20 12:32:53', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-02-20 12:32:53', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:24,736 [64] DEBUG dn_lib.tools.log - added file 3930: C:\root\todd\_test\dn\obsolete\200219.reso funzionante.molina.task\SPMG_ELABPARTITARI.sql
2021-01-10 15:29:24,738 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3930;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3930, '.sql', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-02-20 12:32:53', 120));
2021-01-10 15:29:24,746 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\obsolete\200219.reso funzionante.molina.task\SPMG_ELABPARTITARI.sql'
2021-01-10 15:29:24,748 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1643 and file_name = 'sql.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1643, 'sql.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-02-20 15:23:48', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-02-20 15:23:48', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-02-20 15:23:48', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:24,752 [64] DEBUG dn_lib.tools.log - added file 3931: C:\root\todd\_test\dn\obsolete\200219.reso funzionante.molina.task\sql.sql
2021-01-10 15:29:24,753 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3931;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3931, '.sql', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-02-20 15:23:48', 120));
2021-01-10 15:29:24,757 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\obsolete\200219.reso funzionante.molina.task\sql.sql'
2021-01-10 15:29:24,758 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1237) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:24,765 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = 'ordini fornitori';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, 'ordini fornitori', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-12-14 11:11:15', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-12-14 11:11:15', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-12-14 11:11:15', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:24,768 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\ordini fornitori
2021-01-10 15:29:24,769 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1644 
        and folder_name = '200506.inchiodato.fatto.fix.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1644, '200506.inchiodato.fatto.fix.molina.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-24 14:42:37', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-24 14:42:37', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-24 14:42:37', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:24,774 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\ordini fornitori\200506.inchiodato.fatto.fix.molina.task
2021-01-10 15:29:24,804 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1645 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1645, null, left('inchiodato', 150)
            , NULL, convert(datetime, '2020-05-06 00:00:00', 120), convert(datetime, '2020-06-24 14:42:37', 120), 1
            , 'fatto', NULL, 'fix', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-05-06 00:00:00', 120), dt_upd = convert(datetime, '2020-06-24 14:42:37', 120)
         , title = left('inchiodato', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-05-06 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-24 14:42:37', 120), getdate())
          or isnull(title, '') <> isnull('inchiodato', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:24,810 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\ordini fornitori\inchiodato
2021-01-10 15:29:24,811 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1645 and file_name = 'AL_EXPORT_ARTFOR_DELTA.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1645, 'AL_EXPORT_ARTFOR_DELTA.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-05 16:15:26', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-05 16:15:26', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-05 16:15:26', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:24,816 [64] DEBUG dn_lib.tools.log - added file 3932: C:\root\todd\_test\dn\ordini fornitori\200506.inchiodato.fatto.fix.molina.task\AL_EXPORT_ARTFOR_DELTA.sql
2021-01-10 15:29:24,817 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3932;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3932, '.sql', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-05 16:15:26', 120));
2021-01-10 15:29:24,819 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\ordini fornitori\200506.inchiodato.fatto.fix.molina.task\AL_EXPORT_ARTFOR_DELTA.sql'
2021-01-10 15:29:24,820 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1645 and file_name = 'AL_EXPORT_ARTFOR_DELTA_MM.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1645, 'AL_EXPORT_ARTFOR_DELTA_MM.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-05 16:20:31', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-05 16:20:31', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-05 16:20:31', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:24,824 [64] DEBUG dn_lib.tools.log - added file 3933: C:\root\todd\_test\dn\ordini fornitori\200506.inchiodato.fatto.fix.molina.task\AL_EXPORT_ARTFOR_DELTA_MM.sql
2021-01-10 15:29:24,825 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3933;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3933, '.sql', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-05 16:20:31', 120));
2021-01-10 15:29:24,827 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\ordini fornitori\200506.inchiodato.fatto.fix.molina.task\AL_EXPORT_ARTFOR_DELTA_MM.sql'
2021-01-10 15:29:24,828 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1645 and file_name = 'ord forn inchiodato.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1645, 'ord forn inchiodato.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-05 15:46:10', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-05 15:46:10', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-05 15:46:10', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:24,833 [64] DEBUG dn_lib.tools.log - added file 3934: C:\root\todd\_test\dn\ordini fornitori\200506.inchiodato.fatto.fix.molina.task\ord forn inchiodato.sql
2021-01-10 15:29:24,834 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3934;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3934, '.sql', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-05 15:46:10', 120));
2021-01-10 15:29:24,837 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\ordini fornitori\200506.inchiodato.fatto.fix.molina.task\ord forn inchiodato.sql'
2021-01-10 15:29:24,839 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1645 and file_name = 'src.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1645, 'src.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-05 14:59:13', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-05 14:59:13', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-05 14:59:13', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:24,844 [64] DEBUG dn_lib.tools.log - added file 3935: C:\root\todd\_test\dn\ordini fornitori\200506.inchiodato.fatto.fix.molina.task\src.txt
2021-01-10 15:29:24,845 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3935;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3935, '.txt', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-05 14:59:13', 120));
2021-01-10 15:29:24,848 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\ordini fornitori\200506.inchiodato.fatto.fix.molina.task\src.txt'
2021-01-10 15:29:24,849 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1238) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:24,859 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1644 
        and folder_name = '200818.aggiunta selezione marca .ok.new.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1644, '200818.aggiunta selezione marca .ok.new.molina.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-18 14:03:37', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-08-18 14:03:37', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-18 14:03:37', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:24,864 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\ordini fornitori\200818.aggiunta selezione marca .ok.new.molina.task
2021-01-10 15:29:24,902 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1646 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1646, null, left('aggiunta selezione marca ', 150)
            , NULL, convert(datetime, '2020-08-18 00:00:00', 120), convert(datetime, '2020-08-18 14:03:37', 120), 1
            , 'fatto', NULL, 'aggiunta', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-08-18 00:00:00', 120), dt_upd = convert(datetime, '2020-08-18 14:03:37', 120)
         , title = left('aggiunta selezione marca ', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'aggiunta', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-08-18 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-08-18 14:03:37', 120), getdate())
          or isnull(title, '') <> isnull('aggiunta selezione marca ', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('aggiunta', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:24,908 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\ordini fornitori\aggiunta selezione marca 
2021-01-10 15:29:24,909 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1646 and file_name = 'sql.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1646, 'sql.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-18 14:03:36', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-08-18 14:03:36', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-18 14:03:36', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:24,913 [64] DEBUG dn_lib.tools.log - added file 3936: C:\root\todd\_test\dn\ordini fornitori\200818.aggiunta selezione marca .ok.new.molina.task\sql.sql
2021-01-10 15:29:24,914 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3936;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3936, '.sql', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-18 14:03:36', 120));
2021-01-10 15:29:24,917 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\ordini fornitori\200818.aggiunta selezione marca .ok.new.molina.task\sql.sql'
2021-01-10 15:29:24,917 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1239) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:24,925 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1644 
        and folder_name = '200821.aggiunte informazioni sul fornitore al carrello.ok.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1644, '200821.aggiunte informazioni sul fornitore al carrello.ok.molina.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-21 16:57:32', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-08-21 16:57:32', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-21 16:57:32', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:24,929 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\ordini fornitori\200821.aggiunte informazioni sul fornitore al carrello.ok.molina.task
2021-01-10 15:29:24,954 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1647 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1647, null, left('aggiunte informazioni sul fornitore al carrello', 150)
            , NULL, convert(datetime, '2020-08-21 00:00:00', 120), convert(datetime, '2020-08-21 16:57:32', 120), 1
            , 'fatto', NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-08-21 00:00:00', 120), dt_upd = convert(datetime, '2020-08-21 16:57:32', 120)
         , title = left('aggiunte informazioni sul fornitore al carrello', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = NULL, stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-08-21 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-08-21 16:57:32', 120), getdate())
          or isnull(title, '') <> isnull('aggiunte informazioni sul fornitore al carrello', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:24,960 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\ordini fornitori\aggiunte informazioni sul fornitore al carrello
2021-01-10 15:29:24,960 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1240) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:24,967 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1644 
        and folder_name = '200824.prezzi scazzati dal nuovo prodotto manager.ok.fix.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1644, '200824.prezzi scazzati dal nuovo prodotto manager.ok.fix.molina.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-24 11:43:53', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-08-24 11:43:53', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-24 11:43:53', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:24,972 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\ordini fornitori\200824.prezzi scazzati dal nuovo prodotto manager.ok.fix.molina.task
2021-01-10 15:29:25,004 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1648 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1648, null, left('prezzi scazzati dal nuovo prodotto manager', 150)
            , NULL, convert(datetime, '2020-08-24 00:00:00', 120), convert(datetime, '2020-08-24 11:43:53', 120), 1
            , 'fatto', NULL, 'fix', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-08-24 00:00:00', 120), dt_upd = convert(datetime, '2020-08-24 11:43:53', 120)
         , title = left('prezzi scazzati dal nuovo prodotto manager', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-08-24 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-08-24 11:43:53', 120), getdate())
          or isnull(title, '') <> isnull('prezzi scazzati dal nuovo prodotto manager', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:25,009 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\ordini fornitori\prezzi scazzati dal nuovo prodotto manager
2021-01-10 15:29:25,011 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1648 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1648, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-24 11:40:28', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-08-24 11:40:28', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-24 11:40:28', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:25,015 [64] DEBUG dn_lib.tools.log - added file 3937: C:\root\todd\_test\dn\ordini fornitori\200824.prezzi scazzati dal nuovo prodotto manager.ok.fix.molina.task\i.txt
2021-01-10 15:29:25,016 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3937;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3937, '.txt', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-24 11:40:28', 120));
2021-01-10 15:29:25,019 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1241;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1241, 3937, @content
          , convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-24 11:40:28', 120));
2021-01-10 15:29:25,022 [64] DEBUG dn_lib.tools.log - lette note task 1241
2021-01-10 15:29:25,022 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\ordini fornitori\200824.prezzi scazzati dal nuovo prodotto manager.ok.fix.molina.task\i.txt'
2021-01-10 15:29:25,023 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1648 and file_name = 'sql.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1648, 'sql.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-24 11:43:53', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-08-24 11:43:53', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-24 11:43:53', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:25,028 [64] DEBUG dn_lib.tools.log - added file 3938: C:\root\todd\_test\dn\ordini fornitori\200824.prezzi scazzati dal nuovo prodotto manager.ok.fix.molina.task\sql.sql
2021-01-10 15:29:25,029 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3938;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3938, '.sql', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-24 11:43:53', 120));
2021-01-10 15:29:25,032 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\ordini fornitori\200824.prezzi scazzati dal nuovo prodotto manager.ok.fix.molina.task\sql.sql'
2021-01-10 15:29:25,033 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1241) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:25,041 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1644 
        and folder_name = '200825.segnalare gli ordini che sforano l''attesa.molina.incompleta.new.2h.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1644, '200825.segnalare gli ordini che sforano l''attesa.molina.incompleta.new.2h.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-27 17:07:19', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-08-27 17:07:19', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-27 17:07:19', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:25,045 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\ordini fornitori\200825.segnalare gli ordini che sforano l'attesa.molina.incompleta.new.2h.task
2021-01-10 15:29:25,087 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1649 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1649, null, left('segnalare gli ordini che sforano l''attesa', 150)
            , NULL, convert(datetime, '2020-08-25 00:00:00', 120), convert(datetime, '2020-08-27 17:07:19', 120), 1
            , 'incompleto', NULL, 'aggiunta', 'due_ore');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-08-25 00:00:00', 120), dt_upd = convert(datetime, '2020-08-27 17:07:19', 120)
         , title = left('segnalare gli ordini che sforano l''attesa', 150), [user] = NULL
         , stato = 'incompleto', priorita = NULL
         , tipo = 'aggiunta', stima = 'due_ore'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-08-25 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-08-27 17:07:19', 120), getdate())
          or isnull(title, '') <> isnull('segnalare gli ordini che sforano l''attesa', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('incompleto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('aggiunta', '') or isnull(stima, '') <> isnull('due_ore', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:25,093 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\ordini fornitori\segnalare gli ordini che sforano l'attesa
2021-01-10 15:29:25,093 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1649 and file_name = 'ordini fuori tempo.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1649, 'ordini fuori tempo.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-27 17:07:19', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-08-27 17:07:19', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-27 17:07:19', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:25,097 [64] DEBUG dn_lib.tools.log - added file 3939: C:\root\todd\_test\dn\ordini fornitori\200825.segnalare gli ordini che sforano l'attesa.molina.incompleta.new.2h.task\ordini fuori tempo.sql
2021-01-10 15:29:25,098 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3939;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3939, '.sql', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-27 17:07:19', 120));
2021-01-10 15:29:25,100 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\ordini fornitori\200825.segnalare gli ordini che sforano l'attesa.molina.incompleta.new.2h.task\ordini fuori tempo.sql'
2021-01-10 15:29:25,101 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1242) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:25,109 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1644 
        and folder_name = '200827.sistemata alla maschera fornitori.molina.ok.rev.h.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1644, '200827.sistemata alla maschera fornitori.molina.ok.rev.h.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-27 18:18:45', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-08-27 18:18:45', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-27 18:18:45', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:25,114 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\ordini fornitori\200827.sistemata alla maschera fornitori.molina.ok.rev.h.task
2021-01-10 15:29:25,154 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1650 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1650, null, left('sistemata alla maschera fornitori', 150)
            , NULL, convert(datetime, '2020-08-27 00:00:00', 120), convert(datetime, '2020-08-27 18:18:45', 120), 1
            , 'fatto', NULL, 'revisione', 'ora');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-08-27 00:00:00', 120), dt_upd = convert(datetime, '2020-08-27 18:18:45', 120)
         , title = left('sistemata alla maschera fornitori', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'revisione', stima = 'ora'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-08-27 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-08-27 18:18:45', 120), getdate())
          or isnull(title, '') <> isnull('sistemata alla maschera fornitori', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('revisione', '') or isnull(stima, '') <> isnull('ora', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:25,160 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\ordini fornitori\sistemata alla maschera fornitori
2021-01-10 15:29:25,161 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1650 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1650, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-27 18:18:45', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-08-27 18:18:45', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-27 18:18:45', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:25,166 [64] DEBUG dn_lib.tools.log - added file 3940: C:\root\todd\_test\dn\ordini fornitori\200827.sistemata alla maschera fornitori.molina.ok.rev.h.task\i.txt
2021-01-10 15:29:25,167 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3940;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3940, '.txt', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-27 18:18:45', 120));
2021-01-10 15:29:25,170 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1243;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1243, 3940, @content
          , convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-27 18:18:45', 120));
2021-01-10 15:29:25,172 [64] DEBUG dn_lib.tools.log - lette note task 1243
2021-01-10 15:29:25,173 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\ordini fornitori\200827.sistemata alla maschera fornitori.molina.ok.rev.h.task\i.txt'
2021-01-10 15:29:25,174 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1243) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:25,182 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1644 
        and folder_name = '200831.aggiunta colonna resi fornitori.molina.ok.new.mh.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1644, '200831.aggiunta colonna resi fornitori.molina.ok.new.mh.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-31 17:21:23', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-08-31 17:21:23', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-31 17:21:23', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:25,187 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\ordini fornitori\200831.aggiunta colonna resi fornitori.molina.ok.new.mh.task
2021-01-10 15:29:25,228 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1651 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1651, null, left('aggiunta colonna resi fornitori', 150)
            , NULL, convert(datetime, '2020-08-31 00:00:00', 120), convert(datetime, '2020-08-31 17:21:23', 120), 1
            , 'fatto', NULL, 'aggiunta', 'mezzora');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-08-31 00:00:00', 120), dt_upd = convert(datetime, '2020-08-31 17:21:23', 120)
         , title = left('aggiunta colonna resi fornitori', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'aggiunta', stima = 'mezzora'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-08-31 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-08-31 17:21:23', 120), getdate())
          or isnull(title, '') <> isnull('aggiunta colonna resi fornitori', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('aggiunta', '') or isnull(stima, '') <> isnull('mezzora', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:25,233 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\ordini fornitori\aggiunta colonna resi fornitori
2021-01-10 15:29:25,236 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1651 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1651, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-31 17:21:23', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-08-31 17:21:23', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-31 17:21:23', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:25,240 [64] DEBUG dn_lib.tools.log - added file 3941: C:\root\todd\_test\dn\ordini fornitori\200831.aggiunta colonna resi fornitori.molina.ok.new.mh.task\i.txt
2021-01-10 15:29:25,241 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3941;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3941, '.txt', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-31 17:21:23', 120));
2021-01-10 15:29:25,244 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1244;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1244, 3941, @content
          , convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-31 17:21:23', 120));
2021-01-10 15:29:25,245 [64] DEBUG dn_lib.tools.log - lette note task 1244
2021-01-10 15:29:25,246 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\ordini fornitori\200831.aggiunta colonna resi fornitori.molina.ok.new.mh.task\i.txt'
2021-01-10 15:29:25,247 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1244) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:25,254 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1644 
        and folder_name = '200831.sistemata ricerca codice x fornitore.molina.ok.fix.mh.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1644, '200831.sistemata ricerca codice x fornitore.molina.ok.fix.mh.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-31 15:08:23', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-08-31 15:08:23', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-31 15:08:23', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:25,258 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\ordini fornitori\200831.sistemata ricerca codice x fornitore.molina.ok.fix.mh.task
2021-01-10 15:29:25,300 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1652 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1652, null, left('sistemata ricerca codice x fornitore', 150)
            , NULL, convert(datetime, '2020-08-31 00:00:00', 120), convert(datetime, '2020-08-31 15:08:23', 120), 1
            , 'fatto', NULL, 'fix', 'mezzora');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-08-31 00:00:00', 120), dt_upd = convert(datetime, '2020-08-31 15:08:23', 120)
         , title = left('sistemata ricerca codice x fornitore', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = 'mezzora'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-08-31 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-08-31 15:08:23', 120), getdate())
          or isnull(title, '') <> isnull('sistemata ricerca codice x fornitore', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull('mezzora', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:25,306 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\ordini fornitori\sistemata ricerca codice x fornitore
2021-01-10 15:29:25,307 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1652 and file_name = 'sql.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1652, 'sql.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-31 15:08:23', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-08-31 15:08:23', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-31 15:08:23', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:25,312 [64] DEBUG dn_lib.tools.log - added file 3942: C:\root\todd\_test\dn\ordini fornitori\200831.sistemata ricerca codice x fornitore.molina.ok.fix.mh.task\sql.sql
2021-01-10 15:29:25,313 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3942;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3942, '.sql', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-31 15:08:23', 120));
2021-01-10 15:29:25,315 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\ordini fornitori\200831.sistemata ricerca codice x fornitore.molina.ok.fix.mh.task\sql.sql'
2021-01-10 15:29:25,316 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1245) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:25,324 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1644 
        and folder_name = '200902.revisione generale ordini fornitori.molina.ok.rev.g.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1644, '200902.revisione generale ordini fornitori.molina.ok.rev.g.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-09-02 09:18:43', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-09-02 09:18:43', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-09-02 09:18:43', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:25,329 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\ordini fornitori\200902.revisione generale ordini fornitori.molina.ok.rev.g.task
2021-01-10 15:29:25,370 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1653 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1653, null, left('revisione generale ordini fornitori', 150)
            , NULL, convert(datetime, '2020-09-02 00:00:00', 120), convert(datetime, '2020-09-02 09:18:43', 120), 1
            , 'fatto', NULL, 'revisione', 'giornata');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-09-02 00:00:00', 120), dt_upd = convert(datetime, '2020-09-02 09:18:43', 120)
         , title = left('revisione generale ordini fornitori', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'revisione', stima = 'giornata'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-09-02 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-09-02 09:18:43', 120), getdate())
          or isnull(title, '') <> isnull('revisione generale ordini fornitori', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('revisione', '') or isnull(stima, '') <> isnull('giornata', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:25,375 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\ordini fornitori\revisione generale ordini fornitori
2021-01-10 15:29:25,376 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1653 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1653, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-09-03 08:48:01', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-09-03 08:48:01', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-09-03 08:48:01', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:25,380 [64] DEBUG dn_lib.tools.log - added file 3943: C:\root\todd\_test\dn\ordini fornitori\200902.revisione generale ordini fornitori.molina.ok.rev.g.task\i.txt
2021-01-10 15:29:25,381 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3943;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3943, '.txt', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-09-03 08:48:01', 120));
2021-01-10 15:29:25,383 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1246;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1246, 3943, @content
          , convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-09-03 08:48:01', 120));
2021-01-10 15:29:25,385 [64] DEBUG dn_lib.tools.log - lette note task 1246
2021-01-10 15:29:25,386 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\ordini fornitori\200902.revisione generale ordini fornitori.molina.ok.rev.g.task\i.txt'
2021-01-10 15:29:25,386 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1246) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:25,394 [64] DEBUG dn_lib.tools.log - updated task: C:\root\todd\_test\dn\ordini fornitori\revisione generale ordini fornitori
2021-01-10 15:29:25,395 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1644 
        and folder_name = '200903.in verde i codici dipa segnalati.molina.ok.new.h.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1644, '200903.in verde i codici dipa segnalati.molina.ok.new.h.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-09-04 10:26:29', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-09-04 10:26:29', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-09-04 10:26:29', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:25,400 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\ordini fornitori\200903.in verde i codici dipa segnalati.molina.ok.new.h.task
2021-01-10 15:29:25,440 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1654 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1654, null, left('in verde i codici dipa segnalati', 150)
            , NULL, convert(datetime, '2020-09-03 00:00:00', 120), convert(datetime, '2020-09-04 10:26:29', 120), 1
            , 'fatto', NULL, 'aggiunta', 'ora');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-09-03 00:00:00', 120), dt_upd = convert(datetime, '2020-09-04 10:26:29', 120)
         , title = left('in verde i codici dipa segnalati', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'aggiunta', stima = 'ora'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-09-03 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-09-04 10:26:29', 120), getdate())
          or isnull(title, '') <> isnull('in verde i codici dipa segnalati', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('aggiunta', '') or isnull(stima, '') <> isnull('ora', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:25,445 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\ordini fornitori\in verde i codici dipa segnalati
2021-01-10 15:29:25,446 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1654 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1654, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-09-04 10:26:29', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-09-04 10:26:29', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-09-04 10:26:29', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:25,451 [64] DEBUG dn_lib.tools.log - added file 3944: C:\root\todd\_test\dn\ordini fornitori\200903.in verde i codici dipa segnalati.molina.ok.new.h.task\i.txt
2021-01-10 15:29:25,463 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3944;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3944, '.txt', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-09-04 10:26:29', 120));
2021-01-10 15:29:25,467 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1247;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1247, 3944, @content
          , convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-09-04 10:26:29', 120));
2021-01-10 15:29:25,470 [64] DEBUG dn_lib.tools.log - lette note task 1247
2021-01-10 15:29:25,471 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\ordini fornitori\200903.in verde i codici dipa segnalati.molina.ok.new.h.task\i.txt'
2021-01-10 15:29:25,472 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1654 and file_name = 'sql.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1654, 'sql.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-09-03 16:15:25', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-09-03 16:15:25', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-09-03 16:15:25', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:25,477 [64] DEBUG dn_lib.tools.log - added file 3945: C:\root\todd\_test\dn\ordini fornitori\200903.in verde i codici dipa segnalati.molina.ok.new.h.task\sql.sql
2021-01-10 15:29:25,479 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3945;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3945, '.sql', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-09-03 16:15:25', 120));
2021-01-10 15:29:25,482 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\ordini fornitori\200903.in verde i codici dipa segnalati.molina.ok.new.h.task\sql.sql'
2021-01-10 15:29:25,483 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1247) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:25,492 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = 'ordini vendite';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, 'ordini vendite', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-12-03 11:03:16', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-12-03 11:03:16', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-12-03 11:03:16', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:25,495 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\ordini vendite
2021-01-10 15:29:25,496 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1655 
        and folder_name = '200630.reso no rip gestione viola e multicollo.rev.2h.ok.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1655, '200630.reso no rip gestione viola e multicollo.rev.2h.ok.molina.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-01 15:51:24', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-07-01 15:51:24', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-01 15:51:24', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:25,501 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\ordini vendite\200630.reso no rip gestione viola e multicollo.rev.2h.ok.molina.task
2021-01-10 15:29:25,541 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1656 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1656, null, left('reso no rip gestione viola e multicollo', 150)
            , NULL, convert(datetime, '2020-06-30 00:00:00', 120), convert(datetime, '2020-07-01 15:51:24', 120), 1
            , 'fatto', NULL, 'revisione', 'due_ore');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-06-30 00:00:00', 120), dt_upd = convert(datetime, '2020-07-01 15:51:24', 120)
         , title = left('reso no rip gestione viola e multicollo', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'revisione', stima = 'due_ore'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-06-30 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-07-01 15:51:24', 120), getdate())
          or isnull(title, '') <> isnull('reso no rip gestione viola e multicollo', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('revisione', '') or isnull(stima, '') <> isnull('due_ore', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:25,547 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\ordini vendite\reso no rip gestione viola e multicollo
2021-01-10 15:29:25,548 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1656 and file_name = 'DP_RECALC_ORDINI.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1656, 'DP_RECALC_ORDINI.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-30 17:01:16', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-30 17:01:16', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-30 17:01:16', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:25,553 [64] DEBUG dn_lib.tools.log - added file 3946: C:\root\todd\_test\dn\ordini vendite\200630.reso no rip gestione viola e multicollo.rev.2h.ok.molina.task\DP_RECALC_ORDINI.sql
2021-01-10 15:29:25,554 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3946;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3946, '.sql', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-30 17:01:16', 120));
2021-01-10 15:29:25,556 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\ordini vendite\200630.reso no rip gestione viola e multicollo.rev.2h.ok.molina.task\DP_RECALC_ORDINI.sql'
2021-01-10 15:29:25,556 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1656 and file_name = 'sql.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1656, 'sql.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-01 15:51:22', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-07-01 15:51:22', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-01 15:51:22', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:25,561 [64] DEBUG dn_lib.tools.log - added file 3947: C:\root\todd\_test\dn\ordini vendite\200630.reso no rip gestione viola e multicollo.rev.2h.ok.molina.task\sql.sql
2021-01-10 15:29:25,562 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3947;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3947, '.sql', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-01 15:51:22', 120));
2021-01-10 15:29:25,564 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\ordini vendite\200630.reso no rip gestione viola e multicollo.rev.2h.ok.molina.task\sql.sql'
2021-01-10 15:29:25,565 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1248) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:25,571 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1655 
        and folder_name = '200630.stampa bolle senza prezzo dal magazzino.fix.mh.ok.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1655, '200630.stampa bolle senza prezzo dal magazzino.fix.mh.ok.molina.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-30 11:19:05', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-30 11:19:05', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-30 11:19:05', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:25,576 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\ordini vendite\200630.stampa bolle senza prezzo dal magazzino.fix.mh.ok.molina.task
2021-01-10 15:29:25,618 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1657 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1657, null, left('stampa bolle senza prezzo dal magazzino', 150)
            , NULL, convert(datetime, '2020-06-30 00:00:00', 120), convert(datetime, '2020-06-30 11:19:05', 120), 1
            , 'fatto', NULL, 'fix', 'mezzora');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-06-30 00:00:00', 120), dt_upd = convert(datetime, '2020-06-30 11:19:05', 120)
         , title = left('stampa bolle senza prezzo dal magazzino', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = 'mezzora'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-06-30 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-30 11:19:05', 120), getdate())
          or isnull(title, '') <> isnull('stampa bolle senza prezzo dal magazzino', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull('mezzora', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:25,624 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\ordini vendite\stampa bolle senza prezzo dal magazzino
2021-01-10 15:29:25,625 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1249) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:25,633 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1655 
        and folder_name = '200706.cambio tipo ordine - si perdono informazioni.fix.2h.ok.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1655, '200706.cambio tipo ordine - si perdono informazioni.fix.2h.ok.molina.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-06 08:27:33', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-07-06 08:27:33', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-06 08:27:33', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:25,637 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\ordini vendite\200706.cambio tipo ordine - si perdono informazioni.fix.2h.ok.molina.task
2021-01-10 15:29:25,675 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1658 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1658, null, left('cambio tipo ordine - si perdono informazioni', 150)
            , NULL, convert(datetime, '2020-07-06 00:00:00', 120), convert(datetime, '2020-07-06 08:27:33', 120), 1
            , 'fatto', NULL, 'fix', 'due_ore');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-07-06 00:00:00', 120), dt_upd = convert(datetime, '2020-07-06 08:27:33', 120)
         , title = left('cambio tipo ordine - si perdono informazioni', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = 'due_ore'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-07-06 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-07-06 08:27:33', 120), getdate())
          or isnull(title, '') <> isnull('cambio tipo ordine - si perdono informazioni', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull('due_ore', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:25,680 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\ordini vendite\cambio tipo ordine - si perdono informazioni
2021-01-10 15:29:25,681 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1250) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:25,689 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1655 
        and folder_name = '200709.ritocco al reso no rip senza spese.fix.ok.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1655, '200709.ritocco al reso no rip senza spese.fix.ok.molina.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-09 11:21:33', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-07-09 11:21:33', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-09 11:21:33', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:25,692 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\ordini vendite\200709.ritocco al reso no rip senza spese.fix.ok.molina.task
2021-01-10 15:29:25,732 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1659 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1659, null, left('ritocco al reso no rip senza spese', 150)
            , NULL, convert(datetime, '2020-07-09 00:00:00', 120), convert(datetime, '2020-07-09 11:21:33', 120), 1
            , 'fatto', NULL, 'fix', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-07-09 00:00:00', 120), dt_upd = convert(datetime, '2020-07-09 11:21:33', 120)
         , title = left('ritocco al reso no rip senza spese', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-07-09 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-07-09 11:21:33', 120), getdate())
          or isnull(title, '') <> isnull('ritocco al reso no rip senza spese', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:25,737 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\ordini vendite\ritocco al reso no rip senza spese
2021-01-10 15:29:25,738 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1251) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:25,746 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1655 
        and folder_name = '200728.poter assegnare un indirizzo nuovo in italia ad un cliente estero.ok.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1655, '200728.poter assegnare un indirizzo nuovo in italia ad un cliente estero.ok.molina.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-28 15:38:30', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-07-28 15:38:30', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-28 15:38:30', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:25,750 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\ordini vendite\200728.poter assegnare un indirizzo nuovo in italia ad un cliente estero.ok.molina.task
2021-01-10 15:29:25,776 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1660 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1660, null, left('poter assegnare un indirizzo nuovo in italia ad un cliente estero', 150)
            , NULL, convert(datetime, '2020-07-28 00:00:00', 120), convert(datetime, '2020-07-28 15:38:30', 120), 1
            , 'fatto', NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-07-28 00:00:00', 120), dt_upd = convert(datetime, '2020-07-28 15:38:30', 120)
         , title = left('poter assegnare un indirizzo nuovo in italia ad un cliente estero', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = NULL, stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-07-28 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-07-28 15:38:30', 120), getdate())
          or isnull(title, '') <> isnull('poter assegnare un indirizzo nuovo in italia ad un cliente estero', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:25,782 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\ordini vendite\poter assegnare un indirizzo nuovo in italia ad un cliente estero
2021-01-10 15:29:25,783 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1660 and file_name = 'sql.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1660, 'sql.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-28 15:38:30', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-07-28 15:38:30', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-28 15:38:30', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:25,788 [64] DEBUG dn_lib.tools.log - added file 3948: C:\root\todd\_test\dn\ordini vendite\200728.poter assegnare un indirizzo nuovo in italia ad un cliente estero.ok.molina.task\sql.sql
2021-01-10 15:29:25,789 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3948;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3948, '.sql', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-28 15:38:30', 120));
2021-01-10 15:29:25,791 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\ordini vendite\200728.poter assegnare un indirizzo nuovo in italia ad un cliente estero.ok.molina.task\sql.sql'
2021-01-10 15:29:25,792 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1252) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:25,799 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1655 
        and folder_name = '200729.associata la fattura al cod pag PKS1.ok.rev.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1655, '200729.associata la fattura al cod pag PKS1.ok.rev.molina.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-29 17:30:17', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-07-29 17:30:17', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-29 17:30:17', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:25,805 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\ordini vendite\200729.associata la fattura al cod pag PKS1.ok.rev.molina.task
2021-01-10 15:29:25,841 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1661 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1661, null, left('associata la fattura al cod pag PKS1', 150)
            , NULL, convert(datetime, '2020-07-29 00:00:00', 120), convert(datetime, '2020-07-29 17:30:17', 120), 1
            , 'fatto', NULL, 'revisione', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-07-29 00:00:00', 120), dt_upd = convert(datetime, '2020-07-29 17:30:17', 120)
         , title = left('associata la fattura al cod pag PKS1', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'revisione', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-07-29 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-07-29 17:30:17', 120), getdate())
          or isnull(title, '') <> isnull('associata la fattura al cod pag PKS1', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('revisione', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:25,848 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\ordini vendite\associata la fattura al cod pag PKS1
2021-01-10 15:29:25,849 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1253) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:25,858 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1655 
        and folder_name = '200730.discordanza pagamento clifor obsoleto.ok.check.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1655, '200730.discordanza pagamento clifor obsoleto.ok.check.molina.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-30 15:22:24', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-07-30 15:22:24', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-30 15:22:24', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:25,863 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\ordini vendite\200730.discordanza pagamento clifor obsoleto.ok.check.molina.task
2021-01-10 15:29:25,898 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1662 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1662, null, left('discordanza pagamento clifor obsoleto', 150)
            , NULL, convert(datetime, '2020-07-30 00:00:00', 120), convert(datetime, '2020-07-30 15:22:24', 120), 1
            , 'fatto', NULL, 'controllo', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-07-30 00:00:00', 120), dt_upd = convert(datetime, '2020-07-30 15:22:24', 120)
         , title = left('discordanza pagamento clifor obsoleto', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'controllo', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-07-30 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-07-30 15:22:24', 120), getdate())
          or isnull(title, '') <> isnull('discordanza pagamento clifor obsoleto', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('controllo', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:25,906 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\ordini vendite\discordanza pagamento clifor obsoleto
2021-01-10 15:29:25,907 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1662 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1662, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-30 15:22:24', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-07-30 15:22:24', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-30 15:22:24', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:25,912 [64] DEBUG dn_lib.tools.log - added file 3949: C:\root\todd\_test\dn\ordini vendite\200730.discordanza pagamento clifor obsoleto.ok.check.molina.task\i.txt
2021-01-10 15:29:25,914 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3949;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3949, '.txt', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-30 15:22:24', 120));
2021-01-10 15:29:25,917 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1254;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1254, 3949, @content
          , convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-30 15:22:24', 120));
2021-01-10 15:29:25,920 [64] DEBUG dn_lib.tools.log - lette note task 1254
2021-01-10 15:29:25,921 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\ordini vendite\200730.discordanza pagamento clifor obsoleto.ok.check.molina.task\i.txt'
2021-01-10 15:29:25,922 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1254) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:25,930 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1655 
        and folder_name = '200817.timeout importazione articolo nel gestionale.ok.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1655, '200817.timeout importazione articolo nel gestionale.ok.molina.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-17 17:11:06', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-08-17 17:11:06', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-17 17:11:06', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:25,935 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\ordini vendite\200817.timeout importazione articolo nel gestionale.ok.molina.task
2021-01-10 15:29:25,962 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1663 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1663, null, left('timeout importazione articolo nel gestionale', 150)
            , NULL, convert(datetime, '2020-08-17 00:00:00', 120), convert(datetime, '2020-08-17 17:11:06', 120), 1
            , 'fatto', NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-08-17 00:00:00', 120), dt_upd = convert(datetime, '2020-08-17 17:11:06', 120)
         , title = left('timeout importazione articolo nel gestionale', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = NULL, stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-08-17 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-08-17 17:11:06', 120), getdate())
          or isnull(title, '') <> isnull('timeout importazione articolo nel gestionale', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:25,967 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\ordini vendite\timeout importazione articolo nel gestionale
2021-01-10 15:29:25,968 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1663 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1663, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-17 17:11:06', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-08-17 17:11:06', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-17 17:11:06', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:25,973 [64] DEBUG dn_lib.tools.log - added file 3950: C:\root\todd\_test\dn\ordini vendite\200817.timeout importazione articolo nel gestionale.ok.molina.task\i.txt
2021-01-10 15:29:25,975 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3950;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3950, '.txt', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-17 17:11:06', 120));
2021-01-10 15:29:25,979 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1255;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1255, 3950, @content
          , convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-17 17:11:06', 120));
2021-01-10 15:29:25,981 [64] DEBUG dn_lib.tools.log - lette note task 1255
2021-01-10 15:29:25,981 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\ordini vendite\200817.timeout importazione articolo nel gestionale.ok.molina.task\i.txt'
2021-01-10 15:29:25,982 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1255) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:25,990 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1655 
        and folder_name = '200818.ordine 125381 - bolla senza articolo.ok.check.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1655, '200818.ordine 125381 - bolla senza articolo.ok.check.molina.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-18 16:15:00', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-08-18 16:15:00', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-18 16:15:00', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:25,995 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\ordini vendite\200818.ordine 125381 - bolla senza articolo.ok.check.molina.task
2021-01-10 15:29:26,027 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1664 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1664, null, left('ordine 125381 - bolla senza articolo', 150)
            , NULL, convert(datetime, '2020-08-18 00:00:00', 120), convert(datetime, '2020-08-18 16:15:00', 120), 1
            , 'fatto', NULL, 'controllo', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-08-18 00:00:00', 120), dt_upd = convert(datetime, '2020-08-18 16:15:00', 120)
         , title = left('ordine 125381 - bolla senza articolo', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'controllo', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-08-18 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-08-18 16:15:00', 120), getdate())
          or isnull(title, '') <> isnull('ordine 125381 - bolla senza articolo', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('controllo', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:26,032 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\ordini vendite\ordine 125381 - bolla senza articolo
2021-01-10 15:29:26,033 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1664 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1664, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-18 16:15:52', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-08-18 16:15:52', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-18 16:15:52', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:26,038 [64] DEBUG dn_lib.tools.log - added file 3951: C:\root\todd\_test\dn\ordini vendite\200818.ordine 125381 - bolla senza articolo.ok.check.molina.task\i.txt
2021-01-10 15:29:26,039 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3951;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3951, '.txt', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-18 16:15:52', 120));
2021-01-10 15:29:26,042 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1256;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1256, 3951, @content
          , convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-18 16:15:52', 120));
2021-01-10 15:29:26,044 [64] DEBUG dn_lib.tools.log - lette note task 1256
2021-01-10 15:29:26,045 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\ordini vendite\200818.ordine 125381 - bolla senza articolo.ok.check.molina.task\i.txt'
2021-01-10 15:29:26,046 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1256) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:26,054 [64] DEBUG dn_lib.tools.log - updated task: C:\root\todd\_test\dn\ordini vendite\ordine 125381 - bolla senza articolo
2021-01-10 15:29:26,055 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1655 
        and folder_name = '200819.codice pag PKS1 come RD02.ok.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1655, '200819.codice pag PKS1 come RD02.ok.molina.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-19 11:03:01', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-08-19 11:03:01', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-19 11:03:01', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:26,060 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\ordini vendite\200819.codice pag PKS1 come RD02.ok.molina.task
2021-01-10 15:29:26,087 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1665 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1665, null, left('codice pag PKS1 come RD02', 150)
            , NULL, convert(datetime, '2020-08-19 00:00:00', 120), convert(datetime, '2020-08-19 11:03:01', 120), 1
            , 'fatto', NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-08-19 00:00:00', 120), dt_upd = convert(datetime, '2020-08-19 11:03:01', 120)
         , title = left('codice pag PKS1 come RD02', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = NULL, stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-08-19 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-08-19 11:03:01', 120), getdate())
          or isnull(title, '') <> isnull('codice pag PKS1 come RD02', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:26,093 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\ordini vendite\codice pag PKS1 come RD02
2021-01-10 15:29:26,094 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1665 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1665, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-19 10:36:37', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-08-19 10:36:37', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-19 10:36:37', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:26,098 [64] DEBUG dn_lib.tools.log - added file 3952: C:\root\todd\_test\dn\ordini vendite\200819.codice pag PKS1 come RD02.ok.molina.task\i.txt
2021-01-10 15:29:26,099 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3952;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3952, '.txt', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-19 10:36:37', 120));
2021-01-10 15:29:26,101 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1257;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1257, 3952, @content
          , convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-19 10:36:37', 120));
2021-01-10 15:29:26,103 [64] DEBUG dn_lib.tools.log - lette note task 1257
2021-01-10 15:29:26,104 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\ordini vendite\200819.codice pag PKS1 come RD02.ok.molina.task\i.txt'
2021-01-10 15:29:26,105 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1665 and file_name = 'sql.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1665, 'sql.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-19 11:03:01', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-08-19 11:03:01', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-19 11:03:01', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:26,109 [64] DEBUG dn_lib.tools.log - added file 3953: C:\root\todd\_test\dn\ordini vendite\200819.codice pag PKS1 come RD02.ok.molina.task\sql.sql
2021-01-10 15:29:26,110 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3953;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3953, '.sql', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-19 11:03:01', 120));
2021-01-10 15:29:26,113 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\ordini vendite\200819.codice pag PKS1 come RD02.ok.molina.task\sql.sql'
2021-01-10 15:29:26,114 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1257) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:26,123 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1655 
        and folder_name = '200902.via dalla bolla le cauzioni .molina.ok.fix.mh.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1655, '200902.via dalla bolla le cauzioni .molina.ok.fix.mh.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-09-02 09:53:13', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-09-02 09:53:13', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-09-02 09:53:13', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:26,129 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\ordini vendite\200902.via dalla bolla le cauzioni .molina.ok.fix.mh.task
2021-01-10 15:29:26,169 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1666 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1666, null, left('via dalla bolla le cauzioni ', 150)
            , NULL, convert(datetime, '2020-09-02 00:00:00', 120), convert(datetime, '2020-09-02 09:53:13', 120), 1
            , 'fatto', NULL, 'fix', 'mezzora');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-09-02 00:00:00', 120), dt_upd = convert(datetime, '2020-09-02 09:53:13', 120)
         , title = left('via dalla bolla le cauzioni ', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = 'mezzora'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-09-02 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-09-02 09:53:13', 120), getdate())
          or isnull(title, '') <> isnull('via dalla bolla le cauzioni ', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull('mezzora', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:26,175 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\ordini vendite\via dalla bolla le cauzioni 
2021-01-10 15:29:26,177 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1666 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1666, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-09-02 09:53:13', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-09-02 09:53:13', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-09-02 09:53:13', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:26,181 [64] DEBUG dn_lib.tools.log - added file 3954: C:\root\todd\_test\dn\ordini vendite\200902.via dalla bolla le cauzioni .molina.ok.fix.mh.task\i.txt
2021-01-10 15:29:26,182 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3954;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3954, '.txt', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-09-02 09:53:13', 120));
2021-01-10 15:29:26,185 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1258;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1258, 3954, @content
          , convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-09-02 09:53:13', 120));
2021-01-10 15:29:26,188 [64] DEBUG dn_lib.tools.log - lette note task 1258
2021-01-10 15:29:26,189 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\ordini vendite\200902.via dalla bolla le cauzioni .molina.ok.fix.mh.task\i.txt'
2021-01-10 15:29:26,190 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1258) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:26,199 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1655 
        and folder_name = '200909.gestione carrello sintra lavorazioni.molina.ok.new.mg.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1655, '200909.gestione carrello sintra lavorazioni.molina.ok.new.mg.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-09-10 18:02:04', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-09-10 18:02:04', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-09-10 18:02:04', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:26,203 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\ordini vendite\200909.gestione carrello sintra lavorazioni.molina.ok.new.mg.task
2021-01-10 15:29:26,244 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1667 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1667, null, left('gestione carrello sintra lavorazioni', 150)
            , NULL, convert(datetime, '2020-09-09 00:00:00', 120), convert(datetime, '2020-09-10 18:02:04', 120), 1
            , 'fatto', NULL, 'aggiunta', 'mezza');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-09-09 00:00:00', 120), dt_upd = convert(datetime, '2020-09-10 18:02:04', 120)
         , title = left('gestione carrello sintra lavorazioni', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'aggiunta', stima = 'mezza'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-09-09 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-09-10 18:02:04', 120), getdate())
          or isnull(title, '') <> isnull('gestione carrello sintra lavorazioni', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('aggiunta', '') or isnull(stima, '') <> isnull('mezza', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:26,249 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\ordini vendite\gestione carrello sintra lavorazioni
2021-01-10 15:29:26,250 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1667 and file_name = 'mageman.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1667, 'mageman.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-09-10 18:02:04', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-09-10 18:02:04', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-09-10 18:02:04', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:26,255 [64] DEBUG dn_lib.tools.log - added file 3955: C:\root\todd\_test\dn\ordini vendite\200909.gestione carrello sintra lavorazioni.molina.ok.new.mg.task\mageman.sql
2021-01-10 15:29:26,256 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3955;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3955, '.sql', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-09-10 18:02:04', 120));
2021-01-10 15:29:26,258 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\ordini vendite\200909.gestione carrello sintra lavorazioni.molina.ok.new.mg.task\mageman.sql'
2021-01-10 15:29:26,259 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1667 and file_name = 'magento.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1667, 'magento.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-09-09 17:13:53', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-09-09 17:13:53', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-09-09 17:13:53', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:26,263 [64] DEBUG dn_lib.tools.log - added file 3956: C:\root\todd\_test\dn\ordini vendite\200909.gestione carrello sintra lavorazioni.molina.ok.new.mg.task\magento.sql
2021-01-10 15:29:26,264 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3956;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3956, '.sql', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-09-09 17:13:53', 120));
2021-01-10 15:29:26,266 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\ordini vendite\200909.gestione carrello sintra lavorazioni.molina.ok.new.mg.task\magento.sql'
2021-01-10 15:29:26,267 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1259) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:26,274 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1655 
        and folder_name = '200924.scelta tipo spedizione dal sito.molina.ok.new.g.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1655, '200924.scelta tipo spedizione dal sito.molina.ok.new.g.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-09-25 14:35:55', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-09-25 14:35:55', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-09-25 14:35:55', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:26,279 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\ordini vendite\200924.scelta tipo spedizione dal sito.molina.ok.new.g.task
2021-01-10 15:29:26,319 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1668 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1668, null, left('scelta tipo spedizione dal sito', 150)
            , NULL, convert(datetime, '2020-09-24 00:00:00', 120), convert(datetime, '2020-09-25 14:35:55', 120), 1
            , 'fatto', NULL, 'aggiunta', 'giornata');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-09-24 00:00:00', 120), dt_upd = convert(datetime, '2020-09-25 14:35:55', 120)
         , title = left('scelta tipo spedizione dal sito', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'aggiunta', stima = 'giornata'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-09-24 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-09-25 14:35:55', 120), getdate())
          or isnull(title, '') <> isnull('scelta tipo spedizione dal sito', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('aggiunta', '') or isnull(stima, '') <> isnull('giornata', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:26,325 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\ordini vendite\scelta tipo spedizione dal sito
2021-01-10 15:29:26,326 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1668 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1668, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-11-11 11:06:02', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-11-11 11:06:02', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-11-11 11:06:02', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:26,331 [64] DEBUG dn_lib.tools.log - added file 3957: C:\root\todd\_test\dn\ordini vendite\200924.scelta tipo spedizione dal sito.molina.ok.new.g.task\i.txt
2021-01-10 15:29:26,332 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3957;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3957, '.txt', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-11-11 11:06:02', 120));
2021-01-10 15:29:26,334 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1260;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1260, 3957, @content
          , convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-11-11 11:06:02', 120));
2021-01-10 15:29:26,337 [64] DEBUG dn_lib.tools.log - lette note task 1260
2021-01-10 15:29:26,339 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\ordini vendite\200924.scelta tipo spedizione dal sito.molina.ok.new.g.task\i.txt'
2021-01-10 15:29:26,340 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1668 and file_name = 'task.revisione promo ordini.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1668, 'task.revisione promo ordini.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-09-25 11:17:27', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-09-25 11:17:27', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-09-25 11:17:27', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:26,345 [64] DEBUG dn_lib.tools.log - added file 3958: C:\root\todd\_test\dn\ordini vendite\200924.scelta tipo spedizione dal sito.molina.ok.new.g.task\task.revisione promo ordini.sql
2021-01-10 15:29:26,346 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3958;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3958, '.sql', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-09-25 11:17:27', 120));
2021-01-10 15:29:26,350 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\ordini vendite\200924.scelta tipo spedizione dal sito.molina.ok.new.g.task\task.revisione promo ordini.sql'
2021-01-10 15:29:26,351 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1260) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:26,360 [64] DEBUG dn_lib.tools.log - updated task: C:\root\todd\_test\dn\ordini vendite\scelta tipo spedizione dal sito
2021-01-10 15:29:26,361 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1655 
        and folder_name = '201008.controllo migliorato ordine gi evaso.molina.ok.fix.2h.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1655, '201008.controllo migliorato ordine gi evaso.molina.ok.fix.2h.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-08 09:01:13', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-10-08 09:01:13', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-08 09:01:13', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:26,366 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\ordini vendite\201008.controllo migliorato ordine gi evaso.molina.ok.fix.2h.task
2021-01-10 15:29:26,405 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1669 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1669, null, left('controllo migliorato ordine gi evaso', 150)
            , NULL, convert(datetime, '2020-10-08 00:00:00', 120), convert(datetime, '2020-10-08 09:01:13', 120), 1
            , 'fatto', NULL, 'fix', 'due_ore');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-10-08 00:00:00', 120), dt_upd = convert(datetime, '2020-10-08 09:01:13', 120)
         , title = left('controllo migliorato ordine gi evaso', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = 'due_ore'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-10-08 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-10-08 09:01:13', 120), getdate())
          or isnull(title, '') <> isnull('controllo migliorato ordine gi evaso', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull('due_ore', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:26,411 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\ordini vendite\controllo migliorato ordine gi evaso
2021-01-10 15:29:26,412 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1669 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1669, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-08 09:01:13', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-10-08 09:01:13', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-08 09:01:13', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:26,417 [64] DEBUG dn_lib.tools.log - added file 3959: C:\root\todd\_test\dn\ordini vendite\201008.controllo migliorato ordine gi evaso.molina.ok.fix.2h.task\i.txt
2021-01-10 15:29:26,417 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3959;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3959, '.txt', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-08 09:01:13', 120));
2021-01-10 15:29:26,420 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1261;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1261, 3959, @content
          , convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-08 09:01:13', 120));
2021-01-10 15:29:26,422 [64] DEBUG dn_lib.tools.log - lette note task 1261
2021-01-10 15:29:26,422 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\ordini vendite\201008.controllo migliorato ordine gi evaso.molina.ok.fix.2h.task\i.txt'
2021-01-10 15:29:26,423 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1261) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:26,430 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1655 
        and folder_name = '201019.gestione scelte da sito.molina.ok.rev.2h.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1655, '201019.gestione scelte da sito.molina.ok.rev.2h.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-19 16:11:34', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-10-19 16:11:34', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-19 16:11:34', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:26,435 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\ordini vendite\201019.gestione scelte da sito.molina.ok.rev.2h.task
2021-01-10 15:29:26,474 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1670 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1670, null, left('gestione scelte da sito', 150)
            , NULL, convert(datetime, '2020-10-19 00:00:00', 120), convert(datetime, '2020-10-19 16:11:34', 120), 1
            , 'fatto', NULL, 'revisione', 'due_ore');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-10-19 00:00:00', 120), dt_upd = convert(datetime, '2020-10-19 16:11:34', 120)
         , title = left('gestione scelte da sito', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'revisione', stima = 'due_ore'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-10-19 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-10-19 16:11:34', 120), getdate())
          or isnull(title, '') <> isnull('gestione scelte da sito', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('revisione', '') or isnull(stima, '') <> isnull('due_ore', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:26,480 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\ordini vendite\gestione scelte da sito
2021-01-10 15:29:26,481 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1670 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1670, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-21 12:19:22', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-10-21 12:19:22', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-21 12:19:22', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:26,486 [64] DEBUG dn_lib.tools.log - added file 3960: C:\root\todd\_test\dn\ordini vendite\201019.gestione scelte da sito.molina.ok.rev.2h.task\i.txt
2021-01-10 15:29:26,487 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3960;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3960, '.txt', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-21 12:19:22', 120));
2021-01-10 15:29:26,490 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1262;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1262, 3960, @content
          , convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-21 12:19:22', 120));
2021-01-10 15:29:26,492 [64] DEBUG dn_lib.tools.log - lette note task 1262
2021-01-10 15:29:26,493 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\ordini vendite\201019.gestione scelte da sito.molina.ok.rev.2h.task\i.txt'
2021-01-10 15:29:26,493 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1262) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:26,501 [64] DEBUG dn_lib.tools.log - updated task: C:\root\todd\_test\dn\ordini vendite\gestione scelte da sito
2021-01-10 15:29:26,503 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1655 
        and folder_name = '201020.gestione spese corrieri.molina.ok.new.2h.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1655, '201020.gestione spese corrieri.molina.ok.new.2h.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-20 12:28:26', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-10-20 12:28:26', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-20 12:28:26', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:26,507 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\ordini vendite\201020.gestione spese corrieri.molina.ok.new.2h.task
2021-01-10 15:29:26,545 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1671 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1671, null, left('gestione spese corrieri', 150)
            , NULL, convert(datetime, '2020-10-20 00:00:00', 120), convert(datetime, '2020-10-20 12:28:26', 120), 1
            , 'fatto', NULL, 'aggiunta', 'due_ore');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-10-20 00:00:00', 120), dt_upd = convert(datetime, '2020-10-20 12:28:26', 120)
         , title = left('gestione spese corrieri', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'aggiunta', stima = 'due_ore'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-10-20 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-10-20 12:28:26', 120), getdate())
          or isnull(title, '') <> isnull('gestione spese corrieri', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('aggiunta', '') or isnull(stima, '') <> isnull('due_ore', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:26,551 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\ordini vendite\gestione spese corrieri
2021-01-10 15:29:26,552 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1671 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1671, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-20 12:28:26', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-10-20 12:28:26', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-20 12:28:26', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:26,556 [64] DEBUG dn_lib.tools.log - added file 3961: C:\root\todd\_test\dn\ordini vendite\201020.gestione spese corrieri.molina.ok.new.2h.task\i.txt
2021-01-10 15:29:26,557 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3961;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3961, '.txt', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-20 12:28:26', 120));
2021-01-10 15:29:26,560 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1263;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1263, 3961, @content
          , convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-20 12:28:26', 120));
2021-01-10 15:29:26,562 [64] DEBUG dn_lib.tools.log - lette note task 1263
2021-01-10 15:29:26,563 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\ordini vendite\201020.gestione spese corrieri.molina.ok.new.2h.task\i.txt'
2021-01-10 15:29:26,563 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1263) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:26,571 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1655 
        and folder_name = '201021.revisione ordini .molina.ok.rev.2h.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1655, '201021.revisione ordini .molina.ok.rev.2h.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-21 16:46:20', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-10-21 16:46:20', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-21 16:46:20', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:26,575 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\ordini vendite\201021.revisione ordini .molina.ok.rev.2h.task
2021-01-10 15:29:26,615 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1672 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1672, null, left('revisione ordini ', 150)
            , NULL, convert(datetime, '2020-10-21 00:00:00', 120), convert(datetime, '2020-10-21 16:46:20', 120), 1
            , 'fatto', NULL, 'revisione', 'due_ore');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-10-21 00:00:00', 120), dt_upd = convert(datetime, '2020-10-21 16:46:20', 120)
         , title = left('revisione ordini ', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'revisione', stima = 'due_ore'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-10-21 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-10-21 16:46:20', 120), getdate())
          or isnull(title, '') <> isnull('revisione ordini ', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('revisione', '') or isnull(stima, '') <> isnull('due_ore', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:26,622 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\ordini vendite\revisione ordini 
2021-01-10 15:29:26,623 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1672 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1672, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-21 16:46:20', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-10-21 16:46:20', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-21 16:46:20', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:26,628 [64] DEBUG dn_lib.tools.log - added file 3962: C:\root\todd\_test\dn\ordini vendite\201021.revisione ordini .molina.ok.rev.2h.task\i.txt
2021-01-10 15:29:26,629 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3962;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3962, '.txt', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-21 16:46:20', 120));
2021-01-10 15:29:26,632 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1264;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1264, 3962, @content
          , convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-21 16:46:20', 120));
2021-01-10 15:29:26,635 [64] DEBUG dn_lib.tools.log - lette note task 1264
2021-01-10 15:29:26,636 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\ordini vendite\201021.revisione ordini .molina.ok.rev.2h.task\i.txt'
2021-01-10 15:29:26,637 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1264) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:26,645 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1655 
        and folder_name = '201022.registra garanzia.molina.ok.new.2h.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1655, '201022.registra garanzia.molina.ok.new.2h.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-22 15:16:19', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-10-22 15:16:19', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-22 15:16:19', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:26,651 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\ordini vendite\201022.registra garanzia.molina.ok.new.2h.task
2021-01-10 15:29:26,691 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1673 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1673, null, left('registra garanzia', 150)
            , NULL, convert(datetime, '2020-10-22 00:00:00', 120), convert(datetime, '2020-10-22 15:16:19', 120), 1
            , 'fatto', NULL, 'aggiunta', 'due_ore');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-10-22 00:00:00', 120), dt_upd = convert(datetime, '2020-10-22 15:16:19', 120)
         , title = left('registra garanzia', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'aggiunta', stima = 'due_ore'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-10-22 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-10-22 15:16:19', 120), getdate())
          or isnull(title, '') <> isnull('registra garanzia', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('aggiunta', '') or isnull(stima, '') <> isnull('due_ore', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:26,697 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\ordini vendite\registra garanzia
2021-01-10 15:29:26,698 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1265) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:26,705 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1655 
        and folder_name = '201030.spese di spedizione dal sito.molina.ok.new.h.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1655, '201030.spese di spedizione dal sito.molina.ok.new.h.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-30 16:13:24', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-10-30 16:13:24', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-30 16:13:24', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:26,709 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\ordini vendite\201030.spese di spedizione dal sito.molina.ok.new.h.task
2021-01-10 15:29:26,748 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1674 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1674, null, left('spese di spedizione dal sito', 150)
            , NULL, convert(datetime, '2020-10-30 00:00:00', 120), convert(datetime, '2020-10-30 16:13:24', 120), 1
            , 'fatto', NULL, 'aggiunta', 'ora');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-10-30 00:00:00', 120), dt_upd = convert(datetime, '2020-10-30 16:13:24', 120)
         , title = left('spese di spedizione dal sito', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'aggiunta', stima = 'ora'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-10-30 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-10-30 16:13:24', 120), getdate())
          or isnull(title, '') <> isnull('spese di spedizione dal sito', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('aggiunta', '') or isnull(stima, '') <> isnull('ora', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:26,753 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\ordini vendite\spese di spedizione dal sito
2021-01-10 15:29:26,754 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1674 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1674, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-30 16:13:24', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-10-30 16:13:24', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-30 16:13:24', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:26,759 [64] DEBUG dn_lib.tools.log - added file 3963: C:\root\todd\_test\dn\ordini vendite\201030.spese di spedizione dal sito.molina.ok.new.h.task\i.txt
2021-01-10 15:29:26,760 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3963;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3963, '.txt', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-30 16:13:24', 120));
2021-01-10 15:29:26,764 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1266;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1266, 3963, @content
          , convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-30 16:13:24', 120));
2021-01-10 15:29:26,767 [64] DEBUG dn_lib.tools.log - lette note task 1266
2021-01-10 15:29:26,767 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\ordini vendite\201030.spese di spedizione dal sito.molina.ok.new.h.task\i.txt'
2021-01-10 15:29:26,768 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1266) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:26,777 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1655 
        and folder_name = '201103.soluzione chiusura corrieri.molina.ok.fix.2h.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1655, '201103.soluzione chiusura corrieri.molina.ok.fix.2h.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-11-03 17:39:58', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-11-03 17:39:58', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-11-03 17:39:58', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:26,782 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\ordini vendite\201103.soluzione chiusura corrieri.molina.ok.fix.2h.task
2021-01-10 15:29:26,825 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1675 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1675, null, left('soluzione chiusura corrieri', 150)
            , NULL, convert(datetime, '2020-11-03 00:00:00', 120), convert(datetime, '2020-11-03 17:39:58', 120), 1
            , 'fatto', NULL, 'fix', 'due_ore');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-11-03 00:00:00', 120), dt_upd = convert(datetime, '2020-11-03 17:39:58', 120)
         , title = left('soluzione chiusura corrieri', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = 'due_ore'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-11-03 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-11-03 17:39:58', 120), getdate())
          or isnull(title, '') <> isnull('soluzione chiusura corrieri', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull('due_ore', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:26,831 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\ordini vendite\soluzione chiusura corrieri
2021-01-10 15:29:26,832 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1675 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1675, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-11-03 17:39:58', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-11-03 17:39:58', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-11-03 17:39:58', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:26,837 [64] DEBUG dn_lib.tools.log - added file 3964: C:\root\todd\_test\dn\ordini vendite\201103.soluzione chiusura corrieri.molina.ok.fix.2h.task\i.txt
2021-01-10 15:29:26,838 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3964;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3964, '.txt', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-11-03 17:39:58', 120));
2021-01-10 15:29:26,840 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1267;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1267, 3964, @content
          , convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-11-03 17:39:58', 120));
2021-01-10 15:29:26,843 [64] DEBUG dn_lib.tools.log - lette note task 1267
2021-01-10 15:29:26,843 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\ordini vendite\201103.soluzione chiusura corrieri.molina.ok.fix.2h.task\i.txt'
2021-01-10 15:29:26,844 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1267) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:26,850 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1655 
        and folder_name = '201203.gestione regionale urgente e normale.molina.ok.rev.mg.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1655, '201203.gestione regionale urgente e normale.molina.ok.rev.mg.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-12-03 11:04:46', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-12-03 11:04:46', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-12-03 11:04:46', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:26,855 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\ordini vendite\201203.gestione regionale urgente e normale.molina.ok.rev.mg.task
2021-01-10 15:29:26,894 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1676 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1676, null, left('gestione regionale urgente e normale', 150)
            , NULL, convert(datetime, '2020-12-03 00:00:00', 120), convert(datetime, '2020-12-03 11:04:46', 120), 1
            , 'fatto', NULL, 'revisione', 'mezza');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-12-03 00:00:00', 120), dt_upd = convert(datetime, '2020-12-03 11:04:46', 120)
         , title = left('gestione regionale urgente e normale', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'revisione', stima = 'mezza'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-12-03 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-12-03 11:04:46', 120), getdate())
          or isnull(title, '') <> isnull('gestione regionale urgente e normale', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('revisione', '') or isnull(stima, '') <> isnull('mezza', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:26,899 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\ordini vendite\gestione regionale urgente e normale
2021-01-10 15:29:26,900 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1676 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1676, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-12-03 11:05:56', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-12-03 11:05:56', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-12-03 11:05:56', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:26,905 [64] DEBUG dn_lib.tools.log - added file 3965: C:\root\todd\_test\dn\ordini vendite\201203.gestione regionale urgente e normale.molina.ok.rev.mg.task\i.txt
2021-01-10 15:29:26,905 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3965;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3965, '.txt', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-12-03 11:05:56', 120));
2021-01-10 15:29:26,908 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1268;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1268, 3965, @content
          , convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-12-03 11:05:56', 120));
2021-01-10 15:29:26,910 [64] DEBUG dn_lib.tools.log - lette note task 1268
2021-01-10 15:29:26,910 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\ordini vendite\201203.gestione regionale urgente e normale.molina.ok.rev.mg.task\i.txt'
2021-01-10 15:29:26,911 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1268) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:26,919 [64] DEBUG dn_lib.tools.log - updated task: C:\root\todd\_test\dn\ordini vendite\gestione regionale urgente e normale
2021-01-10 15:29:26,920 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1655 and file_name = 'check indirizzi GLS non vanno.fatto.check.molina.task.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1655, 'check indirizzi GLS non vanno.fatto.check.molina.task.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-18 12:23:24', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-18 12:23:24', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-18 12:23:24', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:26,926 [64] DEBUG dn_lib.tools.log - added file 3966: C:\root\todd\_test\dn\ordini vendite\check indirizzi GLS non vanno.fatto.check.molina.task.sql
2021-01-10 15:29:26,927 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3966;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3966, '.sql', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-18 12:23:24', 120));
2021-01-10 15:29:26,930 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\ordini vendite\check indirizzi GLS non vanno.fatto.check.molina.task.sql'
2021-01-10 15:29:26,967 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 3966;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, null, 3966, left('check indirizzi GLS non vanno', 150)
            , NULL, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-18 12:23:24', 120), 1
            , 'fatto', NULL, 'controllo', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-18 12:23:24', 120)
         , title = left('check indirizzi GLS non vanno', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'controllo', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-18 12:23:24', 120), getdate())
          or isnull(title, '') <> isnull('check indirizzi GLS non vanno', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('controllo', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:26,972 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\ordini vendite\check indirizzi GLS non vanno
2021-01-10 15:29:26,973 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1655 and file_name = 'nuovo indirizzo ordine avviso cap.fatto.fix.molina.task.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1655, 'nuovo indirizzo ordine avviso cap.fatto.fix.molina.task.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-19 12:20:36', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-19 12:20:36', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-19 12:20:36', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:26,978 [64] DEBUG dn_lib.tools.log - added file 3967: C:\root\todd\_test\dn\ordini vendite\nuovo indirizzo ordine avviso cap.fatto.fix.molina.task.sql
2021-01-10 15:29:26,978 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3967;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3967, '.sql', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-19 12:20:36', 120));
2021-01-10 15:29:26,981 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\ordini vendite\nuovo indirizzo ordine avviso cap.fatto.fix.molina.task.sql'
2021-01-10 15:29:27,016 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 3967;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, null, 3967, left('nuovo indirizzo ordine avviso cap', 150)
            , NULL, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-19 12:20:36', 120), 1
            , 'fatto', NULL, 'fix', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-19 12:20:36', 120)
         , title = left('nuovo indirizzo ordine avviso cap', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-19 12:20:36', 120), getdate())
          or isnull(title, '') <> isnull('nuovo indirizzo ordine avviso cap', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:27,022 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\ordini vendite\nuovo indirizzo ordine avviso cap
2021-01-10 15:29:27,023 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1655 and file_name = 'ordine senza articoli.fatta.fix.molina.task.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1655, 'ordine senza articoli.fatta.fix.molina.task.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-05-25 12:22:51', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-05-25 12:22:51', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-05-25 12:22:51', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:27,027 [64] DEBUG dn_lib.tools.log - added file 3968: C:\root\todd\_test\dn\ordini vendite\ordine senza articoli.fatta.fix.molina.task.sql
2021-01-10 15:29:27,028 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3968;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3968, '.sql', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-05-25 12:22:51', 120));
2021-01-10 15:29:27,030 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\ordini vendite\ordine senza articoli.fatta.fix.molina.task.sql'
2021-01-10 15:29:27,063 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 3968;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, null, 3968, left('ordine senza articoli', 150)
            , NULL, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-05-25 12:22:51', 120), 1
            , 'fatto', NULL, 'fix', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-05-25 12:22:51', 120)
         , title = left('ordine senza articoli', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-05-25 12:22:51', 120), getdate())
          or isnull(title, '') <> isnull('ordine senza articoli', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:27,069 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\ordini vendite\ordine senza articoli
2021-01-10 15:29:27,070 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1655 and file_name = 'ordine web scazzato.fatto.fix.molina.task.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1655, 'ordine web scazzato.fatto.fix.molina.task.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-10 09:36:33', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-10 09:36:33', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-10 09:36:33', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:27,075 [64] DEBUG dn_lib.tools.log - added file 3969: C:\root\todd\_test\dn\ordini vendite\ordine web scazzato.fatto.fix.molina.task.sql
2021-01-10 15:29:27,076 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3969;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3969, '.sql', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-10 09:36:33', 120));
2021-01-10 15:29:27,078 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\ordini vendite\ordine web scazzato.fatto.fix.molina.task.sql'
2021-01-10 15:29:27,113 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 3969;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, null, 3969, left('ordine web scazzato', 150)
            , NULL, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-10 09:36:33', 120), 1
            , 'fatto', NULL, 'fix', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-10 09:36:33', 120)
         , title = left('ordine web scazzato', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-10 09:36:33', 120), getdate())
          or isnull(title, '') <> isnull('ordine web scazzato', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:27,119 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\ordini vendite\ordine web scazzato
2021-01-10 15:29:27,120 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1655 and file_name = 'ordini blu devono passare gi in magazzino.facile.ok.molina.task.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1655, 'ordini blu devono passare gi in magazzino.facile.ok.molina.task.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-25 08:35:00', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-25 08:35:00', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-25 08:35:00', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:27,124 [64] DEBUG dn_lib.tools.log - added file 3970: C:\root\todd\_test\dn\ordini vendite\ordini blu devono passare gi in magazzino.facile.ok.molina.task.sql
2021-01-10 15:29:27,125 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3970;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3970, '.sql', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-25 08:35:00', 120));
2021-01-10 15:29:27,127 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\ordini vendite\ordini blu devono passare gi in magazzino.facile.ok.molina.task.sql'
2021-01-10 15:29:27,158 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 3970;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, null, 3970, left('ordini blu devono passare gi in magazzino', 150)
            , NULL, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-25 08:35:00', 120), 1
            , 'fatto', NULL, 'facile', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-25 08:35:00', 120)
         , title = left('ordini blu devono passare gi in magazzino', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'facile', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-25 08:35:00', 120), getdate())
          or isnull(title, '') <> isnull('ordini blu devono passare gi in magazzino', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('facile', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:27,164 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\ordini vendite\ordini blu devono passare gi in magazzino
2021-01-10 15:29:27,165 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1655 and file_name = 'ramauto multicollo.fatto.check.molina.task.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1655, 'ramauto multicollo.fatto.check.molina.task.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-12 11:36:17', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-12 11:36:17', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-12 11:36:17', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:27,169 [64] DEBUG dn_lib.tools.log - added file 3971: C:\root\todd\_test\dn\ordini vendite\ramauto multicollo.fatto.check.molina.task.sql
2021-01-10 15:29:27,170 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3971;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3971, '.sql', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-12 11:36:17', 120));
2021-01-10 15:29:27,173 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\ordini vendite\ramauto multicollo.fatto.check.molina.task.sql'
2021-01-10 15:29:27,206 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 3971;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, null, 3971, left('ramauto multicollo', 150)
            , NULL, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-12 11:36:17', 120), 1
            , 'fatto', NULL, 'controllo', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-12 11:36:17', 120)
         , title = left('ramauto multicollo', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'controllo', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-12 11:36:17', 120), getdate())
          or isnull(title, '') <> isnull('ramauto multicollo', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('controllo', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:27,212 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\ordini vendite\ramauto multicollo
2021-01-10 15:29:27,213 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = 'preventivi';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, 'preventivi', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-03 17:41:57', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-07-03 17:41:57', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-03 17:41:57', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:27,216 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\preventivi
2021-01-10 15:29:27,217 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1677 
        and folder_name = 'Invia preventivo (ricerca targa) Lingue.molina.ok.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1677, 'Invia preventivo (ricerca targa) Lingue.molina.ok.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-03 17:19:23', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-07-03 17:19:23', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-03 17:19:23', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:27,222 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\preventivi\Invia preventivo (ricerca targa) Lingue.molina.ok.task
2021-01-10 15:29:27,248 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1678 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1678, null, left('Invia preventivo (ricerca targa) Lingue', 150)
            , NULL, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-03 17:19:23', 120), 1
            , 'fatto', NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-07-03 17:19:23', 120)
         , title = left('Invia preventivo (ricerca targa) Lingue', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = NULL, stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-07-03 17:19:23', 120), getdate())
          or isnull(title, '') <> isnull('Invia preventivo (ricerca targa) Lingue', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:27,254 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\preventivi\Invia preventivo (ricerca targa) Lingue
2021-01-10 15:29:27,255 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1678 and file_name = 'Cartel2.xlsx';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1678, 'Cartel2.xlsx', '.xlsx', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-02 14:37:27', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-07-02 14:37:27', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-02 14:37:27', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:27,259 [64] DEBUG dn_lib.tools.log - added file 3972: C:\root\todd\_test\dn\preventivi\Invia preventivo (ricerca targa) Lingue.molina.ok.task\Cartel2.xlsx
2021-01-10 15:29:27,260 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1678 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1678, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-17 08:26:19', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-17 08:26:19', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-17 08:26:19', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:27,264 [64] DEBUG dn_lib.tools.log - added file 3973: C:\root\todd\_test\dn\preventivi\Invia preventivo (ricerca targa) Lingue.molina.ok.task\i.txt
2021-01-10 15:29:27,265 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3973;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3973, '.txt', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-17 08:26:19', 120));
2021-01-10 15:29:27,268 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1275;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1275, 3973, @content
          , convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-17 08:26:19', 120));
2021-01-10 15:29:27,270 [64] DEBUG dn_lib.tools.log - lette note task 1275
2021-01-10 15:29:27,271 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\preventivi\Invia preventivo (ricerca targa) Lingue.molina.ok.task\i.txt'
2021-01-10 15:29:27,272 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1678 and file_name = 'sql.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1678, 'sql.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-03 17:19:22', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-07-03 17:19:22', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-03 17:19:22', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:27,276 [64] DEBUG dn_lib.tools.log - added file 3974: C:\root\todd\_test\dn\preventivi\Invia preventivo (ricerca targa) Lingue.molina.ok.task\sql.sql
2021-01-10 15:29:27,277 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3974;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3974, '.sql', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-03 17:19:22', 120));
2021-01-10 15:29:27,280 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\preventivi\Invia preventivo (ricerca targa) Lingue.molina.ok.task\sql.sql'
2021-01-10 15:29:27,280 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1275) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:27,289 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = 'prodotti';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, 'prodotti', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-12-11 11:12:16', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-12-11 11:12:16', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-12-11 11:12:16', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:27,292 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\prodotti
2021-01-10 15:29:27,292 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1679 
        and folder_name = '200709.marchio dpsn ai prodotti R.rev.h.ok.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1679, '200709.marchio dpsn ai prodotti R.rev.h.ok.molina.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-10 10:11:13', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-07-10 10:11:13', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-10 10:11:13', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:27,296 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\prodotti\200709.marchio dpsn ai prodotti R.rev.h.ok.molina.task
2021-01-10 15:29:27,335 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1680 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1680, null, left('marchio dpsn ai prodotti R', 150)
            , NULL, convert(datetime, '2020-07-09 00:00:00', 120), convert(datetime, '2020-07-10 10:11:13', 120), 1
            , 'fatto', NULL, 'revisione', 'ora');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-07-09 00:00:00', 120), dt_upd = convert(datetime, '2020-07-10 10:11:13', 120)
         , title = left('marchio dpsn ai prodotti R', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'revisione', stima = 'ora'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-07-09 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-07-10 10:11:13', 120), getdate())
          or isnull(title, '') <> isnull('marchio dpsn ai prodotti R', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('revisione', '') or isnull(stima, '') <> isnull('ora', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:27,341 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\prodotti\marchio dpsn ai prodotti R
2021-01-10 15:29:27,341 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1680 and file_name = 'sql.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1680, 'sql.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-10 10:11:13', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-07-10 10:11:13', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-10 10:11:13', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:27,346 [64] DEBUG dn_lib.tools.log - added file 3975: C:\root\todd\_test\dn\prodotti\200709.marchio dpsn ai prodotti R.rev.h.ok.molina.task\sql.sql
2021-01-10 15:29:27,347 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3975;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3975, '.sql', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-10 10:11:13', 120));
2021-01-10 15:29:27,349 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\prodotti\200709.marchio dpsn ai prodotti R.rev.h.ok.molina.task\sql.sql'
2021-01-10 15:29:27,349 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1276) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:27,357 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1679 
        and folder_name = '200710.gestione campo content - description per gli ARC.new.mg.ok.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1679, '200710.gestione campo content - description per gli ARC.new.mg.ok.molina.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-28 14:28:57', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-07-28 14:28:57', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-28 14:28:57', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:27,362 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\prodotti\200710.gestione campo content - description per gli ARC.new.mg.ok.molina.task
2021-01-10 15:29:27,405 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1681 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1681, null, left('gestione campo content - description per gli ARC', 150)
            , NULL, convert(datetime, '2020-07-10 00:00:00', 120), convert(datetime, '2020-07-28 14:28:57', 120), 1
            , 'fatto', NULL, 'aggiunta', 'mezza');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-07-10 00:00:00', 120), dt_upd = convert(datetime, '2020-07-28 14:28:57', 120)
         , title = left('gestione campo content - description per gli ARC', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'aggiunta', stima = 'mezza'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-07-10 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-07-28 14:28:57', 120), getdate())
          or isnull(title, '') <> isnull('gestione campo content - description per gli ARC', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('aggiunta', '') or isnull(stima, '') <> isnull('mezza', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:27,411 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\prodotti\gestione campo content - description per gli ARC
2021-01-10 15:29:27,412 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1681 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1681, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-28 14:34:39', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-07-28 14:34:39', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-28 14:34:39', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:27,416 [64] DEBUG dn_lib.tools.log - added file 3976: C:\root\todd\_test\dn\prodotti\200710.gestione campo content - description per gli ARC.new.mg.ok.molina.task\i.txt
2021-01-10 15:29:27,417 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3976;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3976, '.txt', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-28 14:34:39', 120));
2021-01-10 15:29:27,420 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1277;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1277, 3976, @content
          , convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-28 14:34:39', 120));
2021-01-10 15:29:27,422 [64] DEBUG dn_lib.tools.log - lette note task 1277
2021-01-10 15:29:27,423 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\prodotti\200710.gestione campo content - description per gli ARC.new.mg.ok.molina.task\i.txt'
2021-01-10 15:29:27,424 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1681 and file_name = 'sql.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1681, 'sql.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-28 14:28:57', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-07-28 14:28:57', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-28 14:28:57', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:27,428 [64] DEBUG dn_lib.tools.log - added file 3977: C:\root\todd\_test\dn\prodotti\200710.gestione campo content - description per gli ARC.new.mg.ok.molina.task\sql.sql
2021-01-10 15:29:27,429 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3977;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3977, '.sql', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-28 14:28:57', 120));
2021-01-10 15:29:27,431 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\prodotti\200710.gestione campo content - description per gli ARC.new.mg.ok.molina.task\sql.sql'
2021-01-10 15:29:27,431 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1277) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:27,439 [64] DEBUG dn_lib.tools.log - updated task: C:\root\todd\_test\dn\prodotti\gestione campo content - description per gli ARC
2021-01-10 15:29:27,440 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1679 
        and folder_name = '200812.uniformare le categorie.ok.upd.g.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1679, '200812.uniformare le categorie.ok.upd.g.molina.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-14 10:13:19', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-08-14 10:13:19', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-14 10:13:19', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:27,445 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\prodotti\200812.uniformare le categorie.ok.upd.g.molina.task
2021-01-10 15:29:27,485 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1682 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1682, null, left('uniformare le categorie', 150)
            , NULL, convert(datetime, '2020-08-12 00:00:00', 120), convert(datetime, '2020-08-14 10:13:19', 120), 1
            , 'fatto', NULL, 'modifica', 'giornata');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-08-12 00:00:00', 120), dt_upd = convert(datetime, '2020-08-14 10:13:19', 120)
         , title = left('uniformare le categorie', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'modifica', stima = 'giornata'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-08-12 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-08-14 10:13:19', 120), getdate())
          or isnull(title, '') <> isnull('uniformare le categorie', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('modifica', '') or isnull(stima, '') <> isnull('giornata', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:27,491 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\prodotti\uniformare le categorie
2021-01-10 15:29:27,492 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1682 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1682, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-14 10:16:35', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-08-14 10:16:35', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-14 10:16:35', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:27,496 [64] DEBUG dn_lib.tools.log - added file 3978: C:\root\todd\_test\dn\prodotti\200812.uniformare le categorie.ok.upd.g.molina.task\i.txt
2021-01-10 15:29:27,497 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3978;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3978, '.txt', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-14 10:16:35', 120));
2021-01-10 15:29:27,499 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1278;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1278, 3978, @content
          , convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-14 10:16:35', 120));
2021-01-10 15:29:27,501 [64] DEBUG dn_lib.tools.log - lette note task 1278
2021-01-10 15:29:27,501 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\prodotti\200812.uniformare le categorie.ok.upd.g.molina.task\i.txt'
2021-01-10 15:29:27,502 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1682 and file_name = 'sql.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1682, 'sql.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-14 10:13:19', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-08-14 10:13:19', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-14 10:13:19', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:27,506 [64] DEBUG dn_lib.tools.log - added file 3979: C:\root\todd\_test\dn\prodotti\200812.uniformare le categorie.ok.upd.g.molina.task\sql.sql
2021-01-10 15:29:27,507 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3979;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3979, '.sql', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-14 10:13:19', 120));
2021-01-10 15:29:27,509 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\prodotti\200812.uniformare le categorie.ok.upd.g.molina.task\sql.sql'
2021-01-10 15:29:27,510 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1278) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:27,518 [64] DEBUG dn_lib.tools.log - updated task: C:\root\todd\_test\dn\prodotti\uniformare le categorie
2021-01-10 15:29:27,519 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1679 
        and folder_name = '200813.nuove categorie.ok.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1679, '200813.nuove categorie.ok.molina.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-13 10:01:41', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-08-13 10:01:41', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-13 10:01:41', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:27,524 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\prodotti\200813.nuove categorie.ok.molina.task
2021-01-10 15:29:27,551 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1683 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1683, null, left('nuove categorie', 150)
            , NULL, convert(datetime, '2020-08-13 00:00:00', 120), convert(datetime, '2020-08-13 10:01:41', 120), 1
            , 'fatto', NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-08-13 00:00:00', 120), dt_upd = convert(datetime, '2020-08-13 10:01:41', 120)
         , title = left('nuove categorie', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = NULL, stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-08-13 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-08-13 10:01:41', 120), getdate())
          or isnull(title, '') <> isnull('nuove categorie', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:27,557 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\prodotti\nuove categorie
2021-01-10 15:29:27,558 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1683 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1683, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-13 10:01:41', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-08-13 10:01:41', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-13 10:01:41', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:27,562 [64] DEBUG dn_lib.tools.log - added file 3980: C:\root\todd\_test\dn\prodotti\200813.nuove categorie.ok.molina.task\i.txt
2021-01-10 15:29:27,563 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3980;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3980, '.txt', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-13 10:01:41', 120));
2021-01-10 15:29:27,565 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1279;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1279, 3980, @content
          , convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-13 10:01:41', 120));
2021-01-10 15:29:27,567 [64] DEBUG dn_lib.tools.log - lette note task 1279
2021-01-10 15:29:27,567 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\prodotti\200813.nuove categorie.ok.molina.task\i.txt'
2021-01-10 15:29:27,568 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1279) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:27,575 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1679 
        and folder_name = '200824.griglia codici DIP.ok.new.2h.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1679, '200824.griglia codici DIP.ok.new.2h.molina.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-24 18:14:02', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-08-24 18:14:02', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-24 18:14:02', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:27,581 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\prodotti\200824.griglia codici DIP.ok.new.2h.molina.task
2021-01-10 15:29:27,623 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1684 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1684, null, left('griglia codici DIP', 150)
            , NULL, convert(datetime, '2020-08-24 00:00:00', 120), convert(datetime, '2020-08-24 18:14:02', 120), 1
            , 'fatto', NULL, 'aggiunta', 'due_ore');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-08-24 00:00:00', 120), dt_upd = convert(datetime, '2020-08-24 18:14:02', 120)
         , title = left('griglia codici DIP', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'aggiunta', stima = 'due_ore'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-08-24 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-08-24 18:14:02', 120), getdate())
          or isnull(title, '') <> isnull('griglia codici DIP', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('aggiunta', '') or isnull(stima, '') <> isnull('due_ore', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:27,628 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\prodotti\griglia codici DIP
2021-01-10 15:29:27,630 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1684 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1684, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-24 18:13:57', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-08-24 18:13:57', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-24 18:13:57', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:27,634 [64] DEBUG dn_lib.tools.log - added file 3981: C:\root\todd\_test\dn\prodotti\200824.griglia codici DIP.ok.new.2h.molina.task\i.txt
2021-01-10 15:29:27,635 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3981;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3981, '.txt', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-24 18:13:57', 120));
2021-01-10 15:29:27,637 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1280;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1280, 3981, @content
          , convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-24 18:13:57', 120));
2021-01-10 15:29:27,639 [64] DEBUG dn_lib.tools.log - lette note task 1280
2021-01-10 15:29:27,640 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\prodotti\200824.griglia codici DIP.ok.new.2h.molina.task\i.txt'
2021-01-10 15:29:27,641 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1684 and file_name = 'sql.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1684, 'sql.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-24 18:14:02', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-08-24 18:14:02', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-24 18:14:02', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:27,645 [64] DEBUG dn_lib.tools.log - added file 3982: C:\root\todd\_test\dn\prodotti\200824.griglia codici DIP.ok.new.2h.molina.task\sql.sql
2021-01-10 15:29:27,646 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3982;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3982, '.sql', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-24 18:14:02', 120));
2021-01-10 15:29:27,648 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\prodotti\200824.griglia codici DIP.ok.new.2h.molina.task\sql.sql'
2021-01-10 15:29:27,649 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1280) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:27,656 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1679 
        and folder_name = '200825.sistemata la vista VW_CAUZIONI.ok.fix.mh.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1679, '200825.sistemata la vista VW_CAUZIONI.ok.fix.mh.molina.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-27 12:27:09', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-08-27 12:27:09', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-27 12:27:09', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:27,660 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\prodotti\200825.sistemata la vista VW_CAUZIONI.ok.fix.mh.molina.task
2021-01-10 15:29:27,705 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1685 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1685, null, left('sistemata la vista VW_CAUZIONI', 150)
            , NULL, convert(datetime, '2020-08-25 00:00:00', 120), convert(datetime, '2020-08-27 12:27:09', 120), 1
            , 'fatto', NULL, 'fix', 'mezzora');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-08-25 00:00:00', 120), dt_upd = convert(datetime, '2020-08-27 12:27:09', 120)
         , title = left('sistemata la vista VW_CAUZIONI', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = 'mezzora'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-08-25 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-08-27 12:27:09', 120), getdate())
          or isnull(title, '') <> isnull('sistemata la vista VW_CAUZIONI', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull('mezzora', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:27,711 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\prodotti\sistemata la vista VW_CAUZIONI
2021-01-10 15:29:27,712 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1685 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1685, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-25 09:32:06', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-08-25 09:32:06', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-25 09:32:06', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:27,716 [64] DEBUG dn_lib.tools.log - added file 3983: C:\root\todd\_test\dn\prodotti\200825.sistemata la vista VW_CAUZIONI.ok.fix.mh.molina.task\i.txt
2021-01-10 15:29:27,717 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3983;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3983, '.txt', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-25 09:32:06', 120));
2021-01-10 15:29:27,720 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1281;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1281, 3983, @content
          , convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-25 09:32:06', 120));
2021-01-10 15:29:27,722 [64] DEBUG dn_lib.tools.log - lette note task 1281
2021-01-10 15:29:27,723 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\prodotti\200825.sistemata la vista VW_CAUZIONI.ok.fix.mh.molina.task\i.txt'
2021-01-10 15:29:27,723 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1685 and file_name = 'scheda crm con 2 codici.png';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1685, 'scheda crm con 2 codici.png', '.png', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-11 10:11:25', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-08-11 10:11:25', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-11 10:11:25', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:27,728 [64] DEBUG dn_lib.tools.log - added file 3984: C:\root\todd\_test\dn\prodotti\200825.sistemata la vista VW_CAUZIONI.ok.fix.mh.molina.task\scheda crm con 2 codici.png
2021-01-10 15:29:27,729 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1685 and file_name = 'sql.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1685, 'sql.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-25 09:32:25', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-08-25 09:32:25', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-25 09:32:25', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:27,733 [64] DEBUG dn_lib.tools.log - added file 3985: C:\root\todd\_test\dn\prodotti\200825.sistemata la vista VW_CAUZIONI.ok.fix.mh.molina.task\sql.sql
2021-01-10 15:29:27,735 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3985;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3985, '.sql', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-25 09:32:25', 120));
2021-01-10 15:29:27,738 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\prodotti\200825.sistemata la vista VW_CAUZIONI.ok.fix.mh.molina.task\sql.sql'
2021-01-10 15:29:27,739 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1685 and file_name = 'Thumbs.db';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1685, 'Thumbs.db', '.db', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-27 12:27:09', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-08-27 12:27:09', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-27 12:27:09', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:27,744 [64] DEBUG dn_lib.tools.log - added file 3986: C:\root\todd\_test\dn\prodotti\200825.sistemata la vista VW_CAUZIONI.ok.fix.mh.molina.task\Thumbs.db
2021-01-10 15:29:27,745 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1281) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:27,751 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1679 
        and folder_name = '200929.sistemata la paginetta prodotti per le carcasse.molina.ok.new.2h.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1679, '200929.sistemata la paginetta prodotti per le carcasse.molina.ok.new.2h.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-09-29 12:19:39', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-09-29 12:19:39', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-09-29 12:19:39', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:27,756 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\prodotti\200929.sistemata la paginetta prodotti per le carcasse.molina.ok.new.2h.task
2021-01-10 15:29:27,796 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1686 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1686, null, left('sistemata la paginetta prodotti per le carcasse', 150)
            , NULL, convert(datetime, '2020-09-29 00:00:00', 120), convert(datetime, '2020-09-29 12:19:39', 120), 1
            , 'fatto', NULL, 'aggiunta', 'due_ore');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-09-29 00:00:00', 120), dt_upd = convert(datetime, '2020-09-29 12:19:39', 120)
         , title = left('sistemata la paginetta prodotti per le carcasse', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'aggiunta', stima = 'due_ore'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-09-29 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-09-29 12:19:39', 120), getdate())
          or isnull(title, '') <> isnull('sistemata la paginetta prodotti per le carcasse', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('aggiunta', '') or isnull(stima, '') <> isnull('due_ore', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:27,802 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\prodotti\sistemata la paginetta prodotti per le carcasse
2021-01-10 15:29:27,803 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1282) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:27,811 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1679 
        and folder_name = '201007.vendite nella pagina prodotti web.molina.ok.easy.2h.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1679, '201007.vendite nella pagina prodotti web.molina.ok.easy.2h.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-07 16:41:17', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-10-07 16:41:17', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-07 16:41:17', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:27,816 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\prodotti\201007.vendite nella pagina prodotti web.molina.ok.easy.2h.task
2021-01-10 15:29:27,859 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1687 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1687, null, left('vendite nella pagina prodotti web', 150)
            , NULL, convert(datetime, '2020-10-07 00:00:00', 120), convert(datetime, '2020-10-07 16:41:17', 120), 1
            , 'fatto', NULL, 'facile', 'due_ore');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-10-07 00:00:00', 120), dt_upd = convert(datetime, '2020-10-07 16:41:17', 120)
         , title = left('vendite nella pagina prodotti web', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'facile', stima = 'due_ore'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-10-07 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-10-07 16:41:17', 120), getdate())
          or isnull(title, '') <> isnull('vendite nella pagina prodotti web', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('facile', '') or isnull(stima, '') <> isnull('due_ore', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:27,864 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\prodotti\vendite nella pagina prodotti web
2021-01-10 15:29:27,865 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1687 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1687, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-07 16:41:17', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-10-07 16:41:17', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-07 16:41:17', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:27,869 [64] DEBUG dn_lib.tools.log - added file 3987: C:\root\todd\_test\dn\prodotti\201007.vendite nella pagina prodotti web.molina.ok.easy.2h.task\i.txt
2021-01-10 15:29:27,870 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3987;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3987, '.txt', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-07 16:41:17', 120));
2021-01-10 15:29:27,872 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1283;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1283, 3987, @content
          , convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-07 16:41:17', 120));
2021-01-10 15:29:27,875 [64] DEBUG dn_lib.tools.log - lette note task 1283
2021-01-10 15:29:27,875 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\prodotti\201007.vendite nella pagina prodotti web.molina.ok.easy.2h.task\i.txt'
2021-01-10 15:29:27,876 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1283) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:27,883 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1679 
        and folder_name = '201012.gestione note sui prodotti.molina.ok.new.mg.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1679, '201012.gestione note sui prodotti.molina.ok.new.mg.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-12 16:56:24', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-10-12 16:56:24', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-12 16:56:24', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:27,889 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\prodotti\201012.gestione note sui prodotti.molina.ok.new.mg.task
2021-01-10 15:29:27,927 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1688 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1688, null, left('gestione note sui prodotti', 150)
            , NULL, convert(datetime, '2020-10-12 00:00:00', 120), convert(datetime, '2020-10-12 16:56:24', 120), 1
            , 'fatto', NULL, 'aggiunta', 'mezza');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-10-12 00:00:00', 120), dt_upd = convert(datetime, '2020-10-12 16:56:24', 120)
         , title = left('gestione note sui prodotti', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'aggiunta', stima = 'mezza'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-10-12 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-10-12 16:56:24', 120), getdate())
          or isnull(title, '') <> isnull('gestione note sui prodotti', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('aggiunta', '') or isnull(stima, '') <> isnull('mezza', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:27,933 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\prodotti\gestione note sui prodotti
2021-01-10 15:29:27,934 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1688 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1688, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-14 16:44:40', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-10-14 16:44:40', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-14 16:44:40', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:27,938 [64] DEBUG dn_lib.tools.log - added file 3988: C:\root\todd\_test\dn\prodotti\201012.gestione note sui prodotti.molina.ok.new.mg.task\i.txt
2021-01-10 15:29:27,939 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3988;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3988, '.txt', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-14 16:44:40', 120));
2021-01-10 15:29:27,942 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1284;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1284, 3988, @content
          , convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-14 16:44:40', 120));
2021-01-10 15:29:27,944 [64] DEBUG dn_lib.tools.log - lette note task 1284
2021-01-10 15:29:27,944 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\prodotti\201012.gestione note sui prodotti.molina.ok.new.mg.task\i.txt'
2021-01-10 15:29:27,947 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1284) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:27,956 [64] DEBUG dn_lib.tools.log - updated task: C:\root\todd\_test\dn\prodotti\gestione note sui prodotti
2021-01-10 15:29:27,957 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1679 
        and folder_name = '201211.descrizione breve con tags.molina.ok.rev.2h.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1679, '201211.descrizione breve con tags.molina.ok.rev.2h.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-12-11 11:13:59', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-12-11 11:13:59', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-12-11 11:13:59', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:27,962 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\prodotti\201211.descrizione breve con tags.molina.ok.rev.2h.task
2021-01-10 15:29:28,004 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1689 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1689, null, left('descrizione breve con tags', 150)
            , NULL, convert(datetime, '2020-12-11 00:00:00', 120), convert(datetime, '2020-12-11 11:13:59', 120), 1
            , 'fatto', NULL, 'revisione', 'due_ore');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-12-11 00:00:00', 120), dt_upd = convert(datetime, '2020-12-11 11:13:59', 120)
         , title = left('descrizione breve con tags', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'revisione', stima = 'due_ore'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-12-11 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-12-11 11:13:59', 120), getdate())
          or isnull(title, '') <> isnull('descrizione breve con tags', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('revisione', '') or isnull(stima, '') <> isnull('due_ore', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:28,010 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\prodotti\descrizione breve con tags
2021-01-10 15:29:28,011 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1689 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1689, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-12-11 11:13:59', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-12-11 11:13:59', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-12-11 11:13:59', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:28,015 [64] DEBUG dn_lib.tools.log - added file 3989: C:\root\todd\_test\dn\prodotti\201211.descrizione breve con tags.molina.ok.rev.2h.task\i.txt
2021-01-10 15:29:28,016 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3989;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3989, '.txt', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-12-11 11:13:59', 120));
2021-01-10 15:29:28,018 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1285;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1285, 3989, @content
          , convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-12-11 11:13:59', 120));
2021-01-10 15:29:28,020 [64] DEBUG dn_lib.tools.log - lette note task 1285
2021-01-10 15:29:28,021 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\prodotti\201211.descrizione breve con tags.molina.ok.rev.2h.task\i.txt'
2021-01-10 15:29:28,021 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1285) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:28,028 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1679 
        and folder_name = 'listini';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1679, 'listini', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-30 11:37:11', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-10-30 11:37:11', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-30 11:37:11', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:28,033 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\prodotti\listini
2021-01-10 15:29:28,034 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1690 
        and folder_name = '200811.aggiornata la lista delle categorie.ok.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1690, '200811.aggiornata la lista delle categorie.ok.molina.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-11 17:33:26', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-08-11 17:33:26', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-11 17:33:26', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:28,038 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\prodotti\listini\200811.aggiornata la lista delle categorie.ok.molina.task
2021-01-10 15:29:28,063 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1691 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1691, null, left('aggiornata la lista delle categorie', 150)
            , NULL, convert(datetime, '2020-08-11 00:00:00', 120), convert(datetime, '2020-08-11 17:33:26', 120), 1
            , 'fatto', NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-08-11 00:00:00', 120), dt_upd = convert(datetime, '2020-08-11 17:33:26', 120)
         , title = left('aggiornata la lista delle categorie', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = NULL, stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-08-11 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-08-11 17:33:26', 120), getdate())
          or isnull(title, '') <> isnull('aggiornata la lista delle categorie', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:28,069 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\prodotti\listini\aggiornata la lista delle categorie
2021-01-10 15:29:28,070 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1286) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:28,077 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1690 
        and folder_name = '200811.aggiunta filtro nuovo - rev per i listini.ok.new.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1690, '200811.aggiunta filtro nuovo - rev per i listini.ok.new.molina.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-11 11:40:33', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-08-11 11:40:33', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-11 11:40:33', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:28,081 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\prodotti\listini\200811.aggiunta filtro nuovo - rev per i listini.ok.new.molina.task
2021-01-10 15:29:28,117 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1692 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1692, null, left('aggiunta filtro nuovo - rev per i listini', 150)
            , NULL, convert(datetime, '2020-08-11 00:00:00', 120), convert(datetime, '2020-08-11 11:40:33', 120), 1
            , 'fatto', NULL, 'aggiunta', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-08-11 00:00:00', 120), dt_upd = convert(datetime, '2020-08-11 11:40:33', 120)
         , title = left('aggiunta filtro nuovo - rev per i listini', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'aggiunta', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-08-11 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-08-11 11:40:33', 120), getdate())
          or isnull(title, '') <> isnull('aggiunta filtro nuovo - rev per i listini', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('aggiunta', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:28,123 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\prodotti\listini\aggiunta filtro nuovo - rev per i listini
2021-01-10 15:29:28,124 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1287) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:28,132 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1690 
        and folder_name = '200821.NUOVO Listino RICAMBISTA B.molina.ok.alta.upd.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1690, '200821.NUOVO Listino RICAMBISTA B.molina.ok.alta.upd.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-21 11:12:13', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-08-21 11:12:13', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-21 11:12:13', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:28,136 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\prodotti\listini\200821.NUOVO Listino RICAMBISTA B.molina.ok.alta.upd.task
2021-01-10 15:29:28,175 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1693 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1693, null, left('NUOVO Listino RICAMBISTA B', 150)
            , NULL, convert(datetime, '2020-08-21 00:00:00', 120), convert(datetime, '2020-08-21 11:12:13', 120), 1
            , 'fatto', 'alta', 'modifica', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-08-21 00:00:00', 120), dt_upd = convert(datetime, '2020-08-21 11:12:13', 120)
         , title = left('NUOVO Listino RICAMBISTA B', 150), [user] = NULL
         , stato = 'fatto', priorita = 'alta'
         , tipo = 'modifica', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-08-21 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-08-21 11:12:13', 120), getdate())
          or isnull(title, '') <> isnull('NUOVO Listino RICAMBISTA B', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull('alta', '') 
          or isnull(tipo, '') <> isnull('modifica', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:28,181 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\prodotti\listini\NUOVO Listino RICAMBISTA B
2021-01-10 15:29:28,182 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1693 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1693, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-21 11:12:13', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-08-21 11:12:13', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-21 11:12:13', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:28,186 [64] DEBUG dn_lib.tools.log - added file 3990: C:\root\todd\_test\dn\prodotti\listini\200821.NUOVO Listino RICAMBISTA B.molina.ok.alta.upd.task\i.txt
2021-01-10 15:29:28,187 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3990;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3990, '.txt', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-21 11:12:13', 120));
2021-01-10 15:29:28,189 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1288;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1288, 3990, @content
          , convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-21 11:12:13', 120));
2021-01-10 15:29:28,191 [64] DEBUG dn_lib.tools.log - lette note task 1288
2021-01-10 15:29:28,191 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\prodotti\listini\200821.NUOVO Listino RICAMBISTA B.molina.ok.alta.upd.task\i.txt'
2021-01-10 15:29:28,192 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1288) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:28,199 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1690 
        and folder_name = '200929.nuovo listino Ricambista B.molina.ok.rev.mg.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1690, '200929.nuovo listino Ricambista B.molina.ok.rev.mg.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-06 10:04:39', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-10-06 10:04:39', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-06 10:04:39', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:28,203 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\prodotti\listini\200929.nuovo listino Ricambista B.molina.ok.rev.mg.task
2021-01-10 15:29:28,249 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1694 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1694, null, left('nuovo listino Ricambista B', 150)
            , NULL, convert(datetime, '2020-09-29 00:00:00', 120), convert(datetime, '2020-10-06 10:04:39', 120), 1
            , 'fatto', NULL, 'revisione', 'mezza');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-09-29 00:00:00', 120), dt_upd = convert(datetime, '2020-10-06 10:04:39', 120)
         , title = left('nuovo listino Ricambista B', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'revisione', stima = 'mezza'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-09-29 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-10-06 10:04:39', 120), getdate())
          or isnull(title, '') <> isnull('nuovo listino Ricambista B', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('revisione', '') or isnull(stima, '') <> isnull('mezza', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:28,255 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\prodotti\listini\nuovo listino Ricambista B
2021-01-10 15:29:28,257 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1694 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1694, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-08 15:57:07', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-10-08 15:57:07', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-08 15:57:07', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:28,261 [64] DEBUG dn_lib.tools.log - added file 3991: C:\root\todd\_test\dn\prodotti\listini\200929.nuovo listino Ricambista B.molina.ok.rev.mg.task\i.txt
2021-01-10 15:29:28,262 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3991;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3991, '.txt', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-08 15:57:07', 120));
2021-01-10 15:29:28,265 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1289;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1289, 3991, @content
          , convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-08 15:57:07', 120));
2021-01-10 15:29:28,268 [64] DEBUG dn_lib.tools.log - lette note task 1289
2021-01-10 15:29:28,269 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\prodotti\listini\200929.nuovo listino Ricambista B.molina.ok.rev.mg.task\i.txt'
2021-01-10 15:29:28,270 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1694 and file_name = 'task.listino ricb.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1694, 'task.listino ricb.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-06 10:04:39', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-10-06 10:04:39', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-06 10:04:39', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:28,275 [64] DEBUG dn_lib.tools.log - added file 3992: C:\root\todd\_test\dn\prodotti\listini\200929.nuovo listino Ricambista B.molina.ok.rev.mg.task\task.listino ricb.sql
2021-01-10 15:29:28,276 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3992;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3992, '.sql', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-06 10:04:39', 120));
2021-01-10 15:29:28,279 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\prodotti\listini\200929.nuovo listino Ricambista B.molina.ok.rev.mg.task\task.listino ricb.sql'
2021-01-10 15:29:28,279 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1289) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:28,287 [64] DEBUG dn_lib.tools.log - updated task: C:\root\todd\_test\dn\prodotti\listini\nuovo listino Ricambista B
2021-01-10 15:29:28,288 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1690 
        and folder_name = '201014.gestione ricambista b per i prezzi.molina.ok.urgente.fix.2h.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1690, '201014.gestione ricambista b per i prezzi.molina.ok.urgente.fix.2h.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-14 11:24:39', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-10-14 11:24:39', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-14 11:24:39', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:28,292 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\prodotti\listini\201014.gestione ricambista b per i prezzi.molina.ok.urgente.fix.2h.task
2021-01-10 15:29:28,340 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1695 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1695, null, left('gestione ricambista b per i prezzi', 150)
            , NULL, convert(datetime, '2020-10-14 00:00:00', 120), convert(datetime, '2020-10-14 11:24:39', 120), 1
            , 'fatto', 'altissima', 'fix', 'due_ore');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-10-14 00:00:00', 120), dt_upd = convert(datetime, '2020-10-14 11:24:39', 120)
         , title = left('gestione ricambista b per i prezzi', 150), [user] = NULL
         , stato = 'fatto', priorita = 'altissima'
         , tipo = 'fix', stima = 'due_ore'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-10-14 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-10-14 11:24:39', 120), getdate())
          or isnull(title, '') <> isnull('gestione ricambista b per i prezzi', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull('altissima', '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull('due_ore', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:28,345 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\prodotti\listini\gestione ricambista b per i prezzi
2021-01-10 15:29:28,346 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1695 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1695, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-14 11:24:39', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-10-14 11:24:39', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-14 11:24:39', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:28,351 [64] DEBUG dn_lib.tools.log - added file 3993: C:\root\todd\_test\dn\prodotti\listini\201014.gestione ricambista b per i prezzi.molina.ok.urgente.fix.2h.task\i.txt
2021-01-10 15:29:28,351 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3993;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3993, '.txt', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-14 11:24:39', 120));
2021-01-10 15:29:28,354 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1290;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1290, 3993, @content
          , convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-14 11:24:39', 120));
2021-01-10 15:29:28,356 [64] DEBUG dn_lib.tools.log - lette note task 1290
2021-01-10 15:29:28,356 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\prodotti\listini\201014.gestione ricambista b per i prezzi.molina.ok.urgente.fix.2h.task\i.txt'
2021-01-10 15:29:28,357 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1290) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:28,364 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1690 
        and folder_name = '201030.listini multipli sistemati.molina.ok.fix.2h.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1690, '201030.listini multipli sistemati.molina.ok.fix.2h.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-30 11:37:38', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-10-30 11:37:38', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-30 11:37:38', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:28,368 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\prodotti\listini\201030.listini multipli sistemati.molina.ok.fix.2h.task
2021-01-10 15:29:28,410 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1696 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1696, null, left('listini multipli sistemati', 150)
            , NULL, convert(datetime, '2020-10-30 00:00:00', 120), convert(datetime, '2020-10-30 11:37:38', 120), 1
            , 'fatto', NULL, 'fix', 'due_ore');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-10-30 00:00:00', 120), dt_upd = convert(datetime, '2020-10-30 11:37:38', 120)
         , title = left('listini multipli sistemati', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = 'due_ore'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-10-30 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-10-30 11:37:38', 120), getdate())
          or isnull(title, '') <> isnull('listini multipli sistemati', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull('due_ore', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:28,417 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\prodotti\listini\listini multipli sistemati
2021-01-10 15:29:28,418 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1696 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1696, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-30 11:37:38', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-10-30 11:37:38', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-30 11:37:38', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:28,423 [64] DEBUG dn_lib.tools.log - added file 3994: C:\root\todd\_test\dn\prodotti\listini\201030.listini multipli sistemati.molina.ok.fix.2h.task\i.txt
2021-01-10 15:29:28,424 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3994;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3994, '.txt', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-30 11:37:38', 120));
2021-01-10 15:29:28,426 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1291;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1291, 3994, @content
          , convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-30 11:37:38', 120));
2021-01-10 15:29:28,428 [64] DEBUG dn_lib.tools.log - lette note task 1291
2021-01-10 15:29:28,428 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\prodotti\listini\201030.listini multipli sistemati.molina.ok.fix.2h.task\i.txt'
2021-01-10 15:29:28,429 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1291) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:28,436 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1679 and file_name = 'GACC611DPSN non  nei listini.ok.fix.molina.task.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1679, 'GACC611DPSN non  nei listini.ok.fix.molina.task.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-02 12:06:40', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-07-02 12:06:40', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-02 12:06:40', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:28,441 [64] DEBUG dn_lib.tools.log - added file 3995: C:\root\todd\_test\dn\prodotti\GACC611DPSN non  nei listini.ok.fix.molina.task.sql
2021-01-10 15:29:28,442 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3995;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3995, '.sql', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-02 12:06:40', 120));
2021-01-10 15:29:28,445 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\prodotti\GACC611DPSN non  nei listini.ok.fix.molina.task.sql'
2021-01-10 15:29:28,480 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 3995;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, null, 3995, left('GACC611DPSN non  nei listini', 150)
            , NULL, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-02 12:06:40', 120), 1
            , 'fatto', NULL, 'fix', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-07-02 12:06:40', 120)
         , title = left('GACC611DPSN non  nei listini', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-07-02 12:06:40', 120), getdate())
          or isnull(title, '') <> isnull('GACC611DPSN non  nei listini', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:28,486 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\prodotti\GACC611DPSN non  nei listini
2021-01-10 15:29:28,488 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1679 and file_name = 'spariscono le domande dei prodotti sul sito.check.ok.molina.task.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1679, 'spariscono le domande dei prodotti sul sito.check.ok.molina.task.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-06 10:34:55', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-07-06 10:34:55', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-06 10:34:55', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:28,492 [64] DEBUG dn_lib.tools.log - added file 3996: C:\root\todd\_test\dn\prodotti\spariscono le domande dei prodotti sul sito.check.ok.molina.task.sql
2021-01-10 15:29:28,493 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3996;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3996, '.sql', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-06 10:34:55', 120));
2021-01-10 15:29:28,496 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\prodotti\spariscono le domande dei prodotti sul sito.check.ok.molina.task.sql'
2021-01-10 15:29:28,527 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 3996;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, null, 3996, left('spariscono le domande dei prodotti sul sito', 150)
            , NULL, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-06 10:34:55', 120), 1
            , 'fatto', NULL, 'controllo', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-07-06 10:34:55', 120)
         , title = left('spariscono le domande dei prodotti sul sito', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'controllo', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-07-06 10:34:55', 120), getdate())
          or isnull(title, '') <> isnull('spariscono le domande dei prodotti sul sito', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('controllo', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:28,533 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\prodotti\spariscono le domande dei prodotti sul sito
2021-01-10 15:29:28,534 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = 'ricerche targa';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, 'ricerche targa', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-09-30 18:13:07', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-09-30 18:13:07', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-09-30 18:13:07', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:28,536 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\ricerche targa
2021-01-10 15:29:28,538 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1697 
        and folder_name = '200930.cancellazione virtuale ricerche.ok.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1697, '200930.cancellazione virtuale ricerche.ok.molina.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-09-30 18:13:26', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-09-30 18:13:26', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-09-30 18:13:26', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:28,542 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\ricerche targa\200930.cancellazione virtuale ricerche.ok.molina.task
2021-01-10 15:29:28,569 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1698 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1698, null, left('cancellazione virtuale ricerche', 150)
            , NULL, convert(datetime, '2020-09-30 00:00:00', 120), convert(datetime, '2020-09-30 18:13:26', 120), 1
            , 'fatto', NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-09-30 00:00:00', 120), dt_upd = convert(datetime, '2020-09-30 18:13:26', 120)
         , title = left('cancellazione virtuale ricerche', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = NULL, stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-09-30 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-09-30 18:13:26', 120), getdate())
          or isnull(title, '') <> isnull('cancellazione virtuale ricerche', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:28,574 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\ricerche targa\cancellazione virtuale ricerche
2021-01-10 15:29:28,575 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1698 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1698, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-09-30 18:14:23', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-09-30 18:14:23', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-09-30 18:14:23', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:28,579 [64] DEBUG dn_lib.tools.log - added file 3997: C:\root\todd\_test\dn\ricerche targa\200930.cancellazione virtuale ricerche.ok.molina.task\i.txt
2021-01-10 15:29:28,580 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 3997;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (3997, '.txt', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-09-30 18:14:23', 120));
2021-01-10 15:29:28,583 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1294;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1294, 3997, @content
          , convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-09-30 18:14:23', 120));
2021-01-10 15:29:28,585 [64] DEBUG dn_lib.tools.log - lette note task 1294
2021-01-10 15:29:28,586 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\ricerche targa\200930.cancellazione virtuale ricerche.ok.molina.task\i.txt'
2021-01-10 15:29:28,587 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1294) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:28,596 [64] DEBUG dn_lib.tools.log - updated task: C:\root\todd\_test\dn\ricerche targa\cancellazione virtuale ricerche
2021-01-10 15:29:28,597 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = 'scheda tecdoc';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, 'scheda tecdoc', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-11-25 11:20:13', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-11-25 11:20:13', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-11-25 11:20:13', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:28,601 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\scheda tecdoc
2021-01-10 15:29:28,602 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1699 
        and folder_name = '200709.ci sono dei codici nel tec-doc disabilitati.check.ok.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1699, '200709.ci sono dei codici nel tec-doc disabilitati.check.ok.molina.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-09 11:59:42', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-07-09 11:59:42', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-09 11:59:42', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:28,607 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\scheda tecdoc\200709.ci sono dei codici nel tec-doc disabilitati.check.ok.molina.task
2021-01-10 15:29:28,639 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1700 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1700, null, left('ci sono dei codici nel tec-doc disabilitati', 150)
            , NULL, convert(datetime, '2020-07-09 00:00:00', 120), convert(datetime, '2020-07-09 11:59:42', 120), 1
            , 'fatto', NULL, 'controllo', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-07-09 00:00:00', 120), dt_upd = convert(datetime, '2020-07-09 11:59:42', 120)
         , title = left('ci sono dei codici nel tec-doc disabilitati', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'controllo', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-07-09 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-07-09 11:59:42', 120), getdate())
          or isnull(title, '') <> isnull('ci sono dei codici nel tec-doc disabilitati', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('controllo', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:28,645 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\scheda tecdoc\ci sono dei codici nel tec-doc disabilitati
2021-01-10 15:29:28,646 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1700 and file_name = '1.png';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1700, '1.png', '.png', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-09 11:18:27', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-07-09 11:18:27', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-09 11:18:27', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:28,651 [64] DEBUG dn_lib.tools.log - added file 3998: C:\root\todd\_test\dn\scheda tecdoc\200709.ci sono dei codici nel tec-doc disabilitati.check.ok.molina.task\1.png
2021-01-10 15:29:28,652 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1700 and file_name = '2.png';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1700, '2.png', '.png', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-09 11:18:32', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-07-09 11:18:32', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-09 11:18:32', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:28,656 [64] DEBUG dn_lib.tools.log - added file 3999: C:\root\todd\_test\dn\scheda tecdoc\200709.ci sono dei codici nel tec-doc disabilitati.check.ok.molina.task\2.png
2021-01-10 15:29:28,657 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1700 and file_name = 'sql.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1700, 'sql.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-09 11:59:42', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-07-09 11:59:42', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-09 11:59:42', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:28,661 [64] DEBUG dn_lib.tools.log - added file 4000: C:\root\todd\_test\dn\scheda tecdoc\200709.ci sono dei codici nel tec-doc disabilitati.check.ok.molina.task\sql.sql
2021-01-10 15:29:28,661 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4000;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4000, '.sql', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-07-09 11:59:42', 120));
2021-01-10 15:29:28,664 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\scheda tecdoc\200709.ci sono dei codici nel tec-doc disabilitati.check.ok.molina.task\sql.sql'
2021-01-10 15:29:28,665 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1295) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:28,673 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1699 
        and folder_name = '200817.marca dei codici a volte non si aggiorna.ok.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1699, '200817.marca dei codici a volte non si aggiorna.ok.molina.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-18 09:32:38', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-08-18 09:32:38', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-18 09:32:38', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:28,677 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\scheda tecdoc\200817.marca dei codici a volte non si aggiorna.ok.molina.task
2021-01-10 15:29:28,706 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1701 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1701, null, left('marca dei codici a volte non si aggiorna', 150)
            , NULL, convert(datetime, '2020-08-17 00:00:00', 120), convert(datetime, '2020-08-18 09:32:38', 120), 1
            , 'fatto', NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-08-17 00:00:00', 120), dt_upd = convert(datetime, '2020-08-18 09:32:38', 120)
         , title = left('marca dei codici a volte non si aggiorna', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = NULL, stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-08-17 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-08-18 09:32:38', 120), getdate())
          or isnull(title, '') <> isnull('marca dei codici a volte non si aggiorna', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:28,712 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\scheda tecdoc\marca dei codici a volte non si aggiorna
2021-01-10 15:29:28,713 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1701 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1701, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-18 09:32:38', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-08-18 09:32:38', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-18 09:32:38', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:28,718 [64] DEBUG dn_lib.tools.log - added file 4001: C:\root\todd\_test\dn\scheda tecdoc\200817.marca dei codici a volte non si aggiorna.ok.molina.task\i.txt
2021-01-10 15:29:28,719 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4001;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4001, '.txt', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-18 09:32:38', 120));
2021-01-10 15:29:28,722 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1296;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1296, 4001, @content
          , convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-18 09:32:38', 120));
2021-01-10 15:29:28,724 [64] DEBUG dn_lib.tools.log - lette note task 1296
2021-01-10 15:29:28,725 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\scheda tecdoc\200817.marca dei codici a volte non si aggiorna.ok.molina.task\i.txt'
2021-01-10 15:29:28,725 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1701 and file_name = 'sql.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1701, 'sql.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-18 09:30:48', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-08-18 09:30:48', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-18 09:30:48', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:28,729 [64] DEBUG dn_lib.tools.log - added file 4002: C:\root\todd\_test\dn\scheda tecdoc\200817.marca dei codici a volte non si aggiorna.ok.molina.task\sql.sql
2021-01-10 15:29:28,730 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4002;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4002, '.sql', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-18 09:30:48', 120));
2021-01-10 15:29:28,733 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\scheda tecdoc\200817.marca dei codici a volte non si aggiorna.ok.molina.task\sql.sql'
2021-01-10 15:29:28,733 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1296) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:28,741 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1699 
        and folder_name = '200818.aggiunta compatibilit a volte non va.ok.molina.fix.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1699, '200818.aggiunta compatibilit a volte non va.ok.molina.fix.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-18 16:02:07', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-08-18 16:02:07', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-18 16:02:07', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:28,745 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\scheda tecdoc\200818.aggiunta compatibilit a volte non va.ok.molina.fix.task
2021-01-10 15:29:28,778 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1702 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1702, null, left('aggiunta compatibilit a volte non va', 150)
            , NULL, convert(datetime, '2020-08-18 00:00:00', 120), convert(datetime, '2020-08-18 16:02:07', 120), 1
            , 'fatto', NULL, 'fix', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-08-18 00:00:00', 120), dt_upd = convert(datetime, '2020-08-18 16:02:07', 120)
         , title = left('aggiunta compatibilit a volte non va', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-08-18 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-08-18 16:02:07', 120), getdate())
          or isnull(title, '') <> isnull('aggiunta compatibilit a volte non va', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:28,783 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\scheda tecdoc\aggiunta compatibilit a volte non va
2021-01-10 15:29:28,786 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1702 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1702, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-18 16:02:07', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-08-18 16:02:07', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-18 16:02:07', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:28,790 [64] DEBUG dn_lib.tools.log - added file 4003: C:\root\todd\_test\dn\scheda tecdoc\200818.aggiunta compatibilit a volte non va.ok.molina.fix.task\i.txt
2021-01-10 15:29:28,791 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4003;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4003, '.txt', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-18 16:02:07', 120));
2021-01-10 15:29:28,794 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1297;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1297, 4003, @content
          , convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-18 16:02:07', 120));
2021-01-10 15:29:28,796 [64] DEBUG dn_lib.tools.log - lette note task 1297
2021-01-10 15:29:28,796 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\scheda tecdoc\200818.aggiunta compatibilit a volte non va.ok.molina.fix.task\i.txt'
2021-01-10 15:29:28,797 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1702 and file_name = 'sql.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1702, 'sql.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-18 15:33:07', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-08-18 15:33:07', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-18 15:33:07', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:28,802 [64] DEBUG dn_lib.tools.log - added file 4004: C:\root\todd\_test\dn\scheda tecdoc\200818.aggiunta compatibilit a volte non va.ok.molina.fix.task\sql.sql
2021-01-10 15:29:28,803 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4004;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4004, '.sql', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-18 15:33:07', 120));
2021-01-10 15:29:28,805 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\scheda tecdoc\200818.aggiunta compatibilit a volte non va.ok.molina.fix.task\sql.sql'
2021-01-10 15:29:28,806 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1297) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:28,813 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1699 
        and folder_name = '201006.gestione campi seo.molina.ok.new.mg.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1699, '201006.gestione campi seo.molina.ok.new.mg.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-07 12:04:00', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-10-07 12:04:00', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-07 12:04:00', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:28,818 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\scheda tecdoc\201006.gestione campi seo.molina.ok.new.mg.task
2021-01-10 15:29:28,866 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1703 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1703, null, left('gestione campi seo', 150)
            , NULL, convert(datetime, '2020-10-06 00:00:00', 120), convert(datetime, '2020-10-07 12:04:00', 120), 1
            , 'fatto', NULL, 'aggiunta', 'mezza');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-10-06 00:00:00', 120), dt_upd = convert(datetime, '2020-10-07 12:04:00', 120)
         , title = left('gestione campi seo', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'aggiunta', stima = 'mezza'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-10-06 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-10-07 12:04:00', 120), getdate())
          or isnull(title, '') <> isnull('gestione campi seo', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('aggiunta', '') or isnull(stima, '') <> isnull('mezza', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:28,875 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\scheda tecdoc\gestione campi seo
2021-01-10 15:29:28,876 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1703 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1703, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-07 11:59:07', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-10-07 11:59:07', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-07 11:59:07', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:28,880 [64] DEBUG dn_lib.tools.log - added file 4005: C:\root\todd\_test\dn\scheda tecdoc\201006.gestione campi seo.molina.ok.new.mg.task\i.txt
2021-01-10 15:29:28,881 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4005;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4005, '.txt', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-07 11:59:07', 120));
2021-01-10 15:29:28,884 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1298;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1298, 4005, @content
          , convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-07 11:59:07', 120));
2021-01-10 15:29:28,886 [64] DEBUG dn_lib.tools.log - lette note task 1298
2021-01-10 15:29:28,886 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\scheda tecdoc\201006.gestione campi seo.molina.ok.new.mg.task\i.txt'
2021-01-10 15:29:28,887 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1703 and file_name = 'task.aggiornamento pname.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1703, 'task.aggiornamento pname.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-07 10:25:54', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-10-07 10:25:54', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-07 10:25:54', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:28,891 [64] DEBUG dn_lib.tools.log - added file 4006: C:\root\todd\_test\dn\scheda tecdoc\201006.gestione campi seo.molina.ok.new.mg.task\task.aggiornamento pname.sql
2021-01-10 15:29:28,892 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4006;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4006, '.sql', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-07 10:25:54', 120));
2021-01-10 15:29:28,895 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\scheda tecdoc\201006.gestione campi seo.molina.ok.new.mg.task\task.aggiornamento pname.sql'
2021-01-10 15:29:28,896 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1703 and file_name = 'task.campi nuovi scheda crm.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1703, 'task.campi nuovi scheda crm.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-07 08:38:46', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-10-07 08:38:46', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-07 08:38:46', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:28,901 [64] DEBUG dn_lib.tools.log - added file 4007: C:\root\todd\_test\dn\scheda tecdoc\201006.gestione campi seo.molina.ok.new.mg.task\task.campi nuovi scheda crm.sql
2021-01-10 15:29:28,902 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4007;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4007, '.sql', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-10-07 08:38:46', 120));
2021-01-10 15:29:28,905 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\scheda tecdoc\201006.gestione campi seo.molina.ok.new.mg.task\task.campi nuovi scheda crm.sql'
2021-01-10 15:29:28,905 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1298) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:28,913 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1699 
        and folder_name = '201125.ottimizzazione caricamento pagina.molina.ok.rev.2h.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1699, '201125.ottimizzazione caricamento pagina.molina.ok.rev.2h.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-11-25 11:20:58', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-11-25 11:20:58', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-11-25 11:20:58', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:28,917 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\scheda tecdoc\201125.ottimizzazione caricamento pagina.molina.ok.rev.2h.task
2021-01-10 15:29:28,958 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1704 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1704, null, left('ottimizzazione caricamento pagina', 150)
            , NULL, convert(datetime, '2020-11-25 00:00:00', 120), convert(datetime, '2020-11-25 11:20:58', 120), 1
            , 'fatto', NULL, 'revisione', 'due_ore');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-11-25 00:00:00', 120), dt_upd = convert(datetime, '2020-11-25 11:20:58', 120)
         , title = left('ottimizzazione caricamento pagina', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'revisione', stima = 'due_ore'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-11-25 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-11-25 11:20:58', 120), getdate())
          or isnull(title, '') <> isnull('ottimizzazione caricamento pagina', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('revisione', '') or isnull(stima, '') <> isnull('due_ore', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:28,964 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\scheda tecdoc\ottimizzazione caricamento pagina
2021-01-10 15:29:28,965 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1704 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1704, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-11-25 11:20:58', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-11-25 11:20:58', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-11-25 11:20:58', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:28,969 [64] DEBUG dn_lib.tools.log - added file 4008: C:\root\todd\_test\dn\scheda tecdoc\201125.ottimizzazione caricamento pagina.molina.ok.rev.2h.task\i.txt
2021-01-10 15:29:28,970 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4008;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4008, '.txt', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-11-25 11:20:58', 120));
2021-01-10 15:29:28,972 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1299;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1299, 4008, @content
          , convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-11-25 11:20:58', 120));
2021-01-10 15:29:28,974 [64] DEBUG dn_lib.tools.log - lette note task 1299
2021-01-10 15:29:28,975 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\scheda tecdoc\201125.ottimizzazione caricamento pagina.molina.ok.rev.2h.task\i.txt'
2021-01-10 15:29:28,976 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1299) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:28,983 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1699 
        and folder_name = 'catalogo';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1699, 'catalogo', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-21 11:22:22', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-08-21 11:22:22', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-21 11:22:22', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:28,988 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\scheda tecdoc\catalogo
2021-01-10 15:29:28,989 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1705 
        and folder_name = 'revisione alla versione 2019.ok.2h.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1705, 'revisione alla versione 2019.ok.2h.molina.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-29 16:19:47', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-29 16:19:47', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-29 16:19:47', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:28,994 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\scheda tecdoc\catalogo\revisione alla versione 2019.ok.2h.molina.task
2021-01-10 15:29:29,028 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1706 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1706, null, left('revisione alla versione 2019', 150)
            , NULL, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-29 16:19:47', 120), 1
            , 'fatto', NULL, NULL, 'due_ore');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-29 16:19:47', 120)
         , title = left('revisione alla versione 2019', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = NULL, stima = 'due_ore'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-29 16:19:47', 120), getdate())
          or isnull(title, '') <> isnull('revisione alla versione 2019', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull('due_ore', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:29,034 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\scheda tecdoc\catalogo\revisione alla versione 2019
2021-01-10 15:29:29,035 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1706 and file_name = 'sql.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1706, 'sql.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-29 16:19:47', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-29 16:19:47', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-29 16:19:47', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,039 [64] DEBUG dn_lib.tools.log - added file 4009: C:\root\todd\_test\dn\scheda tecdoc\catalogo\revisione alla versione 2019.ok.2h.molina.task\sql.sql
2021-01-10 15:29:29,040 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4009;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4009, '.sql', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-29 16:19:47', 120));
2021-01-10 15:29:29,043 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\scheda tecdoc\catalogo\revisione alla versione 2019.ok.2h.molina.task\sql.sql'
2021-01-10 15:29:29,043 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1300) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:29,051 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1699 
        and folder_name = 'database tecdoc';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1699, 'database tecdoc', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-08-21 11:22:32', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-08-21 11:22:32', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-21 11:22:32', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:29,056 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\scheda tecdoc\database tecdoc
2021-01-10 15:29:29,057 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1707 
        and folder_name = '200615.caricamento database td2019q4 sulla 91.fatta.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1707, '200615.caricamento database td2019q4 sulla 91.fatta.molina.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-15 11:34:50', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-15 11:34:50', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-15 11:34:50', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:29,061 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\scheda tecdoc\database tecdoc\200615.caricamento database td2019q4 sulla 91.fatta.molina.task
2021-01-10 15:29:29,086 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1708 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1708, null, left('caricamento database td2019q4 sulla 91', 150)
            , NULL, convert(datetime, '2020-06-15 00:00:00', 120), convert(datetime, '2020-06-15 11:34:50', 120), 1
            , 'fatto', NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-06-15 00:00:00', 120), dt_upd = convert(datetime, '2020-06-15 11:34:50', 120)
         , title = left('caricamento database td2019q4 sulla 91', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = NULL, stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-06-15 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-15 11:34:50', 120), getdate())
          or isnull(title, '') <> isnull('caricamento database td2019q4 sulla 91', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:29,091 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\scheda tecdoc\database tecdoc\caricamento database td2019q4 sulla 91
2021-01-10 15:29:29,093 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1708 and file_name = 'sql.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1708, 'sql.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-15 11:34:58', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-15 11:34:58', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-15 11:34:58', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,097 [64] DEBUG dn_lib.tools.log - added file 4010: C:\root\todd\_test\dn\scheda tecdoc\database tecdoc\200615.caricamento database td2019q4 sulla 91.fatta.molina.task\sql.sql
2021-01-10 15:29:29,098 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4010;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4010, '.sql', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-15 11:34:58', 120));
2021-01-10 15:29:29,100 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\scheda tecdoc\database tecdoc\200615.caricamento database td2019q4 sulla 91.fatta.molina.task\sql.sql'
2021-01-10 15:29:29,101 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1301) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:29,109 [64] DEBUG dn_lib.tools.log - updated task: C:\root\todd\_test\dn\scheda tecdoc\database tecdoc\caricamento database td2019q4 sulla 91
2021-01-10 15:29:29,110 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1707 and file_name = 'pulita tecdoc 16.fatto.fix.molina.task.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1707, 'pulita tecdoc 16.fatto.fix.molina.task.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-04 08:26:00', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-04 08:26:00', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-04 08:26:00', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,115 [64] DEBUG dn_lib.tools.log - added file 4011: C:\root\todd\_test\dn\scheda tecdoc\database tecdoc\pulita tecdoc 16.fatto.fix.molina.task.sql
2021-01-10 15:29:29,116 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4011;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4011, '.sql', @content, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-04 08:26:00', 120));
2021-01-10 15:29:29,119 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\scheda tecdoc\database tecdoc\pulita tecdoc 16.fatto.fix.molina.task.sql'
2021-01-10 15:29:29,155 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4011;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, null, 4011, left('pulita tecdoc 16', 150)
            , NULL, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-04 08:26:00', 120), 1
            , 'fatto', NULL, 'fix', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-04 08:26:00', 120)
         , title = left('pulita tecdoc 16', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-04 08:26:00', 120), getdate())
          or isnull(title, '') <> isnull('pulita tecdoc 16', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:29,161 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\scheda tecdoc\database tecdoc\pulita tecdoc 16
2021-01-10 15:29:29,162 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1699 
        and folder_name = 'estrazione dati tecdoc';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1699, 'estrazione dati tecdoc', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-12-14 11:10:29', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-12-14 11:10:29', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-12-14 11:10:29', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:29,166 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc
2021-01-10 15:29:29,167 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1709 
        and folder_name = '200528.estrazione tecdoc.molina.fatto.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1709, '200528.estrazione tecdoc.molina.fatto.task', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-12 10:20:10', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-12 10:20:10', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-12 10:20:10', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:29,173 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task
2021-01-10 15:29:29,197 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1710 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1710, null, left('estrazione tecdoc', 150)
            , NULL, convert(datetime, '2020-05-28 00:00:00', 120), convert(datetime, '2020-06-12 10:20:10', 120), 1
            , 'fatto', NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-05-28 00:00:00', 120), dt_upd = convert(datetime, '2020-06-12 10:20:10', 120)
         , title = left('estrazione tecdoc', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = NULL, stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-05-28 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-12 10:20:10', 120), getdate())
          or isnull(title, '') <> isnull('estrazione tecdoc', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:29,203 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\estrazione tecdoc
2021-01-10 15:29:29,204 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1710 
        and folder_name = 'bulk_dat';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1710, 'bulk_dat', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-06-12 10:19:55', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-06-12 10:19:55', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-12 10:19:55', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:29,207 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\bulk_dat
2021-01-10 15:29:29,208 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1711 and file_name = '012.dat';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1711, '012.dat', '.dat', 1, convert(datetime, '2021-01-07 15:40:14', 120), convert(datetime, '2020-04-29 09:23:49', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:14', 120), dt_upd = convert(datetime, '2020-04-29 09:23:49', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-04-29 09:23:49', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,212 [64] DEBUG dn_lib.tools.log - added file 4012: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\bulk_dat\012.dat
2021-01-10 15:29:29,213 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1711 and file_name = '030.dat';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1711, '030.dat', '.dat', 1, convert(datetime, '2021-01-07 15:40:15', 120), convert(datetime, '2020-04-29 09:22:46', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:15', 120), dt_upd = convert(datetime, '2020-04-29 09:22:46', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:15', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-04-29 09:22:46', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,218 [64] DEBUG dn_lib.tools.log - added file 4013: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\bulk_dat\030.dat
2021-01-10 15:29:29,218 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1711 and file_name = 'import_12_30.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1711, 'import_12_30.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-03 11:35:16', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-03 11:35:16', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-03 11:35:16', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,224 [64] DEBUG dn_lib.tools.log - added file 4014: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\bulk_dat\import_12_30.sql
2021-01-10 15:29:29,225 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4014;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4014, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-03 11:35:16', 120));
2021-01-10 15:29:29,227 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\bulk_dat\import_12_30.sql'
2021-01-10 15:29:29,228 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1711 and file_name = 'td-12-format.xml';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1711, 'td-12-format.xml', '.xml', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2017-10-23 16:05:56', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2017-10-23 16:05:56', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2017-10-23 16:05:56', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,234 [64] DEBUG dn_lib.tools.log - added file 4015: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\bulk_dat\td-12-format.xml
2021-01-10 15:29:29,234 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1711 and file_name = 'td-30-format.xml';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1711, 'td-30-format.xml', '.xml', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2017-10-26 15:37:45', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2017-10-26 15:37:45', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2017-10-26 15:37:45', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,239 [64] DEBUG dn_lib.tools.log - added file 4016: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\bulk_dat\td-30-format.xml
2021-01-10 15:29:29,240 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1303) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:29,248 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1710 
        and folder_name = 'docs';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1710, 'docs', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-12 10:19:59', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-12 10:19:59', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-12 10:19:59', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:29,254 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\docs
2021-01-10 15:29:29,255 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1712 
        and folder_name = '4882-backup-tentler';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1712, '4882-backup-tentler', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-12 10:19:59', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-12 10:19:59', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-12 10:19:59', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:29,259 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\docs\4882-backup-tentler
2021-01-10 15:29:29,260 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1713 and file_name = '001.4882';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1713, '001.4882', '.4882', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-05-11 20:26:27', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-05-11 20:26:27', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-05-11 20:26:27', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,265 [64] DEBUG dn_lib.tools.log - added file 4017: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\docs\4882-backup-tentler\001.4882
2021-01-10 15:29:29,266 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1713 and file_name = '030.4882';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1713, '030.4882', '.4882', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-05-11 20:26:25', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-05-11 20:26:25', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-05-11 20:26:25', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,271 [64] DEBUG dn_lib.tools.log - added file 4018: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\docs\4882-backup-tentler\030.4882
2021-01-10 15:29:29,272 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1713 and file_name = '035.4882';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1713, '035.4882', '.4882', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-05-11 20:26:25', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-05-11 20:26:25', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-05-11 20:26:25', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,277 [64] DEBUG dn_lib.tools.log - added file 4019: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\docs\4882-backup-tentler\035.4882
2021-01-10 15:29:29,278 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1713 and file_name = '040.4882';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1713, '040.4882', '.4882', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-05-11 20:26:26', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-05-11 20:26:26', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-05-11 20:26:26', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,284 [64] DEBUG dn_lib.tools.log - added file 4020: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\docs\4882-backup-tentler\040.4882
2021-01-10 15:29:29,285 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1713 and file_name = '042.4882';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1713, '042.4882', '.4882', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-05-11 20:26:26', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-05-11 20:26:26', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-05-11 20:26:26', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,290 [64] DEBUG dn_lib.tools.log - added file 4021: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\docs\4882-backup-tentler\042.4882
2021-01-10 15:29:29,292 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1713 and file_name = '043.4882';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1713, '043.4882', '.4882', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-05-11 20:26:28', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-05-11 20:26:28', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-05-11 20:26:28', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,297 [64] DEBUG dn_lib.tools.log - added file 4022: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\docs\4882-backup-tentler\043.4882
2021-01-10 15:29:29,298 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1713 and file_name = '200.4882';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1713, '200.4882', '.4882', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-05-11 20:26:26', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-05-11 20:26:26', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-05-11 20:26:26', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,304 [64] DEBUG dn_lib.tools.log - added file 4023: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\docs\4882-backup-tentler\200.4882
2021-01-10 15:29:29,305 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1713 and file_name = '201.4882';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1713, '201.4882', '.4882', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-05-11 20:26:49', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-05-11 20:26:49', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-05-11 20:26:49', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,311 [64] DEBUG dn_lib.tools.log - added file 4024: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\docs\4882-backup-tentler\201.4882
2021-01-10 15:29:29,312 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1713 and file_name = '202.4882';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1713, '202.4882', '.4882', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-05-11 20:26:26', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-05-11 20:26:26', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-05-11 20:26:26', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,317 [64] DEBUG dn_lib.tools.log - added file 4025: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\docs\4882-backup-tentler\202.4882
2021-01-10 15:29:29,318 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1713 and file_name = '203.4882';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1713, '203.4882', '.4882', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-05-11 20:26:49', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-05-11 20:26:49', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-05-11 20:26:49', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,324 [64] DEBUG dn_lib.tools.log - added file 4026: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\docs\4882-backup-tentler\203.4882
2021-01-10 15:29:29,325 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1713 and file_name = '204.4882';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1713, '204.4882', '.4882', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-05-11 20:26:27', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-05-11 20:26:27', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-05-11 20:26:27', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,329 [64] DEBUG dn_lib.tools.log - added file 4027: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\docs\4882-backup-tentler\204.4882
2021-01-10 15:29:29,331 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1713 and file_name = '205.4882';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1713, '205.4882', '.4882', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-05-11 20:26:28', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-05-11 20:26:28', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-05-11 20:26:28', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,335 [64] DEBUG dn_lib.tools.log - added file 4028: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\docs\4882-backup-tentler\205.4882
2021-01-10 15:29:29,337 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1713 and file_name = '206.4882';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1713, '206.4882', '.4882', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-05-11 20:26:26', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-05-11 20:26:26', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-05-11 20:26:26', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,342 [64] DEBUG dn_lib.tools.log - added file 4029: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\docs\4882-backup-tentler\206.4882
2021-01-10 15:29:29,342 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1713 and file_name = '207.4882';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1713, '207.4882', '.4882', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-05-11 20:26:26', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-05-11 20:26:26', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-05-11 20:26:26', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,347 [64] DEBUG dn_lib.tools.log - added file 4030: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\docs\4882-backup-tentler\207.4882
2021-01-10 15:29:29,348 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1713 and file_name = '208.4882';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1713, '208.4882', '.4882', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-05-11 20:26:29', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-05-11 20:26:29', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-05-11 20:26:29', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,354 [64] DEBUG dn_lib.tools.log - added file 4031: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\docs\4882-backup-tentler\208.4882
2021-01-10 15:29:29,355 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1713 and file_name = '209.4882';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1713, '209.4882', '.4882', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-05-11 20:26:26', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-05-11 20:26:26', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-05-11 20:26:26', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,360 [64] DEBUG dn_lib.tools.log - added file 4032: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\docs\4882-backup-tentler\209.4882
2021-01-10 15:29:29,361 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1713 and file_name = '210.4882';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1713, '210.4882', '.4882', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-05-11 20:26:27', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-05-11 20:26:27', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-05-11 20:26:27', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,366 [64] DEBUG dn_lib.tools.log - added file 4033: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\docs\4882-backup-tentler\210.4882
2021-01-10 15:29:29,367 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1713 and file_name = '211.4882';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1713, '211.4882', '.4882', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-05-11 20:26:27', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-05-11 20:26:27', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-05-11 20:26:27', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,371 [64] DEBUG dn_lib.tools.log - added file 4034: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\docs\4882-backup-tentler\211.4882
2021-01-10 15:29:29,373 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1713 and file_name = '212.4882';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1713, '212.4882', '.4882', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-05-11 20:26:29', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-05-11 20:26:29', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-05-11 20:26:29', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,378 [64] DEBUG dn_lib.tools.log - added file 4035: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\docs\4882-backup-tentler\212.4882
2021-01-10 15:29:29,379 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1713 and file_name = '215.4882';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1713, '215.4882', '.4882', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-05-11 20:26:28', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-05-11 20:26:28', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-05-11 20:26:28', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,384 [64] DEBUG dn_lib.tools.log - added file 4036: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\docs\4882-backup-tentler\215.4882
2021-01-10 15:29:29,385 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1713 and file_name = '217.4882';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1713, '217.4882', '.4882', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-05-11 20:26:29', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-05-11 20:26:29', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-05-11 20:26:29', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,390 [64] DEBUG dn_lib.tools.log - added file 4037: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\docs\4882-backup-tentler\217.4882
2021-01-10 15:29:29,392 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1713 and file_name = '222.4882';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1713, '222.4882', '.4882', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-05-11 20:26:27', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-05-11 20:26:27', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-05-11 20:26:27', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,397 [64] DEBUG dn_lib.tools.log - added file 4038: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\docs\4882-backup-tentler\222.4882
2021-01-10 15:29:29,399 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1713 and file_name = '228.4882';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1713, '228.4882', '.4882', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-05-11 20:26:28', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-05-11 20:26:28', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-05-11 20:26:28', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,403 [64] DEBUG dn_lib.tools.log - added file 4039: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\docs\4882-backup-tentler\228.4882
2021-01-10 15:29:29,405 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1713 and file_name = '231.4882';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1713, '231.4882', '.4882', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-05-11 20:26:25', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-05-11 20:26:25', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-05-11 20:26:25', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,409 [64] DEBUG dn_lib.tools.log - added file 4040: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\docs\4882-backup-tentler\231.4882
2021-01-10 15:29:29,410 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1713 and file_name = '232.4882';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1713, '232.4882', '.4882', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-05-11 20:26:26', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-05-11 20:26:26', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-05-11 20:26:26', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,415 [64] DEBUG dn_lib.tools.log - added file 4041: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\docs\4882-backup-tentler\232.4882
2021-01-10 15:29:29,416 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1713 and file_name = '233.4882';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1713, '233.4882', '.4882', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-05-11 20:26:28', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-05-11 20:26:28', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-05-11 20:26:28', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,420 [64] DEBUG dn_lib.tools.log - added file 4042: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\docs\4882-backup-tentler\233.4882
2021-01-10 15:29:29,422 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1713 and file_name = '400.4882';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1713, '400.4882', '.4882', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-05-11 20:26:42', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-05-11 20:26:42', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-05-11 20:26:42', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,426 [64] DEBUG dn_lib.tools.log - added file 4043: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\docs\4882-backup-tentler\400.4882
2021-01-10 15:29:29,427 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1713 and file_name = '401.4882';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1713, '401.4882', '.4882', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-05-11 20:26:43', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-05-11 20:26:43', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-05-11 20:26:43', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,432 [64] DEBUG dn_lib.tools.log - added file 4044: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\docs\4882-backup-tentler\401.4882
2021-01-10 15:29:29,433 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1713 and file_name = '403.4882';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1713, '403.4882', '.4882', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-05-11 20:26:42', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-05-11 20:26:42', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-05-11 20:26:42', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,438 [64] DEBUG dn_lib.tools.log - added file 4045: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\docs\4882-backup-tentler\403.4882
2021-01-10 15:29:29,440 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1713 and file_name = '404.4882';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1713, '404.4882', '.4882', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-05-11 20:26:43', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-05-11 20:26:43', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-05-11 20:26:43', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,445 [64] DEBUG dn_lib.tools.log - added file 4046: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\docs\4882-backup-tentler\404.4882
2021-01-10 15:29:29,446 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1713 and file_name = '410.4882';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1713, '410.4882', '.4882', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-05-11 20:26:43', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-05-11 20:26:43', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-05-11 20:26:43', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,451 [64] DEBUG dn_lib.tools.log - added file 4047: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\docs\4882-backup-tentler\410.4882
2021-01-10 15:29:29,453 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1713 and file_name = '432.4882';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1713, '432.4882', '.4882', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-05-11 20:26:43', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-05-11 20:26:43', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-05-11 20:26:43', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,458 [64] DEBUG dn_lib.tools.log - added file 4048: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\docs\4882-backup-tentler\432.4882
2021-01-10 15:29:29,460 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1303) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:29,462 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1712 
        and folder_name = 'nostre tabelle';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1712, 'nostre tabelle', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-12 10:20:02', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-12 10:20:02', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-12 10:20:02', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:29,467 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\docs\nostre tabelle
2021-01-10 15:29:29,469 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1714 and file_name = '001.4882';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1714, '001.4882', '.4882', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2017-11-14 14:30:12', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2017-11-14 14:30:12', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2017-11-14 14:30:12', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,477 [64] DEBUG dn_lib.tools.log - added file 4049: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\docs\nostre tabelle\001.4882
2021-01-10 15:29:29,479 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1714 and file_name = '040.4882';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1714, '040.4882', '.4882', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-04 14:53:11', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-04 14:53:11', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-04 14:53:11', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,485 [64] DEBUG dn_lib.tools.log - added file 4050: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\docs\nostre tabelle\040.4882
2021-01-10 15:29:29,486 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1714 and file_name = '042.4882';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1714, '042.4882', '.4882', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-04 14:53:11', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-04 14:53:11', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-04 14:53:11', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,490 [64] DEBUG dn_lib.tools.log - added file 4051: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\docs\nostre tabelle\042.4882
2021-01-10 15:29:29,491 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1714 and file_name = '200.4882';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1714, '200.4882', '.4882', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-04 12:04:26', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-04 12:04:26', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-04 12:04:26', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,498 [64] DEBUG dn_lib.tools.log - added file 4052: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\docs\nostre tabelle\200.4882
2021-01-10 15:29:29,499 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1714 and file_name = '202.4882';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1714, '202.4882', '.4882', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-04 12:04:26', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-04 12:04:26', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-04 12:04:26', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,504 [64] DEBUG dn_lib.tools.log - added file 4053: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\docs\nostre tabelle\202.4882
2021-01-10 15:29:29,505 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1714 and file_name = '203.4882';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1714, '203.4882', '.4882', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-04 12:05:11', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-04 12:05:11', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-04 12:05:11', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,510 [64] DEBUG dn_lib.tools.log - added file 4054: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\docs\nostre tabelle\203.4882
2021-01-10 15:29:29,511 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1714 and file_name = '210.4882';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1714, '210.4882', '.4882', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-04 12:06:04', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-04 12:06:04', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-04 12:06:04', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,516 [64] DEBUG dn_lib.tools.log - added file 4055: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\docs\nostre tabelle\210.4882
2021-01-10 15:29:29,516 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1714 and file_name = '211.4882';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1714, '211.4882', '.4882', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-04 12:06:05', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-04 12:06:05', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-04 12:06:05', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,521 [64] DEBUG dn_lib.tools.log - added file 4056: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\docs\nostre tabelle\211.4882
2021-01-10 15:29:29,522 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1714 and file_name = '231.4882';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1714, '231.4882', '.4882', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-04 16:06:05', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-04 16:06:05', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-04 16:06:05', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,526 [64] DEBUG dn_lib.tools.log - added file 4057: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\docs\nostre tabelle\231.4882
2021-01-10 15:29:29,527 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1714 and file_name = '232.4882';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1714, '232.4882', '.4882', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-04 12:13:14', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-04 12:13:14', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-04 12:13:14', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,537 [64] DEBUG dn_lib.tools.log - added file 4058: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\docs\nostre tabelle\232.4882
2021-01-10 15:29:29,538 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1714 and file_name = '400.4882';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1714, '400.4882', '.4882', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-04 12:14:27', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-04 12:14:27', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-04 12:14:27', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,543 [64] DEBUG dn_lib.tools.log - added file 4059: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\docs\nostre tabelle\400.4882
2021-01-10 15:29:29,544 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1714 and file_name = '410.4882';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1714, '410.4882', '.4882', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-04 12:14:27', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-04 12:14:27', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-04 12:14:27', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,549 [64] DEBUG dn_lib.tools.log - added file 4060: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\docs\nostre tabelle\410.4882
2021-01-10 15:29:29,549 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1303) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:29,559 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1712 and file_name = 'I dqm@tecalliance.net - Mandatory and Differentiation-Attributes.msg';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1712, 'I dqm@tecalliance.net - Mandatory and Differentiation-Attributes.msg', '.msg', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-03 08:20:41', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-03 08:20:41', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-03 08:20:41', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,565 [64] DEBUG dn_lib.tools.log - added file 4061: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\docs\I dqm@tecalliance.net - Mandatory and Differentiation-Attributes.msg
2021-01-10 15:29:29,566 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1712 and file_name = 'TecDoc-Data-Format_Version_2.4_EN.pdf';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1712, 'TecDoc-Data-Format_Version_2.4_EN.pdf', '.pdf', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-05-29 09:40:01', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-05-29 09:40:01', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-05-29 09:40:01', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,572 [64] DEBUG dn_lib.tools.log - added file 4062: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\docs\TecDoc-Data-Format_Version_2.4_EN.pdf
2021-01-10 15:29:29,573 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1303) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:29,574 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1710 
        and folder_name = 'out';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1710, 'out', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-12 10:20:10', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-12 10:20:10', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-12 10:20:10', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:29,579 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\out
2021-01-10 15:29:29,581 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1715 and file_name = '200.4882';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1715, '200.4882', '.4882', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-09 11:11:09', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-09 11:11:09', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-09 11:11:09', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,588 [64] DEBUG dn_lib.tools.log - added file 4063: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\out\200.4882
2021-01-10 15:29:29,589 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1715 and file_name = '202.4882';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1715, '202.4882', '.4882', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-09 11:11:09', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-09 11:11:09', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-09 11:11:09', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,595 [64] DEBUG dn_lib.tools.log - added file 4064: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\out\202.4882
2021-01-10 15:29:29,596 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1715 and file_name = '203.4882';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1715, '203.4882', '.4882', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-09 11:11:58', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-09 11:11:58', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-09 11:11:58', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,602 [64] DEBUG dn_lib.tools.log - added file 4065: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\out\203.4882
2021-01-10 15:29:29,603 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1715 and file_name = '210.4882';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1715, '210.4882', '.4882', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-09 11:12:35', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-09 11:12:35', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-09 11:12:35', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,608 [64] DEBUG dn_lib.tools.log - added file 4066: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\out\210.4882
2021-01-10 15:29:29,610 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1715 and file_name = '211.4882';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1715, '211.4882', '.4882', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-09 11:11:10', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-09 11:11:10', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-09 11:11:10', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,615 [64] DEBUG dn_lib.tools.log - added file 4067: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\out\211.4882
2021-01-10 15:29:29,616 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1715 and file_name = '232.4882';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1715, '232.4882', '.4882', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-09 11:12:36', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-09 11:12:36', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-09 11:12:36', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,621 [64] DEBUG dn_lib.tools.log - added file 4068: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\out\232.4882
2021-01-10 15:29:29,623 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1715 and file_name = '400.4882';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1715, '400.4882', '.4882', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-09 11:13:50', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-09 11:13:50', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-09 11:13:50', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,628 [64] DEBUG dn_lib.tools.log - added file 4069: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\out\400.4882
2021-01-10 15:29:29,629 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1715 and file_name = '410.4882';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1715, '410.4882', '.4882', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-09 11:13:50', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-09 11:13:50', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-09 11:13:50', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,634 [64] DEBUG dn_lib.tools.log - added file 4070: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\out\410.4882
2021-01-10 15:29:29,636 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1715 and file_name = 'codici_mancanti.html';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1715, 'codici_mancanti.html', '.html', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-09 11:13:52', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-09 11:13:52', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-09 11:13:52', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,640 [64] DEBUG dn_lib.tools.log - added file 4071: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\out\codici_mancanti.html
2021-01-10 15:29:29,641 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1715 and file_name = 'log.log';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1715, 'log.log', '.log', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-10 10:40:31', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-10 10:40:31', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-10 10:40:31', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,647 [64] DEBUG dn_lib.tools.log - added file 4072: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\out\log.log
2021-01-10 15:29:29,648 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1303) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:29,649 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1710 
        and folder_name = '_bck';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1710, '_bck', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-12 10:20:12', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-12 10:20:12', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-12 10:20:12', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:29,654 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\_bck
2021-01-10 15:29:29,655 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1716 
        and folder_name = 'app_code';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1716, 'app_code', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-12 10:20:11', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-12 10:20:11', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-12 10:20:11', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:29,659 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\_bck\app_code
2021-01-10 15:29:29,661 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1717 and file_name = 'dt_criteria.cs';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1717, 'dt_criteria.cs', '.cs', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2017-09-28 17:36:58', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2017-09-28 17:36:58', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2017-09-28 17:36:58', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,666 [64] DEBUG dn_lib.tools.log - added file 4073: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\_bck\app_code\dt_criteria.cs
2021-01-10 15:29:29,667 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4073;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4073, '.cs', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2017-09-28 17:36:58', 120));
2021-01-10 15:29:29,671 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\_bck\app_code\dt_criteria.cs'
2021-01-10 15:29:29,672 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1717 and file_name = 'dt_export.cs';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1717, 'dt_export.cs', '.cs', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2018-07-05 15:33:22', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2018-07-05 15:33:22', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2018-07-05 15:33:22', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,677 [64] DEBUG dn_lib.tools.log - added file 4074: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\_bck\app_code\dt_export.cs
2021-01-10 15:29:29,677 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4074;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4074, '.cs', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2018-07-05 15:33:22', 120));
2021-01-10 15:29:29,681 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\_bck\app_code\dt_export.cs'
2021-01-10 15:29:29,682 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1303) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:29,684 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1716 
        and folder_name = 'pages_js';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1716, 'pages_js', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-12 10:20:12', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-12 10:20:12', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-12 10:20:12', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:29,688 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\_bck\pages_js
2021-01-10 15:29:29,690 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1718 and file_name = 'dt_criteria.css';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1718, 'dt_criteria.css', '.css', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2017-09-29 17:52:20', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2017-09-29 17:52:20', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2017-09-29 17:52:20', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,694 [64] DEBUG dn_lib.tools.log - added file 4075: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\_bck\pages_js\dt_criteria.css
2021-01-10 15:29:29,695 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1718 and file_name = 'dt_criteria.js';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1718, 'dt_criteria.js', '.js', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2017-10-02 14:05:36', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2017-10-02 14:05:36', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2017-10-02 14:05:36', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,701 [64] DEBUG dn_lib.tools.log - added file 4076: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\_bck\pages_js\dt_criteria.js
2021-01-10 15:29:29,702 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1718 and file_name = 'dt_export.js';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1718, 'dt_export.js', '.js', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2018-07-05 14:47:00', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2018-07-05 14:47:00', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2018-07-05 14:47:00', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,707 [64] DEBUG dn_lib.tools.log - added file 4077: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\_bck\pages_js\dt_export.js
2021-01-10 15:29:29,709 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1718 and file_name = 'dt_import.js';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1718, 'dt_import.js', '.js', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2017-10-23 10:34:25', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2017-10-23 10:34:25', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2017-10-23 10:34:25', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,714 [64] DEBUG dn_lib.tools.log - added file 4078: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\_bck\pages_js\dt_import.js
2021-01-10 15:29:29,716 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1303) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:29,717 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1716 
        and folder_name = 'pages_xml';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1716, 'pages_xml', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-12 10:20:12', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-12 10:20:12', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-12 10:20:12', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:29,722 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\_bck\pages_xml
2021-01-10 15:29:29,723 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1719 and file_name = 'pageDTCountries.xml';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1719, 'pageDTCountries.xml', '.xml', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2017-10-20 16:23:52', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2017-10-20 16:23:52', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2017-10-20 16:23:52', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,729 [64] DEBUG dn_lib.tools.log - added file 4079: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\_bck\pages_xml\pageDTCountries.xml
2021-01-10 15:29:29,730 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1719 and file_name = 'pageDTCountry.xml';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1719, 'pageDTCountry.xml', '.xml', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2017-09-25 16:37:02', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2017-09-25 16:37:02', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2017-09-25 16:37:02', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,735 [64] DEBUG dn_lib.tools.log - added file 4080: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\_bck\pages_xml\pageDTCountry.xml
2021-01-10 15:29:29,736 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1719 and file_name = 'pageDTCriteria.xml';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1719, 'pageDTCriteria.xml', '.xml', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2017-10-02 08:49:04', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2017-10-02 08:49:04', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2017-10-02 08:49:04', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,740 [64] DEBUG dn_lib.tools.log - added file 4081: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\_bck\pages_xml\pageDTCriteria.xml
2021-01-10 15:29:29,742 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1719 and file_name = 'pageDTExport.xml';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1719, 'pageDTExport.xml', '.xml', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2018-07-05 14:23:47', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2018-07-05 14:23:47', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2018-07-05 14:23:47', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,748 [64] DEBUG dn_lib.tools.log - added file 4082: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\_bck\pages_xml\pageDTExport.xml
2021-01-10 15:29:29,749 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1719 and file_name = 'pageDTImport.xml';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1719, 'pageDTImport.xml', '.xml', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2017-11-06 17:17:22', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2017-11-06 17:17:22', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2017-11-06 17:17:22', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,755 [64] DEBUG dn_lib.tools.log - added file 4083: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\_bck\pages_xml\pageDTImport.xml
2021-01-10 15:29:29,756 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1303) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:29,758 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1716 
        and folder_name = 'procs';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1716, 'procs', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-12 10:20:12', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-12 10:20:12', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-12 10:20:12', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:29,763 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\_bck\procs
2021-01-10 15:29:29,764 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1720 
        and folder_name = 'td';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1720, 'td', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-12 10:20:14', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-12 10:20:14', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-12 10:20:14', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:29,769 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\_bck\procs\td
2021-01-10 15:29:29,771 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1721 and file_name = 'copy-an.xml';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1721, 'copy-an.xml', '.xml', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2018-01-24 15:36:18', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2018-01-24 15:36:18', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2018-01-24 15:36:18', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,779 [64] DEBUG dn_lib.tools.log - added file 4084: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\_bck\procs\td\copy-an.xml
2021-01-10 15:29:29,780 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1721 and file_name = 'td_10.xml';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1721, 'td_10.xml', '.xml', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2017-10-23 14:06:39', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2017-10-23 14:06:39', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2017-10-23 14:06:39', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,786 [64] DEBUG dn_lib.tools.log - added file 4085: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\_bck\procs\td\td_10.xml
2021-01-10 15:29:29,787 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1721 and file_name = 'td_100.xml';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1721, 'td_100.xml', '.xml', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2017-10-23 11:57:02', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2017-10-23 11:57:02', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2017-10-23 11:57:02', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,793 [64] DEBUG dn_lib.tools.log - added file 4086: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\_bck\procs\td\td_100.xml
2021-01-10 15:29:29,794 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1721 and file_name = 'td_110.xml';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1721, 'td_110.xml', '.xml', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2017-11-06 16:00:40', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2017-11-06 16:00:40', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2017-11-06 16:00:40', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,799 [64] DEBUG dn_lib.tools.log - added file 4087: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\_bck\procs\td\td_110.xml
2021-01-10 15:29:29,800 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1721 and file_name = 'td_12.xml';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1721, 'td_12.xml', '.xml', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2017-10-23 11:56:33', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2017-10-23 11:56:33', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2017-10-23 11:56:33', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,805 [64] DEBUG dn_lib.tools.log - added file 4088: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\_bck\procs\td\td_12.xml
2021-01-10 15:29:29,806 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1721 and file_name = 'td_120.xml';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1721, 'td_120.xml', '.xml', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2017-11-06 14:31:39', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2017-11-06 14:31:39', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2017-11-06 14:31:39', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,811 [64] DEBUG dn_lib.tools.log - added file 4089: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\_bck\procs\td\td_120.xml
2021-01-10 15:29:29,812 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1721 and file_name = 'td_125.xml';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1721, 'td_125.xml', '.xml', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2017-11-06 16:58:15', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2017-11-06 16:58:15', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2017-11-06 16:58:15', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,818 [64] DEBUG dn_lib.tools.log - added file 4090: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\_bck\procs\td\td_125.xml
2021-01-10 15:29:29,818 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1721 and file_name = 'td_14.xml';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1721, 'td_14.xml', '.xml', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2017-11-02 10:30:21', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2017-11-02 10:30:21', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2017-11-02 10:30:21', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,823 [64] DEBUG dn_lib.tools.log - added file 4091: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\_bck\procs\td\td_14.xml
2021-01-10 15:29:29,824 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1721 and file_name = 'td_20.xml';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1721, 'td_20.xml', '.xml', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2017-10-23 16:20:40', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2017-10-23 16:20:40', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2017-10-23 16:20:40', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,829 [64] DEBUG dn_lib.tools.log - added file 4092: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\_bck\procs\td\td_20.xml
2021-01-10 15:29:29,830 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1721 and file_name = 'td_200.xml';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1721, 'td_200.xml', '.xml', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2017-11-17 08:49:45', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2017-11-17 08:49:45', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2017-11-17 08:49:45', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,835 [64] DEBUG dn_lib.tools.log - added file 4093: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\_bck\procs\td\td_200.xml
2021-01-10 15:29:29,836 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1721 and file_name = 'td_202.xml';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1721, 'td_202.xml', '.xml', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2017-11-17 08:49:38', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2017-11-17 08:49:38', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2017-11-17 08:49:38', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,841 [64] DEBUG dn_lib.tools.log - added file 4094: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\_bck\procs\td\td_202.xml
2021-01-10 15:29:29,842 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1721 and file_name = 'td_203.xml';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1721, 'td_203.xml', '.xml', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2017-11-17 08:49:23', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2017-11-17 08:49:23', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2017-11-17 08:49:23', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,846 [64] DEBUG dn_lib.tools.log - added file 4095: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\_bck\procs\td\td_203.xml
2021-01-10 15:29:29,847 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1721 and file_name = 'td_207.xml';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1721, 'td_207.xml', '.xml', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2017-10-27 09:54:52', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2017-10-27 09:54:52', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2017-10-27 09:54:52', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,852 [64] DEBUG dn_lib.tools.log - added file 4096: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\_bck\procs\td\td_207.xml
2021-01-10 15:29:29,853 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1721 and file_name = 'td_210.xml';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1721, 'td_210.xml', '.xml', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2018-02-07 15:07:28', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2018-02-07 15:07:28', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2018-02-07 15:07:28', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,858 [64] DEBUG dn_lib.tools.log - added file 4097: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\_bck\procs\td\td_210.xml
2021-01-10 15:29:29,859 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1721 and file_name = 'td_211.xml';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1721, 'td_211.xml', '.xml', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2018-02-07 14:39:04', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2018-02-07 14:39:04', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2018-02-07 14:39:04', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,864 [64] DEBUG dn_lib.tools.log - added file 4098: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\_bck\procs\td\td_211.xml
2021-01-10 15:29:29,866 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1721 and file_name = 'td_231.xml';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1721, 'td_231.xml', '.xml', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2017-11-21 17:50:31', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2017-11-21 17:50:31', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2017-11-21 17:50:31', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,873 [64] DEBUG dn_lib.tools.log - added file 4099: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\_bck\procs\td\td_231.xml
2021-01-10 15:29:29,874 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1721 and file_name = 'td_232.xml';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1721, 'td_232.xml', '.xml', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2017-11-24 09:38:48', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2017-11-24 09:38:48', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2017-11-24 09:38:48', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,878 [64] DEBUG dn_lib.tools.log - added file 4100: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\_bck\procs\td\td_232.xml
2021-01-10 15:29:29,879 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1721 and file_name = 'td_320.xml';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1721, 'td_320.xml', '.xml', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2017-10-31 14:00:09', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2017-10-31 14:00:09', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2017-10-31 14:00:09', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,885 [64] DEBUG dn_lib.tools.log - added file 4101: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\_bck\procs\td\td_320.xml
2021-01-10 15:29:29,886 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1721 and file_name = 'td_323.xml';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1721, 'td_323.xml', '.xml', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2017-10-31 12:25:57', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2017-10-31 12:25:57', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2017-10-31 12:25:57', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,892 [64] DEBUG dn_lib.tools.log - added file 4102: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\_bck\procs\td\td_323.xml
2021-01-10 15:29:29,893 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1721 and file_name = 'td_324.xml';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1721, 'td_324.xml', '.xml', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2017-10-31 12:25:55', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2017-10-31 12:25:55', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2017-10-31 12:25:55', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,898 [64] DEBUG dn_lib.tools.log - added file 4103: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\_bck\procs\td\td_324.xml
2021-01-10 15:29:29,899 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1721 and file_name = 'td_325.xml';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1721, 'td_325.xml', '.xml', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2017-10-31 12:25:54', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2017-10-31 12:25:54', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2017-10-31 12:25:54', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,906 [64] DEBUG dn_lib.tools.log - added file 4104: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\_bck\procs\td\td_325.xml
2021-01-10 15:29:29,907 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1721 and file_name = 'td_400.xml';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1721, 'td_400.xml', '.xml', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2018-03-06 09:28:18', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2018-03-06 09:28:18', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2018-03-06 09:28:18', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,912 [64] DEBUG dn_lib.tools.log - added file 4105: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\_bck\procs\td\td_400.xml
2021-01-10 15:29:29,913 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1721 and file_name = 'td_410.xml';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1721, 'td_410.xml', '.xml', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2018-03-05 12:36:22', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2018-03-05 12:36:22', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2018-03-05 12:36:22', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,920 [64] DEBUG dn_lib.tools.log - added file 4106: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\_bck\procs\td\td_410.xml
2021-01-10 15:29:29,922 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1721 and file_name = 'td_50.xml';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1721, 'td_50.xml', '.xml', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2017-10-27 10:37:04', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2017-10-27 10:37:04', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2017-10-27 10:37:04', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,927 [64] DEBUG dn_lib.tools.log - added file 4107: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\_bck\procs\td\td_50.xml
2021-01-10 15:29:29,928 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1721 and file_name = 'td_51.xml';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1721, 'td_51.xml', '.xml', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2017-10-27 11:59:44', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2017-10-27 11:59:44', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2017-10-27 11:59:44', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,934 [64] DEBUG dn_lib.tools.log - added file 4108: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\_bck\procs\td\td_51.xml
2021-01-10 15:29:29,935 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1721 and file_name = 'td_52.xml';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1721, 'td_52.xml', '.xml', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2017-10-27 12:02:54', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2017-10-27 12:02:54', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2017-10-27 12:02:54', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,940 [64] DEBUG dn_lib.tools.log - added file 4109: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\_bck\procs\td\td_52.xml
2021-01-10 15:29:29,942 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1721 and file_name = 'td_base.xml';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1721, 'td_base.xml', '.xml', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2019-09-03 10:00:07', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2019-09-03 10:00:07', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2019-09-03 10:00:07', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,947 [64] DEBUG dn_lib.tools.log - added file 4110: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\_bck\procs\td\td_base.xml
2021-01-10 15:29:29,949 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1303) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:29,950 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1303) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:29,952 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1716 and file_name = 'Log before.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1716, 'Log before.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-05 09:30:41', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-05 09:30:41', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-05 09:30:41', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,957 [64] DEBUG dn_lib.tools.log - added file 4111: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\_bck\Log before.txt
2021-01-10 15:29:29,962 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4111;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4111, '.txt', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-05 09:30:41', 120));
2021-01-10 15:29:29,991 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\_bck\Log before.txt'
2021-01-10 15:29:29,992 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1716 and file_name = 'Log Last.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1716, 'Log Last.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-05 09:30:31', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-05 09:30:31', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-05 09:30:31', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:29,996 [64] DEBUG dn_lib.tools.log - added file 4112: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\_bck\Log Last.txt
2021-01-10 15:29:30,008 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4112;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4112, '.txt', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-05 09:30:31', 120));
2021-01-10 15:29:30,058 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\_bck\Log Last.txt'
2021-01-10 15:29:30,059 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1716 and file_name = 'td_base.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1716, 'td_base.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-03 15:15:52', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-03 15:15:52', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-03 15:15:52', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:30,063 [64] DEBUG dn_lib.tools.log - added file 4113: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\_bck\td_base.sql
2021-01-10 15:29:30,064 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4113;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4113, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-03 15:15:52', 120));
2021-01-10 15:29:30,067 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\_bck\td_base.sql'
2021-01-10 15:29:30,068 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1303) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:30,070 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1710 and file_name = 'mca.bat';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1710, 'mca.bat', '.bat', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-10 10:39:28', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-10 10:39:28', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-10 10:39:28', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:30,075 [64] DEBUG dn_lib.tools.log - added file 4114: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\mca.bat
2021-01-10 15:29:30,075 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1710 and file_name = 'sql.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1710, 'sql.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-05-29 17:40:56', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-05-29 17:40:56', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-05-29 17:40:56', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:30,080 [64] DEBUG dn_lib.tools.log - added file 4115: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\sql.sql
2021-01-10 15:29:30,081 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4115;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4115, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-05-29 17:40:56', 120));
2021-01-10 15:29:30,084 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\sql.sql'
2021-01-10 15:29:30,085 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1710 and file_name = '_log.lnk';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1710, '_log.lnk', '.lnk', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-03 09:42:51', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-03 09:42:51', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-03 09:42:51', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:30,091 [64] DEBUG dn_lib.tools.log - added file 4116: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200528.estrazione tecdoc.molina.fatto.task\_log.lnk
2021-01-10 15:29:30,092 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1303) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:30,093 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1709 
        and folder_name = '200623.check errori di importazione dati tecdoc.ok.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1709, '200623.check errori di importazione dati tecdoc.ok.molina.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-24 17:02:24', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-24 17:02:24', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-24 17:02:24', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:30,098 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200623.check errori di importazione dati tecdoc.ok.molina.task
2021-01-10 15:29:30,125 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1722 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1722, null, left('check errori di importazione dati tecdoc', 150)
            , NULL, convert(datetime, '2020-06-23 00:00:00', 120), convert(datetime, '2020-06-24 17:02:24', 120), 1
            , 'fatto', NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-06-23 00:00:00', 120), dt_upd = convert(datetime, '2020-06-24 17:02:24', 120)
         , title = left('check errori di importazione dati tecdoc', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = NULL, stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-06-23 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-24 17:02:24', 120), getdate())
          or isnull(title, '') <> isnull('check errori di importazione dati tecdoc', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:30,131 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\check errori di importazione dati tecdoc
2021-01-10 15:29:30,132 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1722 and file_name = 'Detail_04882_DIPASPORT_20200623_072620.csv';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1722, 'Detail_04882_DIPASPORT_20200623_072620.csv', '.csv', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-23 09:26:29', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-23 09:26:29', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-23 09:26:29', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:30,137 [64] DEBUG dn_lib.tools.log - added file 4117: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200623.check errori di importazione dati tecdoc.ok.molina.task\Detail_04882_DIPASPORT_20200623_072620.csv
2021-01-10 15:29:30,138 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1722 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1722, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-24 15:04:04', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-24 15:04:04', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-24 15:04:04', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:30,142 [64] DEBUG dn_lib.tools.log - added file 4118: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200623.check errori di importazione dati tecdoc.ok.molina.task\i.txt
2021-01-10 15:29:30,143 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4118;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4118, '.txt', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-24 15:04:04', 120));
2021-01-10 15:29:30,145 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1304;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1304, 4118, @content
          , convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-24 15:04:04', 120));
2021-01-10 15:29:30,147 [64] DEBUG dn_lib.tools.log - lette note task 1304
2021-01-10 15:29:30,148 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200623.check errori di importazione dati tecdoc.ok.molina.task\i.txt'
2021-01-10 15:29:30,149 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1722 and file_name = 'sql.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1722, 'sql.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-24 17:02:23', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-24 17:02:23', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-24 17:02:23', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:30,153 [64] DEBUG dn_lib.tools.log - added file 4119: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200623.check errori di importazione dati tecdoc.ok.molina.task\sql.sql
2021-01-10 15:29:30,154 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4119;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4119, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-24 17:02:23', 120));
2021-01-10 15:29:30,157 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200623.check errori di importazione dati tecdoc.ok.molina.task\sql.sql'
2021-01-10 15:29:30,158 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1722 and file_name = 'td_base.old.xml';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1722, 'td_base.old.xml', '.xml', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-24 08:58:11', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-24 08:58:11', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-24 08:58:11', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:30,164 [64] DEBUG dn_lib.tools.log - added file 4120: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200623.check errori di importazione dati tecdoc.ok.molina.task\td_base.old.xml
2021-01-10 15:29:30,164 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1304) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:30,172 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1709 
        and folder_name = '200626.controlli sulla definizione delle auto.check.ok.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1709, '200626.controlli sulla definizione delle auto.check.ok.molina.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-26 11:51:36', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-26 11:51:36', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-26 11:51:36', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:30,176 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200626.controlli sulla definizione delle auto.check.ok.molina.task
2021-01-10 15:29:30,210 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1723 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1723, null, left('controlli sulla definizione delle auto', 150)
            , NULL, convert(datetime, '2020-06-26 00:00:00', 120), convert(datetime, '2020-06-26 11:51:36', 120), 1
            , 'fatto', NULL, 'controllo', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-06-26 00:00:00', 120), dt_upd = convert(datetime, '2020-06-26 11:51:36', 120)
         , title = left('controlli sulla definizione delle auto', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'controllo', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-06-26 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-26 11:51:36', 120), getdate())
          or isnull(title, '') <> isnull('controlli sulla definizione delle auto', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('controllo', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:30,217 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\controlli sulla definizione delle auto
2021-01-10 15:29:30,218 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1723 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1723, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-26 11:52:15', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-26 11:52:15', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-26 11:52:15', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:30,223 [64] DEBUG dn_lib.tools.log - added file 4121: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200626.controlli sulla definizione delle auto.check.ok.molina.task\i.txt
2021-01-10 15:29:30,224 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4121;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4121, '.txt', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-26 11:52:15', 120));
2021-01-10 15:29:30,227 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1305;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1305, 4121, @content
          , convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-26 11:52:15', 120));
2021-01-10 15:29:30,229 [64] DEBUG dn_lib.tools.log - lette note task 1305
2021-01-10 15:29:30,230 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200626.controlli sulla definizione delle auto.check.ok.molina.task\i.txt'
2021-01-10 15:29:30,231 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1305) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:30,240 [64] DEBUG dn_lib.tools.log - updated task: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\controlli sulla definizione delle auto
2021-01-10 15:29:30,241 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1709 
        and folder_name = '200702.check cross ARC071VLON.check.incompleta.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1709, '200702.check cross ARC071VLON.check.incompleta.molina.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-29 17:48:51', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-07-29 17:48:51', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-29 17:48:51', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:30,245 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200702.check cross ARC071VLON.check.incompleta.molina.task
2021-01-10 15:29:30,280 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1724 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1724, null, left('check cross ARC071VLON', 150)
            , NULL, convert(datetime, '2020-07-02 00:00:00', 120), convert(datetime, '2020-07-29 17:48:51', 120), 1
            , 'incompleto', NULL, 'controllo', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-07-02 00:00:00', 120), dt_upd = convert(datetime, '2020-07-29 17:48:51', 120)
         , title = left('check cross ARC071VLON', 150), [user] = NULL
         , stato = 'incompleto', priorita = NULL
         , tipo = 'controllo', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-07-02 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-07-29 17:48:51', 120), getdate())
          or isnull(title, '') <> isnull('check cross ARC071VLON', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('incompleto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('controllo', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:30,286 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\check cross ARC071VLON
2021-01-10 15:29:30,287 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1724 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1724, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-29 17:47:30', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-07-29 17:47:30', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-29 17:47:30', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:30,291 [64] DEBUG dn_lib.tools.log - added file 4122: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200702.check cross ARC071VLON.check.incompleta.molina.task\i.txt
2021-01-10 15:29:30,292 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4122;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4122, '.txt', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-29 17:47:30', 120));
2021-01-10 15:29:30,295 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1306;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1306, 4122, @content
          , convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-29 17:47:30', 120));
2021-01-10 15:29:30,297 [64] DEBUG dn_lib.tools.log - lette note task 1306
2021-01-10 15:29:30,297 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200702.check cross ARC071VLON.check.incompleta.molina.task\i.txt'
2021-01-10 15:29:30,298 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1724 and file_name = 'Problema Cross TecDoc.msg';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1724, 'Problema Cross TecDoc.msg', '.msg', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-29 17:48:50', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-07-29 17:48:50', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-29 17:48:50', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:30,303 [64] DEBUG dn_lib.tools.log - added file 4123: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200702.check cross ARC071VLON.check.incompleta.molina.task\Problema Cross TecDoc.msg
2021-01-10 15:29:30,304 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1724 and file_name = 'sql.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1724, 'sql.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-03 09:00:56', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-07-03 09:00:56', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-03 09:00:56', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:30,311 [64] DEBUG dn_lib.tools.log - added file 4124: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200702.check cross ARC071VLON.check.incompleta.molina.task\sql.sql
2021-01-10 15:29:30,312 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4124;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4124, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-03 09:00:56', 120));
2021-01-10 15:29:30,314 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200702.check cross ARC071VLON.check.incompleta.molina.task\sql.sql'
2021-01-10 15:29:30,315 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1724 and file_name = 'sql_bck.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1724, 'sql_bck.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-03 08:38:20', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-07-03 08:38:20', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-03 08:38:20', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:30,320 [64] DEBUG dn_lib.tools.log - added file 4125: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200702.check cross ARC071VLON.check.incompleta.molina.task\sql_bck.sql
2021-01-10 15:29:30,321 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4125;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4125, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-03 08:38:20', 120));
2021-01-10 15:29:30,324 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\200702.check cross ARC071VLON.check.incompleta.molina.task\sql_bck.sql'
2021-01-10 15:29:30,325 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1306) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:30,332 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1709 
        and folder_name = '201113.revisione errori.molina.ok.fix.2g.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1709, '201113.revisione errori.molina.ok.fix.2g.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-11-13 14:40:53', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-11-13 14:40:53', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-11-13 14:40:53', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:30,337 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\201113.revisione errori.molina.ok.fix.2g.task
2021-01-10 15:29:30,381 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1725 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1725, null, left('revisione errori', 150)
            , NULL, convert(datetime, '2020-11-13 00:00:00', 120), convert(datetime, '2020-11-13 14:40:53', 120), 1
            , 'fatto', NULL, 'fix', 'due_giorni');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-11-13 00:00:00', 120), dt_upd = convert(datetime, '2020-11-13 14:40:53', 120)
         , title = left('revisione errori', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = 'due_giorni'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-11-13 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-11-13 14:40:53', 120), getdate())
          or isnull(title, '') <> isnull('revisione errori', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull('due_giorni', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:30,387 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\revisione errori
2021-01-10 15:29:30,388 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1725 and file_name = 'td_report.rar';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1725, 'td_report.rar', '.rar', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-11-13 14:40:25', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-11-13 14:40:25', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-11-13 14:40:25', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:30,394 [64] DEBUG dn_lib.tools.log - added file 4126: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\201113.revisione errori.molina.ok.fix.2g.task\td_report.rar
2021-01-10 15:29:30,395 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1307) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:30,404 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1709 and file_name = 'estrazione dati tecdoc flow223dpsn.fatta.check.molina.task.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1709, 'estrazione dati tecdoc flow223dpsn.fatta.check.molina.task.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-18 10:39:50', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-18 10:39:50', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-18 10:39:50', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:30,410 [64] DEBUG dn_lib.tools.log - added file 4127: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\estrazione dati tecdoc flow223dpsn.fatta.check.molina.task.sql
2021-01-10 15:29:30,411 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4127;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4127, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-18 10:39:50', 120));
2021-01-10 15:29:30,414 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\estrazione dati tecdoc flow223dpsn.fatta.check.molina.task.sql'
2021-01-10 15:29:30,450 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4127;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, null, 4127, left('estrazione dati tecdoc flow223dpsn', 150)
            , NULL, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-18 10:39:50', 120), 1
            , 'fatto', NULL, 'controllo', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-18 10:39:50', 120)
         , title = left('estrazione dati tecdoc flow223dpsn', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'controllo', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-18 10:39:50', 120), getdate())
          or isnull(title, '') <> isnull('estrazione dati tecdoc flow223dpsn', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('controllo', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:30,456 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\estrazione dati tecdoc flow223dpsn
2021-01-10 15:29:30,457 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1709 and file_name = 'xx_td_prods_check.fatto.fix.molina.task.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1709, 'xx_td_prods_check.fatto.fix.molina.task.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-04 14:33:49', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-04 14:33:49', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-04 14:33:49', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:30,461 [64] DEBUG dn_lib.tools.log - added file 4128: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\xx_td_prods_check.fatto.fix.molina.task.sql
2021-01-10 15:29:30,462 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4128;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4128, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-04 14:33:49', 120));
2021-01-10 15:29:30,465 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\xx_td_prods_check.fatto.fix.molina.task.sql'
2021-01-10 15:29:30,496 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4128;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, null, 4128, left('xx_td_prods_check', 150)
            , NULL, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-04 14:33:49', 120), 1
            , 'fatto', NULL, 'fix', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-04 14:33:49', 120)
         , title = left('xx_td_prods_check', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-04 14:33:49', 120), getdate())
          or isnull(title, '') <> isnull('xx_td_prods_check', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:30,503 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\scheda tecdoc\estrazione dati tecdoc\xx_td_prods_check
2021-01-10 15:29:30,503 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1699 
        and folder_name = 'funzionalit';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1699, 'funzionalit', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-11-11 11:04:20', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-11-11 11:04:20', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-11-11 11:04:20', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:30,507 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\scheda tecdoc\funzionalit
2021-01-10 15:29:30,508 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1726 
        and folder_name = '200508.schede - elimina.molina.fatta.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1726, '200508.schede - elimina.molina.fatta.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-12 10:22:05', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-12 10:22:05', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-12 10:22:05', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:30,512 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\scheda tecdoc\funzionalit\200508.schede - elimina.molina.fatta.task
2021-01-10 15:29:30,539 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1727 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1727, null, left('schede - elimina', 150)
            , NULL, convert(datetime, '2020-05-08 00:00:00', 120), convert(datetime, '2020-06-12 10:22:05', 120), 1
            , 'fatto', NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-05-08 00:00:00', 120), dt_upd = convert(datetime, '2020-06-12 10:22:05', 120)
         , title = left('schede - elimina', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = NULL, stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-05-08 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-12 10:22:05', 120), getdate())
          or isnull(title, '') <> isnull('schede - elimina', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:30,546 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\scheda tecdoc\funzionalit\schede - elimina
2021-01-10 15:29:30,547 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1727 and file_name = 'da cancellare - 2.xls';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1727, 'da cancellare - 2.xls', '.xls', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-05-08 15:15:04', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-05-08 15:15:04', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-05-08 15:15:04', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:30,552 [64] DEBUG dn_lib.tools.log - added file 4129: C:\root\todd\_test\dn\scheda tecdoc\funzionalit\200508.schede - elimina.molina.fatta.task\da cancellare - 2.xls
2021-01-10 15:29:30,553 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1727 and file_name = 'da cancellare.xlsx';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1727, 'da cancellare.xlsx', '.xlsx', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-05-08 14:26:22', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-05-08 14:26:22', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-05-08 14:26:22', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:30,558 [64] DEBUG dn_lib.tools.log - added file 4130: C:\root\todd\_test\dn\scheda tecdoc\funzionalit\200508.schede - elimina.molina.fatta.task\da cancellare.xlsx
2021-01-10 15:29:30,559 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1727 and file_name = 'sql.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1727, 'sql.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-05-12 16:00:46', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-05-12 16:00:46', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-05-12 16:00:46', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:30,564 [64] DEBUG dn_lib.tools.log - added file 4131: C:\root\todd\_test\dn\scheda tecdoc\funzionalit\200508.schede - elimina.molina.fatta.task\sql.sql
2021-01-10 15:29:30,565 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4131;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4131, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-05-12 16:00:46', 120));
2021-01-10 15:29:30,568 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\scheda tecdoc\funzionalit\200508.schede - elimina.molina.fatta.task\sql.sql'
2021-01-10 15:29:30,569 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1310) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:30,577 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1726 
        and folder_name = '200526.scheda marca.fatto.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1726, '200526.scheda marca.fatto.molina.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-24 14:44:04', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-24 14:44:04', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-24 14:44:04', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:30,582 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\scheda tecdoc\funzionalit\200526.scheda marca.fatto.molina.task
2021-01-10 15:29:30,609 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1728 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1728, null, left('scheda marca', 150)
            , NULL, convert(datetime, '2020-05-26 00:00:00', 120), convert(datetime, '2020-06-24 14:44:04', 120), 1
            , 'fatto', NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-05-26 00:00:00', 120), dt_upd = convert(datetime, '2020-06-24 14:44:04', 120)
         , title = left('scheda marca', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = NULL, stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-05-26 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-24 14:44:04', 120), getdate())
          or isnull(title, '') <> isnull('scheda marca', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:30,614 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\scheda tecdoc\funzionalit\scheda marca
2021-01-10 15:29:30,615 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1728 and file_name = 'scheda - marca.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1728, 'scheda - marca.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-05-28 15:00:23', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-05-28 15:00:23', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-05-28 15:00:23', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:30,620 [64] DEBUG dn_lib.tools.log - added file 4132: C:\root\todd\_test\dn\scheda tecdoc\funzionalit\200526.scheda marca.fatto.molina.task\scheda - marca.sql
2021-01-10 15:29:30,621 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4132;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4132, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-05-28 15:00:23', 120));
2021-01-10 15:29:30,623 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\scheda tecdoc\funzionalit\200526.scheda marca.fatto.molina.task\scheda - marca.sql'
2021-01-10 15:29:30,624 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1728 and file_name = 'Sufx.xls';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1728, 'Sufx.xls', '.xls', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-05-26 11:31:52', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-05-26 11:31:52', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-05-26 11:31:52', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:30,628 [64] DEBUG dn_lib.tools.log - added file 4133: C:\root\todd\_test\dn\scheda tecdoc\funzionalit\200526.scheda marca.fatto.molina.task\Sufx.xls
2021-01-10 15:29:30,629 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1311) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:30,637 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1726 
        and folder_name = '200625.sistemata alla gestione accoppiamenti.rev.ok.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1726, '200625.sistemata alla gestione accoppiamenti.rev.ok.molina.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-29 11:00:57', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-29 11:00:57', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-29 11:00:57', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:30,642 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\scheda tecdoc\funzionalit\200625.sistemata alla gestione accoppiamenti.rev.ok.molina.task
2021-01-10 15:29:30,677 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1729 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1729, null, left('sistemata alla gestione accoppiamenti', 150)
            , NULL, convert(datetime, '2020-06-25 00:00:00', 120), convert(datetime, '2020-06-29 11:00:57', 120), 1
            , 'fatto', NULL, 'revisione', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-06-25 00:00:00', 120), dt_upd = convert(datetime, '2020-06-29 11:00:57', 120)
         , title = left('sistemata alla gestione accoppiamenti', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'revisione', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-06-25 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-29 11:00:57', 120), getdate())
          or isnull(title, '') <> isnull('sistemata alla gestione accoppiamenti', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('revisione', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:30,683 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\scheda tecdoc\funzionalit\sistemata alla gestione accoppiamenti
2021-01-10 15:29:30,684 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1729 and file_name = 'bck.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1729, 'bck.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-29 14:12:51', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-29 14:12:51', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-29 14:12:51', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:30,689 [64] DEBUG dn_lib.tools.log - added file 4134: C:\root\todd\_test\dn\scheda tecdoc\funzionalit\200625.sistemata alla gestione accoppiamenti.rev.ok.molina.task\bck.txt
2021-01-10 15:29:30,690 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4134;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4134, '.txt', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-29 14:12:51', 120));
2021-01-10 15:29:30,693 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\scheda tecdoc\funzionalit\200625.sistemata alla gestione accoppiamenti.rev.ok.molina.task\bck.txt'
2021-01-10 15:29:30,694 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1729 and file_name = 'estrazione types.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1729, 'estrazione types.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-26 09:10:03', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-26 09:10:03', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-26 09:10:03', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:30,700 [64] DEBUG dn_lib.tools.log - added file 4135: C:\root\todd\_test\dn\scheda tecdoc\funzionalit\200625.sistemata alla gestione accoppiamenti.rev.ok.molina.task\estrazione types.sql
2021-01-10 15:29:30,701 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4135;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4135, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-26 09:10:03', 120));
2021-01-10 15:29:30,705 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\scheda tecdoc\funzionalit\200625.sistemata alla gestione accoppiamenti.rev.ok.molina.task\estrazione types.sql'
2021-01-10 15:29:30,706 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1729 and file_name = 'sql.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1729, 'sql.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-29 10:45:10', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-29 10:45:10', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-29 10:45:10', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:30,712 [64] DEBUG dn_lib.tools.log - added file 4136: C:\root\todd\_test\dn\scheda tecdoc\funzionalit\200625.sistemata alla gestione accoppiamenti.rev.ok.molina.task\sql.sql
2021-01-10 15:29:30,713 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4136;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4136, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-29 10:45:10', 120));
2021-01-10 15:29:30,715 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\scheda tecdoc\funzionalit\200625.sistemata alla gestione accoppiamenti.rev.ok.molina.task\sql.sql'
2021-01-10 15:29:30,716 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1312) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:30,724 [64] DEBUG dn_lib.tools.log - updated task: C:\root\todd\_test\dn\scheda tecdoc\funzionalit\sistemata alla gestione accoppiamenti
2021-01-10 15:29:30,725 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1726 
        and folder_name = '200629.controllo rinomina codice DIP.fix.ok.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1726, '200629.controllo rinomina codice DIP.fix.ok.molina.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-29 10:08:03', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-29 10:08:03', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-29 10:08:03', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:30,729 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\scheda tecdoc\funzionalit\200629.controllo rinomina codice DIP.fix.ok.molina.task
2021-01-10 15:29:30,764 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1730 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1730, null, left('controllo rinomina codice DIP', 150)
            , NULL, convert(datetime, '2020-06-29 00:00:00', 120), convert(datetime, '2020-06-29 10:08:03', 120), 1
            , 'fatto', NULL, 'fix', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-06-29 00:00:00', 120), dt_upd = convert(datetime, '2020-06-29 10:08:03', 120)
         , title = left('controllo rinomina codice DIP', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-06-29 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-29 10:08:03', 120), getdate())
          or isnull(title, '') <> isnull('controllo rinomina codice DIP', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:30,770 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\scheda tecdoc\funzionalit\controllo rinomina codice DIP
2021-01-10 15:29:30,771 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1313) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:30,778 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1726 
        and folder_name = '200629.gestione categorie prodotti dal crm.new.2g.molina.dafare.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1726, '200629.gestione categorie prodotti dal crm.new.2g.molina.dafare.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-29 14:24:04', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-29 14:24:04', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-29 14:24:04', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:30,782 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\scheda tecdoc\funzionalit\200629.gestione categorie prodotti dal crm.new.2g.molina.dafare.task
2021-01-10 15:29:30,822 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1731 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1731, null, left('gestione categorie prodotti dal crm', 150)
            , NULL, convert(datetime, '2020-06-29 00:00:00', 120), convert(datetime, '2020-06-29 14:24:04', 120), 1
            , 'da_fare', NULL, 'aggiunta', 'due_giorni');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-06-29 00:00:00', 120), dt_upd = convert(datetime, '2020-06-29 14:24:04', 120)
         , title = left('gestione categorie prodotti dal crm', 150), [user] = NULL
         , stato = 'da_fare', priorita = NULL
         , tipo = 'aggiunta', stima = 'due_giorni'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-06-29 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-29 14:24:04', 120), getdate())
          or isnull(title, '') <> isnull('gestione categorie prodotti dal crm', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('da_fare', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('aggiunta', '') or isnull(stima, '') <> isnull('due_giorni', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:30,831 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\scheda tecdoc\funzionalit\gestione categorie prodotti dal crm
2021-01-10 15:29:30,832 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1314) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:30,842 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1726 and file_name = '200617.gestione cauzioni.molina.ok.new.2g.task.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1726, '200617.gestione cauzioni.molina.ok.new.2g.task.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-22 17:36:29', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-22 17:36:29', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-22 17:36:29', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:30,849 [64] DEBUG dn_lib.tools.log - added file 4137: C:\root\todd\_test\dn\scheda tecdoc\funzionalit\200617.gestione cauzioni.molina.ok.new.2g.task.sql
2021-01-10 15:29:30,850 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4137;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4137, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-22 17:36:29', 120));
2021-01-10 15:29:30,853 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\scheda tecdoc\funzionalit\200617.gestione cauzioni.molina.ok.new.2g.task.sql'
2021-01-10 15:29:30,898 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4137;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, null, 4137, left('gestione cauzioni', 150)
            , NULL, convert(datetime, '2020-06-17 00:00:00', 120), convert(datetime, '2020-06-22 17:36:29', 120), 1
            , 'fatto', NULL, 'aggiunta', 'due_giorni');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-06-17 00:00:00', 120), dt_upd = convert(datetime, '2020-06-22 17:36:29', 120)
         , title = left('gestione cauzioni', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'aggiunta', stima = 'due_giorni'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-06-17 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-22 17:36:29', 120), getdate())
          or isnull(title, '') <> isnull('gestione cauzioni', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('aggiunta', '') or isnull(stima, '') <> isnull('due_giorni', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:30,904 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\scheda tecdoc\funzionalit\gestione cauzioni
2021-01-10 15:29:30,905 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1726 and file_name = '200617.gestione compatibili.molina.fatta.task.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1726, '200617.gestione compatibili.molina.fatta.task.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-17 14:06:18', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-17 14:06:18', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-17 14:06:18', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:30,909 [64] DEBUG dn_lib.tools.log - added file 4138: C:\root\todd\_test\dn\scheda tecdoc\funzionalit\200617.gestione compatibili.molina.fatta.task.sql
2021-01-10 15:29:30,910 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4138;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4138, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-17 14:06:18', 120));
2021-01-10 15:29:30,913 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\scheda tecdoc\funzionalit\200617.gestione compatibili.molina.fatta.task.sql'
2021-01-10 15:29:30,937 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4138;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, null, 4138, left('gestione compatibili', 150)
            , NULL, convert(datetime, '2020-06-17 00:00:00', 120), convert(datetime, '2020-06-17 14:06:18', 120), 1
            , 'fatto', NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-06-17 00:00:00', 120), dt_upd = convert(datetime, '2020-06-17 14:06:18', 120)
         , title = left('gestione compatibili', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = NULL, stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-06-17 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-17 14:06:18', 120), getdate())
          or isnull(title, '') <> isnull('gestione compatibili', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:30,943 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\scheda tecdoc\funzionalit\gestione compatibili
2021-01-10 15:29:30,944 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1726 and file_name = '200623.duplica schede - controllo campi.ok.fix.molina.task.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1726, '200623.duplica schede - controllo campi.ok.fix.molina.task.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-23 11:10:13', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-23 11:10:13', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-23 11:10:13', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:30,949 [64] DEBUG dn_lib.tools.log - added file 4139: C:\root\todd\_test\dn\scheda tecdoc\funzionalit\200623.duplica schede - controllo campi.ok.fix.molina.task.sql
2021-01-10 15:29:30,950 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4139;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4139, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-23 11:10:13', 120));
2021-01-10 15:29:30,952 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\scheda tecdoc\funzionalit\200623.duplica schede - controllo campi.ok.fix.molina.task.sql'
2021-01-10 15:29:30,990 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4139;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, null, 4139, left('duplica schede - controllo campi', 150)
            , NULL, convert(datetime, '2020-06-23 00:00:00', 120), convert(datetime, '2020-06-23 11:10:13', 120), 1
            , 'fatto', NULL, 'fix', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-06-23 00:00:00', 120), dt_upd = convert(datetime, '2020-06-23 11:10:13', 120)
         , title = left('duplica schede - controllo campi', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-06-23 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-23 11:10:13', 120), getdate())
          or isnull(title, '') <> isnull('duplica schede - controllo campi', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:30,996 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\scheda tecdoc\funzionalit\duplica schede - controllo campi
2021-01-10 15:29:30,997 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1726 and file_name = 'avviso duplica schede prodotti senza scheda.fatta.fix.molina.task.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1726, 'avviso duplica schede prodotti senza scheda.fatta.fix.molina.task.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-17 10:37:25', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-17 10:37:25', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-17 10:37:25', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:31,002 [64] DEBUG dn_lib.tools.log - added file 4140: C:\root\todd\_test\dn\scheda tecdoc\funzionalit\avviso duplica schede prodotti senza scheda.fatta.fix.molina.task.txt
2021-01-10 15:29:31,003 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4140;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4140, '.txt', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-17 10:37:25', 120));
2021-01-10 15:29:31,006 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\scheda tecdoc\funzionalit\avviso duplica schede prodotti senza scheda.fatta.fix.molina.task.txt'
2021-01-10 15:29:31,041 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4140;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, null, 4140, left('avviso duplica schede prodotti senza scheda', 150)
            , NULL, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-17 10:37:25', 120), 1
            , 'fatto', NULL, 'fix', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-17 10:37:25', 120)
         , title = left('avviso duplica schede prodotti senza scheda', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-17 10:37:25', 120), getdate())
          or isnull(title, '') <> isnull('avviso duplica schede prodotti senza scheda', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:31,046 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\scheda tecdoc\funzionalit\avviso duplica schede prodotti senza scheda
2021-01-10 15:29:31,047 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1318;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1318, 4140, @content
          , convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-17 10:37:25', 120));
2021-01-10 15:29:31,049 [64] DEBUG dn_lib.tools.log - lette note task 1318
2021-01-10 15:29:31,050 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1726 and file_name = 'codici senza scheda web.fatto.fix.molina.task.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1726, 'codici senza scheda web.fatto.fix.molina.task.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-11 17:40:54', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-11 17:40:54', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-11 17:40:54', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:31,054 [64] DEBUG dn_lib.tools.log - added file 4141: C:\root\todd\_test\dn\scheda tecdoc\funzionalit\codici senza scheda web.fatto.fix.molina.task.sql
2021-01-10 15:29:31,055 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4141;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4141, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-11 17:40:54', 120));
2021-01-10 15:29:31,058 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\scheda tecdoc\funzionalit\codici senza scheda web.fatto.fix.molina.task.sql'
2021-01-10 15:29:31,089 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4141;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, null, 4141, left('codici senza scheda web', 150)
            , NULL, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-11 17:40:54', 120), 1
            , 'fatto', NULL, 'fix', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-11 17:40:54', 120)
         , title = left('codici senza scheda web', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-11 17:40:54', 120), getdate())
          or isnull(title, '') <> isnull('codici senza scheda web', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:31,095 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\scheda tecdoc\funzionalit\codici senza scheda web
2021-01-10 15:29:31,096 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1726 and file_name = 'criteri prodotti.fatto.fix.molina.task.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1726, 'criteri prodotti.fatto.fix.molina.task.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-05 10:14:48', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-05 10:14:48', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-05 10:14:48', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:31,100 [64] DEBUG dn_lib.tools.log - added file 4142: C:\root\todd\_test\dn\scheda tecdoc\funzionalit\criteri prodotti.fatto.fix.molina.task.sql
2021-01-10 15:29:31,101 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4142;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4142, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-05 10:14:48', 120));
2021-01-10 15:29:31,103 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\scheda tecdoc\funzionalit\criteri prodotti.fatto.fix.molina.task.sql'
2021-01-10 15:29:31,135 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4142;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, null, 4142, left('criteri prodotti', 150)
            , NULL, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-05 10:14:48', 120), 1
            , 'fatto', NULL, 'fix', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-05 10:14:48', 120)
         , title = left('criteri prodotti', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-05 10:14:48', 120), getdate())
          or isnull(title, '') <> isnull('criteri prodotti', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:31,143 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\scheda tecdoc\funzionalit\criteri prodotti
2021-01-10 15:29:31,145 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1726 and file_name = 'duplica aggiornamento prezzi.fatto.fix.molina.task.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1726, 'duplica aggiornamento prezzi.fatto.fix.molina.task.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-08 09:12:55', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-08 09:12:55', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-08 09:12:55', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:31,151 [64] DEBUG dn_lib.tools.log - added file 4143: C:\root\todd\_test\dn\scheda tecdoc\funzionalit\duplica aggiornamento prezzi.fatto.fix.molina.task.sql
2021-01-10 15:29:31,152 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4143;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4143, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-08 09:12:55', 120));
2021-01-10 15:29:31,155 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\scheda tecdoc\funzionalit\duplica aggiornamento prezzi.fatto.fix.molina.task.sql'
2021-01-10 15:29:31,191 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4143;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, null, 4143, left('duplica aggiornamento prezzi', 150)
            , NULL, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-08 09:12:55', 120), 1
            , 'fatto', NULL, 'fix', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-08 09:12:55', 120)
         , title = left('duplica aggiornamento prezzi', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-08 09:12:55', 120), getdate())
          or isnull(title, '') <> isnull('duplica aggiornamento prezzi', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:31,197 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\scheda tecdoc\funzionalit\duplica aggiornamento prezzi
2021-01-10 15:29:31,198 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1726 and file_name = 'duplica attributi sbagliati.fatto.fix.molina.task.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1726, 'duplica attributi sbagliati.fatto.fix.molina.task.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-05-27 15:19:55', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-05-27 15:19:55', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-05-27 15:19:55', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:31,202 [64] DEBUG dn_lib.tools.log - added file 4144: C:\root\todd\_test\dn\scheda tecdoc\funzionalit\duplica attributi sbagliati.fatto.fix.molina.task.txt
2021-01-10 15:29:31,203 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4144;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4144, '.txt', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-05-27 15:19:55', 120));
2021-01-10 15:29:31,205 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\scheda tecdoc\funzionalit\duplica attributi sbagliati.fatto.fix.molina.task.txt'
2021-01-10 15:29:31,237 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4144;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, null, 4144, left('duplica attributi sbagliati', 150)
            , NULL, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-05-27 15:19:55', 120), 1
            , 'fatto', NULL, 'fix', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-05-27 15:19:55', 120)
         , title = left('duplica attributi sbagliati', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-05-27 15:19:55', 120), getdate())
          or isnull(title, '') <> isnull('duplica attributi sbagliati', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:31,243 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\scheda tecdoc\funzionalit\duplica attributi sbagliati
2021-01-10 15:29:31,244 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1322;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1322, 4144, @content
          , convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-05-27 15:19:55', 120));
2021-01-10 15:29:31,246 [64] DEBUG dn_lib.tools.log - lette note task 1322
2021-01-10 15:29:31,248 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1726 and file_name = 'duplica schede prezzi.fatto.fix.molina.task.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1726, 'duplica schede prezzi.fatto.fix.molina.task.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-11 16:55:17', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-11 16:55:17', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-11 16:55:17', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:31,253 [64] DEBUG dn_lib.tools.log - added file 4145: C:\root\todd\_test\dn\scheda tecdoc\funzionalit\duplica schede prezzi.fatto.fix.molina.task.sql
2021-01-10 15:29:31,254 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4145;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4145, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-11 16:55:17', 120));
2021-01-10 15:29:31,256 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\scheda tecdoc\funzionalit\duplica schede prezzi.fatto.fix.molina.task.sql'
2021-01-10 15:29:31,287 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4145;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, null, 4145, left('duplica schede prezzi', 150)
            , NULL, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-11 16:55:17', 120), 1
            , 'fatto', NULL, 'fix', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-11 16:55:17', 120)
         , title = left('duplica schede prezzi', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-11 16:55:17', 120), getdate())
          or isnull(title, '') <> isnull('duplica schede prezzi', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:31,293 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\scheda tecdoc\funzionalit\duplica schede prezzi
2021-01-10 15:29:31,294 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1726 and file_name = 'duplica si inchioda sul buf_attrs.fatto.fix.molina.task.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1726, 'duplica si inchioda sul buf_attrs.fatto.fix.molina.task.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-05-25 17:16:22', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-05-25 17:16:22', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-05-25 17:16:22', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:31,298 [64] DEBUG dn_lib.tools.log - added file 4146: C:\root\todd\_test\dn\scheda tecdoc\funzionalit\duplica si inchioda sul buf_attrs.fatto.fix.molina.task.sql
2021-01-10 15:29:31,300 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4146;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4146, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-05-25 17:16:22', 120));
2021-01-10 15:29:31,302 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\scheda tecdoc\funzionalit\duplica si inchioda sul buf_attrs.fatto.fix.molina.task.sql'
2021-01-10 15:29:31,338 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4146;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, null, 4146, left('duplica si inchioda sul buf_attrs', 150)
            , NULL, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-05-25 17:16:22', 120), 1
            , 'fatto', NULL, 'fix', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-05-25 17:16:22', 120)
         , title = left('duplica si inchioda sul buf_attrs', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-05-25 17:16:22', 120), getdate())
          or isnull(title, '') <> isnull('duplica si inchioda sul buf_attrs', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:31,344 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\scheda tecdoc\funzionalit\duplica si inchioda sul buf_attrs
2021-01-10 15:29:31,345 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1726 and file_name = 'elimina codice dipa.fatto.fix.molina.task.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1726, 'elimina codice dipa.fatto.fix.molina.task.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-05-25 18:28:14', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-05-25 18:28:14', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-05-25 18:28:14', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:31,350 [64] DEBUG dn_lib.tools.log - added file 4147: C:\root\todd\_test\dn\scheda tecdoc\funzionalit\elimina codice dipa.fatto.fix.molina.task.sql
2021-01-10 15:29:31,351 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4147;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4147, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-05-25 18:28:14', 120));
2021-01-10 15:29:31,354 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\scheda tecdoc\funzionalit\elimina codice dipa.fatto.fix.molina.task.sql'
2021-01-10 15:29:31,385 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4147;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, null, 4147, left('elimina codice dipa', 150)
            , NULL, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-05-25 18:28:14', 120), 1
            , 'fatto', NULL, 'fix', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-05-25 18:28:14', 120)
         , title = left('elimina codice dipa', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-05-25 18:28:14', 120), getdate())
          or isnull(title, '') <> isnull('elimina codice dipa', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:31,390 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\scheda tecdoc\funzionalit\elimina codice dipa
2021-01-10 15:29:31,391 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1726 and file_name = 'problema nel duplica schede.fatta.fix.molina.task.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1726, 'problema nel duplica schede.fatta.fix.molina.task.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-17 10:04:28', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-17 10:04:28', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-17 10:04:28', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:31,396 [64] DEBUG dn_lib.tools.log - added file 4148: C:\root\todd\_test\dn\scheda tecdoc\funzionalit\problema nel duplica schede.fatta.fix.molina.task.sql
2021-01-10 15:29:31,396 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4148;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4148, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-17 10:04:28', 120));
2021-01-10 15:29:31,399 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\scheda tecdoc\funzionalit\problema nel duplica schede.fatta.fix.molina.task.sql'
2021-01-10 15:29:31,429 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4148;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, null, 4148, left('problema nel duplica schede', 150)
            , NULL, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-17 10:04:28', 120), 1
            , 'fatto', NULL, 'fix', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-17 10:04:28', 120)
         , title = left('problema nel duplica schede', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-17 10:04:28', 120), getdate())
          or isnull(title, '') <> isnull('problema nel duplica schede', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:31,435 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\scheda tecdoc\funzionalit\problema nel duplica schede
2021-01-10 15:29:31,437 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1726 and file_name = 'rinomina dip sulle lavorazioni.fix.ok.molina.task.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1726, 'rinomina dip sulle lavorazioni.fix.ok.molina.task.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-02 11:11:45', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-07-02 11:11:45', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-02 11:11:45', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:31,441 [64] DEBUG dn_lib.tools.log - added file 4149: C:\root\todd\_test\dn\scheda tecdoc\funzionalit\rinomina dip sulle lavorazioni.fix.ok.molina.task.sql
2021-01-10 15:29:31,443 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4149;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4149, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-02 11:11:45', 120));
2021-01-10 15:29:31,449 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\scheda tecdoc\funzionalit\rinomina dip sulle lavorazioni.fix.ok.molina.task.sql'
2021-01-10 15:29:31,484 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4149;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, null, 4149, left('rinomina dip sulle lavorazioni', 150)
            , NULL, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-02 11:11:45', 120), 1
            , 'fatto', NULL, 'fix', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-07-02 11:11:45', 120)
         , title = left('rinomina dip sulle lavorazioni', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-07-02 11:11:45', 120), getdate())
          or isnull(title, '') <> isnull('rinomina dip sulle lavorazioni', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:31,490 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\scheda tecdoc\funzionalit\rinomina dip sulle lavorazioni
2021-01-10 15:29:31,491 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1726 and file_name = 'rinomina dip.fatto.fix.molina.task.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1726, 'rinomina dip.fatto.fix.molina.task.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-09 16:14:29', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-09 16:14:29', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-09 16:14:29', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:31,495 [64] DEBUG dn_lib.tools.log - added file 4150: C:\root\todd\_test\dn\scheda tecdoc\funzionalit\rinomina dip.fatto.fix.molina.task.sql
2021-01-10 15:29:31,496 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4150;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4150, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-09 16:14:29', 120));
2021-01-10 15:29:31,499 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\scheda tecdoc\funzionalit\rinomina dip.fatto.fix.molina.task.sql'
2021-01-10 15:29:31,531 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4150;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, null, 4150, left('rinomina dip', 150)
            , NULL, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-09 16:14:29', 120), 1
            , 'fatto', NULL, 'fix', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-09 16:14:29', 120)
         , title = left('rinomina dip', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-09 16:14:29', 120), getdate())
          or isnull(title, '') <> isnull('rinomina dip', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:31,536 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\scheda tecdoc\funzionalit\rinomina dip
2021-01-10 15:29:31,537 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1726 and file_name = 'tolto il controllo sugli ordini per il duplica schede.fatta.fix.molina.task.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1726, 'tolto il controllo sugli ordini per il duplica schede.fatta.fix.molina.task.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-15 15:40:45', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-15 15:40:45', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-15 15:40:45', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:31,543 [64] DEBUG dn_lib.tools.log - added file 4151: C:\root\todd\_test\dn\scheda tecdoc\funzionalit\tolto il controllo sugli ordini per il duplica schede.fatta.fix.molina.task.sql
2021-01-10 15:29:31,544 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4151;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4151, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-15 15:40:45', 120));
2021-01-10 15:29:31,546 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\scheda tecdoc\funzionalit\tolto il controllo sugli ordini per il duplica schede.fatta.fix.molina.task.sql'
2021-01-10 15:29:31,577 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4151;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, null, 4151, left('tolto il controllo sugli ordini per il duplica schede', 150)
            , NULL, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-15 15:40:45', 120), 1
            , 'fatto', NULL, 'fix', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-15 15:40:45', 120)
         , title = left('tolto il controllo sugli ordini per il duplica schede', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-15 15:40:45', 120), getdate())
          or isnull(title, '') <> isnull('tolto il controllo sugli ordini per il duplica schede', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:31,583 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\scheda tecdoc\funzionalit\tolto il controllo sugli ordini per il duplica schede
2021-01-10 15:29:31,584 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1726 and file_name = 'upload marche.fatto.fix.molina.task.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1726, 'upload marche.fatto.fix.molina.task.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-05-29 08:47:26', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-05-29 08:47:26', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-05-29 08:47:26', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:31,588 [64] DEBUG dn_lib.tools.log - added file 4152: C:\root\todd\_test\dn\scheda tecdoc\funzionalit\upload marche.fatto.fix.molina.task.sql
2021-01-10 15:29:31,589 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4152;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4152, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-05-29 08:47:26', 120));
2021-01-10 15:29:31,592 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\scheda tecdoc\funzionalit\upload marche.fatto.fix.molina.task.sql'
2021-01-10 15:29:31,627 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4152;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, null, 4152, left('upload marche', 150)
            , NULL, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-05-29 08:47:26', 120), 1
            , 'fatto', NULL, 'fix', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-05-29 08:47:26', 120)
         , title = left('upload marche', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-05-29 08:47:26', 120), getdate())
          or isnull(title, '') <> isnull('upload marche', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:31,632 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\scheda tecdoc\funzionalit\upload marche
2021-01-10 15:29:31,633 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1699 
        and folder_name = 'gestione cross';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1699, 'gestione cross', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-21 11:24:42', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-08-21 11:24:42', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-21 11:24:42', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:31,637 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\scheda tecdoc\gestione cross
2021-01-10 15:29:31,638 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1732 
        and folder_name = '200626.deselezionato mi aspetto di vederlo in verde.fix.ok.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1732, '200626.deselezionato mi aspetto di vederlo in verde.fix.ok.molina.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-29 09:34:19', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-29 09:34:19', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-29 09:34:19', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:31,642 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\scheda tecdoc\gestione cross\200626.deselezionato mi aspetto di vederlo in verde.fix.ok.molina.task
2021-01-10 15:29:31,673 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1733 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1733, null, left('deselezionato mi aspetto di vederlo in verde', 150)
            , NULL, convert(datetime, '2020-06-26 00:00:00', 120), convert(datetime, '2020-06-29 09:34:19', 120), 1
            , 'fatto', NULL, 'fix', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-06-26 00:00:00', 120), dt_upd = convert(datetime, '2020-06-29 09:34:19', 120)
         , title = left('deselezionato mi aspetto di vederlo in verde', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-06-26 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-29 09:34:19', 120), getdate())
          or isnull(title, '') <> isnull('deselezionato mi aspetto di vederlo in verde', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:31,678 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\scheda tecdoc\gestione cross\deselezionato mi aspetto di vederlo in verde
2021-01-10 15:29:31,679 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1733 and file_name = 'i.png';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1733, 'i.png', '.png', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-26 17:07:09', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-26 17:07:09', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-26 17:07:09', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:31,684 [64] DEBUG dn_lib.tools.log - added file 4153: C:\root\todd\_test\dn\scheda tecdoc\gestione cross\200626.deselezionato mi aspetto di vederlo in verde.fix.ok.molina.task\i.png
2021-01-10 15:29:31,684 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1733 and file_name = 'i2.png';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1733, 'i2.png', '.png', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-26 17:07:09', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-26 17:07:09', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-26 17:07:09', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:31,689 [64] DEBUG dn_lib.tools.log - added file 4154: C:\root\todd\_test\dn\scheda tecdoc\gestione cross\200626.deselezionato mi aspetto di vederlo in verde.fix.ok.molina.task\i2.png
2021-01-10 15:29:31,689 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1733 and file_name = 'sql.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1733, 'sql.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-29 09:34:18', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-29 09:34:18', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-29 09:34:18', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:31,694 [64] DEBUG dn_lib.tools.log - added file 4155: C:\root\todd\_test\dn\scheda tecdoc\gestione cross\200626.deselezionato mi aspetto di vederlo in verde.fix.ok.molina.task\sql.sql
2021-01-10 15:29:31,695 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4155;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4155, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-29 09:34:18', 120));
2021-01-10 15:29:31,698 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\scheda tecdoc\gestione cross\200626.deselezionato mi aspetto di vederlo in verde.fix.ok.molina.task\sql.sql'
2021-01-10 15:29:31,699 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1733 and file_name = 'Thumbs.db';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1733, 'Thumbs.db', '.db', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-29 08:37:26', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-29 08:37:26', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-29 08:37:26', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:31,705 [64] DEBUG dn_lib.tools.log - added file 4156: C:\root\todd\_test\dn\scheda tecdoc\gestione cross\200626.deselezionato mi aspetto di vederlo in verde.fix.ok.molina.task\Thumbs.db
2021-01-10 15:29:31,706 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1331) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:31,715 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1732 
        and folder_name = '200626.schede incrociate in verde non appaiono.molina.check.ok.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1732, '200626.schede incrociate in verde non appaiono.molina.check.ok.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-26 17:24:28', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-26 17:24:28', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-26 17:24:28', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:31,719 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\scheda tecdoc\gestione cross\200626.schede incrociate in verde non appaiono.molina.check.ok.task
2021-01-10 15:29:31,758 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1734 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1734, null, left('schede incrociate in verde non appaiono', 150)
            , NULL, convert(datetime, '2020-06-26 00:00:00', 120), convert(datetime, '2020-06-26 17:24:28', 120), 1
            , 'fatto', NULL, 'controllo', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-06-26 00:00:00', 120), dt_upd = convert(datetime, '2020-06-26 17:24:28', 120)
         , title = left('schede incrociate in verde non appaiono', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'controllo', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-06-26 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-26 17:24:28', 120), getdate())
          or isnull(title, '') <> isnull('schede incrociate in verde non appaiono', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('controllo', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:31,765 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\scheda tecdoc\gestione cross\schede incrociate in verde non appaiono
2021-01-10 15:29:31,766 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1734 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1734, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-26 11:46:27', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-26 11:46:27', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-26 11:46:27', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:31,771 [64] DEBUG dn_lib.tools.log - added file 4157: C:\root\todd\_test\dn\scheda tecdoc\gestione cross\200626.schede incrociate in verde non appaiono.molina.check.ok.task\i.txt
2021-01-10 15:29:31,772 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4157;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4157, '.txt', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-26 11:46:27', 120));
2021-01-10 15:29:31,775 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1332;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1332, 4157, @content
          , convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-26 11:46:27', 120));
2021-01-10 15:29:31,778 [64] DEBUG dn_lib.tools.log - lette note task 1332
2021-01-10 15:29:31,779 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\scheda tecdoc\gestione cross\200626.schede incrociate in verde non appaiono.molina.check.ok.task\i.txt'
2021-01-10 15:29:31,779 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1734 and file_name = 'sql.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1734, 'sql.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-26 11:45:21', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-26 11:45:21', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-26 11:45:21', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:31,785 [64] DEBUG dn_lib.tools.log - added file 4158: C:\root\todd\_test\dn\scheda tecdoc\gestione cross\200626.schede incrociate in verde non appaiono.molina.check.ok.task\sql.sql
2021-01-10 15:29:31,786 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4158;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4158, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-26 11:45:21', 120));
2021-01-10 15:29:31,789 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\scheda tecdoc\gestione cross\200626.schede incrociate in verde non appaiono.molina.check.ok.task\sql.sql'
2021-01-10 15:29:31,790 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1332) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:31,797 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1732 
        and folder_name = '200630.revisione colori rosso - verde.fix.h.ok.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1732, '200630.revisione colori rosso - verde.fix.h.ok.molina.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-30 11:19:52', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-30 11:19:52', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-30 11:19:52', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:31,802 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\scheda tecdoc\gestione cross\200630.revisione colori rosso - verde.fix.h.ok.molina.task
2021-01-10 15:29:31,844 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1735 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1735, null, left('revisione colori rosso - verde', 150)
            , NULL, convert(datetime, '2020-06-30 00:00:00', 120), convert(datetime, '2020-06-30 11:19:52', 120), 1
            , 'fatto', NULL, 'fix', 'ora');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-06-30 00:00:00', 120), dt_upd = convert(datetime, '2020-06-30 11:19:52', 120)
         , title = left('revisione colori rosso - verde', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = 'ora'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-06-30 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-30 11:19:52', 120), getdate())
          or isnull(title, '') <> isnull('revisione colori rosso - verde', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull('ora', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:31,850 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\scheda tecdoc\gestione cross\revisione colori rosso - verde
2021-01-10 15:29:31,851 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1333) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:31,859 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = 'sincronizzazioni';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, 'sincronizzazioni', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-09-24 14:29:40', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-09-24 14:29:40', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-09-24 14:29:40', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:31,861 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\sincronizzazioni
2021-01-10 15:29:31,862 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1736 
        and folder_name = '200727.timeout - dipa scripts crm e recalc ordini.check.ok.alta.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1736, '200727.timeout - dipa scripts crm e recalc ordini.check.ok.alta.molina.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-27 11:02:07', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-07-27 11:02:07', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-27 11:02:07', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:31,866 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\sincronizzazioni\200727.timeout - dipa scripts crm e recalc ordini.check.ok.alta.molina.task
2021-01-10 15:29:31,914 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1737 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1737, null, left('timeout - dipa scripts crm e recalc ordini', 150)
            , NULL, convert(datetime, '2020-07-27 00:00:00', 120), convert(datetime, '2020-07-27 11:02:07', 120), 1
            , 'fatto', 'alta', 'controllo', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-07-27 00:00:00', 120), dt_upd = convert(datetime, '2020-07-27 11:02:07', 120)
         , title = left('timeout - dipa scripts crm e recalc ordini', 150), [user] = NULL
         , stato = 'fatto', priorita = 'alta'
         , tipo = 'controllo', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-07-27 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-07-27 11:02:07', 120), getdate())
          or isnull(title, '') <> isnull('timeout - dipa scripts crm e recalc ordini', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull('alta', '') 
          or isnull(tipo, '') <> isnull('controllo', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:31,921 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\sincronizzazioni\timeout - dipa scripts crm e recalc ordini
2021-01-10 15:29:31,922 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1737 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1737, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-29 08:59:58', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-07-29 08:59:58', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-29 08:59:58', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:31,926 [64] DEBUG dn_lib.tools.log - added file 4159: C:\root\todd\_test\dn\sincronizzazioni\200727.timeout - dipa scripts crm e recalc ordini.check.ok.alta.molina.task\i.txt
2021-01-10 15:29:31,927 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4159;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4159, '.txt', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-29 08:59:58', 120));
2021-01-10 15:29:31,929 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1334;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1334, 4159, @content
          , convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-29 08:59:58', 120));
2021-01-10 15:29:31,931 [64] DEBUG dn_lib.tools.log - lette note task 1334
2021-01-10 15:29:31,932 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\sincronizzazioni\200727.timeout - dipa scripts crm e recalc ordini.check.ok.alta.molina.task\i.txt'
2021-01-10 15:29:31,932 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1737 and file_name = 'sql.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1737, 'sql.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-27 11:02:07', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-07-27 11:02:07', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-27 11:02:07', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:31,937 [64] DEBUG dn_lib.tools.log - added file 4160: C:\root\todd\_test\dn\sincronizzazioni\200727.timeout - dipa scripts crm e recalc ordini.check.ok.alta.molina.task\sql.sql
2021-01-10 15:29:31,938 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4160;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4160, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-27 11:02:07', 120));
2021-01-10 15:29:31,940 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\sincronizzazioni\200727.timeout - dipa scripts crm e recalc ordini.check.ok.alta.molina.task\sql.sql'
2021-01-10 15:29:31,941 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1334) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:31,949 [64] DEBUG dn_lib.tools.log - updated task: C:\root\todd\_test\dn\sincronizzazioni\timeout - dipa scripts crm e recalc ordini
2021-01-10 15:29:31,950 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1736 
        and folder_name = '200729.per qualche motivo son state sparate sul sito tutte le quantit.ok.fix.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1736, '200729.per qualche motivo son state sparate sul sito tutte le quantit.ok.fix.molina.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-29 11:02:34', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-07-29 11:02:34', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-29 11:02:34', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:31,954 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\sincronizzazioni\200729.per qualche motivo son state sparate sul sito tutte le quantit.ok.fix.molina.task
2021-01-10 15:29:31,985 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1738 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1738, null, left('per qualche motivo son state sparate sul sito tutte le quantit', 150)
            , NULL, convert(datetime, '2020-07-29 00:00:00', 120), convert(datetime, '2020-07-29 11:02:34', 120), 1
            , 'fatto', NULL, 'fix', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-07-29 00:00:00', 120), dt_upd = convert(datetime, '2020-07-29 11:02:34', 120)
         , title = left('per qualche motivo son state sparate sul sito tutte le quantit', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-07-29 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-07-29 11:02:34', 120), getdate())
          or isnull(title, '') <> isnull('per qualche motivo son state sparate sul sito tutte le quantit', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:31,991 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\sincronizzazioni\per qualche motivo son state sparate sul sito tutte le quantit
2021-01-10 15:29:31,992 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1738 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1738, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-29 11:03:51', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-07-29 11:03:51', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-29 11:03:51', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:31,997 [64] DEBUG dn_lib.tools.log - added file 4161: C:\root\todd\_test\dn\sincronizzazioni\200729.per qualche motivo son state sparate sul sito tutte le quantit.ok.fix.molina.task\i.txt
2021-01-10 15:29:31,998 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4161;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4161, '.txt', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-29 11:03:51', 120));
2021-01-10 15:29:32,000 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1335;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1335, 4161, @content
          , convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-29 11:03:51', 120));
2021-01-10 15:29:32,002 [64] DEBUG dn_lib.tools.log - lette note task 1335
2021-01-10 15:29:32,003 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\sincronizzazioni\200729.per qualche motivo son state sparate sul sito tutte le quantit.ok.fix.molina.task\i.txt'
2021-01-10 15:29:32,005 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1738 and file_name = 'sql.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1738, 'sql.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-29 10:56:56', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-07-29 10:56:56', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-29 10:56:56', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:32,010 [64] DEBUG dn_lib.tools.log - added file 4162: C:\root\todd\_test\dn\sincronizzazioni\200729.per qualche motivo son state sparate sul sito tutte le quantit.ok.fix.molina.task\sql.sql
2021-01-10 15:29:32,011 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4162;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4162, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-29 10:56:56', 120));
2021-01-10 15:29:32,014 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\sincronizzazioni\200729.per qualche motivo son state sparate sul sito tutte le quantit.ok.fix.molina.task\sql.sql'
2021-01-10 15:29:32,015 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1335) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:32,022 [64] DEBUG dn_lib.tools.log - updated task: C:\root\todd\_test\dn\sincronizzazioni\per qualche motivo son state sparate sul sito tutte le quantit
2021-01-10 15:29:32,024 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1736 
        and folder_name = '200826.ogni tanto il magazzino si pianta o importa male ordini.molina.dafare.easy.2h.alta.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1736, '200826.ogni tanto il magazzino si pianta o importa male ordini.molina.dafare.easy.2h.alta.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-26 17:00:03', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-08-26 17:00:03', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-26 17:00:03', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:32,029 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\sincronizzazioni\200826.ogni tanto il magazzino si pianta o importa male ordini.molina.dafare.easy.2h.alta.task
2021-01-10 15:29:32,079 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1739 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1739, null, left('ogni tanto il magazzino si pianta o importa male ordini', 150)
            , NULL, convert(datetime, '2020-08-26 00:00:00', 120), convert(datetime, '2020-08-26 17:00:03', 120), 1
            , 'da_fare', 'alta', 'facile', 'due_ore');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-08-26 00:00:00', 120), dt_upd = convert(datetime, '2020-08-26 17:00:03', 120)
         , title = left('ogni tanto il magazzino si pianta o importa male ordini', 150), [user] = NULL
         , stato = 'da_fare', priorita = 'alta'
         , tipo = 'facile', stima = 'due_ore'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-08-26 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-08-26 17:00:03', 120), getdate())
          or isnull(title, '') <> isnull('ogni tanto il magazzino si pianta o importa male ordini', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('da_fare', '') or isnull(priorita, '') <> isnull('alta', '') 
          or isnull(tipo, '') <> isnull('facile', '') or isnull(stima, '') <> isnull('due_ore', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:32,084 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\sincronizzazioni\ogni tanto il magazzino si pianta o importa male ordini
2021-01-10 15:29:32,085 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1739 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1739, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-26 17:00:03', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-08-26 17:00:03', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-26 17:00:03', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:32,089 [64] DEBUG dn_lib.tools.log - added file 4163: C:\root\todd\_test\dn\sincronizzazioni\200826.ogni tanto il magazzino si pianta o importa male ordini.molina.dafare.easy.2h.alta.task\i.txt
2021-01-10 15:29:32,090 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4163;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4163, '.txt', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-26 17:00:03', 120));
2021-01-10 15:29:32,092 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1336;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1336, 4163, @content
          , convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-26 17:00:03', 120));
2021-01-10 15:29:32,094 [64] DEBUG dn_lib.tools.log - lette note task 1336
2021-01-10 15:29:32,095 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\sincronizzazioni\200826.ogni tanto il magazzino si pianta o importa male ordini.molina.dafare.easy.2h.alta.task\i.txt'
2021-01-10 15:29:32,095 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1336) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:32,102 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1736 
        and folder_name = '200831.inserisco nel sito i codici nascosti dei N, R, AN.molina.ok.upd.h.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1736, '200831.inserisco nel sito i codici nascosti dei N, R, AN.molina.ok.upd.h.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-31 12:33:02', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-08-31 12:33:02', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-31 12:33:02', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:32,107 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\sincronizzazioni\200831.inserisco nel sito i codici nascosti dei N, R, AN.molina.ok.upd.h.task
2021-01-10 15:29:32,147 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1740 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1740, null, left('inserisco nel sito i codici nascosti dei N, R, AN', 150)
            , NULL, convert(datetime, '2020-08-31 00:00:00', 120), convert(datetime, '2020-08-31 12:33:02', 120), 1
            , 'fatto', NULL, 'modifica', 'ora');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-08-31 00:00:00', 120), dt_upd = convert(datetime, '2020-08-31 12:33:02', 120)
         , title = left('inserisco nel sito i codici nascosti dei N, R, AN', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'modifica', stima = 'ora'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-08-31 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-08-31 12:33:02', 120), getdate())
          or isnull(title, '') <> isnull('inserisco nel sito i codici nascosti dei N, R, AN', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('modifica', '') or isnull(stima, '') <> isnull('ora', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:32,153 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\sincronizzazioni\inserisco nel sito i codici nascosti dei N, R, AN
2021-01-10 15:29:32,154 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1740 and file_name = 'cross codici sito.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1740, 'cross codici sito.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-31 12:29:24', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-08-31 12:29:24', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-31 12:29:24', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:32,159 [64] DEBUG dn_lib.tools.log - added file 4164: C:\root\todd\_test\dn\sincronizzazioni\200831.inserisco nel sito i codici nascosti dei N, R, AN.molina.ok.upd.h.task\cross codici sito.sql
2021-01-10 15:29:32,161 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4164;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4164, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-31 12:29:24', 120));
2021-01-10 15:29:32,164 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\sincronizzazioni\200831.inserisco nel sito i codici nascosti dei N, R, AN.molina.ok.upd.h.task\cross codici sito.sql'
2021-01-10 15:29:32,165 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1740 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1740, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-31 12:32:09', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-08-31 12:32:09', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-31 12:32:09', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:32,170 [64] DEBUG dn_lib.tools.log - added file 4165: C:\root\todd\_test\dn\sincronizzazioni\200831.inserisco nel sito i codici nascosti dei N, R, AN.molina.ok.upd.h.task\i.txt
2021-01-10 15:29:32,171 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4165;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4165, '.txt', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-31 12:32:09', 120));
2021-01-10 15:29:32,175 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1337;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1337, 4165, @content
          , convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-31 12:32:09', 120));
2021-01-10 15:29:32,178 [64] DEBUG dn_lib.tools.log - lette note task 1337
2021-01-10 15:29:32,179 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\sincronizzazioni\200831.inserisco nel sito i codici nascosti dei N, R, AN.molina.ok.upd.h.task\i.txt'
2021-01-10 15:29:32,180 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1337) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:32,188 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1736 
        and folder_name = '200901.carica codici nascosti lenta.molina.ok.fix.2h.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1736, '200901.carica codici nascosti lenta.molina.ok.fix.2h.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-09-01 10:12:50', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-09-01 10:12:50', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-09-01 10:12:50', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:32,193 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\sincronizzazioni\200901.carica codici nascosti lenta.molina.ok.fix.2h.task
2021-01-10 15:29:32,234 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1741 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1741, null, left('carica codici nascosti lenta', 150)
            , NULL, convert(datetime, '2020-09-01 00:00:00', 120), convert(datetime, '2020-09-01 10:12:50', 120), 1
            , 'fatto', NULL, 'fix', 'due_ore');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-09-01 00:00:00', 120), dt_upd = convert(datetime, '2020-09-01 10:12:50', 120)
         , title = left('carica codici nascosti lenta', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = 'due_ore'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-09-01 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-09-01 10:12:50', 120), getdate())
          or isnull(title, '') <> isnull('carica codici nascosti lenta', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull('due_ore', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:32,240 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\sincronizzazioni\carica codici nascosti lenta
2021-01-10 15:29:32,241 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1741 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1741, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-09-01 10:12:50', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-09-01 10:12:50', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-09-01 10:12:50', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:32,245 [64] DEBUG dn_lib.tools.log - added file 4166: C:\root\todd\_test\dn\sincronizzazioni\200901.carica codici nascosti lenta.molina.ok.fix.2h.task\i.txt
2021-01-10 15:29:32,246 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4166;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4166, '.txt', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-09-01 10:12:50', 120));
2021-01-10 15:29:32,248 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1338;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1338, 4166, @content
          , convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-09-01 10:12:50', 120));
2021-01-10 15:29:32,250 [64] DEBUG dn_lib.tools.log - lette note task 1338
2021-01-10 15:29:32,251 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\sincronizzazioni\200901.carica codici nascosti lenta.molina.ok.fix.2h.task\i.txt'
2021-01-10 15:29:32,252 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1338) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:32,258 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1736 
        and folder_name = 'alyante';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1736, 'alyante', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-09-17 18:08:11', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-09-17 18:08:11', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-09-17 18:08:11', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:32,262 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\sincronizzazioni\alyante
2021-01-10 15:29:32,263 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1742 and file_name = 'alyante - descrizioni articoli.fatto.fix.molina.task.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1742, 'alyante - descrizioni articoli.fatto.fix.molina.task.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-05 17:21:13', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-05 17:21:13', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-05 17:21:13', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:32,268 [64] DEBUG dn_lib.tools.log - added file 4167: C:\root\todd\_test\dn\sincronizzazioni\alyante\alyante - descrizioni articoli.fatto.fix.molina.task.sql
2021-01-10 15:29:32,269 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4167;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4167, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-05 17:21:13', 120));
2021-01-10 15:29:32,272 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\sincronizzazioni\alyante\alyante - descrizioni articoli.fatto.fix.molina.task.sql'
2021-01-10 15:29:32,305 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4167;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, null, 4167, left('alyante - descrizioni articoli', 150)
            , NULL, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-05 17:21:13', 120), 1
            , 'fatto', NULL, 'fix', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-05 17:21:13', 120)
         , title = left('alyante - descrizioni articoli', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-05 17:21:13', 120), getdate())
          or isnull(title, '') <> isnull('alyante - descrizioni articoli', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:32,311 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\sincronizzazioni\alyante\alyante - descrizioni articoli
2021-01-10 15:29:32,313 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1742 and file_name = 'nota riep. bloccata.fatto.fix.molina.task.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1742, 'nota riep. bloccata.fatto.fix.molina.task.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-03 14:00:40', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-03 14:00:40', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-03 14:00:40', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:32,321 [64] DEBUG dn_lib.tools.log - added file 4168: C:\root\todd\_test\dn\sincronizzazioni\alyante\nota riep. bloccata.fatto.fix.molina.task.sql
2021-01-10 15:29:32,322 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4168;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4168, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-03 14:00:40', 120));
2021-01-10 15:29:32,325 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\sincronizzazioni\alyante\nota riep. bloccata.fatto.fix.molina.task.sql'
2021-01-10 15:29:32,367 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4168;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, null, 4168, left('nota riep', 150)
            , NULL, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-03 14:00:40', 120), 1
            , 'fatto', NULL, 'fix', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-03 14:00:40', 120)
         , title = left('nota riep', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-03 14:00:40', 120), getdate())
          or isnull(title, '') <> isnull('nota riep', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:32,373 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\sincronizzazioni\alyante\nota riep
2021-01-10 15:29:32,375 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1736 
        and folder_name = 'buffer nasconde le options.ok.alta.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1736, 'buffer nasconde le options.ok.alta.molina.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-28 16:04:58', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-07-28 16:04:58', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-28 16:04:58', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:32,378 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\sincronizzazioni\buffer nasconde le options.ok.alta.molina.task
2021-01-10 15:29:32,409 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1743 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1743, null, left('buffer nasconde le options', 150)
            , NULL, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-28 16:04:58', 120), 1
            , 'fatto', 'alta', NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-07-28 16:04:58', 120)
         , title = left('buffer nasconde le options', 150), [user] = NULL
         , stato = 'fatto', priorita = 'alta'
         , tipo = NULL, stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-07-28 16:04:58', 120), getdate())
          or isnull(title, '') <> isnull('buffer nasconde le options', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull('alta', '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:32,415 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\sincronizzazioni\buffer nasconde le options
2021-01-10 15:29:32,416 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1743 and file_name = 'connector-2020-07-10.log';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1743, 'connector-2020-07-10.log', '.log', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-10 11:27:47', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-07-10 11:27:47', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-10 11:27:47', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:32,421 [64] DEBUG dn_lib.tools.log - added file 4169: C:\root\todd\_test\dn\sincronizzazioni\buffer nasconde le options.ok.alta.molina.task\connector-2020-07-10.log
2021-01-10 15:29:32,422 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1743 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1743, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-10 09:00:16', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-08-10 09:00:16', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-10 09:00:16', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:32,426 [64] DEBUG dn_lib.tools.log - added file 4170: C:\root\todd\_test\dn\sincronizzazioni\buffer nasconde le options.ok.alta.molina.task\i.txt
2021-01-10 15:29:32,427 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4170;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4170, '.txt', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-10 09:00:16', 120));
2021-01-10 15:29:32,430 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1341;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1341, 4170, @content
          , convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-10 09:00:16', 120));
2021-01-10 15:29:32,432 [64] DEBUG dn_lib.tools.log - lette note task 1341
2021-01-10 15:29:32,433 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\sincronizzazioni\buffer nasconde le options.ok.alta.molina.task\i.txt'
2021-01-10 15:29:32,434 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1743 and file_name = 'magento-buffer-options.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1743, 'magento-buffer-options.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-10 14:10:24', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-07-10 14:10:24', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-10 14:10:24', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:32,438 [64] DEBUG dn_lib.tools.log - added file 4171: C:\root\todd\_test\dn\sincronizzazioni\buffer nasconde le options.ok.alta.molina.task\magento-buffer-options.txt
2021-01-10 15:29:32,439 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4171;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4171, '.txt', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-10 14:10:24', 120));
2021-01-10 15:29:32,442 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\sincronizzazioni\buffer nasconde le options.ok.alta.molina.task\magento-buffer-options.txt'
2021-01-10 15:29:32,443 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1341) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:32,451 [64] DEBUG dn_lib.tools.log - updated task: C:\root\todd\_test\dn\sincronizzazioni\buffer nasconde le options
2021-01-10 15:29:32,452 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1736 
        and folder_name = 'collegamento q';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1736, 'collegamento q', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-21 11:25:30', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-08-21 11:25:30', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-21 11:25:30', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:32,458 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\sincronizzazioni\collegamento q
2021-01-10 15:29:32,459 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1744 
        and folder_name = '200622.aggiornamento tracciato invio dati gestionale.molina.ok.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1744, '200622.aggiornamento tracciato invio dati gestionale.molina.ok.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-22 09:53:59', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-22 09:53:59', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-22 09:53:59', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:32,464 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\sincronizzazioni\collegamento q\200622.aggiornamento tracciato invio dati gestionale.molina.ok.task
2021-01-10 15:29:32,491 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1745 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1745, null, left('aggiornamento tracciato invio dati gestionale', 150)
            , NULL, convert(datetime, '2020-06-22 00:00:00', 120), convert(datetime, '2020-06-22 09:53:59', 120), 1
            , 'fatto', NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-06-22 00:00:00', 120), dt_upd = convert(datetime, '2020-06-22 09:53:59', 120)
         , title = left('aggiornamento tracciato invio dati gestionale', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = NULL, stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-06-22 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-22 09:53:59', 120), getdate())
          or isnull(title, '') <> isnull('aggiornamento tracciato invio dati gestionale', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:32,497 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\sincronizzazioni\collegamento q\aggiornamento tracciato invio dati gestionale
2021-01-10 15:29:32,498 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1745 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1745, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-22 09:54:12', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-22 09:54:12', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-22 09:54:12', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:32,503 [64] DEBUG dn_lib.tools.log - added file 4172: C:\root\todd\_test\dn\sincronizzazioni\collegamento q\200622.aggiornamento tracciato invio dati gestionale.molina.ok.task\i.txt
2021-01-10 15:29:32,504 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4172;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4172, '.txt', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-22 09:54:12', 120));
2021-01-10 15:29:32,506 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1342;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1342, 4172, @content
          , convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-22 09:54:12', 120));
2021-01-10 15:29:32,508 [64] DEBUG dn_lib.tools.log - lette note task 1342
2021-01-10 15:29:32,508 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\sincronizzazioni\collegamento q\200622.aggiornamento tracciato invio dati gestionale.molina.ok.task\i.txt'
2021-01-10 15:29:32,509 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1342) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:32,518 [64] DEBUG dn_lib.tools.log - updated task: C:\root\todd\_test\dn\sincronizzazioni\collegamento q\aggiornamento tracciato invio dati gestionale
2021-01-10 15:29:32,518 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1744 and file_name = '200617.marchio nel q.fatta.molina.task.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1744, '200617.marchio nel q.fatta.molina.task.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-17 17:12:20', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-17 17:12:20', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-17 17:12:20', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:32,523 [64] DEBUG dn_lib.tools.log - added file 4173: C:\root\todd\_test\dn\sincronizzazioni\collegamento q\200617.marchio nel q.fatta.molina.task.sql
2021-01-10 15:29:32,524 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4173;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4173, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-17 17:12:20', 120));
2021-01-10 15:29:32,528 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\sincronizzazioni\collegamento q\200617.marchio nel q.fatta.molina.task.sql'
2021-01-10 15:29:32,553 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4173;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, null, 4173, left('marchio nel q', 150)
            , NULL, convert(datetime, '2020-06-17 00:00:00', 120), convert(datetime, '2020-06-17 17:12:20', 120), 1
            , 'fatto', NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-06-17 00:00:00', 120), dt_upd = convert(datetime, '2020-06-17 17:12:20', 120)
         , title = left('marchio nel q', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = NULL, stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-06-17 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-17 17:12:20', 120), getdate())
          or isnull(title, '') <> isnull('marchio nel q', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:32,559 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\sincronizzazioni\collegamento q\marchio nel q
2021-01-10 15:29:32,562 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1744 and file_name = 'invia dati a gestionale - via id_hash.ok.fix.molina.task.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1744, 'invia dati a gestionale - via id_hash.ok.fix.molina.task.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-23 09:17:09', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-23 09:17:09', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-23 09:17:09', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:32,567 [64] DEBUG dn_lib.tools.log - added file 4174: C:\root\todd\_test\dn\sincronizzazioni\collegamento q\invia dati a gestionale - via id_hash.ok.fix.molina.task.sql
2021-01-10 15:29:32,568 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4174;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4174, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-23 09:17:09', 120));
2021-01-10 15:29:32,571 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\sincronizzazioni\collegamento q\invia dati a gestionale - via id_hash.ok.fix.molina.task.sql'
2021-01-10 15:29:32,607 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4174;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, null, 4174, left('invia dati a gestionale - via id_hash', 150)
            , NULL, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-23 09:17:09', 120), 1
            , 'fatto', NULL, 'fix', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-23 09:17:09', 120)
         , title = left('invia dati a gestionale - via id_hash', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-23 09:17:09', 120), getdate())
          or isnull(title, '') <> isnull('invia dati a gestionale - via id_hash', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:32,613 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\sincronizzazioni\collegamento q\invia dati a gestionale - via id_hash
2021-01-10 15:29:32,614 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1736 
        and folder_name = 'prodotti';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1736, 'prodotti', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-12-03 11:09:43', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-12-03 11:09:43', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-12-03 11:09:43', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:32,619 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\sincronizzazioni\prodotti
2021-01-10 15:29:32,620 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1746 
        and folder_name = '200626.categoria in importazione articoli CA nel gestionale.fix.ok.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1746, '200626.categoria in importazione articoli CA nel gestionale.fix.ok.molina.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-26 16:47:01', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-26 16:47:01', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-26 16:47:01', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:32,624 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\sincronizzazioni\prodotti\200626.categoria in importazione articoli CA nel gestionale.fix.ok.molina.task
2021-01-10 15:29:32,657 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1747 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1747, null, left('categoria in importazione articoli CA nel gestionale', 150)
            , NULL, convert(datetime, '2020-06-26 00:00:00', 120), convert(datetime, '2020-06-26 16:47:01', 120), 1
            , 'fatto', NULL, 'fix', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-06-26 00:00:00', 120), dt_upd = convert(datetime, '2020-06-26 16:47:01', 120)
         , title = left('categoria in importazione articoli CA nel gestionale', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-06-26 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-26 16:47:01', 120), getdate())
          or isnull(title, '') <> isnull('categoria in importazione articoli CA nel gestionale', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:32,663 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\sincronizzazioni\prodotti\categoria in importazione articoli CA nel gestionale
2021-01-10 15:29:32,664 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1747 and file_name = 'AL_EXPORT_ARTICOLI_DELTA.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1747, 'AL_EXPORT_ARTICOLI_DELTA.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-26 16:25:30', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-26 16:25:30', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-26 16:25:30', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:32,668 [64] DEBUG dn_lib.tools.log - added file 4175: C:\root\todd\_test\dn\sincronizzazioni\prodotti\200626.categoria in importazione articoli CA nel gestionale.fix.ok.molina.task\AL_EXPORT_ARTICOLI_DELTA.sql
2021-01-10 15:29:32,669 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4175;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4175, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-26 16:25:30', 120));
2021-01-10 15:29:32,672 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\sincronizzazioni\prodotti\200626.categoria in importazione articoli CA nel gestionale.fix.ok.molina.task\AL_EXPORT_ARTICOLI_DELTA.sql'
2021-01-10 15:29:32,673 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1747 and file_name = 'sql.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1747, 'sql.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-26 16:47:01', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-26 16:47:01', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-26 16:47:01', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:32,677 [64] DEBUG dn_lib.tools.log - added file 4176: C:\root\todd\_test\dn\sincronizzazioni\prodotti\200626.categoria in importazione articoli CA nel gestionale.fix.ok.molina.task\sql.sql
2021-01-10 15:29:32,678 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4176;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4176, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-26 16:47:01', 120));
2021-01-10 15:29:32,681 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\sincronizzazioni\prodotti\200626.categoria in importazione articoli CA nel gestionale.fix.ok.molina.task\sql.sql'
2021-01-10 15:29:32,683 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1345) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:32,691 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1746 
        and folder_name = '200629.aggiornamento meta xml prodotti.easy.h.ok.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1746, '200629.aggiornamento meta xml prodotti.easy.h.ok.molina.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-29 11:22:16', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-29 11:22:16', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-29 11:22:16', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:32,695 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\sincronizzazioni\prodotti\200629.aggiornamento meta xml prodotti.easy.h.ok.molina.task
2021-01-10 15:29:32,739 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1748 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1748, null, left('aggiornamento meta xml prodotti', 150)
            , NULL, convert(datetime, '2020-06-29 00:00:00', 120), convert(datetime, '2020-06-29 11:22:16', 120), 1
            , 'fatto', NULL, 'facile', 'ora');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-06-29 00:00:00', 120), dt_upd = convert(datetime, '2020-06-29 11:22:16', 120)
         , title = left('aggiornamento meta xml prodotti', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'facile', stima = 'ora'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-06-29 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-29 11:22:16', 120), getdate())
          or isnull(title, '') <> isnull('aggiornamento meta xml prodotti', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('facile', '') or isnull(stima, '') <> isnull('ora', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:32,745 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\sincronizzazioni\prodotti\aggiornamento meta xml prodotti
2021-01-10 15:29:32,746 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1748 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1748, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-29 11:22:28', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-29 11:22:28', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-29 11:22:28', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:32,751 [64] DEBUG dn_lib.tools.log - added file 4177: C:\root\todd\_test\dn\sincronizzazioni\prodotti\200629.aggiornamento meta xml prodotti.easy.h.ok.molina.task\i.txt
2021-01-10 15:29:32,752 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4177;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4177, '.txt', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-29 11:22:28', 120));
2021-01-10 15:29:32,754 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1346;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1346, 4177, @content
          , convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-29 11:22:28', 120));
2021-01-10 15:29:32,757 [64] DEBUG dn_lib.tools.log - lette note task 1346
2021-01-10 15:29:32,758 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\sincronizzazioni\prodotti\200629.aggiornamento meta xml prodotti.easy.h.ok.molina.task\i.txt'
2021-01-10 15:29:32,759 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1346) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:32,767 [64] DEBUG dn_lib.tools.log - updated task: C:\root\todd\_test\dn\sincronizzazioni\prodotti\aggiornamento meta xml prodotti
2021-01-10 15:29:32,768 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1746 
        and folder_name = '200720. capitato di avere il product_id della LISTINIPRODOTTI disallineato.fix.molina.2h.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1746, '200720. capitato di avere il product_id della LISTINIPRODOTTI disallineato.fix.molina.2h.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-20 13:40:53', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-07-20 13:40:53', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-20 13:40:53', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:32,774 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\sincronizzazioni\prodotti\200720. capitato di avere il product_id della LISTINIPRODOTTI disallineato.fix.molina.2h.task
2021-01-10 15:29:32,808 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1749 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1749, null, left(' capitato di avere il product_id della LISTINIPRODOTTI disallineato', 150)
            , NULL, convert(datetime, '2020-07-20 00:00:00', 120), convert(datetime, '2020-07-20 13:40:53', 120), 1
            , NULL, NULL, 'fix', 'due_ore');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-07-20 00:00:00', 120), dt_upd = convert(datetime, '2020-07-20 13:40:53', 120)
         , title = left(' capitato di avere il product_id della LISTINIPRODOTTI disallineato', 150), [user] = NULL
         , stato = NULL, priorita = NULL
         , tipo = 'fix', stima = 'due_ore'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-07-20 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-07-20 13:40:53', 120), getdate())
          or isnull(title, '') <> isnull(' capitato di avere il product_id della LISTINIPRODOTTI disallineato', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull(NULL, '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull('due_ore', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:32,814 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\sincronizzazioni\prodotti\ capitato di avere il product_id della LISTINIPRODOTTI disallineato
2021-01-10 15:29:32,815 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1347) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:32,822 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1746 
        and folder_name = '200811.rinomina codice dip anche sulle ricerche targa.ok.molina.fix.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1746, '200811.rinomina codice dip anche sulle ricerche targa.ok.molina.fix.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-11 18:19:58', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-08-11 18:19:58', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-11 18:19:58', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:32,826 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\sincronizzazioni\prodotti\200811.rinomina codice dip anche sulle ricerche targa.ok.molina.fix.task
2021-01-10 15:29:32,856 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1750 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1750, null, left('rinomina codice dip anche sulle ricerche targa', 150)
            , NULL, convert(datetime, '2020-08-11 00:00:00', 120), convert(datetime, '2020-08-11 18:19:58', 120), 1
            , 'fatto', NULL, 'fix', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-08-11 00:00:00', 120), dt_upd = convert(datetime, '2020-08-11 18:19:58', 120)
         , title = left('rinomina codice dip anche sulle ricerche targa', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-08-11 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-08-11 18:19:58', 120), getdate())
          or isnull(title, '') <> isnull('rinomina codice dip anche sulle ricerche targa', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:32,862 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\sincronizzazioni\prodotti\rinomina codice dip anche sulle ricerche targa
2021-01-10 15:29:32,865 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1750 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1750, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-11 18:19:58', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-08-11 18:19:58', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-11 18:19:58', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:32,869 [64] DEBUG dn_lib.tools.log - added file 4178: C:\root\todd\_test\dn\sincronizzazioni\prodotti\200811.rinomina codice dip anche sulle ricerche targa.ok.molina.fix.task\i.txt
2021-01-10 15:29:32,870 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4178;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4178, '.txt', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-11 18:19:58', 120));
2021-01-10 15:29:32,872 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1348;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1348, 4178, @content
          , convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-11 18:19:58', 120));
2021-01-10 15:29:32,874 [64] DEBUG dn_lib.tools.log - lette note task 1348
2021-01-10 15:29:32,875 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\sincronizzazioni\prodotti\200811.rinomina codice dip anche sulle ricerche targa.ok.molina.fix.task\i.txt'
2021-01-10 15:29:32,876 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1348) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:32,883 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1746 
        and folder_name = '200914.codici nascosti senza brand.molina.ok.rev.h.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1746, '200914.codici nascosti senza brand.molina.ok.rev.h.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-09-14 17:33:34', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-09-14 17:33:34', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-09-14 17:33:34', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:32,888 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\sincronizzazioni\prodotti\200914.codici nascosti senza brand.molina.ok.rev.h.task
2021-01-10 15:29:32,934 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1751 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1751, null, left('codici nascosti senza brand', 150)
            , NULL, convert(datetime, '2020-09-14 00:00:00', 120), convert(datetime, '2020-09-14 17:33:34', 120), 1
            , 'fatto', NULL, 'revisione', 'ora');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-09-14 00:00:00', 120), dt_upd = convert(datetime, '2020-09-14 17:33:34', 120)
         , title = left('codici nascosti senza brand', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'revisione', stima = 'ora'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-09-14 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-09-14 17:33:34', 120), getdate())
          or isnull(title, '') <> isnull('codici nascosti senza brand', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('revisione', '') or isnull(stima, '') <> isnull('ora', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:32,940 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\sincronizzazioni\prodotti\codici nascosti senza brand
2021-01-10 15:29:32,941 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1751 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1751, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-09-14 17:33:34', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-09-14 17:33:34', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-09-14 17:33:34', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:32,945 [64] DEBUG dn_lib.tools.log - added file 4179: C:\root\todd\_test\dn\sincronizzazioni\prodotti\200914.codici nascosti senza brand.molina.ok.rev.h.task\i.txt
2021-01-10 15:29:32,946 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4179;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4179, '.txt', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-09-14 17:33:34', 120));
2021-01-10 15:29:32,948 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1349;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1349, 4179, @content
          , convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-09-14 17:33:34', 120));
2021-01-10 15:29:32,949 [64] DEBUG dn_lib.tools.log - lette note task 1349
2021-01-10 15:29:32,950 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\sincronizzazioni\prodotti\200914.codici nascosti senza brand.molina.ok.rev.h.task\i.txt'
2021-01-10 15:29:32,951 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1349) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:32,957 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1746 
        and folder_name = '200918.nuova gestione scarico prodotti immagini.molina.ok.rev.mg.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1746, '200918.nuova gestione scarico prodotti immagini.molina.ok.rev.mg.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-09-18 11:05:19', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-09-18 11:05:19', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-09-18 11:05:19', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:32,962 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\sincronizzazioni\prodotti\200918.nuova gestione scarico prodotti immagini.molina.ok.rev.mg.task
2021-01-10 15:29:33,005 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1752 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1752, null, left('nuova gestione scarico prodotti immagini', 150)
            , NULL, convert(datetime, '2020-09-18 00:00:00', 120), convert(datetime, '2020-09-18 11:05:19', 120), 1
            , 'fatto', NULL, 'revisione', 'mezza');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-09-18 00:00:00', 120), dt_upd = convert(datetime, '2020-09-18 11:05:19', 120)
         , title = left('nuova gestione scarico prodotti immagini', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'revisione', stima = 'mezza'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-09-18 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-09-18 11:05:19', 120), getdate())
          or isnull(title, '') <> isnull('nuova gestione scarico prodotti immagini', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('revisione', '') or isnull(stima, '') <> isnull('mezza', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:33,011 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\sincronizzazioni\prodotti\nuova gestione scarico prodotti immagini
2021-01-10 15:29:33,012 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1350) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:33,019 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1746 
        and folder_name = '200923.ottimizzazione scarico immagini.molina.ok.rev.mg.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1746, '200923.ottimizzazione scarico immagini.molina.ok.rev.mg.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-09-23 12:40:51', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-09-23 12:40:51', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-09-23 12:40:51', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:33,023 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\sincronizzazioni\prodotti\200923.ottimizzazione scarico immagini.molina.ok.rev.mg.task
2021-01-10 15:29:33,067 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1753 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1753, null, left('ottimizzazione scarico immagini', 150)
            , NULL, convert(datetime, '2020-09-23 00:00:00', 120), convert(datetime, '2020-09-23 12:40:51', 120), 1
            , 'fatto', NULL, 'revisione', 'mezza');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-09-23 00:00:00', 120), dt_upd = convert(datetime, '2020-09-23 12:40:51', 120)
         , title = left('ottimizzazione scarico immagini', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'revisione', stima = 'mezza'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-09-23 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-09-23 12:40:51', 120), getdate())
          or isnull(title, '') <> isnull('ottimizzazione scarico immagini', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('revisione', '') or isnull(stima, '') <> isnull('mezza', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:33,073 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\sincronizzazioni\prodotti\ottimizzazione scarico immagini
2021-01-10 15:29:33,074 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1753 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1753, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-09-23 12:40:51', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-09-23 12:40:51', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-09-23 12:40:51', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:33,078 [64] DEBUG dn_lib.tools.log - added file 4180: C:\root\todd\_test\dn\sincronizzazioni\prodotti\200923.ottimizzazione scarico immagini.molina.ok.rev.mg.task\i.txt
2021-01-10 15:29:33,079 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4180;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4180, '.txt', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-09-23 12:40:51', 120));
2021-01-10 15:29:33,082 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1351;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1351, 4180, @content
          , convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-09-23 12:40:51', 120));
2021-01-10 15:29:33,084 [64] DEBUG dn_lib.tools.log - lette note task 1351
2021-01-10 15:29:33,085 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\sincronizzazioni\prodotti\200923.ottimizzazione scarico immagini.molina.ok.rev.mg.task\i.txt'
2021-01-10 15:29:33,085 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1351) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:33,093 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1746 and file_name = 'abs189n.fatto.fix.molina.task.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1746, 'abs189n.fatto.fix.molina.task.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-12 09:50:26', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-12 09:50:26', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-12 09:50:26', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:33,097 [64] DEBUG dn_lib.tools.log - added file 4181: C:\root\todd\_test\dn\sincronizzazioni\prodotti\abs189n.fatto.fix.molina.task.sql
2021-01-10 15:29:33,098 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4181;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4181, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-12 09:50:26', 120));
2021-01-10 15:29:33,101 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\sincronizzazioni\prodotti\abs189n.fatto.fix.molina.task.sql'
2021-01-10 15:29:33,135 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4181;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, null, 4181, left('abs189n', 150)
            , NULL, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-12 09:50:26', 120), 1
            , 'fatto', NULL, 'fix', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-12 09:50:26', 120)
         , title = left('abs189n', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-12 09:50:26', 120), getdate())
          or isnull(title, '') <> isnull('abs189n', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:33,141 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\sincronizzazioni\prodotti\abs189n
2021-01-10 15:29:33,142 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1746 and file_name = 'ABS452.fatto.fix.molina.task.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1746, 'ABS452.fatto.fix.molina.task.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-04 15:30:31', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-04 15:30:31', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-04 15:30:31', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:33,146 [64] DEBUG dn_lib.tools.log - added file 4182: C:\root\todd\_test\dn\sincronizzazioni\prodotti\ABS452.fatto.fix.molina.task.sql
2021-01-10 15:29:33,147 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4182;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4182, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-04 15:30:31', 120));
2021-01-10 15:29:33,149 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\sincronizzazioni\prodotti\ABS452.fatto.fix.molina.task.sql'
2021-01-10 15:29:33,182 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4182;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, null, 4182, left('ABS452', 150)
            , NULL, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-04 15:30:31', 120), 1
            , 'fatto', NULL, 'fix', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-04 15:30:31', 120)
         , title = left('ABS452', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-04 15:30:31', 120), getdate())
          or isnull(title, '') <> isnull('ABS452', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:33,190 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\sincronizzazioni\prodotti\ABS452
2021-01-10 15:29:33,191 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1746 and file_name = 'ARC163ELSR.fatto.fix.molina.task.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1746, 'ARC163ELSR.fatto.fix.molina.task.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-03 10:43:10', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-03 10:43:10', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-03 10:43:10', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:33,196 [64] DEBUG dn_lib.tools.log - added file 4183: C:\root\todd\_test\dn\sincronizzazioni\prodotti\ARC163ELSR.fatto.fix.molina.task.sql
2021-01-10 15:29:33,197 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4183;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4183, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-03 10:43:10', 120));
2021-01-10 15:29:33,199 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\sincronizzazioni\prodotti\ARC163ELSR.fatto.fix.molina.task.sql'
2021-01-10 15:29:33,233 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4183;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, null, 4183, left('ARC163ELSR', 150)
            , NULL, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-03 10:43:10', 120), 1
            , 'fatto', NULL, 'fix', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-03 10:43:10', 120)
         , title = left('ARC163ELSR', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-03 10:43:10', 120), getdate())
          or isnull(title, '') <> isnull('ARC163ELSR', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:33,239 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\sincronizzazioni\prodotti\ARC163ELSR
2021-01-10 15:29:33,240 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1746 and file_name = 'ARC164DLPN.fatto.fix.molina.task.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1746, 'ARC164DLPN.fatto.fix.molina.task.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-04 15:21:28', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-04 15:21:28', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-04 15:21:28', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:33,244 [64] DEBUG dn_lib.tools.log - added file 4184: C:\root\todd\_test\dn\sincronizzazioni\prodotti\ARC164DLPN.fatto.fix.molina.task.sql
2021-01-10 15:29:33,245 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4184;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4184, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-04 15:21:28', 120));
2021-01-10 15:29:33,247 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\sincronizzazioni\prodotti\ARC164DLPN.fatto.fix.molina.task.sql'
2021-01-10 15:29:33,277 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4184;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, null, 4184, left('ARC164DLPN', 150)
            , NULL, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-04 15:21:28', 120), 1
            , 'fatto', NULL, 'fix', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-04 15:21:28', 120)
         , title = left('ARC164DLPN', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-04 15:21:28', 120), getdate())
          or isnull(title, '') <> isnull('ARC164DLPN', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:33,283 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\sincronizzazioni\prodotti\ARC164DLPN
2021-01-10 15:29:33,284 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1746 and file_name = 'body035r - lav vs.fatta.fix.molina.task.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1746, 'body035r - lav vs.fatta.fix.molina.task.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-12 14:43:01', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-12 14:43:01', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-12 14:43:01', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:33,289 [64] DEBUG dn_lib.tools.log - added file 4185: C:\root\todd\_test\dn\sincronizzazioni\prodotti\body035r - lav vs.fatta.fix.molina.task.sql
2021-01-10 15:29:33,290 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4185;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4185, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-12 14:43:01', 120));
2021-01-10 15:29:33,292 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\sincronizzazioni\prodotti\body035r - lav vs.fatta.fix.molina.task.sql'
2021-01-10 15:29:33,322 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4185;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, null, 4185, left('body035r - lav vs', 150)
            , NULL, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-12 14:43:01', 120), 1
            , 'fatto', NULL, 'fix', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-12 14:43:01', 120)
         , title = left('body035r - lav vs', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-12 14:43:01', 120), getdate())
          or isnull(title, '') <> isnull('body035r - lav vs', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:33,328 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\sincronizzazioni\prodotti\body035r - lav vs
2021-01-10 15:29:33,329 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1746 and file_name = 'injb55run.fatto.fix.molina.task.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1746, 'injb55run.fatto.fix.molina.task.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-03 09:05:38', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-03 09:05:38', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-03 09:05:38', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:33,334 [64] DEBUG dn_lib.tools.log - added file 4186: C:\root\todd\_test\dn\sincronizzazioni\prodotti\injb55run.fatto.fix.molina.task.sql
2021-01-10 15:29:33,335 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4186;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4186, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-03 09:05:38', 120));
2021-01-10 15:29:33,338 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\sincronizzazioni\prodotti\injb55run.fatto.fix.molina.task.sql'
2021-01-10 15:29:33,375 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4186;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, null, 4186, left('injb55run', 150)
            , NULL, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-03 09:05:38', 120), 1
            , 'fatto', NULL, 'fix', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-03 09:05:38', 120)
         , title = left('injb55run', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-03 09:05:38', 120), getdate())
          or isnull(title, '') <> isnull('injb55run', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:33,381 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\sincronizzazioni\prodotti\injb55run
2021-01-10 15:29:33,382 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1746 and file_name = 'nuova categoria EMU.fatta.molina.task.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1746, 'nuova categoria EMU.fatta.molina.task.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-19 10:49:16', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-19 10:49:16', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-19 10:49:16', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:33,386 [64] DEBUG dn_lib.tools.log - added file 4187: C:\root\todd\_test\dn\sincronizzazioni\prodotti\nuova categoria EMU.fatta.molina.task.sql
2021-01-10 15:29:33,387 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4187;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4187, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-19 10:49:16', 120));
2021-01-10 15:29:33,390 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\sincronizzazioni\prodotti\nuova categoria EMU.fatta.molina.task.sql'
2021-01-10 15:29:33,416 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4187;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, null, 4187, left('nuova categoria EMU', 150)
            , NULL, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-19 10:49:16', 120), 1
            , 'fatto', NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-19 10:49:16', 120)
         , title = left('nuova categoria EMU', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = NULL, stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-19 10:49:16', 120), getdate())
          or isnull(title, '') <> isnull('nuova categoria EMU', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:33,422 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\sincronizzazioni\prodotti\nuova categoria EMU
2021-01-10 15:29:33,423 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1736 
        and folder_name = 'scheduler';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1736, 'scheduler', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-11-23 11:41:57', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-11-23 11:41:57', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-11-23 11:41:57', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:33,427 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\sincronizzazioni\scheduler
2021-01-10 15:29:33,428 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1754 
        and folder_name = '201123.invio mail cambio listini.molina.ok.new.2h.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1754, '201123.invio mail cambio listini.molina.ok.new.2h.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-11-23 11:42:13', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-11-23 11:42:13', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-11-23 11:42:13', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:33,431 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\sincronizzazioni\scheduler\201123.invio mail cambio listini.molina.ok.new.2h.task
2021-01-10 15:29:33,471 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1755 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1755, null, left('invio mail cambio listini', 150)
            , NULL, convert(datetime, '2020-11-23 00:00:00', 120), convert(datetime, '2020-11-23 11:42:13', 120), 1
            , 'fatto', NULL, 'aggiunta', 'due_ore');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-11-23 00:00:00', 120), dt_upd = convert(datetime, '2020-11-23 11:42:13', 120)
         , title = left('invio mail cambio listini', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'aggiunta', stima = 'due_ore'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-11-23 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-11-23 11:42:13', 120), getdate())
          or isnull(title, '') <> isnull('invio mail cambio listini', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('aggiunta', '') or isnull(stima, '') <> isnull('due_ore', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:33,478 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\sincronizzazioni\scheduler\invio mail cambio listini
2021-01-10 15:29:33,479 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1755 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1755, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-11-23 11:43:45', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-11-23 11:43:45', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-11-23 11:43:45', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:33,485 [64] DEBUG dn_lib.tools.log - added file 4188: C:\root\todd\_test\dn\sincronizzazioni\scheduler\201123.invio mail cambio listini.molina.ok.new.2h.task\i.txt
2021-01-10 15:29:33,486 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4188;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4188, '.txt', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-11-23 11:43:45', 120));
2021-01-10 15:29:33,489 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1359;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1359, 4188, @content
          , convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-11-23 11:43:45', 120));
2021-01-10 15:29:33,491 [64] DEBUG dn_lib.tools.log - lette note task 1359
2021-01-10 15:29:33,492 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\sincronizzazioni\scheduler\201123.invio mail cambio listini.molina.ok.new.2h.task\i.txt'
2021-01-10 15:29:33,493 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1359) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:33,501 [64] DEBUG dn_lib.tools.log - updated task: C:\root\todd\_test\dn\sincronizzazioni\scheduler\invio mail cambio listini
2021-01-10 15:29:33,502 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1754 and file_name = 'ottimizzare e gestire meglio errori scheduler .fix.ok.molina.task.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1754, 'ottimizzare e gestire meglio errori scheduler .fix.ok.molina.task.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-11-11 11:03:52', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-11-11 11:03:52', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-11-11 11:03:52', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:33,508 [64] DEBUG dn_lib.tools.log - added file 4189: C:\root\todd\_test\dn\sincronizzazioni\scheduler\ottimizzare e gestire meglio errori scheduler .fix.ok.molina.task.sql
2021-01-10 15:29:33,509 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4189;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4189, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-11-11 11:03:52', 120));
2021-01-10 15:29:33,512 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\sincronizzazioni\scheduler\ottimizzare e gestire meglio errori scheduler .fix.ok.molina.task.sql'
2021-01-10 15:29:33,545 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4189;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, null, 4189, left('ottimizzare e gestire meglio errori scheduler ', 150)
            , NULL, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-11-11 11:03:52', 120), 1
            , 'fatto', NULL, 'fix', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-11-11 11:03:52', 120)
         , title = left('ottimizzare e gestire meglio errori scheduler ', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-11-11 11:03:52', 120), getdate())
          or isnull(title, '') <> isnull('ottimizzare e gestire meglio errori scheduler ', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:33,550 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\sincronizzazioni\scheduler\ottimizzare e gestire meglio errori scheduler 
2021-01-10 15:29:33,551 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1360;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1360, 4189, @content
          , convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-11-11 11:03:52', 120));
2021-01-10 15:29:33,553 [64] DEBUG dn_lib.tools.log - lette note task 1360
2021-01-10 15:29:33,554 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1736 
        and folder_name = 'sito web';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1736, 'sito web', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-10-30 08:47:27', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-10-30 08:47:27', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-30 08:47:27', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:33,557 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\sincronizzazioni\sito web
2021-01-10 15:29:33,558 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1756 
        and folder_name = '200727.disponibilit sul sito non allineata.fix.ok.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1756, '200727.disponibilit sul sito non allineata.fix.ok.molina.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-27 18:04:11', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-07-27 18:04:11', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-27 18:04:11', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:33,562 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\sincronizzazioni\sito web\200727.disponibilit sul sito non allineata.fix.ok.molina.task
2021-01-10 15:29:33,594 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1757 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1757, null, left('disponibilit sul sito non allineata', 150)
            , NULL, convert(datetime, '2020-07-27 00:00:00', 120), convert(datetime, '2020-07-27 18:04:11', 120), 1
            , 'fatto', NULL, 'fix', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-07-27 00:00:00', 120), dt_upd = convert(datetime, '2020-07-27 18:04:11', 120)
         , title = left('disponibilit sul sito non allineata', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-07-27 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-07-27 18:04:11', 120), getdate())
          or isnull(title, '') <> isnull('disponibilit sul sito non allineata', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:33,600 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\sincronizzazioni\sito web\disponibilit sul sito non allineata
2021-01-10 15:29:33,601 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1757 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1757, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-28 09:04:01', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-07-28 09:04:01', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-28 09:04:01', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:33,605 [64] DEBUG dn_lib.tools.log - added file 4190: C:\root\todd\_test\dn\sincronizzazioni\sito web\200727.disponibilit sul sito non allineata.fix.ok.molina.task\i.txt
2021-01-10 15:29:33,606 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4190;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4190, '.txt', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-28 09:04:01', 120));
2021-01-10 15:29:33,609 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1361;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1361, 4190, @content
          , convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-28 09:04:01', 120));
2021-01-10 15:29:33,612 [64] DEBUG dn_lib.tools.log - lette note task 1361
2021-01-10 15:29:33,613 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\sincronizzazioni\sito web\200727.disponibilit sul sito non allineata.fix.ok.molina.task\i.txt'
2021-01-10 15:29:33,613 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1757 and file_name = 'sql.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1757, 'sql.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-27 18:04:10', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-07-27 18:04:10', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-27 18:04:10', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:33,619 [64] DEBUG dn_lib.tools.log - added file 4191: C:\root\todd\_test\dn\sincronizzazioni\sito web\200727.disponibilit sul sito non allineata.fix.ok.molina.task\sql.sql
2021-01-10 15:29:33,620 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4191;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4191, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-27 18:04:10', 120));
2021-01-10 15:29:33,623 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\sincronizzazioni\sito web\200727.disponibilit sul sito non allineata.fix.ok.molina.task\sql.sql'
2021-01-10 15:29:33,624 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1361) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:33,632 [64] DEBUG dn_lib.tools.log - updated task: C:\root\todd\_test\dn\sincronizzazioni\sito web\disponibilit sul sito non allineata
2021-01-10 15:29:33,633 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1756 
        and folder_name = '200811.ogni tanto il buffer si inchioda.ok.urgente.fix.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1756, '200811.ogni tanto il buffer si inchioda.ok.urgente.fix.molina.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-11 17:36:02', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-08-11 17:36:02', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-11 17:36:02', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:33,638 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\sincronizzazioni\sito web\200811.ogni tanto il buffer si inchioda.ok.urgente.fix.molina.task
2021-01-10 15:29:33,680 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1758 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1758, null, left('ogni tanto il buffer si inchioda', 150)
            , NULL, convert(datetime, '2020-08-11 00:00:00', 120), convert(datetime, '2020-08-11 17:36:02', 120), 1
            , 'fatto', 'altissima', 'fix', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-08-11 00:00:00', 120), dt_upd = convert(datetime, '2020-08-11 17:36:02', 120)
         , title = left('ogni tanto il buffer si inchioda', 150), [user] = NULL
         , stato = 'fatto', priorita = 'altissima'
         , tipo = 'fix', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-08-11 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-08-11 17:36:02', 120), getdate())
          or isnull(title, '') <> isnull('ogni tanto il buffer si inchioda', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull('altissima', '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:33,686 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\sincronizzazioni\sito web\ogni tanto il buffer si inchioda
2021-01-10 15:29:33,687 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1758 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1758, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-17 08:40:40', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-08-17 08:40:40', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-17 08:40:40', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:33,691 [64] DEBUG dn_lib.tools.log - added file 4192: C:\root\todd\_test\dn\sincronizzazioni\sito web\200811.ogni tanto il buffer si inchioda.ok.urgente.fix.molina.task\i.txt
2021-01-10 15:29:33,694 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4192;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4192, '.txt', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-17 08:40:40', 120));
2021-01-10 15:29:33,696 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1362;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1362, 4192, @content
          , convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-17 08:40:40', 120));
2021-01-10 15:29:33,698 [64] DEBUG dn_lib.tools.log - lette note task 1362
2021-01-10 15:29:33,699 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\sincronizzazioni\sito web\200811.ogni tanto il buffer si inchioda.ok.urgente.fix.molina.task\i.txt'
2021-01-10 15:29:33,700 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1362) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:33,708 [64] DEBUG dn_lib.tools.log - updated task: C:\root\todd\_test\dn\sincronizzazioni\sito web\ogni tanto il buffer si inchioda
2021-01-10 15:29:33,709 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1756 
        and folder_name = '201013.non si aggiornano correttamente prezzo e metas.molina.ok.fix.2h.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1756, '201013.non si aggiornano correttamente prezzo e metas.molina.ok.fix.2h.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-10-13 16:04:08', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-10-13 16:04:08', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-13 16:04:08', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:33,713 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\sincronizzazioni\sito web\201013.non si aggiornano correttamente prezzo e metas.molina.ok.fix.2h.task
2021-01-10 15:29:33,754 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1759 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1759, null, left('non si aggiornano correttamente prezzo e metas', 150)
            , NULL, convert(datetime, '2020-10-13 00:00:00', 120), convert(datetime, '2020-10-13 16:04:08', 120), 1
            , 'fatto', NULL, 'fix', 'due_ore');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-10-13 00:00:00', 120), dt_upd = convert(datetime, '2020-10-13 16:04:08', 120)
         , title = left('non si aggiornano correttamente prezzo e metas', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = 'due_ore'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-10-13 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-10-13 16:04:08', 120), getdate())
          or isnull(title, '') <> isnull('non si aggiornano correttamente prezzo e metas', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull('due_ore', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:33,759 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\sincronizzazioni\sito web\non si aggiornano correttamente prezzo e metas
2021-01-10 15:29:33,761 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1759 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1759, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-10-13 16:04:08', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-10-13 16:04:08', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-13 16:04:08', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:33,765 [64] DEBUG dn_lib.tools.log - added file 4193: C:\root\todd\_test\dn\sincronizzazioni\sito web\201013.non si aggiornano correttamente prezzo e metas.molina.ok.fix.2h.task\i.txt
2021-01-10 15:29:33,766 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4193;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4193, '.txt', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-10-13 16:04:08', 120));
2021-01-10 15:29:33,769 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1363;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1363, 4193, @content
          , convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-10-13 16:04:08', 120));
2021-01-10 15:29:33,771 [64] DEBUG dn_lib.tools.log - lette note task 1363
2021-01-10 15:29:33,772 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\sincronizzazioni\sito web\201013.non si aggiornano correttamente prezzo e metas.molina.ok.fix.2h.task\i.txt'
2021-01-10 15:29:33,773 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1363) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:33,781 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1756 
        and folder_name = '201022.aggiornamento macchine.molina.ok.rev.2h.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1756, '201022.aggiornamento macchine.molina.ok.rev.2h.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-10-22 12:24:07', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-10-22 12:24:07', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-22 12:24:07', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:33,787 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\sincronizzazioni\sito web\201022.aggiornamento macchine.molina.ok.rev.2h.task
2021-01-10 15:29:33,833 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1760 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1760, null, left('aggiornamento macchine', 150)
            , NULL, convert(datetime, '2020-10-22 00:00:00', 120), convert(datetime, '2020-10-22 12:24:07', 120), 1
            , 'fatto', NULL, 'revisione', 'due_ore');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-10-22 00:00:00', 120), dt_upd = convert(datetime, '2020-10-22 12:24:07', 120)
         , title = left('aggiornamento macchine', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'revisione', stima = 'due_ore'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-10-22 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-10-22 12:24:07', 120), getdate())
          or isnull(title, '') <> isnull('aggiornamento macchine', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('revisione', '') or isnull(stima, '') <> isnull('due_ore', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:33,839 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\sincronizzazioni\sito web\aggiornamento macchine
2021-01-10 15:29:33,840 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1760 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1760, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-10-22 12:24:07', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-10-22 12:24:07', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-22 12:24:07', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:33,844 [64] DEBUG dn_lib.tools.log - added file 4194: C:\root\todd\_test\dn\sincronizzazioni\sito web\201022.aggiornamento macchine.molina.ok.rev.2h.task\i.txt
2021-01-10 15:29:33,845 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4194;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4194, '.txt', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-10-22 12:24:07', 120));
2021-01-10 15:29:33,847 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1364;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1364, 4194, @content
          , convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-10-22 12:24:07', 120));
2021-01-10 15:29:33,850 [64] DEBUG dn_lib.tools.log - lette note task 1364
2021-01-10 15:29:33,850 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\sincronizzazioni\sito web\201022.aggiornamento macchine.molina.ok.rev.2h.task\i.txt'
2021-01-10 15:29:33,851 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1364) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:33,859 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1756 
        and folder_name = '201029.aggiornamento intelligente meta_description.molina.ok.new.mg.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1756, '201029.aggiornamento intelligente meta_description.molina.ok.new.mg.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-10-29 17:01:23', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-10-29 17:01:23', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-29 17:01:23', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:33,863 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\sincronizzazioni\sito web\201029.aggiornamento intelligente meta_description.molina.ok.new.mg.task
2021-01-10 15:29:33,903 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1761 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1761, null, left('aggiornamento intelligente meta_description', 150)
            , NULL, convert(datetime, '2020-10-29 00:00:00', 120), convert(datetime, '2020-10-29 17:01:23', 120), 1
            , 'fatto', NULL, 'aggiunta', 'mezza');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-10-29 00:00:00', 120), dt_upd = convert(datetime, '2020-10-29 17:01:23', 120)
         , title = left('aggiornamento intelligente meta_description', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'aggiunta', stima = 'mezza'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-10-29 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-10-29 17:01:23', 120), getdate())
          or isnull(title, '') <> isnull('aggiornamento intelligente meta_description', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('aggiunta', '') or isnull(stima, '') <> isnull('mezza', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:33,908 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\sincronizzazioni\sito web\aggiornamento intelligente meta_description
2021-01-10 15:29:33,909 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1761 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1761, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-10-29 17:01:23', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-10-29 17:01:23', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-29 17:01:23', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:33,914 [64] DEBUG dn_lib.tools.log - added file 4195: C:\root\todd\_test\dn\sincronizzazioni\sito web\201029.aggiornamento intelligente meta_description.molina.ok.new.mg.task\i.txt
2021-01-10 15:29:33,915 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4195;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4195, '.txt', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-10-29 17:01:23', 120));
2021-01-10 15:29:33,917 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1365;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1365, 4195, @content
          , convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-10-29 17:01:23', 120));
2021-01-10 15:29:33,919 [64] DEBUG dn_lib.tools.log - lette note task 1365
2021-01-10 15:29:33,920 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\sincronizzazioni\sito web\201029.aggiornamento intelligente meta_description.molina.ok.new.mg.task\i.txt'
2021-01-10 15:29:33,921 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1365) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:33,929 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1756 
        and folder_name = 'esecuzione proc_day bloccata.check.ok.alta.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1756, 'esecuzione proc_day bloccata.check.ok.alta.molina.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-28 09:18:53', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-07-28 09:18:53', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-28 09:18:53', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:33,934 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\sincronizzazioni\sito web\esecuzione proc_day bloccata.check.ok.alta.molina.task
2021-01-10 15:29:33,976 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1762 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1762, null, left('esecuzione proc_day bloccata', 150)
            , NULL, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-28 09:18:53', 120), 1
            , 'fatto', 'alta', 'controllo', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-07-28 09:18:53', 120)
         , title = left('esecuzione proc_day bloccata', 150), [user] = NULL
         , stato = 'fatto', priorita = 'alta'
         , tipo = 'controllo', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-07-28 09:18:53', 120), getdate())
          or isnull(title, '') <> isnull('esecuzione proc_day bloccata', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull('alta', '') 
          or isnull(tipo, '') <> isnull('controllo', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:33,981 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\sincronizzazioni\sito web\esecuzione proc_day bloccata
2021-01-10 15:29:33,982 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1762 and file_name = 'esecuzione proc_day bloccata.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1762, 'esecuzione proc_day bloccata.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-28 09:18:45', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-07-28 09:18:45', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-28 09:18:45', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:33,987 [64] DEBUG dn_lib.tools.log - added file 4196: C:\root\todd\_test\dn\sincronizzazioni\sito web\esecuzione proc_day bloccata.check.ok.alta.molina.task\esecuzione proc_day bloccata.txt
2021-01-10 15:29:33,988 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4196;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4196, '.txt', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-28 09:18:45', 120));
2021-01-10 15:29:33,990 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\sincronizzazioni\sito web\esecuzione proc_day bloccata.check.ok.alta.molina.task\esecuzione proc_day bloccata.txt'
2021-01-10 15:29:33,991 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1762 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1762, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-28 09:21:49', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-07-28 09:21:49', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-28 09:21:49', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:33,995 [64] DEBUG dn_lib.tools.log - added file 4197: C:\root\todd\_test\dn\sincronizzazioni\sito web\esecuzione proc_day bloccata.check.ok.alta.molina.task\i.txt
2021-01-10 15:29:33,996 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4197;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4197, '.txt', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-28 09:21:49', 120));
2021-01-10 15:29:33,999 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1366;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1366, 4197, @content
          , convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-28 09:21:49', 120));
2021-01-10 15:29:34,001 [64] DEBUG dn_lib.tools.log - lette note task 1366
2021-01-10 15:29:34,002 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\sincronizzazioni\sito web\esecuzione proc_day bloccata.check.ok.alta.molina.task\i.txt'
2021-01-10 15:29:34,003 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1366) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:34,012 [64] DEBUG dn_lib.tools.log - updated task: C:\root\todd\_test\dn\sincronizzazioni\sito web\esecuzione proc_day bloccata
2021-01-10 15:29:34,013 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1736 and file_name = 'ml fortuna listino.fatto.check.molina.task.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1736, 'ml fortuna listino.fatto.check.molina.task.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-19 11:02:03', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-19 11:02:03', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-19 11:02:03', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:34,017 [64] DEBUG dn_lib.tools.log - added file 4198: C:\root\todd\_test\dn\sincronizzazioni\ml fortuna listino.fatto.check.molina.task.sql
2021-01-10 15:29:34,018 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4198;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4198, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-19 11:02:03', 120));
2021-01-10 15:29:34,021 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\sincronizzazioni\ml fortuna listino.fatto.check.molina.task.sql'
2021-01-10 15:29:34,053 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4198;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, null, 4198, left('ml fortuna listino', 150)
            , NULL, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-19 11:02:03', 120), 1
            , 'fatto', NULL, 'controllo', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-19 11:02:03', 120)
         , title = left('ml fortuna listino', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'controllo', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-19 11:02:03', 120), getdate())
          or isnull(title, '') <> isnull('ml fortuna listino', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('controllo', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:34,059 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\sincronizzazioni\ml fortuna listino
2021-01-10 15:29:34,060 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = 'sistema';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, 'sistema', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-10-09 17:31:56', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-10-09 17:31:56', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-09 17:31:56', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:34,063 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\sistema
2021-01-10 15:29:34,064 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1763 
        and folder_name = '200731.nuova tabella LOG_SCHEDULER.ok.rev.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1763, '200731.nuova tabella LOG_SCHEDULER.ok.rev.molina.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-31 12:35:02', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-07-31 12:35:02', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-31 12:35:02', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:34,067 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\sistema\200731.nuova tabella LOG_SCHEDULER.ok.rev.molina.task
2021-01-10 15:29:34,101 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1764 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1764, null, left('nuova tabella LOG_SCHEDULER', 150)
            , NULL, convert(datetime, '2020-07-31 00:00:00', 120), convert(datetime, '2020-07-31 12:35:02', 120), 1
            , 'fatto', NULL, 'revisione', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-07-31 00:00:00', 120), dt_upd = convert(datetime, '2020-07-31 12:35:02', 120)
         , title = left('nuova tabella LOG_SCHEDULER', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'revisione', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-07-31 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-07-31 12:35:02', 120), getdate())
          or isnull(title, '') <> isnull('nuova tabella LOG_SCHEDULER', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('revisione', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:34,107 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\sistema\nuova tabella LOG_SCHEDULER
2021-01-10 15:29:34,108 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1764 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1764, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-31 16:54:09', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-07-31 16:54:09', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-31 16:54:09', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:34,112 [64] DEBUG dn_lib.tools.log - added file 4199: C:\root\todd\_test\dn\sistema\200731.nuova tabella LOG_SCHEDULER.ok.rev.molina.task\i.txt
2021-01-10 15:29:34,113 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4199;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4199, '.txt', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-31 16:54:09', 120));
2021-01-10 15:29:34,116 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1368;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1368, 4199, @content
          , convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-31 16:54:09', 120));
2021-01-10 15:29:34,119 [64] DEBUG dn_lib.tools.log - lette note task 1368
2021-01-10 15:29:34,119 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\sistema\200731.nuova tabella LOG_SCHEDULER.ok.rev.molina.task\i.txt'
2021-01-10 15:29:34,120 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1764 and file_name = 'sql.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1764, 'sql.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-31 12:33:19', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-07-31 12:33:19', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-31 12:33:19', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:34,124 [64] DEBUG dn_lib.tools.log - added file 4200: C:\root\todd\_test\dn\sistema\200731.nuova tabella LOG_SCHEDULER.ok.rev.molina.task\sql.sql
2021-01-10 15:29:34,126 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4200;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4200, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-31 12:33:19', 120));
2021-01-10 15:29:34,128 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\sistema\200731.nuova tabella LOG_SCHEDULER.ok.rev.molina.task\sql.sql'
2021-01-10 15:29:34,129 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1368) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:34,137 [64] DEBUG dn_lib.tools.log - updated task: C:\root\todd\_test\dn\sistema\nuova tabella LOG_SCHEDULER
2021-01-10 15:29:34,138 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1763 
        and folder_name = '200819.via tutte le tabelle e procedure ZZ_.dafare.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1763, '200819.via tutte le tabelle e procedure ZZ_.dafare.molina.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-19 08:41:56', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-08-19 08:41:56', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-19 08:41:56', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:34,142 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\sistema\200819.via tutte le tabelle e procedure ZZ_.dafare.molina.task
2021-01-10 15:29:34,167 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1765 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1765, null, left('via tutte le tabelle e procedure ZZ_', 150)
            , NULL, convert(datetime, '2020-08-19 00:00:00', 120), convert(datetime, '2020-08-19 08:41:56', 120), 1
            , 'da_fare', NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-08-19 00:00:00', 120), dt_upd = convert(datetime, '2020-08-19 08:41:56', 120)
         , title = left('via tutte le tabelle e procedure ZZ_', 150), [user] = NULL
         , stato = 'da_fare', priorita = NULL
         , tipo = NULL, stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-08-19 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-08-19 08:41:56', 120), getdate())
          or isnull(title, '') <> isnull('via tutte le tabelle e procedure ZZ_', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('da_fare', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:34,173 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\sistema\via tutte le tabelle e procedure ZZ_
2021-01-10 15:29:34,174 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1369) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:34,181 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1763 
        and folder_name = '201009.login applicazioni.molina.ok.rev.2h.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1763, '201009.login applicazioni.molina.ok.rev.2h.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-10-09 17:32:22', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-10-09 17:32:22', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-09 17:32:22', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:34,185 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\sistema\201009.login applicazioni.molina.ok.rev.2h.task
2021-01-10 15:29:34,226 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1766 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1766, null, left('login applicazioni', 150)
            , NULL, convert(datetime, '2020-10-09 00:00:00', 120), convert(datetime, '2020-10-09 17:32:22', 120), 1
            , 'fatto', NULL, 'revisione', 'due_ore');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-10-09 00:00:00', 120), dt_upd = convert(datetime, '2020-10-09 17:32:22', 120)
         , title = left('login applicazioni', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'revisione', stima = 'due_ore'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-10-09 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-10-09 17:32:22', 120), getdate())
          or isnull(title, '') <> isnull('login applicazioni', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('revisione', '') or isnull(stima, '') <> isnull('due_ore', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:34,232 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\sistema\login applicazioni
2021-01-10 15:29:34,234 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1766 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1766, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-10-09 17:32:22', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-10-09 17:32:22', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-09 17:32:22', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:34,240 [64] DEBUG dn_lib.tools.log - added file 4201: C:\root\todd\_test\dn\sistema\201009.login applicazioni.molina.ok.rev.2h.task\i.txt
2021-01-10 15:29:34,241 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4201;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4201, '.txt', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-10-09 17:32:22', 120));
2021-01-10 15:29:34,244 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1370;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1370, 4201, @content
          , convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-10-09 17:32:22', 120));
2021-01-10 15:29:34,247 [64] DEBUG dn_lib.tools.log - lette note task 1370
2021-01-10 15:29:34,248 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\sistema\201009.login applicazioni.molina.ok.rev.2h.task\i.txt'
2021-01-10 15:29:34,249 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1370) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:34,257 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = 'sito web';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, 'sito web', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-12-14 11:20:52', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-12-14 11:20:52', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-12-14 11:20:52', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:34,260 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\sito web
2021-01-10 15:29:34,263 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1767 
        and folder_name = '200707.check utente ceabdue@libero.it utilizzo EP.check.ok.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1767, '200707.check utente ceabdue@libero.it utilizzo EP.check.ok.molina.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-07 08:48:27', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-07-07 08:48:27', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-07 08:48:27', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:34,268 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\sito web\200707.check utente ceabdue@libero.it utilizzo EP.check.ok.molina.task
2021-01-10 15:29:34,307 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1768 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1768, null, left('check utente ceabdue@libero', 150)
            , NULL, convert(datetime, '2020-07-07 00:00:00', 120), convert(datetime, '2020-07-07 08:48:27', 120), 1
            , 'fatto', NULL, 'controllo', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-07-07 00:00:00', 120), dt_upd = convert(datetime, '2020-07-07 08:48:27', 120)
         , title = left('check utente ceabdue@libero', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'controllo', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-07-07 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-07-07 08:48:27', 120), getdate())
          or isnull(title, '') <> isnull('check utente ceabdue@libero', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('controllo', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:34,313 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\sito web\check utente ceabdue@libero
2021-01-10 15:29:34,314 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1371) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:34,321 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1767 
        and folder_name = '200821.carrello lavorazioni SINTRA.ok.new.2g.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1767, '200821.carrello lavorazioni SINTRA.ok.new.2g.molina.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-21 12:19:53', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-08-21 12:19:53', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-21 12:19:53', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:34,325 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\sito web\200821.carrello lavorazioni SINTRA.ok.new.2g.molina.task
2021-01-10 15:29:34,364 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1769 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1769, null, left('carrello lavorazioni SINTRA', 150)
            , NULL, convert(datetime, '2020-08-21 00:00:00', 120), convert(datetime, '2020-08-21 12:19:53', 120), 1
            , 'fatto', NULL, 'aggiunta', 'due_giorni');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-08-21 00:00:00', 120), dt_upd = convert(datetime, '2020-08-21 12:19:53', 120)
         , title = left('carrello lavorazioni SINTRA', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'aggiunta', stima = 'due_giorni'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-08-21 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-08-21 12:19:53', 120), getdate())
          or isnull(title, '') <> isnull('carrello lavorazioni SINTRA', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('aggiunta', '') or isnull(stima, '') <> isnull('due_giorni', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:34,370 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\sito web\carrello lavorazioni SINTRA
2021-01-10 15:29:34,371 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1769 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1769, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-21 12:03:09', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-08-21 12:03:09', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-21 12:03:09', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:34,376 [64] DEBUG dn_lib.tools.log - added file 4202: C:\root\todd\_test\dn\sito web\200821.carrello lavorazioni SINTRA.ok.new.2g.molina.task\i.txt
2021-01-10 15:29:34,377 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4202;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4202, '.txt', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-21 12:03:09', 120));
2021-01-10 15:29:34,380 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1372;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1372, 4202, @content
          , convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-21 12:03:09', 120));
2021-01-10 15:29:34,383 [64] DEBUG dn_lib.tools.log - lette note task 1372
2021-01-10 15:29:34,384 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\sito web\200821.carrello lavorazioni SINTRA.ok.new.2g.molina.task\i.txt'
2021-01-10 15:29:34,385 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1769 and file_name = 'LAVS_IMPORT_SINTRA.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1769, 'LAVS_IMPORT_SINTRA.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-21 12:10:38', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-08-21 12:10:38', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-21 12:10:38', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:34,390 [64] DEBUG dn_lib.tools.log - added file 4203: C:\root\todd\_test\dn\sito web\200821.carrello lavorazioni SINTRA.ok.new.2g.molina.task\LAVS_IMPORT_SINTRA.sql
2021-01-10 15:29:34,391 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4203;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4203, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-21 12:10:38', 120));
2021-01-10 15:29:34,395 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\sito web\200821.carrello lavorazioni SINTRA.ok.new.2g.molina.task\LAVS_IMPORT_SINTRA.sql'
2021-01-10 15:29:34,396 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1769 and file_name = 'sql.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1769, 'sql.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-21 12:19:53', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-08-21 12:19:53', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-21 12:19:53', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:34,401 [64] DEBUG dn_lib.tools.log - added file 4204: C:\root\todd\_test\dn\sito web\200821.carrello lavorazioni SINTRA.ok.new.2g.molina.task\sql.sql
2021-01-10 15:29:34,403 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4204;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4204, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-21 12:19:53', 120));
2021-01-10 15:29:34,406 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\sito web\200821.carrello lavorazioni SINTRA.ok.new.2g.molina.task\sql.sql'
2021-01-10 15:29:34,407 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1372) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:34,415 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1767 
        and folder_name = '201214.fatturati e premi.molina.incorso.new.w.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1767, '201214.fatturati e premi.molina.incorso.new.w.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-12-14 11:22:50', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-12-14 11:22:50', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-12-14 11:22:50', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:34,420 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\sito web\201214.fatturati e premi.molina.incorso.new.w.task
2021-01-10 15:29:34,460 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1770 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1770, null, left('fatturati e premi', 150)
            , NULL, convert(datetime, '2020-12-14 00:00:00', 120), convert(datetime, '2020-12-14 11:22:50', 120), 1
            , 'in_corso', NULL, 'aggiunta', 'settimana');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-12-14 00:00:00', 120), dt_upd = convert(datetime, '2020-12-14 11:22:50', 120)
         , title = left('fatturati e premi', 150), [user] = NULL
         , stato = 'in_corso', priorita = NULL
         , tipo = 'aggiunta', stima = 'settimana'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-12-14 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-12-14 11:22:50', 120), getdate())
          or isnull(title, '') <> isnull('fatturati e premi', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('in_corso', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('aggiunta', '') or isnull(stima, '') <> isnull('settimana', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:34,466 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\sito web\fatturati e premi
2021-01-10 15:29:34,467 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1770 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1770, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-12-23 18:01:10', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-12-23 18:01:10', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-12-23 18:01:10', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:34,471 [64] DEBUG dn_lib.tools.log - added file 4205: C:\root\todd\_test\dn\sito web\201214.fatturati e premi.molina.incorso.new.w.task\i.txt
2021-01-10 15:29:34,472 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4205;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4205, '.txt', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-12-23 18:01:10', 120));
2021-01-10 15:29:34,475 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1373;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1373, 4205, @content
          , convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-12-23 18:01:10', 120));
2021-01-10 15:29:34,477 [64] DEBUG dn_lib.tools.log - lette note task 1373
2021-01-10 15:29:34,478 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\sito web\201214.fatturati e premi.molina.incorso.new.w.task\i.txt'
2021-01-10 15:29:34,478 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1373) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:34,485 [64] DEBUG dn_lib.tools.log - updated task: C:\root\todd\_test\dn\sito web\fatturati e premi
2021-01-10 15:29:34,486 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1767 
        and folder_name = 'documenti alyante on-line.dafare.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1767, 'documenti alyante on-line.dafare.molina.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-15 10:44:07', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-15 10:44:07', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-15 10:44:07', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:34,490 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\sito web\documenti alyante on-line.dafare.molina.task
2021-01-10 15:29:34,515 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1771 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1771, null, left('documenti alyante on-line', 150)
            , NULL, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-15 10:44:07', 120), 1
            , 'da_fare', NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-15 10:44:07', 120)
         , title = left('documenti alyante on-line', 150), [user] = NULL
         , stato = 'da_fare', priorita = NULL
         , tipo = NULL, stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-15 10:44:07', 120), getdate())
          or isnull(title, '') <> isnull('documenti alyante on-line', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('da_fare', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:34,521 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\sito web\documenti alyante on-line
2021-01-10 15:29:34,522 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1374) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:34,530 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1767 
        and folder_name = 'listino da scaricare per i clienti.molina.dafare.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1767, 'listino da scaricare per i clienti.molina.dafare.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-17 08:35:14', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-17 08:35:14', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-17 08:35:14', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:34,534 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\sito web\listino da scaricare per i clienti.molina.dafare.task
2021-01-10 15:29:34,560 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1772 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1772, null, left('listino da scaricare per i clienti', 150)
            , NULL, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-17 08:35:14', 120), 1
            , 'da_fare', NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-17 08:35:14', 120)
         , title = left('listino da scaricare per i clienti', 150), [user] = NULL
         , stato = 'da_fare', priorita = NULL
         , tipo = NULL, stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-17 08:35:14', 120), getdate())
          or isnull(title, '') <> isnull('listino da scaricare per i clienti', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('da_fare', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:34,566 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\sito web\listino da scaricare per i clienti
2021-01-10 15:29:34,567 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1375) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:34,575 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1767 
        and folder_name = 'pagine interne';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1767, 'pagine interne', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-11-03 12:00:37', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-11-03 12:00:37', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-11-03 12:00:37', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:34,579 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\sito web\pagine interne
2021-01-10 15:29:34,580 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1773 
        and folder_name = '200709.3a autoricambi snc appare due volte nella lista clienti.rev.2h.ok.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1773, '200709.3a autoricambi snc appare due volte nella lista clienti.rev.2h.ok.molina.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-09 16:42:30', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-07-09 16:42:30', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-09 16:42:30', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:34,585 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\sito web\pagine interne\200709.3a autoricambi snc appare due volte nella lista clienti.rev.2h.ok.molina.task
2021-01-10 15:29:34,623 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1774 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1774, null, left('3a autoricambi snc appare due volte nella lista clienti', 150)
            , NULL, convert(datetime, '2020-07-09 00:00:00', 120), convert(datetime, '2020-07-09 16:42:30', 120), 1
            , 'fatto', NULL, 'revisione', 'due_ore');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-07-09 00:00:00', 120), dt_upd = convert(datetime, '2020-07-09 16:42:30', 120)
         , title = left('3a autoricambi snc appare due volte nella lista clienti', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'revisione', stima = 'due_ore'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-07-09 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-07-09 16:42:30', 120), getdate())
          or isnull(title, '') <> isnull('3a autoricambi snc appare due volte nella lista clienti', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('revisione', '') or isnull(stima, '') <> isnull('due_ore', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:34,629 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\sito web\pagine interne\3a autoricambi snc appare due volte nella lista clienti
2021-01-10 15:29:34,630 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1376) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:34,638 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1773 
        and folder_name = '200911.controllo associazione clienti.molina.ok.fix.h.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1773, '200911.controllo associazione clienti.molina.ok.fix.h.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-09-11 17:44:24', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-09-11 17:44:24', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-09-11 17:44:24', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:34,642 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\sito web\pagine interne\200911.controllo associazione clienti.molina.ok.fix.h.task
2021-01-10 15:29:34,684 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1775 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1775, null, left('controllo associazione clienti', 150)
            , NULL, convert(datetime, '2020-09-11 00:00:00', 120), convert(datetime, '2020-09-11 17:44:24', 120), 1
            , 'fatto', NULL, 'fix', 'ora');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-09-11 00:00:00', 120), dt_upd = convert(datetime, '2020-09-11 17:44:24', 120)
         , title = left('controllo associazione clienti', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = 'ora'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-09-11 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-09-11 17:44:24', 120), getdate())
          or isnull(title, '') <> isnull('controllo associazione clienti', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull('ora', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:34,690 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\sito web\pagine interne\controllo associazione clienti
2021-01-10 15:29:34,691 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1775 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1775, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-09-11 17:45:42', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-09-11 17:45:42', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-09-11 17:45:42', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:34,696 [64] DEBUG dn_lib.tools.log - added file 4206: C:\root\todd\_test\dn\sito web\pagine interne\200911.controllo associazione clienti.molina.ok.fix.h.task\i.txt
2021-01-10 15:29:34,697 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4206;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4206, '.txt', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-09-11 17:45:42', 120));
2021-01-10 15:29:34,700 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1377;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1377, 4206, @content
          , convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-09-11 17:45:42', 120));
2021-01-10 15:29:34,702 [64] DEBUG dn_lib.tools.log - lette note task 1377
2021-01-10 15:29:34,703 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\sito web\pagine interne\200911.controllo associazione clienti.molina.ok.fix.h.task\i.txt'
2021-01-10 15:29:34,703 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1377) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:34,711 [64] DEBUG dn_lib.tools.log - updated task: C:\root\todd\_test\dn\sito web\pagine interne\controllo associazione clienti
2021-01-10 15:29:34,712 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1773 
        and folder_name = '201022.storico assegnazione agenti.molina.ok.new.2h.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1773, '201022.storico assegnazione agenti.molina.ok.new.2h.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-10-22 10:13:05', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-10-22 10:13:05', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-22 10:13:05', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:34,716 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\sito web\pagine interne\201022.storico assegnazione agenti.molina.ok.new.2h.task
2021-01-10 15:29:34,757 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1776 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1776, null, left('storico assegnazione agenti', 150)
            , NULL, convert(datetime, '2020-10-22 00:00:00', 120), convert(datetime, '2020-10-22 10:13:05', 120), 1
            , 'fatto', NULL, 'aggiunta', 'due_ore');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-10-22 00:00:00', 120), dt_upd = convert(datetime, '2020-10-22 10:13:05', 120)
         , title = left('storico assegnazione agenti', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'aggiunta', stima = 'due_ore'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-10-22 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-10-22 10:13:05', 120), getdate())
          or isnull(title, '') <> isnull('storico assegnazione agenti', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('aggiunta', '') or isnull(stima, '') <> isnull('due_ore', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:34,763 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\sito web\pagine interne\storico assegnazione agenti
2021-01-10 15:29:34,764 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1776 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1776, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-10-22 10:13:05', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-10-22 10:13:05', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-22 10:13:05', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:34,768 [64] DEBUG dn_lib.tools.log - added file 4207: C:\root\todd\_test\dn\sito web\pagine interne\201022.storico assegnazione agenti.molina.ok.new.2h.task\i.txt
2021-01-10 15:29:34,769 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4207;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4207, '.txt', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-10-22 10:13:05', 120));
2021-01-10 15:29:34,771 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1378;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1378, 4207, @content
          , convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-10-22 10:13:05', 120));
2021-01-10 15:29:34,774 [64] DEBUG dn_lib.tools.log - lette note task 1378
2021-01-10 15:29:34,774 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\sito web\pagine interne\201022.storico assegnazione agenti.molina.ok.new.2h.task\i.txt'
2021-01-10 15:29:34,775 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1378) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:34,782 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1773 
        and folder_name = '201030.assegnazione agente cliente.molina.ok.fix.2h.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1773, '201030.assegnazione agente cliente.molina.ok.fix.2h.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-10-30 14:35:45', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-10-30 14:35:45', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-30 14:35:45', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:34,785 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\sito web\pagine interne\201030.assegnazione agente cliente.molina.ok.fix.2h.task
2021-01-10 15:29:34,827 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1777 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1777, null, left('assegnazione agente cliente', 150)
            , NULL, convert(datetime, '2020-10-30 00:00:00', 120), convert(datetime, '2020-10-30 14:35:45', 120), 1
            , 'fatto', NULL, 'fix', 'due_ore');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-10-30 00:00:00', 120), dt_upd = convert(datetime, '2020-10-30 14:35:45', 120)
         , title = left('assegnazione agente cliente', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = 'due_ore'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-10-30 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-10-30 14:35:45', 120), getdate())
          or isnull(title, '') <> isnull('assegnazione agente cliente', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull('due_ore', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:34,833 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\sito web\pagine interne\assegnazione agente cliente
2021-01-10 15:29:34,834 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1777 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1777, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-10-30 14:35:45', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-10-30 14:35:45', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-30 14:35:45', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:34,841 [64] DEBUG dn_lib.tools.log - added file 4208: C:\root\todd\_test\dn\sito web\pagine interne\201030.assegnazione agente cliente.molina.ok.fix.2h.task\i.txt
2021-01-10 15:29:34,842 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4208;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4208, '.txt', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-10-30 14:35:45', 120));
2021-01-10 15:29:34,845 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1379;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1379, 4208, @content
          , convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-10-30 14:35:45', 120));
2021-01-10 15:29:34,847 [64] DEBUG dn_lib.tools.log - lette note task 1379
2021-01-10 15:29:34,848 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\sito web\pagine interne\201030.assegnazione agente cliente.molina.ok.fix.2h.task\i.txt'
2021-01-10 15:29:34,850 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1379) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:34,859 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1773 
        and folder_name = '201103.rinfrescata pagina prodotti.molina.ok.rev.2h.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1773, '201103.rinfrescata pagina prodotti.molina.ok.rev.2h.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-11-03 12:01:21', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-11-03 12:01:21', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-11-03 12:01:21', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:34,863 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\sito web\pagine interne\201103.rinfrescata pagina prodotti.molina.ok.rev.2h.task
2021-01-10 15:29:34,904 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1778 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1778, null, left('rinfrescata pagina prodotti', 150)
            , NULL, convert(datetime, '2020-11-03 00:00:00', 120), convert(datetime, '2020-11-03 12:01:21', 120), 1
            , 'fatto', NULL, 'revisione', 'due_ore');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-11-03 00:00:00', 120), dt_upd = convert(datetime, '2020-11-03 12:01:21', 120)
         , title = left('rinfrescata pagina prodotti', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'revisione', stima = 'due_ore'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-11-03 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-11-03 12:01:21', 120), getdate())
          or isnull(title, '') <> isnull('rinfrescata pagina prodotti', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('revisione', '') or isnull(stima, '') <> isnull('due_ore', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:34,909 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\sito web\pagine interne\rinfrescata pagina prodotti
2021-01-10 15:29:34,910 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1778 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1778, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-11-03 12:01:21', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-11-03 12:01:21', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-11-03 12:01:21', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:34,915 [64] DEBUG dn_lib.tools.log - added file 4209: C:\root\todd\_test\dn\sito web\pagine interne\201103.rinfrescata pagina prodotti.molina.ok.rev.2h.task\i.txt
2021-01-10 15:29:34,916 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4209;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4209, '.txt', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-11-03 12:01:21', 120));
2021-01-10 15:29:34,918 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1380;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1380, 4209, @content
          , convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-11-03 12:01:21', 120));
2021-01-10 15:29:34,920 [64] DEBUG dn_lib.tools.log - lette note task 1380
2021-01-10 15:29:34,921 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\sito web\pagine interne\201103.rinfrescata pagina prodotti.molina.ok.rev.2h.task\i.txt'
2021-01-10 15:29:34,921 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1380) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:34,928 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = 'spedizioni corrieri';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, 'spedizioni corrieri', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-10-08 15:57:38', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-10-08 15:57:38', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-08 15:57:38', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:34,931 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\spedizioni corrieri
2021-01-10 15:29:34,932 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1779 
        and folder_name = '200623.da un orario in poi cambio di corriere.molina.alta.new.2h.ok.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1779, '200623.da un orario in poi cambio di corriere.molina.alta.new.2h.ok.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-23 16:31:13', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-23 16:31:13', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-23 16:31:13', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:34,937 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\spedizioni corrieri\200623.da un orario in poi cambio di corriere.molina.alta.new.2h.ok.task
2021-01-10 15:29:34,988 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1780 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1780, null, left('da un orario in poi cambio di corriere', 150)
            , NULL, convert(datetime, '2020-06-23 00:00:00', 120), convert(datetime, '2020-06-23 16:31:13', 120), 1
            , 'fatto', 'alta', 'aggiunta', 'due_ore');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-06-23 00:00:00', 120), dt_upd = convert(datetime, '2020-06-23 16:31:13', 120)
         , title = left('da un orario in poi cambio di corriere', 150), [user] = NULL
         , stato = 'fatto', priorita = 'alta'
         , tipo = 'aggiunta', stima = 'due_ore'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-06-23 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-23 16:31:13', 120), getdate())
          or isnull(title, '') <> isnull('da un orario in poi cambio di corriere', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull('alta', '') 
          or isnull(tipo, '') <> isnull('aggiunta', '') or isnull(stima, '') <> isnull('due_ore', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:34,994 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\spedizioni corrieri\da un orario in poi cambio di corriere
2021-01-10 15:29:34,995 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1780 and file_name = 'sql.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1780, 'sql.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-23 16:31:13', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-23 16:31:13', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-23 16:31:13', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:34,999 [64] DEBUG dn_lib.tools.log - added file 4210: C:\root\todd\_test\dn\spedizioni corrieri\200623.da un orario in poi cambio di corriere.molina.alta.new.2h.ok.task\sql.sql
2021-01-10 15:29:35,000 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4210;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4210, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-23 16:31:13', 120));
2021-01-10 15:29:35,003 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\spedizioni corrieri\200623.da un orario in poi cambio di corriere.molina.alta.new.2h.ok.task\sql.sql'
2021-01-10 15:29:35,003 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1381) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:35,010 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1779 
        and folder_name = '200728.cambio dei cap in lombardia.ok.rev.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1779, '200728.cambio dei cap in lombardia.ok.rev.molina.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-29 08:32:26', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-07-29 08:32:26', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-29 08:32:26', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:35,015 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\spedizioni corrieri\200728.cambio dei cap in lombardia.ok.rev.molina.task
2021-01-10 15:29:35,049 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1781 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1781, null, left('cambio dei cap in lombardia', 150)
            , NULL, convert(datetime, '2020-07-28 00:00:00', 120), convert(datetime, '2020-07-29 08:32:26', 120), 1
            , 'fatto', NULL, 'revisione', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-07-28 00:00:00', 120), dt_upd = convert(datetime, '2020-07-29 08:32:26', 120)
         , title = left('cambio dei cap in lombardia', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'revisione', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-07-28 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-07-29 08:32:26', 120), getdate())
          or isnull(title, '') <> isnull('cambio dei cap in lombardia', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('revisione', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:35,055 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\spedizioni corrieri\cambio dei cap in lombardia
2021-01-10 15:29:35,056 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1781 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1781, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-28 17:29:34', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-07-28 17:29:34', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-28 17:29:34', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:35,061 [64] DEBUG dn_lib.tools.log - added file 4211: C:\root\todd\_test\dn\spedizioni corrieri\200728.cambio dei cap in lombardia.ok.rev.molina.task\i.txt
2021-01-10 15:29:35,062 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4211;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4211, '.txt', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-28 17:29:34', 120));
2021-01-10 15:29:35,064 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1382;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1382, 4211, @content
          , convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-28 17:29:34', 120));
2021-01-10 15:29:35,067 [64] DEBUG dn_lib.tools.log - lette note task 1382
2021-01-10 15:29:35,068 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\spedizioni corrieri\200728.cambio dei cap in lombardia.ok.rev.molina.task\i.txt'
2021-01-10 15:29:35,069 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1781 and file_name = 'sql.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1781, 'sql.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-29 08:32:26', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-07-29 08:32:26', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-29 08:32:26', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:35,074 [64] DEBUG dn_lib.tools.log - added file 4212: C:\root\todd\_test\dn\spedizioni corrieri\200728.cambio dei cap in lombardia.ok.rev.molina.task\sql.sql
2021-01-10 15:29:35,075 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4212;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4212, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-29 08:32:26', 120));
2021-01-10 15:29:35,078 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\spedizioni corrieri\200728.cambio dei cap in lombardia.ok.rev.molina.task\sql.sql'
2021-01-10 15:29:35,079 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1382) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:35,087 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1779 
        and folder_name = '200729.indirizzo spedizione bazzolo.ok.fix.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1779, '200729.indirizzo spedizione bazzolo.ok.fix.molina.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-29 15:36:26', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-07-29 15:36:26', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-29 15:36:26', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:35,092 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\spedizioni corrieri\200729.indirizzo spedizione bazzolo.ok.fix.molina.task
2021-01-10 15:29:35,128 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1782 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1782, null, left('indirizzo spedizione bazzolo', 150)
            , NULL, convert(datetime, '2020-07-29 00:00:00', 120), convert(datetime, '2020-07-29 15:36:26', 120), 1
            , 'fatto', NULL, 'fix', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-07-29 00:00:00', 120), dt_upd = convert(datetime, '2020-07-29 15:36:26', 120)
         , title = left('indirizzo spedizione bazzolo', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-07-29 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-07-29 15:36:26', 120), getdate())
          or isnull(title, '') <> isnull('indirizzo spedizione bazzolo', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:35,135 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\spedizioni corrieri\indirizzo spedizione bazzolo
2021-01-10 15:29:35,136 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1782 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1782, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-29 15:42:39', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-07-29 15:42:39', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-29 15:42:39', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:35,140 [64] DEBUG dn_lib.tools.log - added file 4213: C:\root\todd\_test\dn\spedizioni corrieri\200729.indirizzo spedizione bazzolo.ok.fix.molina.task\i.txt
2021-01-10 15:29:35,141 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4213;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4213, '.txt', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-29 15:42:39', 120));
2021-01-10 15:29:35,143 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1383;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1383, 4213, @content
          , convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-29 15:42:39', 120));
2021-01-10 15:29:35,145 [64] DEBUG dn_lib.tools.log - lette note task 1383
2021-01-10 15:29:35,146 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\spedizioni corrieri\200729.indirizzo spedizione bazzolo.ok.fix.molina.task\i.txt'
2021-01-10 15:29:35,147 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1782 and file_name = 'sql.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1782, 'sql.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-29 15:36:25', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-07-29 15:36:25', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-29 15:36:25', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:35,151 [64] DEBUG dn_lib.tools.log - added file 4214: C:\root\todd\_test\dn\spedizioni corrieri\200729.indirizzo spedizione bazzolo.ok.fix.molina.task\sql.sql
2021-01-10 15:29:35,152 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4214;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4214, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-29 15:36:25', 120));
2021-01-10 15:29:35,155 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\spedizioni corrieri\200729.indirizzo spedizione bazzolo.ok.fix.molina.task\sql.sql'
2021-01-10 15:29:35,156 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1383) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:35,164 [64] DEBUG dn_lib.tools.log - updated task: C:\root\todd\_test\dn\spedizioni corrieri\indirizzo spedizione bazzolo
2021-01-10 15:29:35,165 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1779 
        and folder_name = '200730.mail di riepilogo spedizioni per ECOMMERCEPARTS .ok.new.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1779, '200730.mail di riepilogo spedizioni per ECOMMERCEPARTS .ok.new.molina.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-31 12:33:04', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-07-31 12:33:04', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-31 12:33:04', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:35,169 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\spedizioni corrieri\200730.mail di riepilogo spedizioni per ECOMMERCEPARTS .ok.new.molina.task
2021-01-10 15:29:35,203 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1783 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1783, null, left('mail di riepilogo spedizioni per ECOMMERCEPARTS ', 150)
            , NULL, convert(datetime, '2020-07-30 00:00:00', 120), convert(datetime, '2020-07-31 12:33:04', 120), 1
            , 'fatto', NULL, 'aggiunta', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-07-30 00:00:00', 120), dt_upd = convert(datetime, '2020-07-31 12:33:04', 120)
         , title = left('mail di riepilogo spedizioni per ECOMMERCEPARTS ', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'aggiunta', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-07-30 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-07-31 12:33:04', 120), getdate())
          or isnull(title, '') <> isnull('mail di riepilogo spedizioni per ECOMMERCEPARTS ', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('aggiunta', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:35,208 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\spedizioni corrieri\mail di riepilogo spedizioni per ECOMMERCEPARTS 
2021-01-10 15:29:35,209 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1783 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1783, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-30 15:41:35', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-07-30 15:41:35', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-30 15:41:35', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:35,213 [64] DEBUG dn_lib.tools.log - added file 4215: C:\root\todd\_test\dn\spedizioni corrieri\200730.mail di riepilogo spedizioni per ECOMMERCEPARTS .ok.new.molina.task\i.txt
2021-01-10 15:29:35,214 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4215;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4215, '.txt', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-30 15:41:35', 120));
2021-01-10 15:29:35,217 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1384;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1384, 4215, @content
          , convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-30 15:41:35', 120));
2021-01-10 15:29:35,218 [64] DEBUG dn_lib.tools.log - lette note task 1384
2021-01-10 15:29:35,219 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\spedizioni corrieri\200730.mail di riepilogo spedizioni per ECOMMERCEPARTS .ok.new.molina.task\i.txt'
2021-01-10 15:29:35,220 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1783 and file_name = 'sql.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1783, 'sql.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-31 12:33:04', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-07-31 12:33:04', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-31 12:33:04', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:35,224 [64] DEBUG dn_lib.tools.log - added file 4216: C:\root\todd\_test\dn\spedizioni corrieri\200730.mail di riepilogo spedizioni per ECOMMERCEPARTS .ok.new.molina.task\sql.sql
2021-01-10 15:29:35,225 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4216;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4216, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-31 12:33:04', 120));
2021-01-10 15:29:35,228 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\spedizioni corrieri\200730.mail di riepilogo spedizioni per ECOMMERCEPARTS .ok.new.molina.task\sql.sql'
2021-01-10 15:29:35,228 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1384) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:35,236 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1779 
        and folder_name = '200730.spedizioni da annullare e rifare.ok.fix.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1779, '200730.spedizioni da annullare e rifare.ok.fix.molina.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-30 14:53:14', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-07-30 14:53:14', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-30 14:53:14', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:35,240 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\spedizioni corrieri\200730.spedizioni da annullare e rifare.ok.fix.molina.task
2021-01-10 15:29:35,276 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1784 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1784, null, left('spedizioni da annullare e rifare', 150)
            , NULL, convert(datetime, '2020-07-30 00:00:00', 120), convert(datetime, '2020-07-30 14:53:14', 120), 1
            , 'fatto', NULL, 'fix', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-07-30 00:00:00', 120), dt_upd = convert(datetime, '2020-07-30 14:53:14', 120)
         , title = left('spedizioni da annullare e rifare', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-07-30 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-07-30 14:53:14', 120), getdate())
          or isnull(title, '') <> isnull('spedizioni da annullare e rifare', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:35,283 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\spedizioni corrieri\spedizioni da annullare e rifare
2021-01-10 15:29:35,284 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1784 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1784, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-30 14:53:14', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-07-30 14:53:14', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-30 14:53:14', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:35,288 [64] DEBUG dn_lib.tools.log - added file 4217: C:\root\todd\_test\dn\spedizioni corrieri\200730.spedizioni da annullare e rifare.ok.fix.molina.task\i.txt
2021-01-10 15:29:35,289 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4217;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4217, '.txt', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-30 14:53:14', 120));
2021-01-10 15:29:35,291 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1385;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1385, 4217, @content
          , convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-30 14:53:14', 120));
2021-01-10 15:29:35,293 [64] DEBUG dn_lib.tools.log - lette note task 1385
2021-01-10 15:29:35,294 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\spedizioni corrieri\200730.spedizioni da annullare e rifare.ok.fix.molina.task\i.txt'
2021-01-10 15:29:35,295 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1385) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:35,302 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1779 
        and folder_name = '200731.chiusura corrieri a volte rimangono dei WAIT.ok.check.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1779, '200731.chiusura corrieri a volte rimangono dei WAIT.ok.check.molina.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-31 09:10:39', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-07-31 09:10:39', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-31 09:10:39', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:35,306 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\spedizioni corrieri\200731.chiusura corrieri a volte rimangono dei WAIT.ok.check.molina.task
2021-01-10 15:29:35,339 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1785 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1785, null, left('chiusura corrieri a volte rimangono dei WAIT', 150)
            , NULL, convert(datetime, '2020-07-31 00:00:00', 120), convert(datetime, '2020-07-31 09:10:39', 120), 1
            , 'fatto', NULL, 'controllo', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-07-31 00:00:00', 120), dt_upd = convert(datetime, '2020-07-31 09:10:39', 120)
         , title = left('chiusura corrieri a volte rimangono dei WAIT', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'controllo', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-07-31 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-07-31 09:10:39', 120), getdate())
          or isnull(title, '') <> isnull('chiusura corrieri a volte rimangono dei WAIT', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('controllo', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:35,344 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\spedizioni corrieri\chiusura corrieri a volte rimangono dei WAIT
2021-01-10 15:29:35,345 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1785 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1785, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-31 10:54:48', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-07-31 10:54:48', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-31 10:54:48', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:35,350 [64] DEBUG dn_lib.tools.log - added file 4218: C:\root\todd\_test\dn\spedizioni corrieri\200731.chiusura corrieri a volte rimangono dei WAIT.ok.check.molina.task\i.txt
2021-01-10 15:29:35,351 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4218;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4218, '.txt', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-31 10:54:48', 120));
2021-01-10 15:29:35,353 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1386;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1386, 4218, @content
          , convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-31 10:54:48', 120));
2021-01-10 15:29:35,355 [64] DEBUG dn_lib.tools.log - lette note task 1386
2021-01-10 15:29:35,356 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\spedizioni corrieri\200731.chiusura corrieri a volte rimangono dei WAIT.ok.check.molina.task\i.txt'
2021-01-10 15:29:35,358 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1386) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:35,367 [64] DEBUG dn_lib.tools.log - updated task: C:\root\todd\_test\dn\spedizioni corrieri\chiusura corrieri a volte rimangono dei WAIT
2021-01-10 15:29:35,368 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1779 
        and folder_name = '201008.risolvi errori.molina.ok.new.2h.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1779, '201008.risolvi errori.molina.ok.new.2h.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-10-08 15:58:12', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-10-08 15:58:12', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-08 15:58:12', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:35,372 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\spedizioni corrieri\201008.risolvi errori.molina.ok.new.2h.task
2021-01-10 15:29:35,417 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1786 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1786, null, left('risolvi errori', 150)
            , NULL, convert(datetime, '2020-10-08 00:00:00', 120), convert(datetime, '2020-10-08 15:58:12', 120), 1
            , 'fatto', NULL, 'aggiunta', 'due_ore');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-10-08 00:00:00', 120), dt_upd = convert(datetime, '2020-10-08 15:58:12', 120)
         , title = left('risolvi errori', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'aggiunta', stima = 'due_ore'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-10-08 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-10-08 15:58:12', 120), getdate())
          or isnull(title, '') <> isnull('risolvi errori', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('aggiunta', '') or isnull(stima, '') <> isnull('due_ore', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:35,424 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\spedizioni corrieri\risolvi errori
2021-01-10 15:29:35,424 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1786 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1786, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-10-08 15:58:12', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-10-08 15:58:12', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-08 15:58:12', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:35,429 [64] DEBUG dn_lib.tools.log - added file 4219: C:\root\todd\_test\dn\spedizioni corrieri\201008.risolvi errori.molina.ok.new.2h.task\i.txt
2021-01-10 15:29:35,429 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4219;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4219, '.txt', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-10-08 15:58:12', 120));
2021-01-10 15:29:35,432 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1387;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1387, 4219, @content
          , convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-10-08 15:58:12', 120));
2021-01-10 15:29:35,434 [64] DEBUG dn_lib.tools.log - lette note task 1387
2021-01-10 15:29:35,434 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\spedizioni corrieri\201008.risolvi errori.molina.ok.new.2h.task\i.txt'
2021-01-10 15:29:35,435 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1387) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:35,442 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1779 
        and folder_name = 'bartolini';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1779, 'bartolini', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-21 11:28:51', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-08-21 11:28:51', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-21 11:28:51', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:35,447 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\spedizioni corrieri\bartolini
2021-01-10 15:29:35,448 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1787 
        and folder_name = 'Implementare i tracking number BRT.molina.fatta.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1787, 'Implementare i tracking number BRT.molina.fatta.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-18 17:55:19', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-18 17:55:19', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-18 17:55:19', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:35,453 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\spedizioni corrieri\bartolini\Implementare i tracking number BRT.molina.fatta.task
2021-01-10 15:29:35,478 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1788 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1788, null, left('Implementare i tracking number BRT', 150)
            , NULL, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-18 17:55:19', 120), 1
            , 'fatto', NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-18 17:55:19', 120)
         , title = left('Implementare i tracking number BRT', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = NULL, stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-18 17:55:19', 120), getdate())
          or isnull(title, '') <> isnull('Implementare i tracking number BRT', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:35,484 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\spedizioni corrieri\bartolini\Implementare i tracking number BRT
2021-01-10 15:29:35,486 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1788 and file_name = 'R Tracking BRT.msg';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1788, 'R Tracking BRT.msg', '.msg', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-17 08:36:26', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-17 08:36:26', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-17 08:36:26', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:35,491 [64] DEBUG dn_lib.tools.log - added file 4220: C:\root\todd\_test\dn\spedizioni corrieri\bartolini\Implementare i tracking number BRT.molina.fatta.task\R Tracking BRT.msg
2021-01-10 15:29:35,492 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1788 and file_name = 'sql.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1788, 'sql.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-18 17:55:19', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-18 17:55:19', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-18 17:55:19', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:35,496 [64] DEBUG dn_lib.tools.log - added file 4221: C:\root\todd\_test\dn\spedizioni corrieri\bartolini\Implementare i tracking number BRT.molina.fatta.task\sql.sql
2021-01-10 15:29:35,497 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4221;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4221, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-18 17:55:19', 120));
2021-01-10 15:29:35,500 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\spedizioni corrieri\bartolini\Implementare i tracking number BRT.molina.fatta.task\sql.sql'
2021-01-10 15:29:35,501 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1388) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:35,509 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1787 and file_name = 'tre ordini bartolini.fatto.fix.molina.task.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1787, 'tre ordini bartolini.fatto.fix.molina.task.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-11 09:23:55', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-11 09:23:55', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-11 09:23:55', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:35,514 [64] DEBUG dn_lib.tools.log - added file 4222: C:\root\todd\_test\dn\spedizioni corrieri\bartolini\tre ordini bartolini.fatto.fix.molina.task.sql
2021-01-10 15:29:35,515 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4222;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4222, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-11 09:23:55', 120));
2021-01-10 15:29:35,518 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\spedizioni corrieri\bartolini\tre ordini bartolini.fatto.fix.molina.task.sql'
2021-01-10 15:29:35,555 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4222;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, null, 4222, left('tre ordini bartolini', 150)
            , NULL, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-11 09:23:55', 120), 1
            , 'fatto', NULL, 'fix', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-11 09:23:55', 120)
         , title = left('tre ordini bartolini', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-11 09:23:55', 120), getdate())
          or isnull(title, '') <> isnull('tre ordini bartolini', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:35,561 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\spedizioni corrieri\bartolini\tre ordini bartolini
2021-01-10 15:29:35,562 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1779 and file_name = 'check resi no rip spedizioni.ok.fisx.molina.task.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1779, 'check resi no rip spedizioni.ok.fisx.molina.task.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-02 11:04:46', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-07-02 11:04:46', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-02 11:04:46', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:35,567 [64] DEBUG dn_lib.tools.log - added file 4223: C:\root\todd\_test\dn\spedizioni corrieri\check resi no rip spedizioni.ok.fisx.molina.task.sql
2021-01-10 15:29:35,568 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4223;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4223, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-02 11:04:46', 120));
2021-01-10 15:29:35,570 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\spedizioni corrieri\check resi no rip spedizioni.ok.fisx.molina.task.sql'
2021-01-10 15:29:35,600 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4223;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, null, 4223, left('check resi no rip spedizioni', 150)
            , NULL, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-02 11:04:46', 120), 1
            , 'fatto', NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-07-02 11:04:46', 120)
         , title = left('check resi no rip spedizioni', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = NULL, stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-07-02 11:04:46', 120), getdate())
          or isnull(title, '') <> isnull('check resi no rip spedizioni', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:35,607 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\spedizioni corrieri\check resi no rip spedizioni
2021-01-10 15:29:35,608 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1779 and file_name = 'controlli spedizioni EDP.fatto.check.molina.task.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1779, 'controlli spedizioni EDP.fatto.check.molina.task.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-18 10:08:35', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-18 10:08:35', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-18 10:08:35', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:35,612 [64] DEBUG dn_lib.tools.log - added file 4224: C:\root\todd\_test\dn\spedizioni corrieri\controlli spedizioni EDP.fatto.check.molina.task.sql
2021-01-10 15:29:35,613 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4224;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4224, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-18 10:08:35', 120));
2021-01-10 15:29:35,615 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\spedizioni corrieri\controlli spedizioni EDP.fatto.check.molina.task.sql'
2021-01-10 15:29:35,645 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4224;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, null, 4224, left('controlli spedizioni EDP', 150)
            , NULL, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-18 10:08:35', 120), 1
            , 'fatto', NULL, 'controllo', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-18 10:08:35', 120)
         , title = left('controlli spedizioni EDP', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'controllo', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-18 10:08:35', 120), getdate())
          or isnull(title, '') <> isnull('controlli spedizioni EDP', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('controllo', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:35,651 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\spedizioni corrieri\controlli spedizioni EDP
2021-01-10 15:29:35,652 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1779 and file_name = 'corriere ctl domandina.fatto.fix.molina.task.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1779, 'corriere ctl domandina.fatto.fix.molina.task.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-11 15:20:37', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-11 15:20:37', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-11 15:20:37', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:35,657 [64] DEBUG dn_lib.tools.log - added file 4225: C:\root\todd\_test\dn\spedizioni corrieri\corriere ctl domandina.fatto.fix.molina.task.sql
2021-01-10 15:29:35,658 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4225;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4225, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-11 15:20:37', 120));
2021-01-10 15:29:35,661 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\spedizioni corrieri\corriere ctl domandina.fatto.fix.molina.task.sql'
2021-01-10 15:29:35,696 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4225;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, null, 4225, left('corriere ctl domandina', 150)
            , NULL, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-11 15:20:37', 120), 1
            , 'fatto', NULL, 'fix', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-11 15:20:37', 120)
         , title = left('corriere ctl domandina', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-11 15:20:37', 120), getdate())
          or isnull(title, '') <> isnull('corriere ctl domandina', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:35,703 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\spedizioni corrieri\corriere ctl domandina
2021-01-10 15:29:35,704 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1779 and file_name = 'corrieri.fatto.fix.molina.task.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1779, 'corrieri.fatto.fix.molina.task.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-03 09:34:50', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-03 09:34:50', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-03 09:34:50', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:35,709 [64] DEBUG dn_lib.tools.log - added file 4226: C:\root\todd\_test\dn\spedizioni corrieri\corrieri.fatto.fix.molina.task.sql
2021-01-10 15:29:35,710 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4226;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4226, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-03 09:34:50', 120));
2021-01-10 15:29:35,712 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\spedizioni corrieri\corrieri.fatto.fix.molina.task.sql'
2021-01-10 15:29:35,742 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4226;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, null, 4226, left('corrieri', 150)
            , NULL, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-03 09:34:50', 120), 1
            , 'fatto', NULL, 'fix', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-03 09:34:50', 120)
         , title = left('corrieri', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-03 09:34:50', 120), getdate())
          or isnull(title, '') <> isnull('corrieri', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:35,748 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\spedizioni corrieri\corrieri
2021-01-10 15:29:35,749 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1779 and file_name = 'i resi no rip non devono andare in multicollo.ok.fix.molina.task.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1779, 'i resi no rip non devono andare in multicollo.ok.fix.molina.task.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-02 10:22:23', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-07-02 10:22:23', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-02 10:22:23', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:35,753 [64] DEBUG dn_lib.tools.log - added file 4227: C:\root\todd\_test\dn\spedizioni corrieri\i resi no rip non devono andare in multicollo.ok.fix.molina.task.sql
2021-01-10 15:29:35,754 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4227;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4227, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-02 10:22:23', 120));
2021-01-10 15:29:35,756 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\spedizioni corrieri\i resi no rip non devono andare in multicollo.ok.fix.molina.task.sql'
2021-01-10 15:29:35,786 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4227;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, null, 4227, left('i resi no rip non devono andare in multicollo', 150)
            , NULL, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-02 10:22:23', 120), 1
            , 'fatto', NULL, 'fix', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-07-02 10:22:23', 120)
         , title = left('i resi no rip non devono andare in multicollo', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-07-02 10:22:23', 120), getdate())
          or isnull(title, '') <> isnull('i resi no rip non devono andare in multicollo', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:35,792 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\spedizioni corrieri\i resi no rip non devono andare in multicollo
2021-01-10 15:29:35,793 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1779 and file_name = 'indirizzi senza provincia.dafare.molina.task.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1779, 'indirizzi senza provincia.dafare.molina.task.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-24 08:43:02', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-24 08:43:02', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-24 08:43:02', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:35,797 [64] DEBUG dn_lib.tools.log - added file 4228: C:\root\todd\_test\dn\spedizioni corrieri\indirizzi senza provincia.dafare.molina.task.sql
2021-01-10 15:29:35,798 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4228;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4228, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-24 08:43:02', 120));
2021-01-10 15:29:35,800 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\spedizioni corrieri\indirizzi senza provincia.dafare.molina.task.sql'
2021-01-10 15:29:35,828 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4228;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, null, 4228, left('indirizzi senza provincia', 150)
            , NULL, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-24 08:43:02', 120), 1
            , 'da_fare', NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-24 08:43:02', 120)
         , title = left('indirizzi senza provincia', 150), [user] = NULL
         , stato = 'da_fare', priorita = NULL
         , tipo = NULL, stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-24 08:43:02', 120), getdate())
          or isnull(title, '') <> isnull('indirizzi senza provincia', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('da_fare', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:35,836 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\spedizioni corrieri\indirizzi senza provincia
2021-01-10 15:29:35,837 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1779 and file_name = 'margine su tutti i corrieri.fatto.fix.molina.task.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1779, 'margine su tutti i corrieri.fatto.fix.molina.task.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-05-29 10:33:25', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-05-29 10:33:25', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-05-29 10:33:25', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:35,842 [64] DEBUG dn_lib.tools.log - added file 4229: C:\root\todd\_test\dn\spedizioni corrieri\margine su tutti i corrieri.fatto.fix.molina.task.sql
2021-01-10 15:29:35,845 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4229;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4229, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-05-29 10:33:25', 120));
2021-01-10 15:29:35,848 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\spedizioni corrieri\margine su tutti i corrieri.fatto.fix.molina.task.sql'
2021-01-10 15:29:35,883 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4229;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, null, 4229, left('margine su tutti i corrieri', 150)
            , NULL, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-05-29 10:33:25', 120), 1
            , 'fatto', NULL, 'fix', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-05-29 10:33:25', 120)
         , title = left('margine su tutti i corrieri', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-05-29 10:33:25', 120), getdate())
          or isnull(title, '') <> isnull('margine su tutti i corrieri', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:35,889 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\spedizioni corrieri\margine su tutti i corrieri
2021-01-10 15:29:35,889 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1779 and file_name = 'NO e VB mettere il corriere da EPD a CTL.fatto.fix.molina.task.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1779, 'NO e VB mettere il corriere da EPD a CTL.fatto.fix.molina.task.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-03 09:58:14', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-03 09:58:14', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-03 09:58:14', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:35,893 [64] DEBUG dn_lib.tools.log - added file 4230: C:\root\todd\_test\dn\spedizioni corrieri\NO e VB mettere il corriere da EPD a CTL.fatto.fix.molina.task.sql
2021-01-10 15:29:35,894 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4230;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4230, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-03 09:58:14', 120));
2021-01-10 15:29:35,897 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\spedizioni corrieri\NO e VB mettere il corriere da EPD a CTL.fatto.fix.molina.task.sql'
2021-01-10 15:29:35,928 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4230;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, null, 4230, left('NO e VB mettere il corriere da EPD a CTL', 150)
            , NULL, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-03 09:58:14', 120), 1
            , 'fatto', NULL, 'fix', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-03 09:58:14', 120)
         , title = left('NO e VB mettere il corriere da EPD a CTL', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-03 09:58:14', 120), getdate())
          or isnull(title, '') <> isnull('NO e VB mettere il corriere da EPD a CTL', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:35,933 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\spedizioni corrieri\NO e VB mettere il corriere da EPD a CTL
2021-01-10 15:29:35,934 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1779 and file_name = 'stampa bolle di pi pagine.fatto.fix.molina.task.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1779, 'stampa bolle di pi pagine.fatto.fix.molina.task.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-12 18:24:39', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-12 18:24:39', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-06-12 18:24:39', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:35,939 [64] DEBUG dn_lib.tools.log - added file 4231: C:\root\todd\_test\dn\spedizioni corrieri\stampa bolle di pi pagine.fatto.fix.molina.task.txt
2021-01-10 15:29:35,939 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4231;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4231, '.txt', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-12 18:24:39', 120));
2021-01-10 15:29:35,942 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\spedizioni corrieri\stampa bolle di pi pagine.fatto.fix.molina.task.txt'
2021-01-10 15:29:35,974 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4231;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, null, 4231, left('stampa bolle di pi pagine', 150)
            , NULL, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-12 18:24:39', 120), 1
            , 'fatto', NULL, 'fix', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-06-12 18:24:39', 120)
         , title = left('stampa bolle di pi pagine', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-06-12 18:24:39', 120), getdate())
          or isnull(title, '') <> isnull('stampa bolle di pi pagine', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:35,980 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\spedizioni corrieri\stampa bolle di pi pagine
2021-01-10 15:29:35,981 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1398;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1398, 4231, @content
          , convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-06-12 18:24:39', 120));
2021-01-10 15:29:35,983 [64] DEBUG dn_lib.tools.log - lette note task 1398
2021-01-10 15:29:35,984 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = 'statistiche';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, 'statistiche', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-12-14 11:10:22', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-12-14 11:10:22', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-12-14 11:10:22', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:35,987 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\statistiche
2021-01-10 15:29:35,988 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1789 
        and folder_name = '200702.suffissi SN non gestiti.alta.ok.fix.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1789, '200702.suffissi SN non gestiti.alta.ok.fix.molina.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-09 15:27:14', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-07-09 15:27:14', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-09 15:27:14', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:35,992 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\statistiche\200702.suffissi SN non gestiti.alta.ok.fix.molina.task
2021-01-10 15:29:36,031 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1790 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1790, null, left('suffissi SN non gestiti', 150)
            , NULL, convert(datetime, '2020-07-02 00:00:00', 120), convert(datetime, '2020-07-09 15:27:14', 120), 1
            , 'fatto', 'alta', 'fix', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-07-02 00:00:00', 120), dt_upd = convert(datetime, '2020-07-09 15:27:14', 120)
         , title = left('suffissi SN non gestiti', 150), [user] = NULL
         , stato = 'fatto', priorita = 'alta'
         , tipo = 'fix', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-07-02 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-07-09 15:27:14', 120), getdate())
          or isnull(title, '') <> isnull('suffissi SN non gestiti', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull('alta', '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:36,037 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\statistiche\suffissi SN non gestiti
2021-01-10 15:29:36,038 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1790 and file_name = 'sn.jpg';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1790, 'sn.jpg', '.jpg', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-02 08:34:07', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-07-02 08:34:07', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-02 08:34:07', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:36,043 [64] DEBUG dn_lib.tools.log - added file 4232: C:\root\todd\_test\dn\statistiche\200702.suffissi SN non gestiti.alta.ok.fix.molina.task\sn.jpg
2021-01-10 15:29:36,043 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1790 and file_name = 'sql.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1790, 'sql.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-09 15:27:14', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-07-09 15:27:14', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-09 15:27:14', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:36,048 [64] DEBUG dn_lib.tools.log - added file 4233: C:\root\todd\_test\dn\statistiche\200702.suffissi SN non gestiti.alta.ok.fix.molina.task\sql.sql
2021-01-10 15:29:36,049 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4233;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4233, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-09 15:27:14', 120));
2021-01-10 15:29:36,051 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\statistiche\200702.suffissi SN non gestiti.alta.ok.fix.molina.task\sql.sql'
2021-01-10 15:29:36,052 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1790 and file_name = 'Thumbs.db';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1790, 'Thumbs.db', '.db', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-08 10:16:33', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-07-08 10:16:33', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-08 10:16:33', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:36,057 [64] DEBUG dn_lib.tools.log - added file 4234: C:\root\todd\_test\dn\statistiche\200702.suffissi SN non gestiti.alta.ok.fix.molina.task\Thumbs.db
2021-01-10 15:29:36,058 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1790 and file_name = 'vendite.html';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1790, 'vendite.html', '.html', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-07-01 19:32:42', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-07-01 19:32:42', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-07-01 19:32:42', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:36,063 [64] DEBUG dn_lib.tools.log - added file 4235: C:\root\todd\_test\dn\statistiche\200702.suffissi SN non gestiti.alta.ok.fix.molina.task\vendite.html
2021-01-10 15:29:36,064 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1399) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:36,072 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1789 
        and folder_name = '200810.personale - vendite - categorie.ok.new.mg.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1789, '200810.personale - vendite - categorie.ok.new.mg.molina.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-14 15:30:21', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-08-14 15:30:21', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-14 15:30:21', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:36,076 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\statistiche\200810.personale - vendite - categorie.ok.new.mg.molina.task
2021-01-10 15:29:36,118 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1791 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1791, null, left('personale - vendite - categorie', 150)
            , NULL, convert(datetime, '2020-08-10 00:00:00', 120), convert(datetime, '2020-08-14 15:30:21', 120), 1
            , 'fatto', NULL, 'aggiunta', 'mezza');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-08-10 00:00:00', 120), dt_upd = convert(datetime, '2020-08-14 15:30:21', 120)
         , title = left('personale - vendite - categorie', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'aggiunta', stima = 'mezza'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-08-10 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-08-14 15:30:21', 120), getdate())
          or isnull(title, '') <> isnull('personale - vendite - categorie', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('aggiunta', '') or isnull(stima, '') <> isnull('mezza', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:36,124 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\statistiche\personale - vendite - categorie
2021-01-10 15:29:36,125 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1791 and file_name = 'calcolo_media.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1791, 'calcolo_media.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-12 09:51:49', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-08-12 09:51:49', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-12 09:51:49', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:36,130 [64] DEBUG dn_lib.tools.log - added file 4236: C:\root\todd\_test\dn\statistiche\200810.personale - vendite - categorie.ok.new.mg.molina.task\calcolo_media.sql
2021-01-10 15:29:36,131 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4236;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4236, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-12 09:51:49', 120));
2021-01-10 15:29:36,134 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\statistiche\200810.personale - vendite - categorie.ok.new.mg.molina.task\calcolo_media.sql'
2021-01-10 15:29:36,135 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1791 and file_name = 'fatturati.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1791, 'fatturati.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-14 15:30:21', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-08-14 15:30:21', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-14 15:30:21', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:36,140 [64] DEBUG dn_lib.tools.log - added file 4237: C:\root\todd\_test\dn\statistiche\200810.personale - vendite - categorie.ok.new.mg.molina.task\fatturati.sql
2021-01-10 15:29:36,141 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4237;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4237, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-14 15:30:21', 120));
2021-01-10 15:29:36,144 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\statistiche\200810.personale - vendite - categorie.ok.new.mg.molina.task\fatturati.sql'
2021-01-10 15:29:36,145 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1791 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1791, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-12 11:38:40', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-08-12 11:38:40', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-12 11:38:40', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:36,151 [64] DEBUG dn_lib.tools.log - added file 4238: C:\root\todd\_test\dn\statistiche\200810.personale - vendite - categorie.ok.new.mg.molina.task\i.txt
2021-01-10 15:29:36,152 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4238;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4238, '.txt', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-12 11:38:40', 120));
2021-01-10 15:29:36,156 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1400;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1400, 4238, @content
          , convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-12 11:38:40', 120));
2021-01-10 15:29:36,159 [64] DEBUG dn_lib.tools.log - lette note task 1400
2021-01-10 15:29:36,160 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\statistiche\200810.personale - vendite - categorie.ok.new.mg.molina.task\i.txt'
2021-01-10 15:29:36,161 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1791 and file_name = 'personale.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1791, 'personale.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-10 10:34:40', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-08-10 10:34:40', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-10 10:34:40', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:36,166 [64] DEBUG dn_lib.tools.log - added file 4239: C:\root\todd\_test\dn\statistiche\200810.personale - vendite - categorie.ok.new.mg.molina.task\personale.sql
2021-01-10 15:29:36,167 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4239;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4239, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-10 10:34:40', 120));
2021-01-10 15:29:36,171 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\statistiche\200810.personale - vendite - categorie.ok.new.mg.molina.task\personale.sql'
2021-01-10 15:29:36,172 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1791 and file_name = 'personale.xlsx';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1791, 'personale.xlsx', '.xlsx', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-12 10:59:47', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-08-12 10:59:47', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-12 10:59:47', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:36,177 [64] DEBUG dn_lib.tools.log - added file 4240: C:\root\todd\_test\dn\statistiche\200810.personale - vendite - categorie.ok.new.mg.molina.task\personale.xlsx
2021-01-10 15:29:36,177 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1791 and file_name = 'sql.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1791, 'sql.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-11 16:39:21', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-08-11 16:39:21', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-11 16:39:21', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:36,183 [64] DEBUG dn_lib.tools.log - added file 4241: C:\root\todd\_test\dn\statistiche\200810.personale - vendite - categorie.ok.new.mg.molina.task\sql.sql
2021-01-10 15:29:36,184 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4241;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4241, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-11 16:39:21', 120));
2021-01-10 15:29:36,187 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\statistiche\200810.personale - vendite - categorie.ok.new.mg.molina.task\sql.sql'
2021-01-10 15:29:36,188 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1400) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:36,195 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1789 
        and folder_name = '200812.considerare le spese nella mail vendite.ok.new.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1789, '200812.considerare le spese nella mail vendite.ok.new.molina.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-13 14:16:21', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-08-13 14:16:21', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-13 14:16:21', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:36,200 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\statistiche\200812.considerare le spese nella mail vendite.ok.new.molina.task
2021-01-10 15:29:36,233 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1792 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1792, null, left('considerare le spese nella mail vendite', 150)
            , NULL, convert(datetime, '2020-08-12 00:00:00', 120), convert(datetime, '2020-08-13 14:16:21', 120), 1
            , 'fatto', NULL, 'aggiunta', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-08-12 00:00:00', 120), dt_upd = convert(datetime, '2020-08-13 14:16:21', 120)
         , title = left('considerare le spese nella mail vendite', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'aggiunta', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-08-12 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-08-13 14:16:21', 120), getdate())
          or isnull(title, '') <> isnull('considerare le spese nella mail vendite', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('aggiunta', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:36,239 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\statistiche\considerare le spese nella mail vendite
2021-01-10 15:29:36,240 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1792 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1792, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-13 14:21:23', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-08-13 14:21:23', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-13 14:21:23', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:36,244 [64] DEBUG dn_lib.tools.log - added file 4242: C:\root\todd\_test\dn\statistiche\200812.considerare le spese nella mail vendite.ok.new.molina.task\i.txt
2021-01-10 15:29:36,245 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4242;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4242, '.txt', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-13 14:21:23', 120));
2021-01-10 15:29:36,247 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1401;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1401, 4242, @content
          , convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-13 14:21:23', 120));
2021-01-10 15:29:36,249 [64] DEBUG dn_lib.tools.log - lette note task 1401
2021-01-10 15:29:36,249 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\statistiche\200812.considerare le spese nella mail vendite.ok.new.molina.task\i.txt'
2021-01-10 15:29:36,249 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1792 and file_name = 'sql.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1792, 'sql.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-13 14:16:21', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-08-13 14:16:21', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-13 14:16:21', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:36,254 [64] DEBUG dn_lib.tools.log - added file 4243: C:\root\todd\_test\dn\statistiche\200812.considerare le spese nella mail vendite.ok.new.molina.task\sql.sql
2021-01-10 15:29:36,254 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4243;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4243, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-13 14:16:21', 120));
2021-01-10 15:29:36,257 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\statistiche\200812.considerare le spese nella mail vendite.ok.new.molina.task\sql.sql'
2021-01-10 15:29:36,258 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1401) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:36,265 [64] DEBUG dn_lib.tools.log - updated task: C:\root\todd\_test\dn\statistiche\considerare le spese nella mail vendite
2021-01-10 15:29:36,269 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1789 
        and folder_name = '200812.fatturato manager - rivisitazione.ok.new.2g.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1789, '200812.fatturato manager - rivisitazione.ok.new.2g.molina.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-18 12:23:15', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-08-18 12:23:15', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-18 12:23:15', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:36,275 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\statistiche\200812.fatturato manager - rivisitazione.ok.new.2g.molina.task
2021-01-10 15:29:36,325 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1793 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1793, null, left('fatturato manager - rivisitazione', 150)
            , NULL, convert(datetime, '2020-08-12 00:00:00', 120), convert(datetime, '2020-08-18 12:23:15', 120), 1
            , 'fatto', NULL, 'aggiunta', 'due_giorni');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-08-12 00:00:00', 120), dt_upd = convert(datetime, '2020-08-18 12:23:15', 120)
         , title = left('fatturato manager - rivisitazione', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'aggiunta', stima = 'due_giorni'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-08-12 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-08-18 12:23:15', 120), getdate())
          or isnull(title, '') <> isnull('fatturato manager - rivisitazione', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('aggiunta', '') or isnull(stima, '') <> isnull('due_giorni', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:36,330 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\statistiche\fatturato manager - rivisitazione
2021-01-10 15:29:36,331 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1793 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1793, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-18 12:21:25', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-08-18 12:21:25', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-18 12:21:25', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:36,335 [64] DEBUG dn_lib.tools.log - added file 4244: C:\root\todd\_test\dn\statistiche\200812.fatturato manager - rivisitazione.ok.new.2g.molina.task\i.txt
2021-01-10 15:29:36,336 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4244;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4244, '.txt', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-18 12:21:25', 120));
2021-01-10 15:29:36,339 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1402;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1402, 4244, @content
          , convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-18 12:21:25', 120));
2021-01-10 15:29:36,341 [64] DEBUG dn_lib.tools.log - lette note task 1402
2021-01-10 15:29:36,342 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\statistiche\200812.fatturato manager - rivisitazione.ok.new.2g.molina.task\i.txt'
2021-01-10 15:29:36,342 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1402) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:36,350 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1789 
        and folder_name = '200812.i codici MIX non sono inclusi nel fatturato.ok.fix.2h.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1789, '200812.i codici MIX non sono inclusi nel fatturato.ok.fix.2h.molina.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-13 17:34:04', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-08-13 17:34:04', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-13 17:34:04', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:36,354 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\statistiche\200812.i codici MIX non sono inclusi nel fatturato.ok.fix.2h.molina.task
2021-01-10 15:29:36,396 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1794 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1794, null, left('i codici MIX non sono inclusi nel fatturato', 150)
            , NULL, convert(datetime, '2020-08-12 00:00:00', 120), convert(datetime, '2020-08-13 17:34:04', 120), 1
            , 'fatto', NULL, 'fix', 'due_ore');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-08-12 00:00:00', 120), dt_upd = convert(datetime, '2020-08-13 17:34:04', 120)
         , title = left('i codici MIX non sono inclusi nel fatturato', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = 'due_ore'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-08-12 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-08-13 17:34:04', 120), getdate())
          or isnull(title, '') <> isnull('i codici MIX non sono inclusi nel fatturato', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull('due_ore', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:36,401 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\statistiche\i codici MIX non sono inclusi nel fatturato
2021-01-10 15:29:36,402 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1794 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1794, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-13 15:08:59', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-08-13 15:08:59', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-13 15:08:59', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:36,407 [64] DEBUG dn_lib.tools.log - added file 4245: C:\root\todd\_test\dn\statistiche\200812.i codici MIX non sono inclusi nel fatturato.ok.fix.2h.molina.task\i.txt
2021-01-10 15:29:36,407 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4245;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4245, '.txt', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-13 15:08:59', 120));
2021-01-10 15:29:36,410 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1403;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1403, 4245, @content
          , convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-13 15:08:59', 120));
2021-01-10 15:29:36,412 [64] DEBUG dn_lib.tools.log - lette note task 1403
2021-01-10 15:29:36,412 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\statistiche\200812.i codici MIX non sono inclusi nel fatturato.ok.fix.2h.molina.task\i.txt'
2021-01-10 15:29:36,413 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1794 and file_name = 'sql.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1794, 'sql.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-13 17:34:04', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-08-13 17:34:04', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-13 17:34:04', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:36,417 [64] DEBUG dn_lib.tools.log - added file 4246: C:\root\todd\_test\dn\statistiche\200812.i codici MIX non sono inclusi nel fatturato.ok.fix.2h.molina.task\sql.sql
2021-01-10 15:29:36,418 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4246;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4246, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-13 17:34:04', 120));
2021-01-10 15:29:36,422 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\statistiche\200812.i codici MIX non sono inclusi nel fatturato.ok.fix.2h.molina.task\sql.sql'
2021-01-10 15:29:36,422 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1403) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:36,430 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1789 
        and folder_name = '200814.riepilogo e somme spese finali sulla mail del venduto.ok.new.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1789, '200814.riepilogo e somme spese finali sulla mail del venduto.ok.new.molina.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-14 17:47:49', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-08-14 17:47:49', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-14 17:47:49', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:36,436 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\statistiche\200814.riepilogo e somme spese finali sulla mail del venduto.ok.new.molina.task
2021-01-10 15:29:36,471 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1795 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1795, null, left('riepilogo e somme spese finali sulla mail del venduto', 150)
            , NULL, convert(datetime, '2020-08-14 00:00:00', 120), convert(datetime, '2020-08-14 17:47:49', 120), 1
            , 'fatto', NULL, 'aggiunta', NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-08-14 00:00:00', 120), dt_upd = convert(datetime, '2020-08-14 17:47:49', 120)
         , title = left('riepilogo e somme spese finali sulla mail del venduto', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'aggiunta', stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-08-14 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-08-14 17:47:49', 120), getdate())
          or isnull(title, '') <> isnull('riepilogo e somme spese finali sulla mail del venduto', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('aggiunta', '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:36,477 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\statistiche\riepilogo e somme spese finali sulla mail del venduto
2021-01-10 15:29:36,478 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1795 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1795, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-14 17:47:49', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-08-14 17:47:49', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-14 17:47:49', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:36,482 [64] DEBUG dn_lib.tools.log - added file 4247: C:\root\todd\_test\dn\statistiche\200814.riepilogo e somme spese finali sulla mail del venduto.ok.new.molina.task\i.txt
2021-01-10 15:29:36,483 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4247;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4247, '.txt', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-14 17:47:49', 120));
2021-01-10 15:29:36,486 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1404;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1404, 4247, @content
          , convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-14 17:47:49', 120));
2021-01-10 15:29:36,488 [64] DEBUG dn_lib.tools.log - lette note task 1404
2021-01-10 15:29:36,488 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\statistiche\200814.riepilogo e somme spese finali sulla mail del venduto.ok.new.molina.task\i.txt'
2021-01-10 15:29:36,489 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1404) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:36,497 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1789 
        and folder_name = '200818.col019r non appare dopo il riordino dei pezzi.ok.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1789, '200818.col019r non appare dopo il riordino dei pezzi.ok.molina.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-18 12:16:44', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-08-18 12:16:44', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-18 12:16:44', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:36,501 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\statistiche\200818.col019r non appare dopo il riordino dei pezzi.ok.molina.task
2021-01-10 15:29:36,524 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1796 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1796, null, left('col019r non appare dopo il riordino dei pezzi', 150)
            , NULL, convert(datetime, '2020-08-18 00:00:00', 120), convert(datetime, '2020-08-18 12:16:44', 120), 1
            , 'fatto', NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-08-18 00:00:00', 120), dt_upd = convert(datetime, '2020-08-18 12:16:44', 120)
         , title = left('col019r non appare dopo il riordino dei pezzi', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = NULL, stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-08-18 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-08-18 12:16:44', 120), getdate())
          or isnull(title, '') <> isnull('col019r non appare dopo il riordino dei pezzi', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:36,530 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\statistiche\col019r non appare dopo il riordino dei pezzi
2021-01-10 15:29:36,531 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1796 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1796, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-18 12:16:44', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-08-18 12:16:44', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-18 12:16:44', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:36,535 [64] DEBUG dn_lib.tools.log - added file 4248: C:\root\todd\_test\dn\statistiche\200818.col019r non appare dopo il riordino dei pezzi.ok.molina.task\i.txt
2021-01-10 15:29:36,537 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4248;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4248, '.txt', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-18 12:16:44', 120));
2021-01-10 15:29:36,540 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1405;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1405, 4248, @content
          , convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-18 12:16:44', 120));
2021-01-10 15:29:36,542 [64] DEBUG dn_lib.tools.log - lette note task 1405
2021-01-10 15:29:36,543 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\statistiche\200818.col019r non appare dopo il riordino dei pezzi.ok.molina.task\i.txt'
2021-01-10 15:29:36,544 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1405) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:36,551 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1789 
        and folder_name = '200818.grafico a torta.incompleta.new.3g.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1789, '200818.grafico a torta.incompleta.new.3g.molina.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-18 17:43:50', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-08-18 17:43:50', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-18 17:43:50', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:36,555 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\statistiche\200818.grafico a torta.incompleta.new.3g.molina.task
2021-01-10 15:29:36,597 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1797 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1797, null, left('grafico a torta', 150)
            , NULL, convert(datetime, '2020-08-18 00:00:00', 120), convert(datetime, '2020-08-18 17:43:50', 120), 1
            , 'incompleto', NULL, 'aggiunta', 'tre_giorni');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-08-18 00:00:00', 120), dt_upd = convert(datetime, '2020-08-18 17:43:50', 120)
         , title = left('grafico a torta', 150), [user] = NULL
         , stato = 'incompleto', priorita = NULL
         , tipo = 'aggiunta', stima = 'tre_giorni'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-08-18 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-08-18 17:43:50', 120), getdate())
          or isnull(title, '') <> isnull('grafico a torta', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('incompleto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('aggiunta', '') or isnull(stima, '') <> isnull('tre_giorni', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:36,603 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\statistiche\grafico a torta
2021-01-10 15:29:36,604 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1797 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1797, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-19 09:07:22', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-08-19 09:07:22', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-19 09:07:22', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:36,609 [64] DEBUG dn_lib.tools.log - added file 4249: C:\root\todd\_test\dn\statistiche\200818.grafico a torta.incompleta.new.3g.molina.task\i.txt
2021-01-10 15:29:36,610 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4249;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4249, '.txt', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-19 09:07:22', 120));
2021-01-10 15:29:36,612 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1406;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1406, 4249, @content
          , convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-19 09:07:22', 120));
2021-01-10 15:29:36,615 [64] DEBUG dn_lib.tools.log - lette note task 1406
2021-01-10 15:29:36,616 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\statistiche\200818.grafico a torta.incompleta.new.3g.molina.task\i.txt'
2021-01-10 15:29:36,617 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1797 and file_name = 'sql.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1797, 'sql.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-18 17:43:49', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-08-18 17:43:49', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-18 17:43:49', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:36,621 [64] DEBUG dn_lib.tools.log - added file 4250: C:\root\todd\_test\dn\statistiche\200818.grafico a torta.incompleta.new.3g.molina.task\sql.sql
2021-01-10 15:29:36,623 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4250;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4250, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-18 17:43:49', 120));
2021-01-10 15:29:36,625 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\statistiche\200818.grafico a torta.incompleta.new.3g.molina.task\sql.sql'
2021-01-10 15:29:36,627 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1406) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:36,636 [64] DEBUG dn_lib.tools.log - updated task: C:\root\todd\_test\dn\statistiche\grafico a torta
2021-01-10 15:29:36,636 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1789 
        and folder_name = '200819.aggiunta colonne fatturato.ok.mg.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1789, '200819.aggiunta colonne fatturato.ok.mg.molina.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-21 08:34:03', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-08-21 08:34:03', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-21 08:34:03', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:36,640 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\statistiche\200819.aggiunta colonne fatturato.ok.mg.molina.task
2021-01-10 15:29:36,671 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1798 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1798, null, left('aggiunta colonne fatturato', 150)
            , NULL, convert(datetime, '2020-08-19 00:00:00', 120), convert(datetime, '2020-08-21 08:34:03', 120), 1
            , 'fatto', NULL, NULL, 'mezza');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-08-19 00:00:00', 120), dt_upd = convert(datetime, '2020-08-21 08:34:03', 120)
         , title = left('aggiunta colonne fatturato', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = NULL, stima = 'mezza'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-08-19 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-08-21 08:34:03', 120), getdate())
          or isnull(title, '') <> isnull('aggiunta colonne fatturato', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull('mezza', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:36,677 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\statistiche\aggiunta colonne fatturato
2021-01-10 15:29:36,678 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1798 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1798, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-21 11:12:07', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-08-21 11:12:07', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-21 11:12:07', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:36,682 [64] DEBUG dn_lib.tools.log - added file 4251: C:\root\todd\_test\dn\statistiche\200819.aggiunta colonne fatturato.ok.mg.molina.task\i.txt
2021-01-10 15:29:36,683 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4251;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4251, '.txt', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-21 11:12:07', 120));
2021-01-10 15:29:36,685 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1407;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1407, 4251, @content
          , convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-21 11:12:07', 120));
2021-01-10 15:29:36,687 [64] DEBUG dn_lib.tools.log - lette note task 1407
2021-01-10 15:29:36,688 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\statistiche\200819.aggiunta colonne fatturato.ok.mg.molina.task\i.txt'
2021-01-10 15:29:36,689 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1798 and file_name = 'sql.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1798, 'sql.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-21 08:34:03', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-08-21 08:34:03', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-21 08:34:03', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:36,693 [64] DEBUG dn_lib.tools.log - added file 4252: C:\root\todd\_test\dn\statistiche\200819.aggiunta colonne fatturato.ok.mg.molina.task\sql.sql
2021-01-10 15:29:36,694 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4252;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4252, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-21 08:34:03', 120));
2021-01-10 15:29:36,696 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\statistiche\200819.aggiunta colonne fatturato.ok.mg.molina.task\sql.sql'
2021-01-10 15:29:36,697 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1407) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:36,705 [64] DEBUG dn_lib.tools.log - updated task: C:\root\todd\_test\dn\statistiche\aggiunta colonne fatturato
2021-01-10 15:29:36,706 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1789 
        and folder_name = '200819.report categorie magazzino da chiudere.ok.molina.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1789, '200819.report categorie magazzino da chiudere.ok.molina.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-19 16:16:05', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-08-19 16:16:05', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-19 16:16:05', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:36,710 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\statistiche\200819.report categorie magazzino da chiudere.ok.molina.task
2021-01-10 15:29:36,735 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1799 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1799, null, left('report categorie magazzino da chiudere', 150)
            , NULL, convert(datetime, '2020-08-19 00:00:00', 120), convert(datetime, '2020-08-19 16:16:05', 120), 1
            , 'fatto', NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-08-19 00:00:00', 120), dt_upd = convert(datetime, '2020-08-19 16:16:05', 120)
         , title = left('report categorie magazzino da chiudere', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = NULL, stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-08-19 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-08-19 16:16:05', 120), getdate())
          or isnull(title, '') <> isnull('report categorie magazzino da chiudere', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:36,742 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\statistiche\report categorie magazzino da chiudere
2021-01-10 15:29:36,743 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1799 and file_name = 'sql.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1799, 'sql.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-19 16:16:05', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-08-19 16:16:05', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-19 16:16:05', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:36,748 [64] DEBUG dn_lib.tools.log - added file 4253: C:\root\todd\_test\dn\statistiche\200819.report categorie magazzino da chiudere.ok.molina.task\sql.sql
2021-01-10 15:29:36,749 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4253;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4253, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-19 16:16:05', 120));
2021-01-10 15:29:36,752 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\statistiche\200819.report categorie magazzino da chiudere.ok.molina.task\sql.sql'
2021-01-10 15:29:36,753 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1408) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:36,763 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1789 
        and folder_name = '200825.fatturati manager non vanno per codice dipa.molina.ok.fix.mh.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1789, '200825.fatturati manager non vanno per codice dipa.molina.ok.fix.mh.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-25 10:29:58', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-08-25 10:29:58', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-25 10:29:58', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:36,768 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\statistiche\200825.fatturati manager non vanno per codice dipa.molina.ok.fix.mh.task
2021-01-10 15:29:36,808 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1800 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1800, null, left('fatturati manager non vanno per codice dipa', 150)
            , NULL, convert(datetime, '2020-08-25 00:00:00', 120), convert(datetime, '2020-08-25 10:29:58', 120), 1
            , 'fatto', NULL, 'fix', 'mezzora');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-08-25 00:00:00', 120), dt_upd = convert(datetime, '2020-08-25 10:29:58', 120)
         , title = left('fatturati manager non vanno per codice dipa', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = 'mezzora'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-08-25 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-08-25 10:29:58', 120), getdate())
          or isnull(title, '') <> isnull('fatturati manager non vanno per codice dipa', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull('mezzora', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:36,814 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\statistiche\fatturati manager non vanno per codice dipa
2021-01-10 15:29:36,815 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1409) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:36,822 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1789 
        and folder_name = '200825.segnalazione prodotti invenduti.molina.ok.new.h.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1789, '200825.segnalazione prodotti invenduti.molina.ok.new.h.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-25 14:02:54', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-08-25 14:02:54', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-25 14:02:54', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:36,827 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\statistiche\200825.segnalazione prodotti invenduti.molina.ok.new.h.task
2021-01-10 15:29:36,866 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1801 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1801, null, left('segnalazione prodotti invenduti', 150)
            , NULL, convert(datetime, '2020-08-25 00:00:00', 120), convert(datetime, '2020-08-25 14:02:54', 120), 1
            , 'fatto', NULL, 'aggiunta', 'ora');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-08-25 00:00:00', 120), dt_upd = convert(datetime, '2020-08-25 14:02:54', 120)
         , title = left('segnalazione prodotti invenduti', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'aggiunta', stima = 'ora'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-08-25 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-08-25 14:02:54', 120), getdate())
          or isnull(title, '') <> isnull('segnalazione prodotti invenduti', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('aggiunta', '') or isnull(stima, '') <> isnull('ora', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:36,872 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\statistiche\segnalazione prodotti invenduti
2021-01-10 15:29:36,873 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1801 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1801, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-26 16:42:31', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-08-26 16:42:31', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-26 16:42:31', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:36,877 [64] DEBUG dn_lib.tools.log - added file 4254: C:\root\todd\_test\dn\statistiche\200825.segnalazione prodotti invenduti.molina.ok.new.h.task\i.txt
2021-01-10 15:29:36,878 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4254;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4254, '.txt', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-26 16:42:31', 120));
2021-01-10 15:29:36,880 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1410;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1410, 4254, @content
          , convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-26 16:42:31', 120));
2021-01-10 15:29:36,882 [64] DEBUG dn_lib.tools.log - lette note task 1410
2021-01-10 15:29:36,883 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\statistiche\200825.segnalazione prodotti invenduti.molina.ok.new.h.task\i.txt'
2021-01-10 15:29:36,883 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1801 and file_name = 'prodotti invenduti.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1801, 'prodotti invenduti.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-25 12:22:59', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-08-25 12:22:59', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-25 12:22:59', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:36,888 [64] DEBUG dn_lib.tools.log - added file 4255: C:\root\todd\_test\dn\statistiche\200825.segnalazione prodotti invenduti.molina.ok.new.h.task\prodotti invenduti.sql
2021-01-10 15:29:36,889 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4255;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4255, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-25 12:22:59', 120));
2021-01-10 15:29:36,892 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\statistiche\200825.segnalazione prodotti invenduti.molina.ok.new.h.task\prodotti invenduti.sql'
2021-01-10 15:29:36,893 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1410) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:36,901 [64] DEBUG dn_lib.tools.log - updated task: C:\root\todd\_test\dn\statistiche\segnalazione prodotti invenduti
2021-01-10 15:29:36,903 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1789 
        and folder_name = '200826.rimanenze di magazzino nei fatturati.molina.ok.new.h.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1789, '200826.rimanenze di magazzino nei fatturati.molina.ok.new.h.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-26 14:26:14', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-08-26 14:26:14', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-26 14:26:14', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:36,907 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\statistiche\200826.rimanenze di magazzino nei fatturati.molina.ok.new.h.task
2021-01-10 15:29:36,951 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1802 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1802, null, left('rimanenze di magazzino nei fatturati', 150)
            , NULL, convert(datetime, '2020-08-26 00:00:00', 120), convert(datetime, '2020-08-26 14:26:14', 120), 1
            , 'fatto', NULL, 'aggiunta', 'ora');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-08-26 00:00:00', 120), dt_upd = convert(datetime, '2020-08-26 14:26:14', 120)
         , title = left('rimanenze di magazzino nei fatturati', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'aggiunta', stima = 'ora'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-08-26 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-08-26 14:26:14', 120), getdate())
          or isnull(title, '') <> isnull('rimanenze di magazzino nei fatturati', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('aggiunta', '') or isnull(stima, '') <> isnull('ora', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:36,957 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\statistiche\rimanenze di magazzino nei fatturati
2021-01-10 15:29:36,958 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1802 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1802, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-26 14:26:14', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-08-26 14:26:14', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-08-26 14:26:14', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:36,963 [64] DEBUG dn_lib.tools.log - added file 4256: C:\root\todd\_test\dn\statistiche\200826.rimanenze di magazzino nei fatturati.molina.ok.new.h.task\i.txt
2021-01-10 15:29:36,964 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4256;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4256, '.txt', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-26 14:26:14', 120));
2021-01-10 15:29:36,966 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1411;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1411, 4256, @content
          , convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-08-26 14:26:14', 120));
2021-01-10 15:29:36,968 [64] DEBUG dn_lib.tools.log - lette note task 1411
2021-01-10 15:29:36,970 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\statistiche\200826.rimanenze di magazzino nei fatturati.molina.ok.new.h.task\i.txt'
2021-01-10 15:29:36,971 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1411) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:36,978 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1789 
        and folder_name = '201002.statistiche articoli duplicati fornitori.molina.ok.rev.2h.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1789, '201002.statistiche articoli duplicati fornitori.molina.ok.rev.2h.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-10-05 09:38:53', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-10-05 09:38:53', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-05 09:38:53', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:36,983 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\statistiche\201002.statistiche articoli duplicati fornitori.molina.ok.rev.2h.task
2021-01-10 15:29:37,023 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1803 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1803, null, left('statistiche articoli duplicati fornitori', 150)
            , NULL, convert(datetime, '2020-10-02 00:00:00', 120), convert(datetime, '2020-10-05 09:38:53', 120), 1
            , 'fatto', NULL, 'revisione', 'due_ore');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-10-02 00:00:00', 120), dt_upd = convert(datetime, '2020-10-05 09:38:53', 120)
         , title = left('statistiche articoli duplicati fornitori', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'revisione', stima = 'due_ore'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-10-02 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-10-05 09:38:53', 120), getdate())
          or isnull(title, '') <> isnull('statistiche articoli duplicati fornitori', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('revisione', '') or isnull(stima, '') <> isnull('due_ore', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:37,028 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\statistiche\statistiche articoli duplicati fornitori
2021-01-10 15:29:37,030 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1803 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1803, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-10-05 09:39:43', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-10-05 09:39:43', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-05 09:39:43', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:37,034 [64] DEBUG dn_lib.tools.log - added file 4257: C:\root\todd\_test\dn\statistiche\201002.statistiche articoli duplicati fornitori.molina.ok.rev.2h.task\i.txt
2021-01-10 15:29:37,035 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4257;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4257, '.txt', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-10-05 09:39:43', 120));
2021-01-10 15:29:37,037 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1412;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1412, 4257, @content
          , convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-10-05 09:39:43', 120));
2021-01-10 15:29:37,039 [64] DEBUG dn_lib.tools.log - lette note task 1412
2021-01-10 15:29:37,040 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\statistiche\201002.statistiche articoli duplicati fornitori.molina.ok.rev.2h.task\i.txt'
2021-01-10 15:29:37,041 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1803 and file_name = 'task.statistiche schede duplicate.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1803, 'task.statistiche schede duplicate.sql', '.sql', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-10-05 09:38:12', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-10-05 09:38:12', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-05 09:38:12', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:37,047 [64] DEBUG dn_lib.tools.log - added file 4258: C:\root\todd\_test\dn\statistiche\201002.statistiche articoli duplicati fornitori.molina.ok.rev.2h.task\task.statistiche schede duplicate.sql
2021-01-10 15:29:37,048 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4258;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4258, '.sql', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-10-05 09:38:12', 120));
2021-01-10 15:29:37,051 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\statistiche\201002.statistiche articoli duplicati fornitori.molina.ok.rev.2h.task\task.statistiche schede duplicate.sql'
2021-01-10 15:29:37,052 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1412) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:37,060 [64] DEBUG dn_lib.tools.log - updated task: C:\root\todd\_test\dn\statistiche\statistiche articoli duplicati fornitori
2021-01-10 15:29:37,062 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1789 
        and folder_name = '201009.sistemata mail venduto.molina.ok.rev.mg.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1789, '201009.sistemata mail venduto.molina.ok.rev.mg.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-10-09 12:38:12', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-10-09 12:38:12', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-09 12:38:12', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:37,067 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\statistiche\201009.sistemata mail venduto.molina.ok.rev.mg.task
2021-01-10 15:29:37,108 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1804 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1804, null, left('sistemata mail venduto', 150)
            , NULL, convert(datetime, '2020-10-09 00:00:00', 120), convert(datetime, '2020-10-09 12:38:12', 120), 1
            , 'fatto', NULL, 'revisione', 'mezza');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-10-09 00:00:00', 120), dt_upd = convert(datetime, '2020-10-09 12:38:12', 120)
         , title = left('sistemata mail venduto', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'revisione', stima = 'mezza'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-10-09 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-10-09 12:38:12', 120), getdate())
          or isnull(title, '') <> isnull('sistemata mail venduto', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('revisione', '') or isnull(stima, '') <> isnull('mezza', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:37,114 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\statistiche\sistemata mail venduto
2021-01-10 15:29:37,115 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1804 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1804, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-10-09 12:38:12', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-10-09 12:38:12', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-09 12:38:12', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:37,120 [64] DEBUG dn_lib.tools.log - added file 4259: C:\root\todd\_test\dn\statistiche\201009.sistemata mail venduto.molina.ok.rev.mg.task\i.txt
2021-01-10 15:29:37,121 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4259;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4259, '.txt', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-10-09 12:38:12', 120));
2021-01-10 15:29:37,123 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1413;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1413, 4259, @content
          , convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-10-09 12:38:12', 120));
2021-01-10 15:29:37,125 [64] DEBUG dn_lib.tools.log - lette note task 1413
2021-01-10 15:29:37,126 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\statistiche\201009.sistemata mail venduto.molina.ok.rev.mg.task\i.txt'
2021-01-10 15:29:37,126 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1413) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:37,134 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1789 
        and folder_name = '201015.revisione mail venduto.molina.ok.new.mg.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1789, '201015.revisione mail venduto.molina.ok.new.mg.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-10-15 09:52:46', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-10-15 09:52:46', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-15 09:52:46', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:37,139 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\statistiche\201015.revisione mail venduto.molina.ok.new.mg.task
2021-01-10 15:29:37,177 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1805 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1805, null, left('revisione mail venduto', 150)
            , NULL, convert(datetime, '2020-10-15 00:00:00', 120), convert(datetime, '2020-10-15 09:52:46', 120), 1
            , 'fatto', NULL, 'aggiunta', 'mezza');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-10-15 00:00:00', 120), dt_upd = convert(datetime, '2020-10-15 09:52:46', 120)
         , title = left('revisione mail venduto', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'aggiunta', stima = 'mezza'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-10-15 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-10-15 09:52:46', 120), getdate())
          or isnull(title, '') <> isnull('revisione mail venduto', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('aggiunta', '') or isnull(stima, '') <> isnull('mezza', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:37,183 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\statistiche\revisione mail venduto
2021-01-10 15:29:37,185 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1805 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1805, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-10-19 10:15:40', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-10-19 10:15:40', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-19 10:15:40', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:37,189 [64] DEBUG dn_lib.tools.log - added file 4260: C:\root\todd\_test\dn\statistiche\201015.revisione mail venduto.molina.ok.new.mg.task\i.txt
2021-01-10 15:29:37,190 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4260;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4260, '.txt', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-10-19 10:15:40', 120));
2021-01-10 15:29:37,193 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1414;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1414, 4260, @content
          , convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-10-19 10:15:40', 120));
2021-01-10 15:29:37,195 [64] DEBUG dn_lib.tools.log - lette note task 1414
2021-01-10 15:29:37,196 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\statistiche\201015.revisione mail venduto.molina.ok.new.mg.task\i.txt'
2021-01-10 15:29:37,197 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1414) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:37,205 [64] DEBUG dn_lib.tools.log - updated task: C:\root\todd\_test\dn\statistiche\revisione mail venduto
2021-01-10 15:29:37,206 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1789 
        and folder_name = '201023.aggiornamento mail venduto del giorno.molina.ok.fix.mg.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1789, '201023.aggiornamento mail venduto del giorno.molina.ok.fix.mg.task', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-10-23 16:22:23', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-10-23 16:22:23', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-23 16:22:23', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 15:29:37,211 [64] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\statistiche\201023.aggiornamento mail venduto del giorno.molina.ok.fix.mg.task
2021-01-10 15:29:37,252 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1806 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1806, null, left('aggiornamento mail venduto del giorno', 150)
            , NULL, convert(datetime, '2020-10-23 00:00:00', 120), convert(datetime, '2020-10-23 16:22:23', 120), 1
            , 'fatto', NULL, 'fix', 'mezza');
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2020-10-23 00:00:00', 120), dt_upd = convert(datetime, '2020-10-23 16:22:23', 120)
         , title = left('aggiornamento mail venduto del giorno', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = 'fix', stima = 'mezza'
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2020-10-23 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2020-10-23 16:22:23', 120), getdate())
          or isnull(title, '') <> isnull('aggiornamento mail venduto del giorno', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull('fix', '') or isnull(stima, '') <> isnull('mezza', ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 15:29:37,257 [64] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\statistiche\aggiornamento mail venduto del giorno
2021-01-10 15:29:37,258 [64] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1806 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1806, 'i.txt', '.txt', 1, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-10-23 16:23:35', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 15:40:16', 120), dt_upd = convert(datetime, '2020-10-23 16:23:35', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 15:40:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2020-10-23 16:23:35', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 15:29:37,262 [64] DEBUG dn_lib.tools.log - added file 4261: C:\root\todd\_test\dn\statistiche\201023.aggiornamento mail venduto del giorno.molina.ok.fix.mg.task\i.txt
2021-01-10 15:29:37,263 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4261;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4261, '.txt', @content, convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-10-23 16:23:35', 120));
2021-01-10 15:29:37,265 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1415;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1415, 4261, @content
          , convert(datetime, '2021-01-07 15:40:16', 120), convert(datetime, '2020-10-23 16:23:35', 120));
2021-01-10 15:29:37,268 [64] DEBUG dn_lib.tools.log - lette note task 1415
2021-01-10 15:29:37,268 [64] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\statistiche\201023.aggiornamento mail venduto del giorno.molina.ok.fix.mg.task\i.txt'
2021-01-10 15:29:37,270 [64] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1415) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 15:29:37,279 [64] DEBUG dn_lib.tools.log - updated task: C:\root\todd\_test\dn\statistiche\aggiornamento mail venduto del giorno
2021-01-10 15:29:39,621 [64] DEBUG dn_lib.tools.log - SQL: delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
2021-01-10 15:29:40,608 [64] DEBUG dn_lib.tools.log - cancellati 21 files/folders/tasks
2021-01-10 15:29:45,032 [64] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '704')
        else update users_cache set var_value = substring('704', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-01-10 15:29:45,405 [64] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '335')
        else update users_cache set var_value = substring('335', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-01-10 15:29:45,731 [64] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/01/10 12:16:36')
        else update users_cache set var_value = substring('2021/01/10 12:16:36', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-01-10 15:29:47,214 [64] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/01/10 15:29:47')
        else update users_cache set var_value = substring('2021/01/10 15:29:47', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-01-10 15:29:54,716 [64] INFO dn_lib.tools.log - reload config docs
2021-01-10 15:29:54,718 [64] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 15:29:54,719 [64] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 15:29:54,720 [64] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 15:29:54,721 [64] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 15:29:54,721 [64] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 15:29:54,722 [64] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 15:29:54,723 [64] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 15:29:54,724 [64] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 15:29:54,725 [64] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 15:29:54,726 [64] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 15:29:54,727 [64] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 15:29:54,728 [64] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 15:29:54,729 [64] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 15:29:54,729 [64] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 15:29:54,730 [64] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 15:29:54,732 [64] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 15:29:54,733 [64] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 15:29:54,733 [64] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 15:29:54,734 [64] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 15:29:54,735 [64] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 15:29:54,735 [64] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 15:29:54,736 [64] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 15:29:54,737 [64] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 15:29:54,737 [64] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 15:29:54,738 [64] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 15:29:55,149 [64] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-01-10 15:29:55,150 [64] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-01-10 15:29:55,152 [64] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-01-10 15:29:55,153 [64] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-01-10 15:29:55,154 [64] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-last')
2021-01-10 15:29:55,155 [64] DEBUG dn_lib.tools.log - SQL: select setting_id, setting_name, setting_var, machine_name
        from settings where setting_name = 'synch-seconds' and isnull(machine_name, '') = ''
2021-01-10 15:30:02,597 [52] INFO dn_lib.tools.log - reload config docs
2021-01-10 15:30:02,598 [52] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 15:30:02,599 [52] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 15:30:02,600 [52] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 15:30:02,601 [52] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 15:30:02,602 [52] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 15:30:02,603 [52] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 15:30:02,603 [52] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 15:30:02,604 [52] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 15:30:02,605 [52] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 15:30:02,606 [52] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 15:30:02,606 [52] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 15:30:02,607 [52] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 15:30:02,608 [52] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 15:30:02,609 [52] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 15:30:02,609 [52] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 15:30:02,610 [52] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 15:30:02,610 [52] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 15:30:02,611 [52] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 15:30:02,611 [52] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 15:30:02,612 [52] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 15:30:02,613 [52] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 15:30:02,614 [52] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 15:30:02,614 [52] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 15:30:02,615 [52] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 15:30:02,616 [52] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 15:30:02,625 [52] DEBUG dn_lib.tools.log - SQL: select task_filter_id, filter_title, filter_notes, filter_def, filter_class
 from dn_tasks_filters order by filter_order
2021-01-10 15:30:02,627 [52] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 0 and var_name in ('active-task-filter')
2021-01-10 15:30:02,628 [52] DEBUG dn_lib.tools.log - SQL: select ft.tp, ft.synch_folder_id, ft.folder_id, ft.parent_id, ft.title
       , ft.des, ft.http_path, ft.lvl, dbo.folder_path(ft.folder_id) as folder_path
       , (select top 1 1 from dn_tasks where folder_id = ft.folder_id) as is_task
      from dbo.fnc_dn_folders(null, null) ft
      
      order by ft.synch_folder_id, ft.lvl, ft.title
2021-01-10 15:30:02,693 [52] DEBUG dn_lib.tools.log - SQL: select f.synch_folder_id, f.file_id, f.folder_id, f.file_name, f.dt_ins , null as found_file
       from dn_files f
       where exists (select top 1 1 from dbo.fnc_dn_folders(null, null) ft 
        
	      where ft.synch_folder_id = f.synch_folder_id 
          and isnull(ft.folder_id, 0) = isnull(f.folder_id, 0))
2021-01-10 15:30:02,742 [52] DEBUG dn_lib.tools.log - SQL: select t3.*
      , tst.stato, tst.[order] as stato_order, isnull(tst.class, 'light') as stato_class, isnull(tst.title_plurale, '') as stato_title_plurale, isnull(tst.title_singolare, '') as stato_title_singolare
      , tp.priorita, tp.[order] as priorita_order, isnull(tp.class, 'light') as priorita_class, isnull(tp.title_plurale, '') as priorita_title_plurale, isnull(tp.title_singolare, '') as priorita_title_singolare
      , tt.tipo, tt.[order] as tipo_order, isnull(tt.class, 'light') as tipo_class, isnull(tt.title_plurale, '') as tipo_title_plurale, isnull(tt.title_singolare, '') as tipo_title_singolare
      , ts.stima, ts.[days] as stima_days, isnull(ts.class, 'light') as stima_class, isnull(ts.title_plurale, '') as stima_title_plurale, isnull(ts.title_singolare, '') as stima_title_singolare
      , (select top 1 1 from dn_tasks_notes where task_id = t3.task_id) as task_notes
      , (select top 1 1 from vw_task_allegati f2 where f2.task_id = t3.task_id 
          and not exists (select top 1 1 from dn_files_info where file_name = f2.file_name)) as task_files
  from (select t2.*, datediff(day, t2.dt_ref, getdate()) as diff_days
    from (select t.task_id, t.synch_folder_id, isnull(t.folder_id, f.folder_id) as folder_id
	   , t.file_id, t.title, t.[user], t.stato, t.priorita, t.tipo, t.stima, t.dt_ins, t.dt_upd
     , (case when t.dt_ins > t.dt_upd then t.dt_ins else t.dt_upd end) as dt_ref
	  from dn_tasks t
    
	  left join dn_files f on f.file_id = t.file_id
    where (null is null or (null is not null and t.task_id = null)) ) t2
    where exists (select top 1 1 from dbo.fnc_dn_folders(null, null) ft 
	    where  ft.synch_folder_id = t2.synch_folder_id 
       and isnull(ft.folder_id, 0) = isnull(t2.folder_id, 0))) t3
   left join dn_task_stato tst on tst.stato = t3.stato
   left join dn_task_priorita tp on tp.priorita = t3.priorita
   left join dn_task_tipo tt on tt.tipo = t3.tipo
   left join dn_task_stima ts on ts.stima = t3.stima
   where 1 = 1 
2021-01-10 15:30:02,880 [52] DEBUG dn_lib.tools.log - SQL: select title_singolare, stato from dn_task_stato order by [order]
2021-01-10 15:30:03,089 [52] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, priorita as [value], [order] from dn_task_priorita
      ) t order by t.[order]
2021-01-10 15:30:03,091 [52] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [days]
       union select title_singolare as title, stima as [value], [days] from dn_task_stima 
       ) t order by t.[days]
2021-01-10 15:30:03,092 [52] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, tipo as [value], [order] from dn_task_tipo
       ) t order by t.[order]
2021-01-10 15:30:03,093 [52] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value]
       union select nome as title, nome as [value] from users
       ) t order by 2
2021-01-10 15:30:14,717 [64] INFO dn_lib.tools.log - reload config docs
2021-01-10 15:30:14,718 [64] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 15:30:14,719 [64] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 15:30:14,720 [64] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 15:30:14,720 [64] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 15:30:14,721 [64] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 15:30:14,722 [64] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 15:30:14,722 [64] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 15:30:14,723 [64] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 15:30:14,723 [64] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 15:30:14,724 [64] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 15:30:14,724 [64] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 15:30:14,725 [64] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 15:30:14,725 [64] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 15:30:14,725 [64] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 15:30:14,726 [64] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 15:30:14,727 [64] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 15:30:14,727 [64] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 15:30:14,727 [64] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 15:30:14,728 [64] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 15:30:14,729 [64] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 15:30:14,729 [64] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 15:30:14,730 [64] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 15:30:14,730 [64] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 15:30:14,731 [64] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 15:30:14,732 [64] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 15:30:22,325 [64] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-01-10 15:30:22,327 [64] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-01-10 15:30:22,328 [64] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-01-10 15:30:22,330 [64] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-01-10 15:30:25,437 [64] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-last')
2021-01-10 15:30:25,834 [64] DEBUG dn_lib.tools.log - SQL: select setting_id, setting_name, setting_var, machine_name
        from settings where setting_name = 'synch-seconds' and isnull(machine_name, '') = ''
2021-01-10 17:31:20,490 [8] INFO dn_lib.tools.log - reload core
2021-01-10 17:31:20,524 [8] INFO dn_lib.tools.log - reload config docs
2021-01-10 17:31:20,527 [8] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 17:31:20,529 [8] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 17:31:20,530 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 17:31:20,532 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 17:31:20,539 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 17:31:20,549 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 17:31:20,551 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 17:31:20,553 [8] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 17:31:20,554 [8] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 17:31:20,556 [8] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 17:31:20,557 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 17:31:20,558 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 17:31:20,559 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 17:31:20,560 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 17:31:20,562 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 17:31:20,563 [8] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 17:31:20,564 [8] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 17:31:20,569 [8] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 17:31:20,571 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 17:31:20,573 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 17:31:20,573 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 17:31:20,575 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 17:31:20,576 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 17:31:20,577 [8] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 17:31:20,579 [8] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 17:31:20,671 [9] INFO dn_lib.tools.log - reload config docs
2021-01-10 17:31:20,672 [9] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 17:31:20,673 [9] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 17:31:20,673 [9] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 17:31:20,674 [9] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 17:31:20,675 [9] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 17:31:20,675 [9] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 17:31:20,676 [9] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 17:31:20,677 [9] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 17:31:20,678 [9] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 17:31:20,678 [9] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 17:31:20,679 [9] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 17:31:20,679 [9] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 17:31:20,680 [9] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 17:31:20,680 [9] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 17:31:20,681 [9] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 17:31:20,681 [9] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 17:31:20,682 [9] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 17:31:20,682 [9] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 17:31:20,683 [9] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 17:31:20,684 [9] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 17:31:20,684 [9] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 17:31:20,685 [9] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 17:31:20,685 [9] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 17:31:20,686 [9] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 17:31:20,686 [9] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 17:31:20,755 [8] INFO dn_lib.tools.log - reload config docs
2021-01-10 17:31:20,756 [8] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 17:31:20,757 [8] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 17:31:20,757 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 17:31:20,758 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 17:31:20,759 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 17:31:20,760 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 17:31:20,761 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 17:31:20,762 [8] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 17:31:20,763 [8] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 17:31:20,763 [8] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 17:31:20,764 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 17:31:20,765 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 17:31:20,765 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 17:31:20,766 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 17:31:20,767 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 17:31:20,767 [8] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 17:31:20,768 [8] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 17:31:20,769 [8] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 17:31:20,769 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 17:31:20,770 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 17:31:20,771 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 17:31:20,771 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 17:31:20,772 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 17:31:20,773 [8] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 17:31:20,778 [8] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 17:31:20,806 [8] DEBUG dn_lib.tools.log - SQL: select task_filter_id, filter_title, filter_notes, filter_def, filter_class
 from dn_tasks_filters order by filter_order
2021-01-10 17:31:20,812 [8] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 0 and var_name in ('active-task-filter')
2021-01-10 17:31:20,817 [8] DEBUG dn_lib.tools.log - SQL: select ft.tp, ft.synch_folder_id, ft.folder_id, ft.parent_id, ft.title
       , ft.des, ft.http_path, ft.lvl, dbo.folder_path(ft.folder_id) as folder_path
       , (select top 1 1 from dn_tasks where folder_id = ft.folder_id) as is_task
      from dbo.fnc_dn_folders(null, null) ft
      
      order by ft.synch_folder_id, ft.lvl, ft.title
2021-01-10 17:31:20,885 [8] DEBUG dn_lib.tools.log - SQL: select f.synch_folder_id, f.file_id, f.folder_id, f.file_name, f.dt_ins , null as found_file
       from dn_files f
       where exists (select top 1 1 from dbo.fnc_dn_folders(null, null) ft 
        
	      where ft.synch_folder_id = f.synch_folder_id 
          and isnull(ft.folder_id, 0) = isnull(f.folder_id, 0))
2021-01-10 17:31:20,940 [8] DEBUG dn_lib.tools.log - SQL: select t3.*
      , tst.stato, tst.[order] as stato_order, isnull(tst.class, 'light') as stato_class, isnull(tst.title_plurale, '') as stato_title_plurale, isnull(tst.title_singolare, '') as stato_title_singolare
      , tp.priorita, tp.[order] as priorita_order, isnull(tp.class, 'light') as priorita_class, isnull(tp.title_plurale, '') as priorita_title_plurale, isnull(tp.title_singolare, '') as priorita_title_singolare
      , tt.tipo, tt.[order] as tipo_order, isnull(tt.class, 'light') as tipo_class, isnull(tt.title_plurale, '') as tipo_title_plurale, isnull(tt.title_singolare, '') as tipo_title_singolare
      , ts.stima, ts.[days] as stima_days, isnull(ts.class, 'light') as stima_class, isnull(ts.title_plurale, '') as stima_title_plurale, isnull(ts.title_singolare, '') as stima_title_singolare
      , (select top 1 1 from dn_tasks_notes where task_id = t3.task_id) as task_notes
      , (select top 1 1 from vw_task_allegati f2 where f2.task_id = t3.task_id 
          and not exists (select top 1 1 from dn_files_info where file_name = f2.file_name)) as task_files
  from (select t2.*, datediff(day, t2.dt_ref, getdate()) as diff_days
    from (select t.task_id, t.synch_folder_id, isnull(t.folder_id, f.folder_id) as folder_id
	   , t.file_id, t.title, t.[user], t.stato, t.priorita, t.tipo, t.stima, t.dt_ins, t.dt_upd
     , (case when t.dt_ins > t.dt_upd then t.dt_ins else t.dt_upd end) as dt_ref
	  from dn_tasks t
    
	  left join dn_files f on f.file_id = t.file_id
    where (null is null or (null is not null and t.task_id = null)) ) t2
    where exists (select top 1 1 from dbo.fnc_dn_folders(null, null) ft 
	    where  ft.synch_folder_id = t2.synch_folder_id 
       and isnull(ft.folder_id, 0) = isnull(t2.folder_id, 0))) t3
   left join dn_task_stato tst on tst.stato = t3.stato
   left join dn_task_priorita tp on tp.priorita = t3.priorita
   left join dn_task_tipo tt on tt.tipo = t3.tipo
   left join dn_task_stima ts on ts.stima = t3.stima
   where 1 = 1 
2021-01-10 17:31:21,072 [8] DEBUG dn_lib.tools.log - SQL: select title_singolare, stato from dn_task_stato order by [order]
2021-01-10 17:31:21,336 [8] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, priorita as [value], [order] from dn_task_priorita
      ) t order by t.[order]
2021-01-10 17:31:21,441 [8] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [days]
       union select title_singolare as title, stima as [value], [days] from dn_task_stima 
       ) t order by t.[days]
2021-01-10 17:31:21,443 [8] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, tipo as [value], [order] from dn_task_tipo
       ) t order by t.[order]
2021-01-10 17:31:21,444 [8] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value]
       union select nome as title, nome as [value] from users
       ) t order by 2
2021-01-10 17:31:29,434 [7] INFO dn_lib.tools.log - reload config docs
2021-01-10 17:31:29,435 [7] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 17:31:29,436 [7] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 17:31:29,437 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 17:31:29,437 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 17:31:29,438 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 17:31:29,439 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 17:31:29,439 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 17:31:29,440 [7] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 17:31:29,441 [7] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 17:31:29,441 [7] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 17:31:29,442 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 17:31:29,443 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 17:31:29,444 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 17:31:29,444 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 17:31:29,445 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 17:31:29,446 [7] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 17:31:29,446 [7] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 17:31:29,447 [7] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 17:31:29,447 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 17:31:29,448 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 17:31:29,448 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 17:31:29,449 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 17:31:29,449 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 17:31:29,450 [7] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 17:31:29,451 [7] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 17:31:29,488 [9] INFO dn_lib.tools.log - reload config docs
2021-01-10 17:31:29,489 [9] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 17:31:29,490 [9] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 17:31:29,490 [9] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 17:31:29,491 [9] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 17:31:29,492 [9] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 17:31:29,493 [9] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 17:31:29,494 [9] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 17:31:29,494 [9] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 17:31:29,495 [9] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 17:31:29,496 [9] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 17:31:29,496 [9] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 17:31:29,497 [9] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 17:31:29,497 [9] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 17:31:29,498 [9] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 17:31:29,498 [9] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 17:31:29,499 [9] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 17:31:29,499 [9] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 17:31:29,500 [9] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 17:31:29,500 [9] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 17:31:29,501 [9] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 17:31:29,501 [9] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 17:31:29,502 [9] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 17:31:29,503 [9] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 17:31:29,503 [9] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 17:31:29,504 [9] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 17:31:29,543 [8] INFO dn_lib.tools.log - reload config docs
2021-01-10 17:31:29,544 [8] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 17:31:29,545 [8] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 17:31:29,546 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 17:31:29,547 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 17:31:29,547 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 17:31:29,548 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 17:31:29,549 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 17:31:29,549 [8] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 17:31:29,550 [8] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 17:31:29,551 [8] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 17:31:29,551 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 17:31:29,552 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 17:31:29,553 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 17:31:29,553 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 17:31:29,554 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 17:31:29,554 [8] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 17:31:29,555 [8] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 17:31:29,556 [8] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 17:31:29,556 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 17:31:29,557 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 17:31:29,557 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 17:31:29,558 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 17:31:29,559 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 17:31:29,560 [8] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 17:31:29,561 [8] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 17:31:30,139 [11] INFO dn_lib.tools.log - reload config docs
2021-01-10 17:31:30,140 [11] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 17:31:30,141 [11] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 17:31:30,141 [11] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 17:31:30,142 [11] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 17:31:30,142 [11] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 17:31:30,143 [11] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 17:31:30,143 [11] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 17:31:30,144 [11] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 17:31:30,144 [11] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 17:31:30,145 [11] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 17:31:30,145 [11] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 17:31:30,146 [11] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 17:31:30,146 [11] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 17:31:30,147 [11] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 17:31:30,147 [11] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 17:31:30,147 [11] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 17:31:30,148 [11] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 17:31:30,148 [11] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 17:31:30,149 [11] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 17:31:30,149 [11] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 17:31:30,150 [11] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 17:31:30,150 [11] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 17:31:30,151 [11] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 17:31:30,151 [11] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 17:31:30,152 [11] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 17:31:30,208 [11] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-01-10 17:31:30,210 [11] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-01-10 17:31:30,212 [11] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-01-10 17:31:30,214 [11] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-01-10 17:31:30,216 [11] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-01-10 17:31:30,217 [11] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-01-10 17:31:30,218 [11] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-01-10 17:31:30,220 [11] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-10 17:31:30,226 [11] DEBUG dn_lib.tools.log - lettura cartelle
2021-01-10 17:31:30,227 [11] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-10 17:31:30,228 [11] DEBUG dn_lib.tools.log - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-01-10 17:31:30,230 [11] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-01-10 17:31:30,237 [11] DEBUG dn_lib.tools.log - leggo la cartella C:\root\todd\_test\dn
2021-01-10 17:31:30,239 [11] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = '210107.orches.incorso.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, '210107.orches.incorso.task', 1, convert(datetime, '2021-01-07 17:05:23', 120), convert(datetime, '2021-01-08 11:51:29', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-07 17:05:23', 120), dt_upd = convert(datetime, '2021-01-08 11:51:29', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 17:05:23', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-08 11:51:29', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 17:31:30,242 [11] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\210107.orches.incorso.task
2021-01-10 17:32:35,372 [11] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1807 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1807, null, left('orches', 150)
            , NULL, convert(datetime, '2021-01-07 00:00:00', 120), convert(datetime, '2021-01-08 11:51:29', 120), 1
            , 'in_corso', NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 00:00:00', 120), dt_upd = convert(datetime, '2021-01-08 11:51:29', 120)
         , title = left('orches', 150), [user] = NULL
         , stato = 'in_corso', priorita = NULL
         , tipo = NULL, stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-01-08 11:51:29', 120), getdate())
          or isnull(title, '') <> isnull('orches', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('in_corso', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 17:32:35,387 [11] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\orches
2021-01-10 17:32:35,389 [11] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1807 and file_name = 'badabemmm.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1807, 'badabemmm.sql', '.sql', 1, convert(datetime, '2021-01-07 17:08:29', 120), convert(datetime, '2021-01-07 16:50:48', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 17:08:29', 120), dt_upd = convert(datetime, '2021-01-07 16:50:48', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 17:08:29', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-07 16:50:48', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 17:32:35,396 [11] DEBUG dn_lib.tools.log - added file 4262: C:\root\todd\_test\dn\210107.orches.incorso.task\badabemmm.sql
2021-01-10 17:32:35,400 [11] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4262;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4262, '.sql', @content, convert(datetime, '2021-01-07 17:08:29', 120), convert(datetime, '2021-01-07 16:50:48', 120));
2021-01-10 17:32:35,405 [11] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\210107.orches.incorso.task\badabemmm.sql'
2021-01-10 17:32:35,406 [11] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1807 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1807, 'i.txt', '.txt', 1, convert(datetime, '2021-01-08 11:51:29', 120), convert(datetime, '2021-01-08 11:51:29', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-08 11:51:29', 120), dt_upd = convert(datetime, '2021-01-08 11:51:29', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-08 11:51:29', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-08 11:51:29', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 17:32:35,414 [11] DEBUG dn_lib.tools.log - added file 4263: C:\root\todd\_test\dn\210107.orches.incorso.task\i.txt
2021-01-10 17:32:35,415 [11] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4263;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4263, '.txt', @content, convert(datetime, '2021-01-08 11:51:29', 120), convert(datetime, '2021-01-08 11:51:29', 120));
2021-01-10 17:32:35,419 [11] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1416;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1416, 4263, @content
          , convert(datetime, '2021-01-08 11:51:29', 120), convert(datetime, '2021-01-08 11:51:29', 120));
2021-01-10 17:32:35,423 [11] DEBUG dn_lib.tools.log - lette note task 1416
2021-01-10 17:32:35,424 [11] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\210107.orches.incorso.task\i.txt'
2021-01-10 17:32:35,424 [11] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1807 and file_name = 'yes.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1807, 'yes.sql', '.sql', 1, convert(datetime, '2021-01-07 17:05:34', 120), convert(datetime, '2021-01-07 17:05:34', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 17:05:34', 120), dt_upd = convert(datetime, '2021-01-07 17:05:34', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 17:05:34', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-07 17:05:34', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 17:32:35,432 [11] DEBUG dn_lib.tools.log - added file 4264: C:\root\todd\_test\dn\210107.orches.incorso.task\yes.sql
2021-01-10 17:32:35,433 [11] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4264;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4264, '.sql', @content, convert(datetime, '2021-01-07 17:05:34', 120), convert(datetime, '2021-01-07 17:05:34', 120));
2021-01-10 17:32:35,436 [11] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\210107.orches.incorso.task\yes.sql'
2021-01-10 17:32:35,436 [11] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1416) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 17:32:35,444 [11] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = '210108.orches de dios.ok.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, '210108.orches de dios.ok.task', 1, convert(datetime, '2021-01-08 11:29:56', 120), convert(datetime, '2021-01-08 11:30:44', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-08 11:29:56', 120), dt_upd = convert(datetime, '2021-01-08 11:30:44', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-08 11:29:56', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-08 11:30:44', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 17:32:35,448 [11] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\210108.orches de dios.ok.task
2021-01-10 17:32:39,410 [11] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1808 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1808, null, left('orches de dios', 150)
            , NULL, convert(datetime, '2021-01-08 00:00:00', 120), convert(datetime, '2021-01-08 11:30:44', 120), 1
            , 'fatto', NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-08 00:00:00', 120), dt_upd = convert(datetime, '2021-01-08 11:30:44', 120)
         , title = left('orches de dios', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = NULL, stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-08 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-01-08 11:30:44', 120), getdate())
          or isnull(title, '') <> isnull('orches de dios', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 17:32:39,419 [11] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\orches de dios
2021-01-10 17:32:39,420 [11] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1808 and file_name = 'rincos.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1808, 'rincos.sql', '.sql', 1, convert(datetime, '2021-01-08 11:30:44', 120), convert(datetime, '2021-01-08 11:35:14', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-08 11:30:44', 120), dt_upd = convert(datetime, '2021-01-08 11:35:14', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-08 11:30:44', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-08 11:35:14', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 17:32:39,427 [11] DEBUG dn_lib.tools.log - added file 4265: C:\root\todd\_test\dn\210108.orches de dios.ok.task\rincos.sql
2021-01-10 17:32:39,428 [11] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4265;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4265, '.sql', @content, convert(datetime, '2021-01-08 11:30:44', 120), convert(datetime, '2021-01-08 11:35:14', 120));
2021-01-10 17:32:39,431 [11] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\210108.orches de dios.ok.task\rincos.sql'
2021-01-10 17:32:39,432 [11] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1417) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 17:32:39,444 [11] DEBUG dn_lib.tools.log - updated task: C:\root\todd\_test\dn\orches de dios
2021-01-10 17:32:39,445 [11] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = 'la cartilla';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, 'la cartilla', 1, convert(datetime, '2021-01-08 11:41:58', 120), convert(datetime, '2021-01-08 11:42:07', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-08 11:41:58', 120), dt_upd = convert(datetime, '2021-01-08 11:42:07', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-08 11:41:58', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-08 11:42:07', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 17:32:39,449 [11] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\la cartilla
2021-01-10 17:32:39,450 [11] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id = 1809 
        and folder_name = '210108.in corso.incorso.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, 1809, '210108.in corso.incorso.task', 1, convert(datetime, '2021-01-08 11:42:07', 120), convert(datetime, '2021-01-08 11:42:18', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-08 11:42:07', 120), dt_upd = convert(datetime, '2021-01-08 11:42:18', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-08 11:42:07', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-08 11:42:18', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 17:32:39,456 [11] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\la cartilla\210108.in corso.incorso.task
2021-01-10 17:32:42,309 [11] DEBUG dn_lib.tools.log - SQL: update dn_folders set folder_name = 'incorso.task', dt_upd = convert(datetime, convert(varchar, getdate(), 120), 120)
        where folder_id = 1810
2021-01-10 17:32:55,633 [11] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1810 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, 1810, null, left('incorso', 150)
            , NULL, convert(datetime, '2021-01-08 00:00:00', 120), convert(datetime, '2021-01-08 11:42:18', 120), 1
            , 'in_corso', NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-08 00:00:00', 120), dt_upd = convert(datetime, '2021-01-08 11:42:18', 120)
         , title = left('incorso', 150), [user] = NULL
         , stato = 'in_corso', priorita = NULL
         , tipo = NULL, stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-08 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-01-08 11:42:18', 120), getdate())
          or isnull(title, '') <> isnull('incorso', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('in_corso', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 17:32:55,652 [11] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\la cartilla\incorso
2021-01-10 17:32:55,670 [11] ERROR dn_lib.tools.log - Impossibile trovare una parte del percorso 'C:\root\todd\_test\dn\la cartilla\210108.in corso.incorso.task'.
2021-01-10 17:32:55,671 [11] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id is null and file_name = 'script.incorso.task.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, null, 'script.incorso.task.sql', '.sql', 1, convert(datetime, '2021-01-07 16:50:16', 120), convert(datetime, '2021-01-07 16:50:48', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 16:50:16', 120), dt_upd = convert(datetime, '2021-01-07 16:50:48', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 16:50:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-07 16:50:48', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 17:32:55,673 [11] DEBUG dn_lib.tools.log - added file 4266: C:\root\todd\_test\dn\script.incorso.task.sql
2021-01-10 17:32:55,674 [11] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4266;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4266, '.sql', @content, convert(datetime, '2021-01-07 16:50:16', 120), convert(datetime, '2021-01-07 16:50:48', 120));
2021-01-10 17:32:55,676 [11] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\script.incorso.task.sql'
2021-01-10 17:32:55,705 [11] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4266;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima)
          values (1, null, 4266, left('script', 150)
            , NULL, convert(datetime, '2021-01-07 16:50:16', 120), convert(datetime, '2021-01-07 16:50:48', 120), 1
            , 'in_corso', NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 16:50:16', 120), dt_upd = convert(datetime, '2021-01-07 16:50:48', 120)
         , title = left('script', 150), [user] = NULL
         , stato = 'in_corso', priorita = NULL
         , tipo = NULL, stima = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 16:50:16', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-01-07 16:50:48', 120), getdate())
          or isnull(title, '') <> isnull('script', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('in_corso', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 17:32:55,714 [11] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\script
2021-01-10 17:32:55,716 [11] DEBUG dn_lib.tools.log - SQL: delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
2021-01-10 17:32:55,740 [11] DEBUG dn_lib.tools.log - cancellati 1811 files/folders/tasks
2021-01-10 17:32:55,741 [11] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '6')
        else update users_cache set var_value = substring('6', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-01-10 17:32:55,742 [11] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '4')
        else update users_cache set var_value = substring('4', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-01-10 17:32:55,744 [11] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/01/08 11:51:29')
        else update users_cache set var_value = substring('2021/01/08 11:51:29', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-01-10 17:32:55,745 [11] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/01/10 17:32:55')
        else update users_cache set var_value = substring('2021/01/10 17:32:55', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-01-10 18:58:05,507 [7] INFO dn_lib.tools.log - reload core
2021-01-10 18:58:05,541 [7] INFO dn_lib.tools.log - reload config docs
2021-01-10 18:58:05,543 [7] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 18:58:05,545 [7] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 18:58:05,546 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 18:58:05,555 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 18:58:05,557 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 18:58:05,568 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 18:58:05,569 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 18:58:05,571 [7] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 18:58:05,572 [7] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 18:58:05,574 [7] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 18:58:05,575 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 18:58:05,576 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 18:58:05,579 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 18:58:05,580 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 18:58:05,582 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 18:58:05,583 [7] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 18:58:05,583 [7] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 18:58:05,591 [7] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 18:58:05,592 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 18:58:05,594 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 18:58:05,596 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 18:58:05,597 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 18:58:05,599 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 18:58:05,599 [7] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 18:58:05,602 [7] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 18:58:05,686 [7] INFO dn_lib.tools.log - reload config docs
2021-01-10 18:58:05,686 [7] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 18:58:05,687 [7] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 18:58:05,688 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 18:58:05,689 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 18:58:05,690 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 18:58:05,691 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 18:58:05,691 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 18:58:05,692 [7] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 18:58:05,692 [7] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 18:58:05,692 [7] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 18:58:05,693 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 18:58:05,694 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 18:58:05,694 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 18:58:05,695 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 18:58:05,696 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 18:58:05,697 [7] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 18:58:05,698 [7] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 18:58:05,698 [7] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 18:58:05,699 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 18:58:05,700 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 18:58:05,700 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 18:58:05,701 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 18:58:05,701 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 18:58:05,702 [7] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 18:58:05,703 [7] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 18:58:05,776 [8] INFO dn_lib.tools.log - reload config docs
2021-01-10 18:58:05,776 [8] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 18:58:05,777 [8] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 18:58:05,778 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 18:58:05,778 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 18:58:05,779 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 18:58:05,780 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 18:58:05,780 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 18:58:05,781 [8] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 18:58:05,781 [8] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 18:58:05,781 [8] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 18:58:05,782 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 18:58:05,782 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 18:58:05,783 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 18:58:05,783 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 18:58:05,783 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 18:58:05,784 [8] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 18:58:05,784 [8] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 18:58:05,785 [8] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 18:58:05,785 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 18:58:05,786 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 18:58:05,786 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 18:58:05,787 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 18:58:05,787 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 18:58:05,788 [8] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 18:58:05,792 [8] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 18:58:05,818 [8] DEBUG dn_lib.tools.log - SQL: select task_filter_id, filter_title, filter_notes, filter_def, filter_class
 from dn_tasks_filters order by filter_order
2021-01-10 18:58:05,826 [8] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 0 and var_name in ('active-task-filter')
2021-01-10 18:58:05,833 [8] DEBUG dn_lib.tools.log - SQL: select ft.tp, ft.synch_folder_id, ft.folder_id, ft.parent_id, ft.title
       , ft.des, ft.http_path, ft.lvl, dbo.folder_path(ft.folder_id) as folder_path
       , (select top 1 1 from dn_tasks where folder_id = ft.folder_id) as is_task
      from dbo.fnc_dn_folders(null, null) ft
      
      order by ft.synch_folder_id, ft.lvl, ft.title
2021-01-10 18:58:05,854 [8] DEBUG dn_lib.tools.log - SQL: select f.synch_folder_id, f.file_id, f.folder_id, f.file_name, f.dt_ins , null as found_file
       from dn_files f
       where exists (select top 1 1 from dbo.fnc_dn_folders(null, null) ft 
        
	      where ft.synch_folder_id = f.synch_folder_id 
          and isnull(ft.folder_id, 0) = isnull(f.folder_id, 0))
2021-01-10 18:58:05,870 [8] DEBUG dn_lib.tools.log - SQL: select t3.*
      , tst.stato, tst.[order] as stato_order, isnull(tst.class, 'light') as stato_class, isnull(tst.title_plurale, '') as stato_title_plurale, isnull(tst.title_singolare, '') as stato_title_singolare
      , tp.priorita, tp.[order] as priorita_order, isnull(tp.class, 'light') as priorita_class, isnull(tp.title_plurale, '') as priorita_title_plurale, isnull(tp.title_singolare, '') as priorita_title_singolare
      , tt.tipo, tt.[order] as tipo_order, isnull(tt.class, 'light') as tipo_class, isnull(tt.title_plurale, '') as tipo_title_plurale, isnull(tt.title_singolare, '') as tipo_title_singolare
      , ts.stima, ts.[days] as stima_days, isnull(ts.class, 'light') as stima_class, isnull(ts.title_plurale, '') as stima_title_plurale, isnull(ts.title_singolare, '') as stima_title_singolare
      , (select top 1 1 from dn_tasks_notes where task_id = t3.task_id) as task_notes
      , (select top 1 1 from vw_task_allegati f2 where f2.task_id = t3.task_id 
          and not exists (select top 1 1 from dn_files_info where file_name = f2.file_name)) as task_files
  from (select t2.*, datediff(day, t2.dt_ref, getdate()) as diff_days
    from (select t.task_id, t.synch_folder_id, isnull(t.folder_id, f.folder_id) as folder_id
	   , t.file_id, t.title, t.[user], t.stato, t.priorita, t.tipo, t.stima, t.dt_ins, t.dt_upd
     , (case when t.dt_ins > t.dt_upd then t.dt_ins else t.dt_upd end) as dt_ref
	  from dn_tasks t
    
	  left join dn_files f on f.file_id = t.file_id
    where (null is null or (null is not null and t.task_id = null)) ) t2
    where exists (select top 1 1 from dbo.fnc_dn_folders(null, null) ft 
	    where  ft.synch_folder_id = t2.synch_folder_id 
       and isnull(ft.folder_id, 0) = isnull(t2.folder_id, 0))) t3
   left join dn_task_stato tst on tst.stato = t3.stato
   left join dn_task_priorita tp on tp.priorita = t3.priorita
   left join dn_task_tipo tt on tt.tipo = t3.tipo
   left join dn_task_stima ts on ts.stima = t3.stima
   where 1 = 1 
2021-01-10 18:58:05,909 [8] DEBUG dn_lib.tools.log - SQL: select title_singolare, stato from dn_task_stato order by [order]
2021-01-10 18:58:05,926 [8] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, priorita as [value], [order] from dn_task_priorita
      ) t order by t.[order]
2021-01-10 18:58:06,012 [8] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [days]
       union select title_singolare as title, stima as [value], [days] from dn_task_stima 
       ) t order by t.[days]
2021-01-10 18:58:06,016 [8] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, tipo as [value], [order] from dn_task_tipo
       ) t order by t.[order]
2021-01-10 18:58:06,019 [8] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value]
       union select nome as title, nome as [value] from users
       ) t order by 2
2021-01-10 18:58:09,861 [8] INFO dn_lib.tools.log - reload config docs
2021-01-10 18:58:09,862 [8] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 18:58:09,863 [8] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 18:58:09,864 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 18:58:09,865 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 18:58:09,865 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 18:58:09,866 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 18:58:09,866 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 18:58:09,867 [8] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 18:58:09,868 [8] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 18:58:09,868 [8] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 18:58:09,869 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 18:58:09,869 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 18:58:09,870 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 18:58:09,870 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 18:58:09,870 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 18:58:09,871 [8] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 18:58:09,871 [8] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 18:58:09,872 [8] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 18:58:09,872 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 18:58:09,873 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 18:58:09,873 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 18:58:09,874 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 18:58:09,874 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 18:58:09,875 [8] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 18:58:09,875 [8] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 18:58:09,897 [8] INFO dn_lib.tools.log - reload config docs
2021-01-10 18:58:09,903 [8] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 18:58:09,903 [8] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 18:58:09,904 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 18:58:09,904 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 18:58:09,905 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 18:58:09,906 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 18:58:09,906 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 18:58:09,907 [8] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 18:58:09,907 [8] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 18:58:09,908 [8] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 18:58:09,908 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 18:58:09,909 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 18:58:09,909 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 18:58:09,910 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 18:58:09,910 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 18:58:09,911 [8] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 18:58:09,912 [8] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 18:58:09,913 [8] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 18:58:09,913 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 18:58:09,914 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 18:58:09,914 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 18:58:09,915 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 18:58:09,915 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 18:58:09,916 [8] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 18:58:09,916 [8] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 18:58:09,955 [8] INFO dn_lib.tools.log - reload config docs
2021-01-10 18:58:09,955 [8] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 18:58:09,956 [8] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 18:58:09,957 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 18:58:09,957 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 18:58:09,958 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 18:58:09,959 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 18:58:09,959 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 18:58:09,960 [8] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 18:58:09,961 [8] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 18:58:09,961 [8] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 18:58:09,962 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 18:58:09,963 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 18:58:09,963 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 18:58:09,964 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 18:58:09,964 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 18:58:09,965 [8] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 18:58:09,965 [8] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 18:58:09,966 [8] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 18:58:09,966 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 18:58:09,967 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 18:58:09,967 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 18:58:09,968 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 18:58:09,968 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 18:58:09,969 [8] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 18:58:09,969 [8] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 18:58:10,532 [8] INFO dn_lib.tools.log - reload config docs
2021-01-10 18:58:10,533 [8] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 18:58:10,534 [8] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 18:58:10,535 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 18:58:10,536 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 18:58:10,537 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 18:58:10,538 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 18:58:10,538 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 18:58:10,539 [8] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 18:58:10,540 [8] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 18:58:10,541 [8] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 18:58:10,542 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 18:58:10,543 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 18:58:10,543 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 18:58:10,544 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 18:58:10,545 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 18:58:10,546 [8] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 18:58:10,547 [8] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 18:58:10,548 [8] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 18:58:10,548 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 18:58:10,549 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 18:58:10,550 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 18:58:10,550 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 18:58:10,551 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 18:58:10,551 [8] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 18:58:10,552 [8] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 18:58:10,600 [8] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-01-10 18:58:10,602 [8] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-01-10 18:58:10,614 [8] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-01-10 18:58:10,616 [8] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-01-10 18:58:10,619 [8] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-01-10 18:58:10,621 [8] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-01-10 18:58:10,622 [8] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-01-10 18:58:10,625 [8] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-10 18:58:10,632 [8] DEBUG dn_lib.tools.log - lettura cartelle
2021-01-10 18:58:10,633 [8] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-10 18:58:10,634 [8] DEBUG dn_lib.tools.log - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-01-10 18:58:10,636 [8] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-01-10 18:58:10,640 [8] DEBUG dn_lib.tools.log - leggo la cartella C:\root\todd\_test\dn
2021-01-10 18:58:10,641 [8] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = '210108.orches de dios.ok.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, '210108.orches de dios.ok.task', 1, convert(datetime, '2021-01-08 11:29:56', 120), convert(datetime, '2021-01-08 11:30:44', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-08 11:29:56', 120), dt_upd = convert(datetime, '2021-01-08 11:30:44', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-08 11:29:56', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-08 11:30:44', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 18:58:21,361 [8] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1808 and file_name = 'rincos.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1808, 'rincos.sql', '.sql', 1, convert(datetime, '2021-01-08 11:30:44', 120), convert(datetime, '2021-01-08 11:35:14', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-08 11:30:44', 120), dt_upd = convert(datetime, '2021-01-08 11:35:14', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-08 11:30:44', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-08 11:35:14', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 18:58:21,380 [8] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = 'la cartilla';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, 'la cartilla', 1, convert(datetime, '2021-01-08 11:41:58', 120), convert(datetime, '2021-01-10 18:40:35', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-08 11:41:58', 120), dt_upd = convert(datetime, '2021-01-10 18:40:35', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-08 11:41:58', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-10 18:40:35', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 18:58:21,385 [8] DEBUG dn_lib.tools.log - updated folder: C:\root\todd\_test\dn\la cartilla
2021-01-10 18:58:21,386 [8] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id is null and file_name = 'script.incorso.task.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, null, 'script.incorso.task.sql', '.sql', 1, convert(datetime, '2021-01-07 16:50:16', 120), convert(datetime, '2021-01-07 16:50:48', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 16:50:16', 120), dt_upd = convert(datetime, '2021-01-07 16:50:48', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 16:50:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-07 16:50:48', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 18:58:21,429 [8] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4266;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, null, 4266, left('script', 150)
            , NULL, convert(datetime, '2021-01-07 16:50:16', 120), convert(datetime, '2021-01-07 16:50:48', 120), 1
            , 'in_corso', NULL, NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 16:50:16', 120), dt_upd = convert(datetime, '2021-01-07 16:50:48', 120)
         , title = left('script', 150), [user] = NULL
         , stato = 'in_corso', priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 16:50:16', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-01-07 16:50:48', 120), getdate())
          or isnull(title, '') <> isnull('script', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('in_corso', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 18:58:21,436 [8] DEBUG dn_lib.tools.log - SQL: delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
2021-01-10 18:58:21,446 [8] DEBUG dn_lib.tools.log - cancellati 12 files/folders/tasks
2021-01-10 18:58:21,448 [8] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '2')
        else update users_cache set var_value = substring('2', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-01-10 18:58:21,452 [8] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '2')
        else update users_cache set var_value = substring('2', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-01-10 18:58:21,455 [8] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/01/10 18:40:35')
        else update users_cache set var_value = substring('2021/01/10 18:40:35', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-01-10 18:58:21,459 [8] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/01/10 18:58:21')
        else update users_cache set var_value = substring('2021/01/10 18:58:21', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-01-10 18:58:41,363 [7] INFO dn_lib.tools.log - reload core
2021-01-10 18:58:41,406 [7] INFO dn_lib.tools.log - reload config docs
2021-01-10 18:58:41,408 [7] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 18:58:41,409 [7] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 18:58:41,410 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 18:58:41,411 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 18:58:41,411 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 18:58:41,412 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 18:58:41,413 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 18:58:41,413 [7] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 18:58:41,414 [7] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 18:58:41,415 [7] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 18:58:41,416 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 18:58:41,416 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 18:58:41,418 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 18:58:41,418 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 18:58:41,419 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 18:58:41,419 [7] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 18:58:41,420 [7] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 18:58:41,439 [7] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 18:58:41,442 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 18:58:41,444 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 18:58:41,445 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 18:58:41,446 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 18:58:41,447 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 18:58:41,447 [7] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 18:58:41,450 [7] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 18:58:41,548 [9] INFO dn_lib.tools.log - reload config docs
2021-01-10 18:58:41,549 [9] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 18:58:41,549 [9] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 18:58:41,550 [9] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 18:58:41,551 [9] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 18:58:41,552 [9] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 18:58:41,553 [9] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 18:58:41,554 [9] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 18:58:41,555 [9] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 18:58:41,556 [9] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 18:58:41,558 [9] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 18:58:41,559 [9] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 18:58:41,560 [9] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 18:58:41,560 [9] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 18:58:41,561 [9] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 18:58:41,562 [9] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 18:58:41,563 [9] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 18:58:41,564 [9] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 18:58:41,565 [9] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 18:58:41,566 [9] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 18:58:41,567 [9] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 18:58:41,568 [9] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 18:58:41,569 [9] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 18:58:41,570 [9] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 18:58:41,571 [9] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 18:58:41,572 [9] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 18:58:41,664 [8] INFO dn_lib.tools.log - reload config docs
2021-01-10 18:58:41,665 [8] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 18:58:41,666 [8] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 18:58:41,667 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 18:58:41,668 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 18:58:41,669 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 18:58:41,670 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 18:58:41,671 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 18:58:41,672 [8] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 18:58:41,673 [8] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 18:58:41,674 [8] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 18:58:41,675 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 18:58:41,675 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 18:58:41,676 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 18:58:41,677 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 18:58:41,678 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 18:58:41,679 [8] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 18:58:41,679 [8] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 18:58:41,680 [8] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 18:58:41,681 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 18:58:41,682 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 18:58:41,683 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 18:58:41,683 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 18:58:41,684 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 18:58:41,685 [8] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 18:58:41,690 [8] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 18:58:41,720 [8] DEBUG dn_lib.tools.log - SQL: select task_filter_id, filter_title, filter_notes, filter_def, filter_class
 from dn_tasks_filters order by filter_order
2021-01-10 18:58:41,725 [8] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 0 and var_name in ('active-task-filter')
2021-01-10 18:58:41,733 [8] DEBUG dn_lib.tools.log - SQL: select ft.tp, ft.synch_folder_id, ft.folder_id, ft.parent_id, ft.title
       , ft.des, ft.http_path, ft.lvl, dbo.folder_path(ft.folder_id) as folder_path
       , (select top 1 1 from dn_tasks where folder_id = ft.folder_id) as is_task
      from dbo.fnc_dn_folders(null, null) ft
      
      order by ft.synch_folder_id, ft.lvl, ft.title
2021-01-10 18:58:41,750 [8] DEBUG dn_lib.tools.log - SQL: select f.synch_folder_id, f.file_id, f.folder_id, f.file_name, f.dt_ins , null as found_file
       from dn_files f
       where exists (select top 1 1 from dbo.fnc_dn_folders(null, null) ft 
        
	      where ft.synch_folder_id = f.synch_folder_id 
          and isnull(ft.folder_id, 0) = isnull(f.folder_id, 0))
2021-01-10 18:58:41,762 [8] DEBUG dn_lib.tools.log - SQL: select t3.*
      , tst.stato, tst.[order] as stato_order, isnull(tst.class, 'light') as stato_class, isnull(tst.title_plurale, '') as stato_title_plurale, isnull(tst.title_singolare, '') as stato_title_singolare
      , tp.priorita, tp.[order] as priorita_order, isnull(tp.class, 'light') as priorita_class, isnull(tp.title_plurale, '') as priorita_title_plurale, isnull(tp.title_singolare, '') as priorita_title_singolare
      , tt.tipo, tt.[order] as tipo_order, isnull(tt.class, 'light') as tipo_class, isnull(tt.title_plurale, '') as tipo_title_plurale, isnull(tt.title_singolare, '') as tipo_title_singolare
      , ts.stima, ts.[days] as stima_days, isnull(ts.class, 'light') as stima_class, isnull(ts.title_plurale, '') as stima_title_plurale, isnull(ts.title_singolare, '') as stima_title_singolare
      , (select top 1 1 from dn_tasks_notes where task_id = t3.task_id) as task_notes
      , (select top 1 1 from vw_task_allegati f2 where f2.task_id = t3.task_id 
          and not exists (select top 1 1 from dn_files_info where file_name = f2.file_name)) as task_files
  from (select t2.*, datediff(day, t2.dt_ref, getdate()) as diff_days
    from (select t.task_id, t.synch_folder_id, isnull(t.folder_id, f.folder_id) as folder_id
	   , t.file_id, t.title, t.[user], t.stato, t.priorita, t.tipo, t.stima, t.dt_ins, t.dt_upd
     , (case when t.dt_ins > t.dt_upd then t.dt_ins else t.dt_upd end) as dt_ref
	  from dn_tasks t
    
	  left join dn_files f on f.file_id = t.file_id
    where (null is null or (null is not null and t.task_id = null)) ) t2
    where exists (select top 1 1 from dbo.fnc_dn_folders(null, null) ft 
	    where  ft.synch_folder_id = t2.synch_folder_id 
       and isnull(ft.folder_id, 0) = isnull(t2.folder_id, 0))) t3
   left join dn_task_stato tst on tst.stato = t3.stato
   left join dn_task_priorita tp on tp.priorita = t3.priorita
   left join dn_task_tipo tt on tt.tipo = t3.tipo
   left join dn_task_stima ts on ts.stima = t3.stima
   where 1 = 1 
2021-01-10 18:58:41,799 [8] DEBUG dn_lib.tools.log - SQL: select title_singolare, stato from dn_task_stato order by [order]
2021-01-10 18:58:41,814 [8] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, priorita as [value], [order] from dn_task_priorita
      ) t order by t.[order]
2021-01-10 18:58:41,920 [8] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [days]
       union select title_singolare as title, stima as [value], [days] from dn_task_stima 
       ) t order by t.[days]
2021-01-10 18:58:41,923 [8] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, tipo as [value], [order] from dn_task_tipo
       ) t order by t.[order]
2021-01-10 18:58:41,926 [8] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value]
       union select nome as title, nome as [value] from users
       ) t order by 2
2021-01-10 18:59:14,242 [7] INFO dn_lib.tools.log - reload core
2021-01-10 18:59:14,277 [7] INFO dn_lib.tools.log - reload config docs
2021-01-10 18:59:14,278 [7] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 18:59:14,279 [7] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 18:59:14,280 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 18:59:14,281 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 18:59:14,281 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 18:59:14,282 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 18:59:14,283 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 18:59:14,284 [7] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 18:59:14,286 [7] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 18:59:14,287 [7] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 18:59:14,287 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 18:59:14,288 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 18:59:14,289 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 18:59:14,290 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 18:59:14,291 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 18:59:14,292 [7] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 18:59:14,292 [7] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 18:59:14,310 [7] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 18:59:14,312 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 18:59:14,313 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 18:59:14,314 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 18:59:14,316 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 18:59:14,317 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 18:59:14,319 [7] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 18:59:14,321 [7] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 18:59:14,393 [9] INFO dn_lib.tools.log - reload config docs
2021-01-10 18:59:14,394 [9] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 18:59:14,395 [9] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 18:59:14,396 [9] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 18:59:14,396 [9] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 18:59:14,397 [9] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 18:59:14,399 [9] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 18:59:14,400 [9] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 18:59:14,402 [9] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 18:59:14,403 [9] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 18:59:14,404 [9] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 18:59:14,405 [9] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 18:59:14,406 [9] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 18:59:14,406 [9] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 18:59:14,407 [9] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 18:59:14,408 [9] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 18:59:14,408 [9] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 18:59:14,409 [9] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 18:59:14,410 [9] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 18:59:14,411 [9] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 18:59:14,411 [9] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 18:59:14,412 [9] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 18:59:14,412 [9] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 18:59:14,413 [9] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 18:59:14,414 [9] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 18:59:14,414 [9] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 18:59:14,480 [8] INFO dn_lib.tools.log - reload config docs
2021-01-10 18:59:14,481 [8] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 18:59:14,482 [8] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 18:59:14,483 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 18:59:14,483 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 18:59:14,484 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 18:59:14,485 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 18:59:14,486 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 18:59:14,486 [8] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 18:59:14,487 [8] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 18:59:14,487 [8] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 18:59:14,488 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 18:59:14,489 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 18:59:14,489 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 18:59:14,490 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 18:59:14,490 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 18:59:14,491 [8] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 18:59:14,491 [8] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 18:59:14,492 [8] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 18:59:14,492 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 18:59:14,492 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 18:59:14,493 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 18:59:14,493 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 18:59:14,494 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 18:59:14,494 [8] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 18:59:14,496 [8] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 18:59:14,519 [8] DEBUG dn_lib.tools.log - SQL: select task_filter_id, filter_title, filter_notes, filter_def, filter_class
 from dn_tasks_filters order by filter_order
2021-01-10 18:59:14,524 [8] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 0 and var_name in ('active-task-filter')
2021-01-10 18:59:14,526 [8] DEBUG dn_lib.tools.log - SQL: select ft.tp, ft.synch_folder_id, ft.folder_id, ft.parent_id, ft.title
       , ft.des, ft.http_path, ft.lvl, dbo.folder_path(ft.folder_id) as folder_path
       , (select top 1 1 from dn_tasks where folder_id = ft.folder_id) as is_task
      from dbo.fnc_dn_folders(null, null) ft
      
      order by ft.synch_folder_id, ft.lvl, ft.title
2021-01-10 18:59:14,540 [8] DEBUG dn_lib.tools.log - SQL: select f.synch_folder_id, f.file_id, f.folder_id, f.file_name, f.dt_ins , null as found_file
       from dn_files f
       where exists (select top 1 1 from dbo.fnc_dn_folders(null, null) ft 
        
	      where ft.synch_folder_id = f.synch_folder_id 
          and isnull(ft.folder_id, 0) = isnull(f.folder_id, 0))
2021-01-10 18:59:14,550 [8] DEBUG dn_lib.tools.log - SQL: select t3.*
      , tst.stato, tst.[order] as stato_order, isnull(tst.class, 'light') as stato_class, isnull(tst.title_plurale, '') as stato_title_plurale, isnull(tst.title_singolare, '') as stato_title_singolare
      , tp.priorita, tp.[order] as priorita_order, isnull(tp.class, 'light') as priorita_class, isnull(tp.title_plurale, '') as priorita_title_plurale, isnull(tp.title_singolare, '') as priorita_title_singolare
      , tt.tipo, tt.[order] as tipo_order, isnull(tt.class, 'light') as tipo_class, isnull(tt.title_plurale, '') as tipo_title_plurale, isnull(tt.title_singolare, '') as tipo_title_singolare
      , ts.stima, ts.[days] as stima_days, isnull(ts.class, 'light') as stima_class, isnull(ts.title_plurale, '') as stima_title_plurale, isnull(ts.title_singolare, '') as stima_title_singolare
      , (select top 1 1 from dn_tasks_notes where task_id = t3.task_id) as task_notes
      , (select top 1 1 from vw_task_allegati f2 where f2.task_id = t3.task_id 
          and not exists (select top 1 1 from dn_files_info where file_name = f2.file_name)) as task_files
  from (select t2.*, datediff(day, t2.dt_ref, getdate()) as diff_days
    from (select t.task_id, t.synch_folder_id, isnull(t.folder_id, f.folder_id) as folder_id
	   , t.file_id, t.title, t.[user], t.stato, t.priorita, t.tipo, t.stima, t.dt_ins, t.dt_upd
     , (case when t.dt_ins > t.dt_upd then t.dt_ins else t.dt_upd end) as dt_ref
	  from dn_tasks t
    
	  left join dn_files f on f.file_id = t.file_id
    where (null is null or (null is not null and t.task_id = null)) ) t2
    where exists (select top 1 1 from dbo.fnc_dn_folders(null, null) ft 
	    where  ft.synch_folder_id = t2.synch_folder_id 
       and isnull(ft.folder_id, 0) = isnull(t2.folder_id, 0))) t3
   left join dn_task_stato tst on tst.stato = t3.stato
   left join dn_task_priorita tp on tp.priorita = t3.priorita
   left join dn_task_tipo tt on tt.tipo = t3.tipo
   left join dn_task_stima ts on ts.stima = t3.stima
   where 1 = 1 
2021-01-10 18:59:14,581 [8] DEBUG dn_lib.tools.log - SQL: select title_singolare, stato from dn_task_stato order by [order]
2021-01-10 18:59:14,594 [8] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, priorita as [value], [order] from dn_task_priorita
      ) t order by t.[order]
2021-01-10 18:59:14,655 [8] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [days]
       union select title_singolare as title, stima as [value], [days] from dn_task_stima 
       ) t order by t.[days]
2021-01-10 18:59:14,658 [8] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, tipo as [value], [order] from dn_task_tipo
       ) t order by t.[order]
2021-01-10 18:59:14,660 [8] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value]
       union select nome as title, nome as [value] from users
       ) t order by 2
2021-01-10 18:59:24,592 [7] INFO dn_lib.tools.log - reload config docs
2021-01-10 18:59:24,593 [7] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 18:59:24,594 [7] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 18:59:24,595 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 18:59:24,596 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 18:59:24,597 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 18:59:24,598 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 18:59:24,599 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 18:59:24,600 [7] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 18:59:24,601 [7] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 18:59:24,601 [7] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 18:59:24,602 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 18:59:24,602 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 18:59:24,603 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 18:59:24,603 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 18:59:24,604 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 18:59:24,604 [7] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 18:59:24,605 [7] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 18:59:24,605 [7] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 18:59:24,606 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 18:59:24,606 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 18:59:24,607 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 18:59:24,607 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 18:59:24,608 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 18:59:24,608 [7] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 18:59:24,609 [7] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 18:59:24,638 [9] INFO dn_lib.tools.log - reload config docs
2021-01-10 18:59:24,639 [9] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 18:59:24,640 [9] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 18:59:24,640 [9] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 18:59:24,641 [9] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 18:59:24,642 [9] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 18:59:24,642 [9] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 18:59:24,643 [9] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 18:59:24,644 [9] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 18:59:24,644 [9] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 18:59:24,645 [9] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 18:59:24,645 [9] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 18:59:24,646 [9] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 18:59:24,646 [9] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 18:59:24,647 [9] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 18:59:24,647 [9] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 18:59:24,648 [9] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 18:59:24,650 [9] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 18:59:24,651 [9] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 18:59:24,651 [9] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 18:59:24,652 [9] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 18:59:24,653 [9] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 18:59:24,653 [9] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 18:59:24,654 [9] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 18:59:24,654 [9] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 18:59:24,655 [9] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 18:59:24,693 [8] INFO dn_lib.tools.log - reload config docs
2021-01-10 18:59:24,694 [8] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 18:59:24,694 [8] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 18:59:24,695 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 18:59:24,695 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 18:59:24,696 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 18:59:24,696 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 18:59:24,696 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 18:59:24,697 [8] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 18:59:24,697 [8] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 18:59:24,698 [8] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 18:59:24,698 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 18:59:24,698 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 18:59:24,699 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 18:59:24,700 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 18:59:24,700 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 18:59:24,701 [8] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 18:59:24,701 [8] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 18:59:24,701 [8] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 18:59:24,702 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 18:59:24,702 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 18:59:24,703 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 18:59:24,703 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 18:59:24,703 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 18:59:24,704 [8] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 18:59:24,705 [8] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 18:59:25,283 [10] INFO dn_lib.tools.log - reload config docs
2021-01-10 18:59:25,285 [10] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 18:59:25,286 [10] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 18:59:25,286 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 18:59:25,287 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 18:59:25,287 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 18:59:25,288 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 18:59:25,289 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 18:59:25,290 [10] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 18:59:25,290 [10] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 18:59:25,291 [10] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 18:59:25,292 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 18:59:25,292 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 18:59:25,293 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 18:59:25,293 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 18:59:25,294 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 18:59:25,294 [10] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 18:59:25,295 [10] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 18:59:25,295 [10] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 18:59:25,296 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 18:59:25,296 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 18:59:25,297 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 18:59:25,297 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 18:59:25,298 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 18:59:25,298 [10] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 18:59:25,299 [10] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 18:59:25,347 [10] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-01-10 18:59:25,350 [10] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-01-10 18:59:25,353 [10] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-01-10 18:59:25,355 [10] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-01-10 18:59:25,358 [10] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-01-10 18:59:25,360 [10] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-01-10 18:59:25,361 [10] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-01-10 18:59:25,364 [10] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-10 18:59:25,370 [10] DEBUG dn_lib.tools.log - lettura cartelle
2021-01-10 18:59:25,371 [10] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-10 18:59:25,372 [10] DEBUG dn_lib.tools.log - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-01-10 18:59:25,374 [10] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-01-10 18:59:25,386 [10] DEBUG dn_lib.tools.log - leggo la cartella C:\root\todd\_test\dn
2021-01-10 18:59:25,388 [10] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = '210108.orches de dios.ok.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, '210108.orches de dios.ok.task', 1, convert(datetime, '2021-01-08 11:29:56', 120), convert(datetime, '2021-01-08 11:30:44', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-08 11:29:56', 120), dt_upd = convert(datetime, '2021-01-08 11:30:44', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-08 11:29:56', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-08 11:30:44', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 19:00:54,975 [10] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1808 and file_name = 'rincos.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1808, 'rincos.sql', '.sql', 1, convert(datetime, '2021-01-08 11:30:44', 120), convert(datetime, '2021-01-08 11:35:14', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-08 11:30:44', 120), dt_upd = convert(datetime, '2021-01-08 11:35:14', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-08 11:30:44', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-08 11:35:14', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 19:00:54,994 [10] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = 'la cartilla';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, 'la cartilla', 1, convert(datetime, '2021-01-08 11:41:58', 120), convert(datetime, '2021-01-10 18:40:35', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-08 11:41:58', 120), dt_upd = convert(datetime, '2021-01-10 18:40:35', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-08 11:41:58', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-10 18:40:35', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 19:00:55,007 [10] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id is null and file_name = 'script.incorso.task.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, null, 'script.incorso.task.sql', '.sql', 1, convert(datetime, '2021-01-07 16:50:16', 120), convert(datetime, '2021-01-07 16:50:48', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 16:50:16', 120), dt_upd = convert(datetime, '2021-01-07 16:50:48', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 16:50:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-07 16:50:48', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 19:00:55,017 [10] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4266;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, null, 4266, left('script', 150)
            , NULL, convert(datetime, '2021-01-07 16:50:16', 120), convert(datetime, '2021-01-07 16:50:48', 120), 1
            , 'in_corso', NULL, NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 16:50:16', 120), dt_upd = convert(datetime, '2021-01-07 16:50:48', 120)
         , title = left('script', 150), [user] = NULL
         , stato = 'in_corso', priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 16:50:16', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-01-07 16:50:48', 120), getdate())
          or isnull(title, '') <> isnull('script', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('in_corso', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 19:00:55,027 [10] DEBUG dn_lib.tools.log - SQL: delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
2021-01-10 19:00:55,035 [10] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '2')
        else update users_cache set var_value = substring('2', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-01-10 19:00:55,041 [10] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '2')
        else update users_cache set var_value = substring('2', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-01-10 19:00:55,045 [10] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/01/10 18:40:35')
        else update users_cache set var_value = substring('2021/01/10 18:40:35', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-01-10 19:00:55,049 [10] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/01/10 19:00:55')
        else update users_cache set var_value = substring('2021/01/10 19:00:55', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-01-10 19:01:36,032 [7] INFO dn_lib.tools.log - reload core
2021-01-10 19:01:36,064 [7] INFO dn_lib.tools.log - reload config docs
2021-01-10 19:01:36,066 [7] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:01:36,067 [7] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:01:36,068 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:01:36,069 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:01:36,071 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:01:36,081 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:01:36,089 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:01:36,091 [7] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:01:36,092 [7] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:01:36,094 [7] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:01:36,096 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:01:36,096 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:01:36,098 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:01:36,099 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:01:36,100 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:01:36,101 [7] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:01:36,101 [7] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:01:36,117 [7] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:01:36,119 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:01:36,120 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:01:36,120 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:01:36,121 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:01:36,122 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:01:36,122 [7] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:01:36,124 [7] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 19:01:36,176 [8] INFO dn_lib.tools.log - reload config docs
2021-01-10 19:01:36,177 [8] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:01:36,178 [8] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:01:36,179 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:01:36,180 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:01:36,181 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:01:36,182 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:01:36,183 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:01:36,184 [8] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:01:36,185 [8] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:01:36,185 [8] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:01:36,186 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:01:36,187 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:01:36,188 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:01:36,189 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:01:36,189 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:01:36,190 [8] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:01:36,190 [8] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:01:36,191 [8] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:01:36,192 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:01:36,192 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:01:36,193 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:01:36,194 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:01:36,195 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:01:36,196 [8] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:01:36,197 [8] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 19:01:36,267 [10] INFO dn_lib.tools.log - reload config docs
2021-01-10 19:01:36,268 [10] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:01:36,269 [10] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:01:36,269 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:01:36,270 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:01:36,270 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:01:36,271 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:01:36,272 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:01:36,272 [10] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:01:36,273 [10] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:01:36,273 [10] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:01:36,273 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:01:36,274 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:01:36,274 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:01:36,275 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:01:36,275 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:01:36,276 [10] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:01:36,276 [10] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:01:36,277 [10] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:01:36,278 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:01:36,279 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:01:36,279 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:01:36,280 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:01:36,280 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:01:36,281 [10] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:01:36,284 [10] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 19:01:36,306 [10] DEBUG dn_lib.tools.log - SQL: select task_filter_id, filter_title, filter_notes, filter_def, filter_class
 from dn_tasks_filters order by filter_order
2021-01-10 19:01:36,311 [10] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 0 and var_name in ('active-task-filter')
2021-01-10 19:01:36,316 [10] DEBUG dn_lib.tools.log - SQL: select ft.tp, ft.synch_folder_id, ft.folder_id, ft.parent_id, ft.title
       , ft.des, ft.http_path, ft.lvl, dbo.folder_path(ft.folder_id) as folder_path
       , (select top 1 1 from dn_tasks where folder_id = ft.folder_id) as is_task
      from dbo.fnc_dn_folders(null, null) ft
      
      order by ft.synch_folder_id, ft.lvl, ft.title
2021-01-10 19:01:36,326 [10] DEBUG dn_lib.tools.log - SQL: select f.synch_folder_id, f.file_id, f.folder_id, f.file_name, f.dt_ins , null as found_file
       from dn_files f
       where exists (select top 1 1 from dbo.fnc_dn_folders(null, null) ft 
        
	      where ft.synch_folder_id = f.synch_folder_id 
          and isnull(ft.folder_id, 0) = isnull(f.folder_id, 0))
2021-01-10 19:01:36,336 [10] DEBUG dn_lib.tools.log - SQL: select t3.*
      , tst.stato, tst.[order] as stato_order, isnull(tst.class, 'light') as stato_class, isnull(tst.title_plurale, '') as stato_title_plurale, isnull(tst.title_singolare, '') as stato_title_singolare
      , tp.priorita, tp.[order] as priorita_order, isnull(tp.class, 'light') as priorita_class, isnull(tp.title_plurale, '') as priorita_title_plurale, isnull(tp.title_singolare, '') as priorita_title_singolare
      , tt.tipo, tt.[order] as tipo_order, isnull(tt.class, 'light') as tipo_class, isnull(tt.title_plurale, '') as tipo_title_plurale, isnull(tt.title_singolare, '') as tipo_title_singolare
      , ts.stima, ts.[days] as stima_days, isnull(ts.class, 'light') as stima_class, isnull(ts.title_plurale, '') as stima_title_plurale, isnull(ts.title_singolare, '') as stima_title_singolare
      , (select top 1 1 from dn_tasks_notes where task_id = t3.task_id) as task_notes
      , (select top 1 1 from vw_task_allegati f2 where f2.task_id = t3.task_id 
          and not exists (select top 1 1 from dn_files_info where file_name = f2.file_name)) as task_files
  from (select t2.*, datediff(day, t2.dt_ref, getdate()) as diff_days
    from (select t.task_id, t.synch_folder_id, isnull(t.folder_id, f.folder_id) as folder_id
	   , t.file_id, t.title, t.[user], t.stato, t.priorita, t.tipo, t.stima, t.dt_ins, t.dt_upd
     , (case when t.dt_ins > t.dt_upd then t.dt_ins else t.dt_upd end) as dt_ref
	  from dn_tasks t
    
	  left join dn_files f on f.file_id = t.file_id
    where (null is null or (null is not null and t.task_id = null)) ) t2
    where exists (select top 1 1 from dbo.fnc_dn_folders(null, null) ft 
	    where  ft.synch_folder_id = t2.synch_folder_id 
       and isnull(ft.folder_id, 0) = isnull(t2.folder_id, 0))) t3
   left join dn_task_stato tst on tst.stato = t3.stato
   left join dn_task_priorita tp on tp.priorita = t3.priorita
   left join dn_task_tipo tt on tt.tipo = t3.tipo
   left join dn_task_stima ts on ts.stima = t3.stima
   where 1 = 1 
2021-01-10 19:01:36,363 [10] DEBUG dn_lib.tools.log - SQL: select title_singolare, stato from dn_task_stato order by [order]
2021-01-10 19:01:36,375 [10] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, priorita as [value], [order] from dn_task_priorita
      ) t order by t.[order]
2021-01-10 19:01:36,471 [10] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [days]
       union select title_singolare as title, stima as [value], [days] from dn_task_stima 
       ) t order by t.[days]
2021-01-10 19:01:36,474 [10] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, tipo as [value], [order] from dn_task_tipo
       ) t order by t.[order]
2021-01-10 19:01:36,477 [10] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value]
       union select nome as title, nome as [value] from users
       ) t order by 2
2021-01-10 19:01:46,700 [8] INFO dn_lib.tools.log - reload config docs
2021-01-10 19:01:46,701 [8] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:01:46,702 [8] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:01:46,703 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:01:46,704 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:01:46,704 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:01:46,705 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:01:46,706 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:01:46,707 [8] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:01:46,708 [8] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:01:46,708 [8] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:01:46,709 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:01:46,710 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:01:46,711 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:01:46,712 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:01:46,713 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:01:46,713 [8] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:01:46,714 [8] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:01:46,715 [8] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:01:46,715 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:01:46,716 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:01:46,716 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:01:46,717 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:01:46,718 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:01:46,718 [8] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:01:46,719 [8] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 19:01:46,750 [10] INFO dn_lib.tools.log - reload config docs
2021-01-10 19:01:46,751 [10] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:01:46,751 [10] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:01:46,752 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:01:46,753 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:01:46,754 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:01:46,755 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:01:46,756 [10] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:01:46,757 [10] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:01:46,758 [10] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:01:46,759 [10] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:01:46,760 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:01:46,761 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:01:46,762 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:01:46,763 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:01:46,764 [10] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:01:46,765 [10] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:01:46,766 [10] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:01:46,767 [10] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:01:46,767 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:01:46,768 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:01:46,769 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:01:46,770 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:01:46,771 [10] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:01:46,772 [10] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:01:46,773 [10] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 19:01:46,815 [8] INFO dn_lib.tools.log - reload config docs
2021-01-10 19:01:46,816 [8] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:01:46,817 [8] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:01:46,817 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:01:46,817 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:01:46,817 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:01:46,818 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:01:46,819 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:01:46,820 [8] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:01:46,820 [8] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:01:46,821 [8] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:01:46,821 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:01:46,822 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:01:46,822 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:01:46,823 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:01:46,823 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:01:46,824 [8] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:01:46,824 [8] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:01:46,825 [8] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:01:46,826 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:01:46,826 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:01:46,827 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:01:46,828 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:01:46,828 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:01:46,829 [8] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:01:46,829 [8] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 19:01:47,416 [24] INFO dn_lib.tools.log - reload config docs
2021-01-10 19:01:47,417 [24] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:01:47,418 [24] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:01:47,419 [24] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:01:47,420 [24] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:01:47,420 [24] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:01:47,421 [24] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:01:47,422 [24] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:01:47,423 [24] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:01:47,424 [24] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:01:47,425 [24] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:01:47,425 [24] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:01:47,426 [24] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:01:47,427 [24] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:01:47,427 [24] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:01:47,428 [24] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:01:47,429 [24] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:01:47,429 [24] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:01:47,430 [24] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:01:47,431 [24] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:01:47,431 [24] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:01:47,432 [24] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:01:47,433 [24] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:01:47,433 [24] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:01:47,434 [24] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:01:47,435 [24] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 19:01:47,484 [24] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-01-10 19:01:47,486 [24] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-01-10 19:01:47,489 [24] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-01-10 19:01:47,492 [24] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-01-10 19:01:47,495 [24] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-01-10 19:01:47,497 [24] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-01-10 19:01:47,498 [24] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-01-10 19:01:47,501 [24] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-10 19:01:47,508 [24] DEBUG dn_lib.tools.log - lettura cartelle
2021-01-10 19:01:47,509 [24] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-10 19:01:47,510 [24] DEBUG dn_lib.tools.log - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-01-10 19:01:47,512 [24] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-01-10 19:01:47,525 [24] DEBUG dn_lib.tools.log - leggo la cartella C:\root\todd\_test\dn
2021-01-10 19:01:47,527 [24] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = '210108.orches de dios.ok.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, '210108.orches de dios.ok.task', 1, convert(datetime, '2021-01-08 11:29:56', 120), convert(datetime, '2021-01-08 11:30:44', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-08 11:29:56', 120), dt_upd = convert(datetime, '2021-01-08 11:30:44', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-08 11:29:56', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-08 11:30:44', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 19:02:11,661 [24] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1808 and file_name = 'rincos.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1808, 'rincos.sql', '.sql', 1, convert(datetime, '2021-01-08 11:30:44', 120), convert(datetime, '2021-01-08 11:35:14', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-08 11:30:44', 120), dt_upd = convert(datetime, '2021-01-08 11:35:14', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-08 11:30:44', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-08 11:35:14', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 19:02:11,678 [24] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = 'la cartilla';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, 'la cartilla', 1, convert(datetime, '2021-01-08 11:41:58', 120), convert(datetime, '2021-01-10 18:40:35', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-08 11:41:58', 120), dt_upd = convert(datetime, '2021-01-10 18:40:35', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-08 11:41:58', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-10 18:40:35', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 19:02:11,686 [24] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id is null and file_name = 'script.incorso.task.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, null, 'script.incorso.task.sql', '.sql', 1, convert(datetime, '2021-01-07 16:50:16', 120), convert(datetime, '2021-01-07 16:50:48', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 16:50:16', 120), dt_upd = convert(datetime, '2021-01-07 16:50:48', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 16:50:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-07 16:50:48', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 19:02:11,697 [24] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4266;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, null, 4266, left('script', 150)
            , NULL, convert(datetime, '2021-01-07 16:50:16', 120), convert(datetime, '2021-01-07 16:50:48', 120), 1
            , 'in_corso', NULL, NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 16:50:16', 120), dt_upd = convert(datetime, '2021-01-07 16:50:48', 120)
         , title = left('script', 150), [user] = NULL
         , stato = 'in_corso', priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 16:50:16', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-01-07 16:50:48', 120), getdate())
          or isnull(title, '') <> isnull('script', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('in_corso', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 19:02:11,714 [24] DEBUG dn_lib.tools.log - SQL: delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
2021-01-10 19:02:11,725 [24] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '2')
        else update users_cache set var_value = substring('2', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-01-10 19:02:11,734 [24] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '2')
        else update users_cache set var_value = substring('2', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-01-10 19:02:11,747 [24] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/01/10 18:40:35')
        else update users_cache set var_value = substring('2021/01/10 18:40:35', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-01-10 19:02:11,752 [24] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/01/10 19:02:11')
        else update users_cache set var_value = substring('2021/01/10 19:02:11', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-01-10 19:03:54,692 [7] INFO dn_lib.tools.log - reload core
2021-01-10 19:03:54,724 [7] INFO dn_lib.tools.log - reload config docs
2021-01-10 19:03:54,726 [7] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:03:54,728 [7] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:03:54,729 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:03:54,730 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:03:54,732 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:03:54,742 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:03:54,743 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:03:54,744 [7] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:03:54,745 [7] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:03:54,747 [7] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:03:54,747 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:03:54,748 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:03:54,750 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:03:54,751 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:03:54,751 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:03:54,752 [7] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:03:54,752 [7] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:03:54,780 [7] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:03:54,782 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:03:54,783 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:03:54,783 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:03:54,784 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:03:54,785 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:03:54,785 [7] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:03:54,787 [7] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 19:03:54,845 [8] INFO dn_lib.tools.log - reload config docs
2021-01-10 19:03:54,846 [8] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:03:54,847 [8] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:03:54,848 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:03:54,848 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:03:54,849 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:03:54,850 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:03:54,850 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:03:54,851 [8] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:03:54,852 [8] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:03:54,853 [8] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:03:54,853 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:03:54,854 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:03:54,855 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:03:54,855 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:03:54,856 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:03:54,857 [8] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:03:54,858 [8] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:03:54,859 [8] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:03:54,859 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:03:54,860 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:03:54,861 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:03:54,862 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:03:54,862 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:03:54,863 [8] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:03:54,864 [8] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 19:03:54,924 [26] INFO dn_lib.tools.log - reload config docs
2021-01-10 19:03:54,925 [26] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:03:54,926 [26] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:03:54,927 [26] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:03:54,928 [26] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:03:54,928 [26] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:03:54,929 [26] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:03:54,930 [26] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:03:54,930 [26] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:03:54,931 [26] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:03:54,931 [26] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:03:54,932 [26] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:03:54,932 [26] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:03:54,933 [26] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:03:54,933 [26] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:03:54,934 [26] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:03:54,934 [26] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:03:54,935 [26] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:03:54,935 [26] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:03:54,936 [26] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:03:54,936 [26] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:03:54,937 [26] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:03:54,937 [26] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:03:54,938 [26] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:03:54,938 [26] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:03:54,942 [26] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 19:03:54,967 [26] DEBUG dn_lib.tools.log - SQL: select task_filter_id, filter_title, filter_notes, filter_def, filter_class
 from dn_tasks_filters order by filter_order
2021-01-10 19:03:54,973 [26] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 0 and var_name in ('active-task-filter')
2021-01-10 19:03:54,978 [26] DEBUG dn_lib.tools.log - SQL: select ft.tp, ft.synch_folder_id, ft.folder_id, ft.parent_id, ft.title
       , ft.des, ft.http_path, ft.lvl, dbo.folder_path(ft.folder_id) as folder_path
       , (select top 1 1 from dn_tasks where folder_id = ft.folder_id) as is_task
      from dbo.fnc_dn_folders(null, null) ft
      
      order by ft.synch_folder_id, ft.lvl, ft.title
2021-01-10 19:03:54,990 [26] DEBUG dn_lib.tools.log - SQL: select f.synch_folder_id, f.file_id, f.folder_id, f.file_name, f.dt_ins , null as found_file
       from dn_files f
       where exists (select top 1 1 from dbo.fnc_dn_folders(null, null) ft 
        
	      where ft.synch_folder_id = f.synch_folder_id 
          and isnull(ft.folder_id, 0) = isnull(f.folder_id, 0))
2021-01-10 19:03:55,000 [26] DEBUG dn_lib.tools.log - SQL: select t3.*
      , tst.stato, tst.[order] as stato_order, isnull(tst.class, 'light') as stato_class, isnull(tst.title_plurale, '') as stato_title_plurale, isnull(tst.title_singolare, '') as stato_title_singolare
      , tp.priorita, tp.[order] as priorita_order, isnull(tp.class, 'light') as priorita_class, isnull(tp.title_plurale, '') as priorita_title_plurale, isnull(tp.title_singolare, '') as priorita_title_singolare
      , tt.tipo, tt.[order] as tipo_order, isnull(tt.class, 'light') as tipo_class, isnull(tt.title_plurale, '') as tipo_title_plurale, isnull(tt.title_singolare, '') as tipo_title_singolare
      , ts.stima, ts.[days] as stima_days, isnull(ts.class, 'light') as stima_class, isnull(ts.title_plurale, '') as stima_title_plurale, isnull(ts.title_singolare, '') as stima_title_singolare
      , (select top 1 1 from dn_tasks_notes where task_id = t3.task_id) as task_notes
      , (select top 1 1 from vw_task_allegati f2 where f2.task_id = t3.task_id 
          and not exists (select top 1 1 from dn_files_info where file_name = f2.file_name)) as task_files
  from (select t2.*, datediff(day, t2.dt_ref, getdate()) as diff_days
    from (select t.task_id, t.synch_folder_id, isnull(t.folder_id, f.folder_id) as folder_id
	   , t.file_id, t.title, t.[user], t.stato, t.priorita, t.tipo, t.stima, t.dt_ins, t.dt_upd
     , (case when t.dt_ins > t.dt_upd then t.dt_ins else t.dt_upd end) as dt_ref
	  from dn_tasks t
    
	  left join dn_files f on f.file_id = t.file_id
    where (null is null or (null is not null and t.task_id = null)) ) t2
    where exists (select top 1 1 from dbo.fnc_dn_folders(null, null) ft 
	    where  ft.synch_folder_id = t2.synch_folder_id 
       and isnull(ft.folder_id, 0) = isnull(t2.folder_id, 0))) t3
   left join dn_task_stato tst on tst.stato = t3.stato
   left join dn_task_priorita tp on tp.priorita = t3.priorita
   left join dn_task_tipo tt on tt.tipo = t3.tipo
   left join dn_task_stima ts on ts.stima = t3.stima
   where 1 = 1 
2021-01-10 19:03:55,029 [26] DEBUG dn_lib.tools.log - SQL: select title_singolare, stato from dn_task_stato order by [order]
2021-01-10 19:03:55,040 [26] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, priorita as [value], [order] from dn_task_priorita
      ) t order by t.[order]
2021-01-10 19:03:55,125 [26] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [days]
       union select title_singolare as title, stima as [value], [days] from dn_task_stima 
       ) t order by t.[days]
2021-01-10 19:03:55,128 [26] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, tipo as [value], [order] from dn_task_tipo
       ) t order by t.[order]
2021-01-10 19:03:55,131 [26] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value]
       union select nome as title, nome as [value] from users
       ) t order by 2
2021-01-10 19:04:00,974 [25] INFO dn_lib.tools.log - reload config docs
2021-01-10 19:04:00,975 [25] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:04:00,977 [25] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:04:00,978 [25] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:04:00,979 [25] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:04:00,980 [25] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:04:00,980 [25] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:04:00,981 [25] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:04:00,982 [25] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:04:00,983 [25] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:04:00,984 [25] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:04:00,985 [25] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:04:00,985 [25] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:04:00,986 [25] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:04:00,988 [25] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:04:00,988 [25] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:04:00,989 [25] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:04:00,990 [25] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:04:00,991 [25] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:04:00,992 [25] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:04:00,993 [25] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:04:00,994 [25] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:04:00,995 [25] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:04:00,995 [25] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:04:00,995 [25] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:04:00,996 [25] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 19:04:01,026 [8] INFO dn_lib.tools.log - reload config docs
2021-01-10 19:04:01,027 [8] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:04:01,027 [8] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:04:01,028 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:04:01,029 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:04:01,029 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:04:01,030 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:04:01,030 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:04:01,031 [8] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:04:01,031 [8] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:04:01,033 [8] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:04:01,033 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:04:01,033 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:04:01,033 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:04:01,034 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:04:01,034 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:04:01,035 [8] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:04:01,035 [8] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:04:01,036 [8] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:04:01,036 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:04:01,037 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:04:01,037 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:04:01,038 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:04:01,039 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:04:01,040 [8] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:04:01,040 [8] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 19:04:01,075 [26] INFO dn_lib.tools.log - reload config docs
2021-01-10 19:04:01,076 [26] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:04:01,076 [26] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:04:01,077 [26] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:04:01,077 [26] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:04:01,078 [26] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:04:01,079 [26] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:04:01,079 [26] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:04:01,080 [26] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:04:01,080 [26] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:04:01,080 [26] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:04:01,081 [26] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:04:01,081 [26] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:04:01,082 [26] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:04:01,082 [26] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:04:01,082 [26] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:04:01,083 [26] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:04:01,083 [26] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:04:01,084 [26] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:04:01,084 [26] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:04:01,085 [26] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:04:01,085 [26] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:04:01,086 [26] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:04:01,086 [26] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:04:01,087 [26] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:04:01,087 [26] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 19:04:01,651 [7] INFO dn_lib.tools.log - reload config docs
2021-01-10 19:04:01,652 [7] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:04:01,653 [7] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:04:01,654 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:04:01,654 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:04:01,655 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:04:01,656 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:04:01,657 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:04:01,658 [7] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:04:01,658 [7] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:04:01,659 [7] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:04:01,659 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:04:01,660 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:04:01,660 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:04:01,660 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:04:01,661 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:04:01,661 [7] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:04:01,662 [7] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:04:01,662 [7] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:04:01,663 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:04:01,663 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:04:01,664 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:04:01,664 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:04:01,665 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:04:01,665 [7] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:04:01,666 [7] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 19:04:01,712 [7] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-01-10 19:04:01,714 [7] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-01-10 19:04:01,718 [7] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-01-10 19:04:01,720 [7] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-01-10 19:04:01,723 [7] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-01-10 19:04:01,725 [7] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-01-10 19:04:01,727 [7] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-01-10 19:04:01,730 [7] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-10 19:04:01,737 [7] DEBUG dn_lib.tools.log - lettura cartelle
2021-01-10 19:04:01,738 [7] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-10 19:04:01,739 [7] DEBUG dn_lib.tools.log - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-01-10 19:04:01,741 [7] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-01-10 19:04:01,744 [7] DEBUG dn_lib.tools.log - leggo la cartella C:\root\todd\_test\dn
2021-01-10 19:04:01,746 [7] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = '210108.orches de dios.ok.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, '210108.orches de dios.ok.task', 1, convert(datetime, '2021-01-08 11:29:56', 120), convert(datetime, '2021-01-08 11:30:44', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-08 11:29:56', 120), dt_upd = convert(datetime, '2021-01-08 11:30:44', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-08 11:29:56', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-08 11:30:44', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 19:04:01,804 [7] DEBUG dn_lib.tools.log - SQL: update dn_folders set folder_name = 'orches de dios.task', dt_upd = convert(datetime, convert(varchar, getdate(), 120), 120)
        where folder_id = 1808
2021-01-10 19:04:01,812 [7] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1808 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, 1808, null, left('orches de dios', 150)
            , NULL, convert(datetime, '2021-01-08 00:00:00', 120), convert(datetime, '2021-01-08 11:30:44', 120), 1
            , 'fatto', NULL, NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-08 00:00:00', 120), dt_upd = convert(datetime, '2021-01-08 11:30:44', 120)
         , title = left('orches de dios', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-08 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-01-08 11:30:44', 120), getdate())
          or isnull(title, '') <> isnull('orches de dios', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 19:04:01,817 [7] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\orches de dios
2021-01-10 19:04:01,819 [7] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1808 and file_name = 'rincos.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1808, 'rincos.sql', '.sql', 1, convert(datetime, '2021-01-08 11:30:44', 120), convert(datetime, '2021-01-08 11:35:14', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-08 11:30:44', 120), dt_upd = convert(datetime, '2021-01-08 11:35:14', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-08 11:30:44', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-08 11:35:14', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 19:04:01,825 [7] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1808 and file_name = '__i.xml';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1808, '__i.xml', '.xml', 1, convert(datetime, '2021-01-10 19:04:01', 120), convert(datetime, '2021-01-10 19:04:01', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-10 19:04:01', 120), dt_upd = convert(datetime, '2021-01-10 19:04:01', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-10 19:04:01', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-10 19:04:01', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 19:04:01,830 [7] DEBUG dn_lib.tools.log - added file 4267: C:\root\todd\_test\dn\orches de dios.task\__i.xml
2021-01-10 19:04:01,831 [7] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1420) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 19:04:01,841 [7] DEBUG dn_lib.tools.log - updated task: C:\root\todd\_test\dn\orches de dios
2021-01-10 19:04:01,843 [7] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = 'la cartilla';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, 'la cartilla', 1, convert(datetime, '2021-01-08 11:41:58', 120), convert(datetime, '2021-01-10 18:40:35', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-08 11:41:58', 120), dt_upd = convert(datetime, '2021-01-10 18:40:35', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-08 11:41:58', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-10 18:40:35', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 19:04:01,847 [7] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id is null and file_name = 'script.incorso.task.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, null, 'script.incorso.task.sql', '.sql', 1, convert(datetime, '2021-01-07 16:50:16', 120), convert(datetime, '2021-01-07 16:50:48', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 16:50:16', 120), dt_upd = convert(datetime, '2021-01-07 16:50:48', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 16:50:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-07 16:50:48', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 19:04:01,881 [7] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4266;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, null, 4266, left('script', 150)
            , NULL, convert(datetime, '2021-01-07 16:50:16', 120), convert(datetime, '2021-01-07 16:50:48', 120), 1
            , 'in_corso', NULL, NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 16:50:16', 120), dt_upd = convert(datetime, '2021-01-07 16:50:48', 120)
         , title = left('script', 150), [user] = NULL
         , stato = 'in_corso', priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 16:50:16', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-01-07 16:50:48', 120), getdate())
          or isnull(title, '') <> isnull('script', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('in_corso', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 19:04:01,889 [7] DEBUG dn_lib.tools.log - SQL: delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
2021-01-10 19:04:01,894 [7] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '2')
        else update users_cache set var_value = substring('2', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-01-10 19:04:01,898 [7] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '2')
        else update users_cache set var_value = substring('2', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-01-10 19:04:01,901 [7] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/01/10 18:40:35')
        else update users_cache set var_value = substring('2021/01/10 18:40:35', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-01-10 19:04:01,904 [7] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/01/10 19:04:01')
        else update users_cache set var_value = substring('2021/01/10 19:04:01', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-01-10 19:04:53,717 [7] INFO dn_lib.tools.log - reload core
2021-01-10 19:04:53,768 [7] INFO dn_lib.tools.log - reload config docs
2021-01-10 19:04:53,771 [7] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:04:53,772 [7] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:04:53,773 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:04:53,773 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:04:53,774 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:04:53,775 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:04:53,776 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:04:53,777 [7] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:04:53,777 [7] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:04:53,781 [7] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:04:53,782 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:04:53,783 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:04:53,785 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:04:53,786 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:04:53,787 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:04:53,788 [7] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:04:53,789 [7] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:04:53,808 [7] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:04:53,809 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:04:53,811 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:04:53,812 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:04:53,813 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:04:53,814 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:04:53,815 [7] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:04:53,817 [7] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 19:04:53,875 [26] INFO dn_lib.tools.log - reload config docs
2021-01-10 19:04:53,884 [26] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:04:53,886 [26] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:04:53,887 [26] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:04:53,888 [26] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:04:53,890 [26] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:04:53,891 [26] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:04:53,892 [26] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:04:53,893 [26] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:04:53,893 [26] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:04:53,894 [26] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:04:53,895 [26] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:04:53,896 [26] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:04:53,897 [26] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:04:53,898 [26] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:04:53,899 [26] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:04:53,899 [26] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:04:53,900 [26] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:04:53,900 [26] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:04:53,901 [26] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:04:53,902 [26] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:04:53,902 [26] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:04:53,903 [26] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:04:53,904 [26] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:04:53,904 [26] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:04:53,905 [26] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 19:04:53,970 [8] INFO dn_lib.tools.log - reload config docs
2021-01-10 19:04:53,971 [8] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:04:53,972 [8] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:04:53,972 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:04:53,973 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:04:53,973 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:04:53,974 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:04:53,975 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:04:53,975 [8] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:04:53,976 [8] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:04:53,976 [8] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:04:53,977 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:04:53,977 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:04:53,978 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:04:53,979 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:04:53,980 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:04:53,980 [8] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:04:53,981 [8] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:04:53,981 [8] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:04:53,982 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:04:53,982 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:04:53,983 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:04:53,984 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:04:53,984 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:04:53,985 [8] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:04:53,989 [8] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 19:04:54,014 [8] DEBUG dn_lib.tools.log - SQL: select task_filter_id, filter_title, filter_notes, filter_def, filter_class
 from dn_tasks_filters order by filter_order
2021-01-10 19:04:54,019 [8] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 0 and var_name in ('active-task-filter')
2021-01-10 19:04:54,025 [8] DEBUG dn_lib.tools.log - SQL: select ft.tp, ft.synch_folder_id, ft.folder_id, ft.parent_id, ft.title
       , ft.des, ft.http_path, ft.lvl, dbo.folder_path(ft.folder_id) as folder_path
       , (select top 1 1 from dn_tasks where folder_id = ft.folder_id) as is_task
      from dbo.fnc_dn_folders(null, null) ft
      
      order by ft.synch_folder_id, ft.lvl, ft.title
2021-01-10 19:04:54,037 [8] DEBUG dn_lib.tools.log - SQL: select f.synch_folder_id, f.file_id, f.folder_id, f.file_name, f.dt_ins , null as found_file
       from dn_files f
       where exists (select top 1 1 from dbo.fnc_dn_folders(null, null) ft 
        
	      where ft.synch_folder_id = f.synch_folder_id 
          and isnull(ft.folder_id, 0) = isnull(f.folder_id, 0))
2021-01-10 19:04:54,047 [8] DEBUG dn_lib.tools.log - SQL: select t3.*
      , tst.stato, tst.[order] as stato_order, isnull(tst.class, 'light') as stato_class, isnull(tst.title_plurale, '') as stato_title_plurale, isnull(tst.title_singolare, '') as stato_title_singolare
      , tp.priorita, tp.[order] as priorita_order, isnull(tp.class, 'light') as priorita_class, isnull(tp.title_plurale, '') as priorita_title_plurale, isnull(tp.title_singolare, '') as priorita_title_singolare
      , tt.tipo, tt.[order] as tipo_order, isnull(tt.class, 'light') as tipo_class, isnull(tt.title_plurale, '') as tipo_title_plurale, isnull(tt.title_singolare, '') as tipo_title_singolare
      , ts.stima, ts.[days] as stima_days, isnull(ts.class, 'light') as stima_class, isnull(ts.title_plurale, '') as stima_title_plurale, isnull(ts.title_singolare, '') as stima_title_singolare
      , (select top 1 1 from dn_tasks_notes where task_id = t3.task_id) as task_notes
      , (select top 1 1 from vw_task_allegati f2 where f2.task_id = t3.task_id 
          and not exists (select top 1 1 from dn_files_info where file_name = f2.file_name)) as task_files
  from (select t2.*, datediff(day, t2.dt_ref, getdate()) as diff_days
    from (select t.task_id, t.synch_folder_id, isnull(t.folder_id, f.folder_id) as folder_id
	   , t.file_id, t.title, t.[user], t.stato, t.priorita, t.tipo, t.stima, t.dt_ins, t.dt_upd
     , (case when t.dt_ins > t.dt_upd then t.dt_ins else t.dt_upd end) as dt_ref
	  from dn_tasks t
    
	  left join dn_files f on f.file_id = t.file_id
    where (null is null or (null is not null and t.task_id = null)) ) t2
    where exists (select top 1 1 from dbo.fnc_dn_folders(null, null) ft 
	    where  ft.synch_folder_id = t2.synch_folder_id 
       and isnull(ft.folder_id, 0) = isnull(t2.folder_id, 0))) t3
   left join dn_task_stato tst on tst.stato = t3.stato
   left join dn_task_priorita tp on tp.priorita = t3.priorita
   left join dn_task_tipo tt on tt.tipo = t3.tipo
   left join dn_task_stima ts on ts.stima = t3.stima
   where 1 = 1 
2021-01-10 19:04:54,083 [8] DEBUG dn_lib.tools.log - SQL: select title_singolare, stato from dn_task_stato order by [order]
2021-01-10 19:04:54,099 [8] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, priorita as [value], [order] from dn_task_priorita
      ) t order by t.[order]
2021-01-10 19:04:54,186 [8] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [days]
       union select title_singolare as title, stima as [value], [days] from dn_task_stima 
       ) t order by t.[days]
2021-01-10 19:04:54,189 [8] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, tipo as [value], [order] from dn_task_tipo
       ) t order by t.[order]
2021-01-10 19:04:54,191 [8] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value]
       union select nome as title, nome as [value] from users
       ) t order by 2
2021-01-10 19:04:59,146 [7] INFO dn_lib.tools.log - reload config docs
2021-01-10 19:04:59,148 [7] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:04:59,149 [7] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:04:59,150 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:04:59,150 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:04:59,151 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:04:59,152 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:04:59,152 [7] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:04:59,153 [7] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:04:59,153 [7] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:04:59,154 [7] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:04:59,154 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:04:59,155 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:04:59,155 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:04:59,156 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:04:59,156 [7] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:04:59,157 [7] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:04:59,157 [7] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:04:59,157 [7] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:04:59,158 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:04:59,158 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:04:59,159 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:04:59,159 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:04:59,160 [7] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:04:59,160 [7] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:04:59,162 [7] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 19:04:59,189 [26] INFO dn_lib.tools.log - reload config docs
2021-01-10 19:04:59,190 [26] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:04:59,191 [26] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:04:59,192 [26] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:04:59,192 [26] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:04:59,193 [26] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:04:59,194 [26] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:04:59,195 [26] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:04:59,195 [26] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:04:59,196 [26] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:04:59,197 [26] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:04:59,197 [26] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:04:59,198 [26] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:04:59,198 [26] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:04:59,199 [26] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:04:59,199 [26] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:04:59,200 [26] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:04:59,200 [26] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:04:59,201 [26] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:04:59,202 [26] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:04:59,202 [26] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:04:59,203 [26] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:04:59,203 [26] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:04:59,204 [26] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:04:59,204 [26] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:04:59,205 [26] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 19:04:59,243 [8] INFO dn_lib.tools.log - reload config docs
2021-01-10 19:04:59,244 [8] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:04:59,244 [8] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:04:59,245 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:04:59,246 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:04:59,247 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:04:59,247 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:04:59,248 [8] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:04:59,248 [8] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:04:59,249 [8] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:04:59,249 [8] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:04:59,250 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:04:59,250 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:04:59,250 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:04:59,251 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:04:59,251 [8] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:04:59,252 [8] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:04:59,252 [8] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:04:59,252 [8] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:04:59,253 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:04:59,253 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:04:59,254 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:04:59,254 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:04:59,254 [8] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:04:59,254 [8] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:04:59,255 [8] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 19:04:59,815 [25] INFO dn_lib.tools.log - reload config docs
2021-01-10 19:04:59,816 [25] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:04:59,817 [25] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:04:59,818 [25] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:04:59,818 [25] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:04:59,819 [25] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:04:59,820 [25] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:04:59,821 [25] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:04:59,822 [25] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:04:59,823 [25] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:04:59,824 [25] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:04:59,824 [25] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:04:59,825 [25] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:04:59,825 [25] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:04:59,826 [25] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:04:59,827 [25] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:04:59,827 [25] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:04:59,828 [25] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:04:59,829 [25] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:04:59,829 [25] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:04:59,830 [25] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:04:59,831 [25] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:04:59,831 [25] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:04:59,832 [25] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:04:59,832 [25] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:04:59,833 [25] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 19:04:59,879 [25] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-01-10 19:04:59,882 [25] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-01-10 19:04:59,885 [25] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-01-10 19:04:59,887 [25] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-01-10 19:04:59,890 [25] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-01-10 19:04:59,893 [25] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-01-10 19:04:59,894 [25] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-01-10 19:04:59,897 [25] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-10 19:04:59,903 [25] DEBUG dn_lib.tools.log - lettura cartelle
2021-01-10 19:04:59,905 [25] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-10 19:04:59,906 [25] DEBUG dn_lib.tools.log - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-01-10 19:04:59,908 [25] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-01-10 19:04:59,919 [25] DEBUG dn_lib.tools.log - leggo la cartella C:\root\todd\_test\dn
2021-01-10 19:04:59,921 [25] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = '210107.orches.incorso.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, '210107.orches.incorso.task', 1, convert(datetime, '2021-01-10 19:04:38', 120), convert(datetime, '2021-01-10 19:04:38', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-10 19:04:38', 120), dt_upd = convert(datetime, '2021-01-10 19:04:38', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-10 19:04:38', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-10 19:04:38', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 19:04:59,926 [25] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\210107.orches.incorso.task
2021-01-10 19:07:25,985 [25] DEBUG dn_lib.tools.log - SQL: update dn_folders set folder_name = 'orches.task', dt_upd = convert(datetime, convert(varchar, getdate(), 120), 120)
        where folder_id = 1811
2021-01-10 19:07:53,413 [25] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1811 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, 1811, null, left('orches', 150)
            , NULL, convert(datetime, '2021-01-07 00:00:00', 120), convert(datetime, '2021-01-10 19:04:38', 120), 1
            , 'in_corso', NULL, NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 00:00:00', 120), dt_upd = convert(datetime, '2021-01-10 19:04:38', 120)
         , title = left('orches', 150), [user] = NULL
         , stato = 'in_corso', priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-01-10 19:04:38', 120), getdate())
          or isnull(title, '') <> isnull('orches', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('in_corso', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 19:07:57,143 [25] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\orches
2021-01-10 19:07:59,274 [25] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1811 and file_name = 'badabemmm.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1811, 'badabemmm.sql', '.sql', 1, convert(datetime, '2021-01-10 19:04:38', 120), convert(datetime, '2021-01-07 16:50:48', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-10 19:04:38', 120), dt_upd = convert(datetime, '2021-01-07 16:50:48', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-10 19:04:38', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-07 16:50:48', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 19:07:59,292 [25] DEBUG dn_lib.tools.log - added file 4268: C:\root\todd\_test\dn\orches.task\badabemmm.sql
2021-01-10 19:07:59,296 [25] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4268;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4268, '.sql', @content, convert(datetime, '2021-01-10 19:04:38', 120), convert(datetime, '2021-01-07 16:50:48', 120));
2021-01-10 19:07:59,299 [25] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\orches.task\badabemmm.sql'
2021-01-10 19:07:59,300 [25] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1811 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1811, 'i.txt', '.txt', 1, convert(datetime, '2021-01-10 19:04:38', 120), convert(datetime, '2021-01-08 11:51:29', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-10 19:04:38', 120), dt_upd = convert(datetime, '2021-01-08 11:51:29', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-10 19:04:38', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-08 11:51:29', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 19:07:59,306 [25] DEBUG dn_lib.tools.log - added file 4269: C:\root\todd\_test\dn\orches.task\i.txt
2021-01-10 19:07:59,307 [25] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4269;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4269, '.txt', @content, convert(datetime, '2021-01-10 19:04:38', 120), convert(datetime, '2021-01-08 11:51:29', 120));
2021-01-10 19:07:59,311 [25] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1421;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1421, 4269, @content
          , convert(datetime, '2021-01-10 19:04:38', 120), convert(datetime, '2021-01-08 11:51:29', 120));
2021-01-10 19:07:59,315 [25] DEBUG dn_lib.tools.log - lette note task 1421
2021-01-10 19:07:59,316 [25] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\orches.task\i.txt'
2021-01-10 19:07:59,316 [25] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1811 and file_name = 'yes.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1811, 'yes.sql', '.sql', 1, convert(datetime, '2021-01-10 19:04:38', 120), convert(datetime, '2021-01-07 17:05:34', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-10 19:04:38', 120), dt_upd = convert(datetime, '2021-01-07 17:05:34', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-10 19:04:38', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-07 17:05:34', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 19:07:59,321 [25] DEBUG dn_lib.tools.log - added file 4270: C:\root\todd\_test\dn\orches.task\yes.sql
2021-01-10 19:07:59,323 [25] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4270;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4270, '.sql', @content, convert(datetime, '2021-01-10 19:04:38', 120), convert(datetime, '2021-01-07 17:05:34', 120));
2021-01-10 19:07:59,326 [25] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\orches.task\yes.sql'
2021-01-10 19:07:59,327 [25] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1811 and file_name = '__i.xml';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1811, '__i.xml', '.xml', 1, convert(datetime, '2021-01-10 19:05:50', 120), convert(datetime, '2021-01-10 19:07:43', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-10 19:05:50', 120), dt_upd = convert(datetime, '2021-01-10 19:07:43', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-10 19:05:50', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-10 19:07:43', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 19:07:59,332 [25] DEBUG dn_lib.tools.log - added file 4271: C:\root\todd\_test\dn\orches.task\__i.xml
2021-01-10 19:07:59,333 [25] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1421) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 19:07:59,340 [25] DEBUG dn_lib.tools.log - updated task: C:\root\todd\_test\dn\orches
2021-01-10 19:07:59,341 [25] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = 'la cartilla';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, 'la cartilla', 1, convert(datetime, '2021-01-08 11:41:58', 120), convert(datetime, '2021-01-10 18:40:35', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-08 11:41:58', 120), dt_upd = convert(datetime, '2021-01-10 18:40:35', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-08 11:41:58', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-10 18:40:35', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 19:08:08,666 [25] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id is null and file_name = 'script.incorso.task.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, null, 'script.incorso.task.sql', '.sql', 1, convert(datetime, '2021-01-07 16:50:16', 120), convert(datetime, '2021-01-07 16:50:48', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 16:50:16', 120), dt_upd = convert(datetime, '2021-01-07 16:50:48', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 16:50:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-07 16:50:48', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 19:08:08,716 [25] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4266;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, null, 4266, left('script', 150)
            , NULL, convert(datetime, '2021-01-07 16:50:16', 120), convert(datetime, '2021-01-07 16:50:48', 120), 1
            , 'in_corso', NULL, NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 16:50:16', 120), dt_upd = convert(datetime, '2021-01-07 16:50:48', 120)
         , title = left('script', 150), [user] = NULL
         , stato = 'in_corso', priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 16:50:16', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-01-07 16:50:48', 120), getdate())
          or isnull(title, '') <> isnull('script', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('in_corso', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 19:08:08,722 [25] DEBUG dn_lib.tools.log - SQL: delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
2021-01-10 19:08:08,729 [25] DEBUG dn_lib.tools.log - cancellati 5 files/folders/tasks
2021-01-10 19:08:08,730 [25] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '4')
        else update users_cache set var_value = substring('4', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-01-10 19:08:08,734 [25] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '2')
        else update users_cache set var_value = substring('2', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-01-10 19:08:08,737 [25] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/01/10 19:04:38')
        else update users_cache set var_value = substring('2021/01/10 19:04:38', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-01-10 19:08:08,740 [25] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/01/10 19:08:08')
        else update users_cache set var_value = substring('2021/01/10 19:08:08', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-01-10 19:23:13,601 [26] INFO dn_lib.tools.log - reload core
2021-01-10 19:23:13,637 [26] INFO dn_lib.tools.log - reload config docs
2021-01-10 19:23:13,640 [26] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:23:13,641 [26] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:23:13,642 [26] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:23:13,644 [26] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:23:13,645 [26] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:23:13,659 [26] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:23:13,668 [26] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:23:13,669 [26] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:23:13,670 [26] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:23:13,672 [26] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:23:13,672 [26] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:23:13,673 [26] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:23:13,675 [26] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:23:13,676 [26] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:23:13,677 [26] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:23:13,678 [26] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:23:13,679 [26] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:23:13,695 [26] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:23:13,697 [26] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:23:13,697 [26] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:23:13,698 [26] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:23:13,699 [26] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:23:13,700 [26] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:23:13,700 [26] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:23:13,702 [26] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 19:23:13,758 [65] INFO dn_lib.tools.log - reload config docs
2021-01-10 19:23:13,759 [65] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:23:13,760 [65] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:23:13,761 [65] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:23:13,761 [65] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:23:13,762 [65] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:23:13,763 [65] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:23:13,763 [65] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:23:13,764 [65] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:23:13,765 [65] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:23:13,765 [65] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:23:13,766 [65] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:23:13,767 [65] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:23:13,767 [65] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:23:13,768 [65] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:23:13,768 [65] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:23:13,769 [65] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:23:13,769 [65] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:23:13,770 [65] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:23:13,771 [65] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:23:13,771 [65] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:23:13,772 [65] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:23:13,772 [65] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:23:13,773 [65] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:23:13,774 [65] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:23:13,774 [65] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 19:23:13,842 [70] INFO dn_lib.tools.log - reload config docs
2021-01-10 19:23:13,843 [70] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:23:13,844 [70] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:23:13,845 [70] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:23:13,845 [70] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:23:13,846 [70] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:23:13,847 [70] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:23:13,847 [70] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:23:13,848 [70] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:23:13,849 [70] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:23:13,850 [70] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:23:13,851 [70] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:23:13,851 [70] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:23:13,852 [70] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:23:13,852 [70] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:23:13,853 [70] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:23:13,853 [70] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:23:13,853 [70] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:23:13,854 [70] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:23:13,854 [70] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:23:13,855 [70] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:23:13,856 [70] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:23:13,856 [70] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:23:13,857 [70] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:23:13,857 [70] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:23:13,860 [70] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 19:23:13,882 [70] DEBUG dn_lib.tools.log - SQL: select task_filter_id, filter_title, filter_notes, filter_def, filter_class
 from dn_tasks_filters order by filter_order
2021-01-10 19:23:13,888 [70] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 0 and var_name in ('active-task-filter')
2021-01-10 19:23:13,894 [70] DEBUG dn_lib.tools.log - SQL: select ft.tp, ft.synch_folder_id, ft.folder_id, ft.parent_id, ft.title
       , ft.des, ft.http_path, ft.lvl, dbo.folder_path(ft.folder_id) as folder_path
       , (select top 1 1 from dn_tasks where folder_id = ft.folder_id) as is_task
      from dbo.fnc_dn_folders(null, null) ft
      
      order by ft.synch_folder_id, ft.lvl, ft.title
2021-01-10 19:23:13,905 [70] DEBUG dn_lib.tools.log - SQL: select f.synch_folder_id, f.file_id, f.folder_id, f.file_name, f.dt_ins , null as found_file
       from dn_files f
       where exists (select top 1 1 from dbo.fnc_dn_folders(null, null) ft 
        
	      where ft.synch_folder_id = f.synch_folder_id 
          and isnull(ft.folder_id, 0) = isnull(f.folder_id, 0))
2021-01-10 19:23:13,914 [70] DEBUG dn_lib.tools.log - SQL: select t3.*
      , tst.stato, tst.[order] as stato_order, isnull(tst.class, 'light') as stato_class, isnull(tst.title_plurale, '') as stato_title_plurale, isnull(tst.title_singolare, '') as stato_title_singolare
      , tp.priorita, tp.[order] as priorita_order, isnull(tp.class, 'light') as priorita_class, isnull(tp.title_plurale, '') as priorita_title_plurale, isnull(tp.title_singolare, '') as priorita_title_singolare
      , tt.tipo, tt.[order] as tipo_order, isnull(tt.class, 'light') as tipo_class, isnull(tt.title_plurale, '') as tipo_title_plurale, isnull(tt.title_singolare, '') as tipo_title_singolare
      , ts.stima, ts.[days] as stima_days, isnull(ts.class, 'light') as stima_class, isnull(ts.title_plurale, '') as stima_title_plurale, isnull(ts.title_singolare, '') as stima_title_singolare
      , (select top 1 1 from dn_tasks_notes where task_id = t3.task_id) as task_notes
      , (select top 1 1 from vw_task_allegati f2 where f2.task_id = t3.task_id 
          and not exists (select top 1 1 from dn_files_info where file_name = f2.file_name)) as task_files
  from (select t2.*, datediff(day, t2.dt_ref, getdate()) as diff_days
    from (select t.task_id, t.synch_folder_id, isnull(t.folder_id, f.folder_id) as folder_id
	   , t.file_id, t.title, t.[user], t.stato, t.priorita, t.tipo, t.stima, t.dt_ins, t.dt_upd
     , (case when t.dt_ins > t.dt_upd then t.dt_ins else t.dt_upd end) as dt_ref
	  from dn_tasks t
    
	  left join dn_files f on f.file_id = t.file_id
    where (null is null or (null is not null and t.task_id = null)) ) t2
    where exists (select top 1 1 from dbo.fnc_dn_folders(null, null) ft 
	    where  ft.synch_folder_id = t2.synch_folder_id 
       and isnull(ft.folder_id, 0) = isnull(t2.folder_id, 0))) t3
   left join dn_task_stato tst on tst.stato = t3.stato
   left join dn_task_priorita tp on tp.priorita = t3.priorita
   left join dn_task_tipo tt on tt.tipo = t3.tipo
   left join dn_task_stima ts on ts.stima = t3.stima
   where 1 = 1 
2021-01-10 19:23:13,948 [70] DEBUG dn_lib.tools.log - SQL: select title_singolare, stato from dn_task_stato order by [order]
2021-01-10 19:23:13,963 [70] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, priorita as [value], [order] from dn_task_priorita
      ) t order by t.[order]
2021-01-10 19:23:14,051 [70] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [days]
       union select title_singolare as title, stima as [value], [days] from dn_task_stima 
       ) t order by t.[days]
2021-01-10 19:23:14,054 [70] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, tipo as [value], [order] from dn_task_tipo
       ) t order by t.[order]
2021-01-10 19:23:14,056 [70] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value]
       union select nome as title, nome as [value] from users
       ) t order by 2
2021-01-10 19:23:24,479 [70] INFO dn_lib.tools.log - reload config docs
2021-01-10 19:23:24,481 [70] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:23:24,482 [70] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:23:24,484 [70] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:23:24,485 [70] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:23:24,485 [70] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:23:24,486 [70] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:23:24,487 [70] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:23:24,488 [70] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:23:24,488 [70] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:23:24,489 [70] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:23:24,489 [70] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:23:24,490 [70] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:23:24,490 [70] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:23:24,490 [70] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:23:24,491 [70] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:23:24,491 [70] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:23:24,492 [70] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:23:24,492 [70] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:23:24,493 [70] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:23:24,493 [70] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:23:24,493 [70] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:23:24,494 [70] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:23:24,494 [70] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:23:24,495 [70] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:23:24,496 [70] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 19:23:24,517 [65] INFO dn_lib.tools.log - reload config docs
2021-01-10 19:23:24,518 [65] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:23:24,519 [65] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:23:24,519 [65] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:23:24,520 [65] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:23:24,520 [65] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:23:24,521 [65] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:23:24,522 [65] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:23:24,522 [65] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:23:24,523 [65] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:23:24,523 [65] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:23:24,524 [65] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:23:24,524 [65] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:23:24,525 [65] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:23:24,525 [65] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:23:24,526 [65] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:23:24,526 [65] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:23:24,527 [65] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:23:24,527 [65] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:23:24,528 [65] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:23:24,528 [65] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:23:24,529 [65] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:23:24,529 [65] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:23:24,530 [65] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:23:24,530 [65] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:23:24,531 [65] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 19:23:24,568 [70] INFO dn_lib.tools.log - reload config docs
2021-01-10 19:23:24,569 [70] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:23:24,570 [70] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:23:24,571 [70] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:23:24,572 [70] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:23:24,572 [70] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:23:24,573 [70] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:23:24,574 [70] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:23:24,575 [70] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:23:24,575 [70] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:23:24,576 [70] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:23:24,576 [70] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:23:24,577 [70] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:23:24,577 [70] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:23:24,578 [70] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:23:24,578 [70] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:23:24,579 [70] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:23:24,580 [70] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:23:24,580 [70] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:23:24,581 [70] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:23:24,582 [70] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:23:24,582 [70] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:23:24,583 [70] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:23:24,584 [70] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:23:24,584 [70] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:23:24,585 [70] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 19:23:25,169 [78] INFO dn_lib.tools.log - reload config docs
2021-01-10 19:23:25,171 [78] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:23:25,172 [78] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:23:25,173 [78] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:23:25,174 [78] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:23:25,175 [78] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:23:25,176 [78] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:23:25,177 [78] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:23:25,178 [78] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:23:25,178 [78] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:23:25,179 [78] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:23:25,180 [78] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:23:25,181 [78] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:23:25,181 [78] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:23:25,182 [78] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:23:25,183 [78] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:23:25,184 [78] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:23:25,184 [78] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:23:25,185 [78] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:23:25,186 [78] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:23:25,187 [78] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:23:25,187 [78] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:23:25,188 [78] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:23:25,189 [78] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:23:25,189 [78] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:23:25,190 [78] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 19:23:25,236 [78] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-01-10 19:23:25,239 [78] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-01-10 19:23:25,241 [78] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-01-10 19:23:25,244 [78] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-01-10 19:23:25,247 [78] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-01-10 19:23:25,249 [78] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-01-10 19:23:25,250 [78] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-01-10 19:23:25,270 [78] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-10 19:23:25,278 [78] DEBUG dn_lib.tools.log - lettura cartelle
2021-01-10 19:23:25,279 [78] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-10 19:23:25,280 [78] DEBUG dn_lib.tools.log - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-01-10 19:23:25,282 [78] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-01-10 19:23:25,294 [78] DEBUG dn_lib.tools.log - leggo la cartella C:\root\todd\_test\dn
2021-01-10 19:23:25,296 [78] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = '210108.orches de dios.ok.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, '210108.orches de dios.ok.task', 1, convert(datetime, '2021-01-10 19:21:14', 120), convert(datetime, '2021-01-10 19:21:14', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-10 19:21:14', 120), dt_upd = convert(datetime, '2021-01-10 19:21:14', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-10 19:21:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-10 19:21:14', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 19:23:25,301 [78] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\210108.orches de dios.ok.task
2021-01-10 19:24:01,028 [78] DEBUG dn_lib.tools.log - SQL: update dn_folders set folder_name = 'orches de dios.task', dt_upd = convert(datetime, convert(varchar, getdate(), 120), 120)
        where folder_id = 1812
2021-01-10 19:24:14,370 [78] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1812 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, 1812, null, left('orches de dios', 150)
            , NULL, convert(datetime, '2021-01-08 00:00:00', 120), convert(datetime, '2021-01-10 19:21:14', 120), 1
            , 'fatto', NULL, NULL, NULL, convert(datetime, '2021-01-10 19:24:12', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-08 00:00:00', 120), dt_upd = convert(datetime, '2021-01-10 19:21:14', 120)
         , title = left('orches de dios', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = convert(datetime, '2021-01-10 19:24:12', 120)
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-08 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-01-10 19:21:14', 120), getdate())
          or isnull(title, '') <> isnull('orches de dios', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 19:24:15,397 [78] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\orches de dios
2021-01-10 19:24:16,725 [78] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1812 and file_name = 'rincos.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1812, 'rincos.sql', '.sql', 1, convert(datetime, '2021-01-10 19:21:14', 120), convert(datetime, '2021-01-08 11:35:14', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-10 19:21:14', 120), dt_upd = convert(datetime, '2021-01-08 11:35:14', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-10 19:21:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-08 11:35:14', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 19:24:16,732 [78] DEBUG dn_lib.tools.log - added file 4272: C:\root\todd\_test\dn\orches de dios.task\rincos.sql
2021-01-10 19:24:16,738 [78] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4272;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4272, '.sql', @content, convert(datetime, '2021-01-10 19:21:14', 120), convert(datetime, '2021-01-08 11:35:14', 120));
2021-01-10 19:24:16,741 [78] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\orches de dios.task\rincos.sql'
2021-01-10 19:24:16,743 [78] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1812 and file_name = '__i.xml';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1812, '__i.xml', '.xml', 1, convert(datetime, '2021-01-10 19:23:36', 120), convert(datetime, '2021-01-10 19:24:12', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-10 19:23:36', 120), dt_upd = convert(datetime, '2021-01-10 19:24:12', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-10 19:23:36', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-10 19:24:12', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 19:24:16,749 [78] DEBUG dn_lib.tools.log - added file 4273: C:\root\todd\_test\dn\orches de dios.task\__i.xml
2021-01-10 19:24:16,750 [78] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1422) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 19:24:16,760 [78] DEBUG dn_lib.tools.log - updated task: C:\root\todd\_test\dn\orches de dios
2021-01-10 19:24:16,761 [78] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = 'la cartilla';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, 'la cartilla', 1, convert(datetime, '2021-01-08 11:41:58', 120), convert(datetime, '2021-01-10 18:40:35', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-08 11:41:58', 120), dt_upd = convert(datetime, '2021-01-10 18:40:35', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-08 11:41:58', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-10 18:40:35', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 19:24:19,687 [78] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id is null and file_name = 'script.incorso.task.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, null, 'script.incorso.task.sql', '.sql', 1, convert(datetime, '2021-01-07 16:50:16', 120), convert(datetime, '2021-01-07 16:50:48', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 16:50:16', 120), dt_upd = convert(datetime, '2021-01-07 16:50:48', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 16:50:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-07 16:50:48', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 19:24:19,738 [78] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4266;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, null, 4266, left('script', 150)
            , NULL, convert(datetime, '2021-01-07 16:50:16', 120), convert(datetime, '2021-01-07 16:50:48', 120), 1
            , 'in_corso', NULL, NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 16:50:16', 120), dt_upd = convert(datetime, '2021-01-07 16:50:48', 120)
         , title = left('script', 150), [user] = NULL
         , stato = 'in_corso', priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 16:50:16', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-01-07 16:50:48', 120), getdate())
          or isnull(title, '') <> isnull('script', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('in_corso', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 19:24:19,745 [78] DEBUG dn_lib.tools.log - SQL: delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
2021-01-10 19:24:19,751 [78] DEBUG dn_lib.tools.log - cancellati 10 files/folders/tasks
2021-01-10 19:24:19,752 [78] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '2')
        else update users_cache set var_value = substring('2', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-01-10 19:24:19,757 [78] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '2')
        else update users_cache set var_value = substring('2', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-01-10 19:24:19,760 [78] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/01/10 19:21:14')
        else update users_cache set var_value = substring('2021/01/10 19:21:14', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-01-10 19:24:19,764 [78] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/01/10 19:24:19')
        else update users_cache set var_value = substring('2021/01/10 19:24:19', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-01-10 19:32:43,896 [70] INFO dn_lib.tools.log - reload core
2021-01-10 19:32:43,937 [70] INFO dn_lib.tools.log - reload config docs
2021-01-10 19:32:43,939 [70] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:32:43,942 [70] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:32:43,944 [70] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:32:43,946 [70] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:32:43,947 [70] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:32:43,949 [70] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:32:43,951 [70] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:32:43,952 [70] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:32:43,953 [70] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:32:43,955 [70] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:32:43,957 [70] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:32:43,959 [70] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:32:43,963 [70] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:32:43,964 [70] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:32:43,965 [70] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:32:43,966 [70] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:32:43,967 [70] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:32:43,995 [70] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:32:43,997 [70] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:32:43,999 [70] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:32:44,000 [70] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:32:44,001 [70] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:32:44,002 [70] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:32:44,003 [70] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:32:44,005 [70] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 19:32:44,073 [76] INFO dn_lib.tools.log - reload config docs
2021-01-10 19:32:44,074 [76] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:32:44,075 [76] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:32:44,076 [76] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:32:44,077 [76] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:32:44,077 [76] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:32:44,078 [76] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:32:44,079 [76] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:32:44,080 [76] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:32:44,081 [76] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:32:44,082 [76] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:32:44,082 [76] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:32:44,083 [76] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:32:44,084 [76] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:32:44,085 [76] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:32:44,086 [76] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:32:44,087 [76] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:32:44,087 [76] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:32:44,088 [76] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:32:44,089 [76] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:32:44,090 [76] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:32:44,091 [76] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:32:44,093 [76] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:32:44,095 [76] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:32:44,096 [76] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:32:44,097 [76] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 19:32:44,182 [79] INFO dn_lib.tools.log - reload config docs
2021-01-10 19:32:44,183 [79] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:32:44,184 [79] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:32:44,184 [79] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:32:44,185 [79] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:32:44,186 [79] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:32:44,186 [79] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:32:44,187 [79] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:32:44,188 [79] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:32:44,188 [79] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:32:44,189 [79] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:32:44,190 [79] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:32:44,191 [79] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:32:44,192 [79] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:32:44,192 [79] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:32:44,193 [79] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:32:44,193 [79] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:32:44,194 [79] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:32:44,194 [79] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:32:44,195 [79] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:32:44,195 [79] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:32:44,196 [79] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:32:44,196 [79] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:32:44,197 [79] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:32:44,197 [79] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:32:44,200 [79] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 19:32:44,224 [79] DEBUG dn_lib.tools.log - SQL: select task_filter_id, filter_title, filter_notes, filter_def, filter_class
 from dn_tasks_filters order by filter_order
2021-01-10 19:32:44,230 [79] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 0 and var_name in ('active-task-filter')
2021-01-10 19:32:44,235 [79] DEBUG dn_lib.tools.log - SQL: select ft.tp, ft.synch_folder_id, ft.folder_id, ft.parent_id, ft.title
       , ft.des, ft.http_path, ft.lvl, dbo.folder_path(ft.folder_id) as folder_path
       , (select top 1 1 from dn_tasks where folder_id = ft.folder_id) as is_task
      from dbo.fnc_dn_folders(null, null) ft
      
      order by ft.synch_folder_id, ft.lvl, ft.title
2021-01-10 19:32:44,248 [79] DEBUG dn_lib.tools.log - SQL: select f.synch_folder_id, f.file_id, f.folder_id, f.file_name, f.dt_ins , null as found_file
       from dn_files f
       where exists (select top 1 1 from dbo.fnc_dn_folders(null, null) ft 
        
	      where ft.synch_folder_id = f.synch_folder_id 
          and isnull(ft.folder_id, 0) = isnull(f.folder_id, 0))
2021-01-10 19:32:44,261 [79] DEBUG dn_lib.tools.log - SQL: select t3.*
      , tst.stato, tst.[order] as stato_order, isnull(tst.class, 'light') as stato_class, isnull(tst.title_plurale, '') as stato_title_plurale, isnull(tst.title_singolare, '') as stato_title_singolare
      , tp.priorita, tp.[order] as priorita_order, isnull(tp.class, 'light') as priorita_class, isnull(tp.title_plurale, '') as priorita_title_plurale, isnull(tp.title_singolare, '') as priorita_title_singolare
      , tt.tipo, tt.[order] as tipo_order, isnull(tt.class, 'light') as tipo_class, isnull(tt.title_plurale, '') as tipo_title_plurale, isnull(tt.title_singolare, '') as tipo_title_singolare
      , ts.stima, ts.[days] as stima_days, isnull(ts.class, 'light') as stima_class, isnull(ts.title_plurale, '') as stima_title_plurale, isnull(ts.title_singolare, '') as stima_title_singolare
      , (select top 1 1 from dn_tasks_notes where task_id = t3.task_id) as task_notes
      , (select top 1 1 from vw_task_allegati f2 where f2.task_id = t3.task_id 
          and not exists (select top 1 1 from dn_files_info where file_name = f2.file_name)) as task_files
  from (select t2.*, datediff(day, t2.dt_ref, getdate()) as diff_days
    from (select t.task_id, t.synch_folder_id, isnull(t.folder_id, f.folder_id) as folder_id
	   , t.file_id, t.title, t.[user], t.stato, t.priorita, t.tipo, t.stima, t.dt_ins, t.dt_upd
     , (case when t.dt_ins > t.dt_upd then t.dt_ins else t.dt_upd end) as dt_ref
	  from dn_tasks t
    
	  left join dn_files f on f.file_id = t.file_id
    where (null is null or (null is not null and t.task_id = null)) ) t2
    where exists (select top 1 1 from dbo.fnc_dn_folders(null, null) ft 
	    where  ft.synch_folder_id = t2.synch_folder_id 
       and isnull(ft.folder_id, 0) = isnull(t2.folder_id, 0))) t3
   left join dn_task_stato tst on tst.stato = t3.stato
   left join dn_task_priorita tp on tp.priorita = t3.priorita
   left join dn_task_tipo tt on tt.tipo = t3.tipo
   left join dn_task_stima ts on ts.stima = t3.stima
   where 1 = 1 
2021-01-10 19:32:44,293 [79] DEBUG dn_lib.tools.log - SQL: select title_singolare, stato from dn_task_stato order by [order]
2021-01-10 19:32:44,306 [79] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, priorita as [value], [order] from dn_task_priorita
      ) t order by t.[order]
2021-01-10 19:32:44,389 [79] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [days]
       union select title_singolare as title, stima as [value], [days] from dn_task_stima 
       ) t order by t.[days]
2021-01-10 19:32:44,392 [79] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, tipo as [value], [order] from dn_task_tipo
       ) t order by t.[order]
2021-01-10 19:32:44,395 [79] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value]
       union select nome as title, nome as [value] from users
       ) t order by 2
2021-01-10 19:32:48,008 [76] INFO dn_lib.tools.log - reload config docs
2021-01-10 19:32:48,010 [76] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:32:48,011 [76] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:32:48,012 [76] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:32:48,013 [76] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:32:48,013 [76] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:32:48,014 [76] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:32:48,015 [76] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:32:48,016 [76] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:32:48,016 [76] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:32:48,017 [76] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:32:48,017 [76] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:32:48,018 [76] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:32:48,018 [76] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:32:48,019 [76] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:32:48,020 [76] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:32:48,020 [76] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:32:48,021 [76] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:32:48,022 [76] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:32:48,022 [76] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:32:48,023 [76] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:32:48,024 [76] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:32:48,025 [76] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:32:48,026 [76] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:32:48,027 [76] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:32:48,027 [76] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 19:32:48,052 [79] INFO dn_lib.tools.log - reload config docs
2021-01-10 19:32:48,053 [79] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:32:48,054 [79] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:32:48,055 [79] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:32:48,056 [79] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:32:48,057 [79] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:32:48,057 [79] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:32:48,058 [79] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:32:48,058 [79] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:32:48,059 [79] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:32:48,059 [79] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:32:48,060 [79] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:32:48,060 [79] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:32:48,061 [79] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:32:48,061 [79] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:32:48,062 [79] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:32:48,062 [79] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:32:48,063 [79] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:32:48,063 [79] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:32:48,064 [79] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:32:48,064 [79] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:32:48,065 [79] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:32:48,065 [79] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:32:48,066 [79] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:32:48,066 [79] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:32:48,067 [79] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 19:32:48,103 [76] INFO dn_lib.tools.log - reload config docs
2021-01-10 19:32:48,104 [76] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:32:48,104 [76] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:32:48,105 [76] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:32:48,106 [76] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:32:48,106 [76] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:32:48,107 [76] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:32:48,107 [76] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:32:48,108 [76] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:32:48,108 [76] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:32:48,109 [76] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:32:48,109 [76] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:32:48,109 [76] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:32:48,110 [76] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:32:48,110 [76] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:32:48,111 [76] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:32:48,111 [76] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:32:48,112 [76] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:32:48,112 [76] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:32:48,113 [76] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:32:48,113 [76] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:32:48,114 [76] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:32:48,114 [76] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:32:48,115 [76] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:32:48,115 [76] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:32:48,116 [76] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 19:32:48,675 [72] INFO dn_lib.tools.log - reload config docs
2021-01-10 19:32:48,676 [72] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:32:48,677 [72] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:32:48,678 [72] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:32:48,679 [72] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:32:48,679 [72] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:32:48,680 [72] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:32:48,681 [72] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:32:48,681 [72] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:32:48,682 [72] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:32:48,683 [72] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:32:48,684 [72] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:32:48,684 [72] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:32:48,685 [72] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:32:48,686 [72] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:32:48,686 [72] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:32:48,686 [72] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:32:48,687 [72] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:32:48,687 [72] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:32:48,688 [72] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:32:48,688 [72] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:32:48,689 [72] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:32:48,689 [72] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:32:48,690 [72] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:32:48,690 [72] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:32:48,690 [72] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 19:32:48,737 [72] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-01-10 19:32:48,740 [72] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-01-10 19:32:48,742 [72] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-01-10 19:32:48,745 [72] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-01-10 19:32:48,746 [72] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-01-10 19:32:48,749 [72] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-01-10 19:32:48,751 [72] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-01-10 19:32:48,754 [72] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-10 19:32:48,761 [72] DEBUG dn_lib.tools.log - lettura cartelle
2021-01-10 19:32:48,763 [72] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-10 19:32:48,764 [72] DEBUG dn_lib.tools.log - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-01-10 19:32:48,766 [72] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-01-10 19:32:48,771 [72] DEBUG dn_lib.tools.log - leggo la cartella C:\root\todd\_test\dn
2021-01-10 19:32:48,774 [72] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = '210107.orches.incorso.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, '210107.orches.incorso.task', 1, convert(datetime, '2021-01-10 19:31:28', 120), convert(datetime, '2021-01-10 19:31:28', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-10 19:31:28', 120), dt_upd = convert(datetime, '2021-01-10 19:31:28', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-10 19:31:28', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-10 19:31:28', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 19:32:48,779 [72] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\210107.orches.incorso.task
2021-01-10 19:33:10,649 [72] DEBUG dn_lib.tools.log - SQL: update dn_folders set folder_name = 'orches.task', dt_upd = convert(datetime, convert(varchar, getdate(), 120), 120)
        where folder_id = 1813
2021-01-10 19:33:37,555 [72] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1813 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, 1813, null, left('orches', 150)
            , NULL, convert(datetime, '2021-01-07 00:00:00', 120), convert(datetime, '2021-01-10 19:31:28', 120), 1
            , 'in_corso', NULL, NULL, NULL, convert(datetime, '2021-01-10 19:33:23', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 00:00:00', 120), dt_upd = convert(datetime, '2021-01-10 19:31:28', 120)
         , title = left('orches', 150), [user] = NULL
         , stato = 'in_corso', priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = convert(datetime, '2021-01-10 19:33:23', 120)
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-01-10 19:31:28', 120), getdate())
          or isnull(title, '') <> isnull('orches', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('in_corso', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 19:33:38,558 [72] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\orches
2021-01-10 19:33:41,407 [72] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1813 and file_name = 'badabemmm.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1813, 'badabemmm.sql', '.sql', 1, convert(datetime, '2021-01-10 19:31:28', 120), convert(datetime, '2021-01-07 16:50:48', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-10 19:31:28', 120), dt_upd = convert(datetime, '2021-01-07 16:50:48', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-10 19:31:28', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-07 16:50:48', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 19:33:41,420 [72] DEBUG dn_lib.tools.log - added file 4274: C:\root\todd\_test\dn\orches.task\badabemmm.sql
2021-01-10 19:33:41,425 [72] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4274;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4274, '.sql', @content, convert(datetime, '2021-01-10 19:31:28', 120), convert(datetime, '2021-01-07 16:50:48', 120));
2021-01-10 19:33:41,429 [72] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\orches.task\badabemmm.sql'
2021-01-10 19:33:41,430 [72] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1813 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1813, 'i.txt', '.txt', 1, convert(datetime, '2021-01-10 19:31:28', 120), convert(datetime, '2021-01-08 11:51:29', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-10 19:31:28', 120), dt_upd = convert(datetime, '2021-01-08 11:51:29', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-10 19:31:28', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-08 11:51:29', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 19:33:41,435 [72] DEBUG dn_lib.tools.log - added file 4275: C:\root\todd\_test\dn\orches.task\i.txt
2021-01-10 19:33:41,436 [72] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4275;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4275, '.txt', @content, convert(datetime, '2021-01-10 19:31:28', 120), convert(datetime, '2021-01-08 11:51:29', 120));
2021-01-10 19:33:41,440 [72] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1423;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1423, 4275, @content
          , convert(datetime, '2021-01-10 19:31:28', 120), convert(datetime, '2021-01-08 11:51:29', 120));
2021-01-10 19:33:41,443 [72] DEBUG dn_lib.tools.log - lette note task 1423
2021-01-10 19:33:41,443 [72] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\orches.task\i.txt'
2021-01-10 19:33:41,445 [72] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1813 and file_name = 'yes.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1813, 'yes.sql', '.sql', 1, convert(datetime, '2021-01-10 19:31:28', 120), convert(datetime, '2021-01-07 17:05:34', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-10 19:31:28', 120), dt_upd = convert(datetime, '2021-01-07 17:05:34', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-10 19:31:28', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-07 17:05:34', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 19:33:41,450 [72] DEBUG dn_lib.tools.log - added file 4276: C:\root\todd\_test\dn\orches.task\yes.sql
2021-01-10 19:33:41,451 [72] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4276;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4276, '.sql', @content, convert(datetime, '2021-01-10 19:31:28', 120), convert(datetime, '2021-01-07 17:05:34', 120));
2021-01-10 19:33:41,455 [72] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\orches.task\yes.sql'
2021-01-10 19:33:41,455 [72] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1813 and file_name = '__i.xml';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1813, '__i.xml', '.xml', 1, convert(datetime, '2021-01-10 19:32:54', 120), convert(datetime, '2021-01-10 19:33:23', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-10 19:32:54', 120), dt_upd = convert(datetime, '2021-01-10 19:33:23', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-10 19:32:54', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-10 19:33:23', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 19:33:41,460 [72] DEBUG dn_lib.tools.log - added file 4277: C:\root\todd\_test\dn\orches.task\__i.xml
2021-01-10 19:33:41,460 [72] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1423) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 19:33:41,468 [72] DEBUG dn_lib.tools.log - updated task: C:\root\todd\_test\dn\orches
2021-01-10 19:33:41,469 [72] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = 'la cartilla';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, 'la cartilla', 1, convert(datetime, '2021-01-08 11:41:58', 120), convert(datetime, '2021-01-10 18:40:35', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-08 11:41:58', 120), dt_upd = convert(datetime, '2021-01-10 18:40:35', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-08 11:41:58', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-10 18:40:35', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 19:33:43,984 [72] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id is null and file_name = 'script.incorso.task.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, null, 'script.incorso.task.sql', '.sql', 1, convert(datetime, '2021-01-07 16:50:16', 120), convert(datetime, '2021-01-07 16:50:48', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 16:50:16', 120), dt_upd = convert(datetime, '2021-01-07 16:50:48', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 16:50:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-07 16:50:48', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 19:33:44,028 [72] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4266;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, null, 4266, left('script', 150)
            , NULL, convert(datetime, '2021-01-07 16:50:16', 120), convert(datetime, '2021-01-07 16:50:48', 120), 1
            , 'in_corso', NULL, NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 16:50:16', 120), dt_upd = convert(datetime, '2021-01-07 16:50:48', 120)
         , title = left('script', 150), [user] = NULL
         , stato = 'in_corso', priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 16:50:16', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-01-07 16:50:48', 120), getdate())
          or isnull(title, '') <> isnull('script', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('in_corso', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 19:33:44,035 [72] DEBUG dn_lib.tools.log - SQL: delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
2021-01-10 19:33:44,041 [72] DEBUG dn_lib.tools.log - cancellati 5 files/folders/tasks
2021-01-10 19:33:44,042 [72] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '4')
        else update users_cache set var_value = substring('4', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-01-10 19:33:44,045 [72] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '2')
        else update users_cache set var_value = substring('2', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-01-10 19:33:44,049 [72] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/01/10 19:31:28')
        else update users_cache set var_value = substring('2021/01/10 19:31:28', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-01-10 19:33:44,052 [72] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/01/10 19:33:44')
        else update users_cache set var_value = substring('2021/01/10 19:33:44', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-01-10 19:36:48,816 [79] INFO dn_lib.tools.log - reload config docs
2021-01-10 19:36:48,818 [79] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:36:48,819 [79] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:36:48,819 [79] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:36:48,820 [79] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:36:48,821 [79] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:36:48,821 [79] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:36:48,822 [79] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:36:48,823 [79] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:36:48,823 [79] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:36:48,824 [79] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:36:48,824 [79] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:36:48,825 [79] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:36:48,825 [79] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:36:48,826 [79] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:36:48,826 [79] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:36:48,827 [79] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:36:48,827 [79] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:36:48,827 [79] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:36:48,828 [79] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:36:48,829 [79] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:36:48,829 [79] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:36:48,830 [79] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:36:48,831 [79] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:36:48,831 [79] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:36:48,832 [79] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 19:36:48,856 [66] INFO dn_lib.tools.log - reload config docs
2021-01-10 19:36:48,857 [66] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:36:48,858 [66] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:36:48,859 [66] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:36:48,859 [66] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:36:48,860 [66] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:36:48,861 [66] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:36:48,862 [66] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:36:48,862 [66] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:36:48,863 [66] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:36:48,864 [66] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:36:48,864 [66] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:36:48,865 [66] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:36:48,866 [66] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:36:48,866 [66] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:36:48,867 [66] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:36:48,868 [66] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:36:48,869 [66] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:36:48,869 [66] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:36:48,870 [66] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:36:48,871 [66] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:36:48,871 [66] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:36:48,872 [66] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:36:48,873 [66] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:36:48,873 [66] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:36:48,874 [66] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 19:36:48,914 [72] INFO dn_lib.tools.log - reload config docs
2021-01-10 19:36:48,915 [72] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:36:48,916 [72] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:36:48,917 [72] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:36:48,917 [72] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:36:48,918 [72] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:36:48,918 [72] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:36:48,919 [72] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:36:48,920 [72] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:36:48,920 [72] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:36:48,921 [72] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:36:48,921 [72] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:36:48,922 [72] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:36:48,922 [72] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:36:48,923 [72] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:36:48,923 [72] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:36:48,923 [72] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:36:48,924 [72] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:36:48,924 [72] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:36:48,925 [72] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:36:48,925 [72] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:36:48,926 [72] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:36:48,926 [72] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:36:48,927 [72] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:36:48,927 [72] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:36:48,928 [72] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 19:36:49,481 [54] INFO dn_lib.tools.log - reload config docs
2021-01-10 19:36:49,482 [54] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:36:49,483 [54] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:36:49,485 [54] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:36:49,485 [54] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:36:49,486 [54] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:36:49,487 [54] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:36:49,488 [54] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:36:49,489 [54] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:36:49,490 [54] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:36:49,490 [54] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:36:49,491 [54] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:36:49,492 [54] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:36:49,493 [54] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:36:49,494 [54] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:36:49,494 [54] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:36:49,495 [54] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:36:49,496 [54] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:36:49,497 [54] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:36:49,498 [54] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:36:49,499 [54] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:36:49,499 [54] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:36:49,500 [54] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:36:49,501 [54] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:36:49,501 [54] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:36:49,502 [54] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 19:36:49,513 [54] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-01-10 19:36:49,516 [54] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-01-10 19:36:49,518 [54] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-01-10 19:36:49,520 [54] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-01-10 19:36:49,522 [54] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-01-10 19:36:49,524 [54] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-01-10 19:36:49,526 [54] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-01-10 19:36:49,527 [54] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-10 19:36:49,530 [54] DEBUG dn_lib.tools.log - lettura cartelle
2021-01-10 19:36:49,531 [54] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-10 19:36:49,532 [54] DEBUG dn_lib.tools.log - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-01-10 19:36:49,533 [54] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-01-10 19:36:49,546 [54] DEBUG dn_lib.tools.log - leggo la cartella C:\root\todd\_test\dn
2021-01-10 19:36:49,547 [54] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = '210108.orches de dios.ok.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, '210108.orches de dios.ok.task', 1, convert(datetime, '2021-01-10 19:36:38', 120), convert(datetime, '2021-01-10 19:36:38', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-10 19:36:38', 120), dt_upd = convert(datetime, '2021-01-10 19:36:38', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-10 19:36:38', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-10 19:36:38', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 19:36:49,552 [54] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\210108.orches de dios.ok.task
2021-01-10 19:37:06,168 [54] DEBUG dn_lib.tools.log - SQL: update dn_folders set folder_name = 'orches de dios.task', dt_upd = convert(datetime, convert(varchar, getdate(), 120), 120)
        where folder_id = 1814
2021-01-10 19:37:35,417 [54] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1814 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, 1814, null, left('orches de dios', 150)
            , NULL, convert(datetime, '2021-01-08 00:00:00', 120), convert(datetime, '2021-01-10 19:36:38', 120), 1
            , 'fatto', NULL, NULL, NULL, convert(datetime, '2021-01-10 19:37:08', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-08 00:00:00', 120), dt_upd = convert(datetime, '2021-01-10 19:36:38', 120)
         , title = left('orches de dios', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = convert(datetime, '2021-01-10 19:37:08', 120)
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-08 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-01-10 19:36:38', 120), getdate())
          or isnull(title, '') <> isnull('orches de dios', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 19:38:20,370 [54] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\orches de dios
2021-01-10 19:38:26,204 [54] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1814 and file_name = 'rincos.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1814, 'rincos.sql', '.sql', 1, convert(datetime, '2021-01-10 19:36:38', 120), convert(datetime, '2021-01-08 11:35:14', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-10 19:36:38', 120), dt_upd = convert(datetime, '2021-01-08 11:35:14', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-10 19:36:38', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-08 11:35:14', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 19:38:26,219 [54] DEBUG dn_lib.tools.log - added file 4278: C:\root\todd\_test\dn\orches de dios.task\rincos.sql
2021-01-10 19:38:26,221 [54] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4278;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4278, '.sql', @content, convert(datetime, '2021-01-10 19:36:38', 120), convert(datetime, '2021-01-08 11:35:14', 120));
2021-01-10 19:38:26,224 [54] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\orches de dios.task\rincos.sql'
2021-01-10 19:38:26,224 [54] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1814 and file_name = '__i.xml';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1814, '__i.xml', '.xml', 1, convert(datetime, '2021-01-10 19:36:59', 120), convert(datetime, '2021-01-10 19:37:08', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-10 19:36:59', 120), dt_upd = convert(datetime, '2021-01-10 19:37:08', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-10 19:36:59', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-10 19:37:08', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 19:38:26,229 [54] DEBUG dn_lib.tools.log - added file 4279: C:\root\todd\_test\dn\orches de dios.task\__i.xml
2021-01-10 19:38:26,230 [54] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1424) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 19:38:26,237 [54] DEBUG dn_lib.tools.log - updated task: C:\root\todd\_test\dn\orches de dios
2021-01-10 19:38:29,924 [54] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = 'la cartilla';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, 'la cartilla', 1, convert(datetime, '2021-01-08 11:41:58', 120), convert(datetime, '2021-01-10 18:40:35', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-08 11:41:58', 120), dt_upd = convert(datetime, '2021-01-10 18:40:35', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-08 11:41:58', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-10 18:40:35', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 19:38:30,821 [54] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id is null and file_name = 'script.incorso.task.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, null, 'script.incorso.task.sql', '.sql', 1, convert(datetime, '2021-01-07 16:50:16', 120), convert(datetime, '2021-01-07 16:50:48', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 16:50:16', 120), dt_upd = convert(datetime, '2021-01-07 16:50:48', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 16:50:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-07 16:50:48', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 19:38:30,870 [54] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4266;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, null, 4266, left('script', 150)
            , NULL, convert(datetime, '2021-01-07 16:50:16', 120), convert(datetime, '2021-01-07 16:50:48', 120), 1
            , 'in_corso', NULL, NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 16:50:16', 120), dt_upd = convert(datetime, '2021-01-07 16:50:48', 120)
         , title = left('script', 150), [user] = NULL
         , stato = 'in_corso', priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 16:50:16', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-01-07 16:50:48', 120), getdate())
          or isnull(title, '') <> isnull('script', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('in_corso', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 19:38:30,879 [54] DEBUG dn_lib.tools.log - SQL: delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
2021-01-10 19:38:30,886 [54] DEBUG dn_lib.tools.log - cancellati 10 files/folders/tasks
2021-01-10 19:38:30,886 [54] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '2')
        else update users_cache set var_value = substring('2', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-01-10 19:38:30,891 [54] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '2')
        else update users_cache set var_value = substring('2', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-01-10 19:38:30,895 [54] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/01/10 19:36:38')
        else update users_cache set var_value = substring('2021/01/10 19:36:38', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-01-10 19:38:30,899 [54] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/01/10 19:38:30')
        else update users_cache set var_value = substring('2021/01/10 19:38:30', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-01-10 19:40:11,360 [54] INFO dn_lib.tools.log - reload config docs
2021-01-10 19:40:11,361 [54] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:40:11,362 [54] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:40:11,362 [54] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:40:11,363 [54] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:40:11,364 [54] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:40:11,364 [54] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:40:11,365 [54] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:40:11,365 [54] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:40:11,366 [54] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:40:11,366 [54] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:40:11,366 [54] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:40:11,367 [54] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:40:11,368 [54] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:40:11,369 [54] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:40:11,370 [54] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:40:11,370 [54] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:40:11,370 [54] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:40:11,371 [54] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:40:11,372 [54] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:40:11,372 [54] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:40:11,373 [54] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:40:11,373 [54] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:40:11,374 [54] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:40:11,374 [54] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:40:11,375 [54] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 19:40:11,929 [49] INFO dn_lib.tools.log - reload config docs
2021-01-10 19:40:11,930 [49] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:40:11,931 [49] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:40:11,932 [49] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:40:11,933 [49] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:40:11,934 [49] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:40:11,935 [49] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:40:11,936 [49] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:40:11,937 [49] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:40:11,938 [49] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:40:11,939 [49] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:40:11,939 [49] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:40:11,940 [49] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:40:11,941 [49] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:40:11,941 [49] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:40:11,942 [49] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:40:11,942 [49] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:40:11,943 [49] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:40:11,944 [49] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:40:11,944 [49] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:40:11,945 [49] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:40:11,945 [49] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:40:11,946 [49] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:40:11,947 [49] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:40:11,947 [49] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:40:11,948 [49] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 19:40:11,964 [49] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-01-10 19:40:11,967 [49] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-01-10 19:40:11,969 [49] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-01-10 19:40:11,971 [49] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-01-10 19:40:11,972 [49] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-01-10 19:40:11,975 [49] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-01-10 19:40:11,976 [49] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-01-10 19:40:11,977 [49] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-10 19:40:11,979 [49] DEBUG dn_lib.tools.log - lettura cartelle
2021-01-10 19:40:11,980 [49] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-10 19:40:11,981 [49] DEBUG dn_lib.tools.log - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-01-10 19:40:11,982 [49] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-01-10 19:40:11,987 [49] DEBUG dn_lib.tools.log - leggo la cartella C:\root\todd\_test\dn
2021-01-10 19:40:11,988 [49] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = '210107.orches.incorso.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, '210107.orches.incorso.task', 1, convert(datetime, '2021-01-10 19:40:02', 120), convert(datetime, '2021-01-10 19:40:02', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-10 19:40:02', 120), dt_upd = convert(datetime, '2021-01-10 19:40:02', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-10 19:40:02', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-10 19:40:02', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 19:40:11,993 [49] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\210107.orches.incorso.task
2021-01-10 19:40:17,246 [49] DEBUG dn_lib.tools.log - SQL: update dn_folders set folder_name = 'orches.task', dt_upd = convert(datetime, convert(varchar, getdate(), 120), 120)
        where folder_id = 1815
2021-01-10 19:40:22,668 [49] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1815 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, 1815, null, left('orches', 150)
            , NULL, convert(datetime, '2021-01-07 00:00:00', 120), convert(datetime, '2021-01-10 19:40:02', 120), 1
            , 'in_corso', NULL, NULL, NULL, convert(datetime, '2021-01-10 19:40:20', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 00:00:00', 120), dt_upd = convert(datetime, '2021-01-10 19:40:02', 120)
         , title = left('orches', 150), [user] = NULL
         , stato = 'in_corso', priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = convert(datetime, '2021-01-10 19:40:20', 120)
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-01-10 19:40:02', 120), getdate())
          or isnull(title, '') <> isnull('orches', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('in_corso', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 19:40:25,070 [49] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\orches
2021-01-10 19:40:44,100 [49] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1815 and file_name = 'badabemmm.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1815, 'badabemmm.sql', '.sql', 1, convert(datetime, '2021-01-10 19:40:02', 120), convert(datetime, '2021-01-07 16:50:48', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-10 19:40:02', 120), dt_upd = convert(datetime, '2021-01-07 16:50:48', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-10 19:40:02', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-07 16:50:48', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 19:40:44,113 [49] DEBUG dn_lib.tools.log - added file 4280: C:\root\todd\_test\dn\orches.task\badabemmm.sql
2021-01-10 19:40:44,114 [49] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4280;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4280, '.sql', @content, convert(datetime, '2021-01-10 19:40:02', 120), convert(datetime, '2021-01-07 16:50:48', 120));
2021-01-10 19:40:44,117 [49] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\orches.task\badabemmm.sql'
2021-01-10 19:40:44,118 [49] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1815 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1815, 'i.txt', '.txt', 1, convert(datetime, '2021-01-10 19:40:02', 120), convert(datetime, '2021-01-08 11:51:29', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-10 19:40:02', 120), dt_upd = convert(datetime, '2021-01-08 11:51:29', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-10 19:40:02', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-08 11:51:29', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 19:40:44,124 [49] DEBUG dn_lib.tools.log - added file 4281: C:\root\todd\_test\dn\orches.task\i.txt
2021-01-10 19:40:44,124 [49] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4281;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4281, '.txt', @content, convert(datetime, '2021-01-10 19:40:02', 120), convert(datetime, '2021-01-08 11:51:29', 120));
2021-01-10 19:40:44,126 [49] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1425;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1425, 4281, @content
          , convert(datetime, '2021-01-10 19:40:02', 120), convert(datetime, '2021-01-08 11:51:29', 120));
2021-01-10 19:40:44,131 [49] DEBUG dn_lib.tools.log - lette note task 1425
2021-01-10 19:40:44,132 [49] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\orches.task\i.txt'
2021-01-10 19:40:44,133 [49] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1815 and file_name = 'yes.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1815, 'yes.sql', '.sql', 1, convert(datetime, '2021-01-10 19:40:02', 120), convert(datetime, '2021-01-07 17:05:34', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-10 19:40:02', 120), dt_upd = convert(datetime, '2021-01-07 17:05:34', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-10 19:40:02', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-07 17:05:34', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 19:40:44,137 [49] DEBUG dn_lib.tools.log - added file 4282: C:\root\todd\_test\dn\orches.task\yes.sql
2021-01-10 19:40:44,138 [49] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4282;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4282, '.sql', @content, convert(datetime, '2021-01-10 19:40:02', 120), convert(datetime, '2021-01-07 17:05:34', 120));
2021-01-10 19:40:44,141 [49] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\orches.task\yes.sql'
2021-01-10 19:40:44,142 [49] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1815 and file_name = '__i.xml';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1815, '__i.xml', '.xml', 1, convert(datetime, '2021-01-10 19:40:14', 120), convert(datetime, '2021-01-10 19:40:20', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-10 19:40:14', 120), dt_upd = convert(datetime, '2021-01-10 19:40:20', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-10 19:40:14', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-10 19:40:20', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 19:40:44,147 [49] DEBUG dn_lib.tools.log - added file 4283: C:\root\todd\_test\dn\orches.task\__i.xml
2021-01-10 19:40:44,148 [49] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1425) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 19:40:44,155 [49] DEBUG dn_lib.tools.log - updated task: C:\root\todd\_test\dn\orches
2021-01-10 19:41:13,412 [49] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = 'la cartilla';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, 'la cartilla', 1, convert(datetime, '2021-01-08 11:41:58', 120), convert(datetime, '2021-01-10 18:40:35', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-08 11:41:58', 120), dt_upd = convert(datetime, '2021-01-10 18:40:35', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-08 11:41:58', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-10 18:40:35', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 19:41:13,429 [49] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id is null and file_name = 'script.incorso.task.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, null, 'script.incorso.task.sql', '.sql', 1, convert(datetime, '2021-01-07 16:50:16', 120), convert(datetime, '2021-01-07 16:50:48', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 16:50:16', 120), dt_upd = convert(datetime, '2021-01-07 16:50:48', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 16:50:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-07 16:50:48', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 19:41:13,440 [49] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4266;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, null, 4266, left('script', 150)
            , NULL, convert(datetime, '2021-01-07 16:50:16', 120), convert(datetime, '2021-01-07 16:50:48', 120), 1
            , 'in_corso', NULL, NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 16:50:16', 120), dt_upd = convert(datetime, '2021-01-07 16:50:48', 120)
         , title = left('script', 150), [user] = NULL
         , stato = 'in_corso', priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 16:50:16', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-01-07 16:50:48', 120), getdate())
          or isnull(title, '') <> isnull('script', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('in_corso', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 19:41:13,449 [49] DEBUG dn_lib.tools.log - SQL: delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
2021-01-10 19:41:13,456 [49] DEBUG dn_lib.tools.log - cancellati 5 files/folders/tasks
2021-01-10 19:41:13,457 [49] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '4')
        else update users_cache set var_value = substring('4', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-01-10 19:41:13,463 [49] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '2')
        else update users_cache set var_value = substring('2', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-01-10 19:41:13,469 [49] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/01/10 19:40:02')
        else update users_cache set var_value = substring('2021/01/10 19:40:02', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-01-10 19:41:13,475 [49] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/01/10 19:41:13')
        else update users_cache set var_value = substring('2021/01/10 19:41:13', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-01-10 19:48:47,592 [30] INFO dn_lib.tools.log - reload core
2021-01-10 19:48:47,624 [30] INFO dn_lib.tools.log - reload config docs
2021-01-10 19:48:47,626 [30] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:48:47,627 [30] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:48:47,627 [30] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:48:47,629 [30] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:48:47,637 [30] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:48:47,646 [30] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:48:47,648 [30] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:48:47,655 [30] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:48:47,656 [30] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:48:47,658 [30] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:48:47,659 [30] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:48:47,660 [30] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:48:47,662 [30] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:48:47,663 [30] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:48:47,664 [30] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:48:47,664 [30] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:48:47,665 [30] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:48:47,672 [30] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:48:47,674 [30] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:48:47,675 [30] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:48:47,676 [30] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:48:47,677 [30] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:48:47,678 [30] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:48:47,679 [30] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:48:47,680 [30] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 19:48:47,708 [79] INFO dn_lib.tools.log - reload config docs
2021-01-10 19:48:47,709 [79] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:48:47,710 [79] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:48:47,710 [79] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:48:47,711 [79] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:48:47,712 [79] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:48:47,712 [79] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:48:47,713 [79] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:48:47,713 [79] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:48:47,714 [79] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:48:47,714 [79] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:48:47,715 [79] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:48:47,715 [79] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:48:47,716 [79] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:48:47,717 [79] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:48:47,717 [79] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:48:47,718 [79] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:48:47,718 [79] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:48:47,719 [79] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:48:47,719 [79] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:48:47,720 [79] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:48:47,720 [79] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:48:47,721 [79] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:48:47,721 [79] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:48:47,722 [79] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:48:47,723 [79] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 19:48:47,755 [34] INFO dn_lib.tools.log - reload config docs
2021-01-10 19:48:47,756 [34] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:48:47,757 [34] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:48:47,757 [34] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:48:47,758 [34] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:48:47,758 [34] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:48:47,759 [34] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:48:47,760 [34] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:48:47,761 [34] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:48:47,762 [34] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:48:47,762 [34] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:48:47,763 [34] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:48:47,764 [34] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:48:47,764 [34] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:48:47,765 [34] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:48:47,765 [34] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:48:47,766 [34] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:48:47,766 [34] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:48:47,767 [34] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:48:47,768 [34] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:48:47,768 [34] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:48:47,769 [34] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:48:47,769 [34] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:48:47,770 [34] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:48:47,770 [34] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:48:47,773 [34] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 19:48:47,795 [34] DEBUG dn_lib.tools.log - SQL: select task_filter_id, filter_title, filter_notes, filter_def, filter_class
 from dn_tasks_filters order by filter_order
2021-01-10 19:48:47,800 [34] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 0 and var_name in ('active-task-filter')
2021-01-10 19:48:47,805 [34] DEBUG dn_lib.tools.log - SQL: select ft.tp, ft.synch_folder_id, ft.folder_id, ft.parent_id, ft.title
       , ft.des, ft.http_path, ft.lvl, dbo.folder_path(ft.folder_id) as folder_path
       , (select top 1 1 from dn_tasks where folder_id = ft.folder_id) as is_task
      from dbo.fnc_dn_folders(null, null) ft
      
      order by ft.synch_folder_id, ft.lvl, ft.title
2021-01-10 19:48:47,816 [34] DEBUG dn_lib.tools.log - SQL: select f.synch_folder_id, f.file_id, f.folder_id, f.file_name, f.dt_ins , null as found_file
       from dn_files f
       where exists (select top 1 1 from dbo.fnc_dn_folders(null, null) ft 
        
	      where ft.synch_folder_id = f.synch_folder_id 
          and isnull(ft.folder_id, 0) = isnull(f.folder_id, 0))
2021-01-10 19:48:47,826 [34] DEBUG dn_lib.tools.log - SQL: select t3.*
      , tst.stato, tst.[order] as stato_order, isnull(tst.class, 'light') as stato_class, isnull(tst.title_plurale, '') as stato_title_plurale, isnull(tst.title_singolare, '') as stato_title_singolare
      , tp.priorita, tp.[order] as priorita_order, isnull(tp.class, 'light') as priorita_class, isnull(tp.title_plurale, '') as priorita_title_plurale, isnull(tp.title_singolare, '') as priorita_title_singolare
      , tt.tipo, tt.[order] as tipo_order, isnull(tt.class, 'light') as tipo_class, isnull(tt.title_plurale, '') as tipo_title_plurale, isnull(tt.title_singolare, '') as tipo_title_singolare
      , ts.stima, ts.[days] as stima_days, isnull(ts.class, 'light') as stima_class, isnull(ts.title_plurale, '') as stima_title_plurale, isnull(ts.title_singolare, '') as stima_title_singolare
      , (select top 1 1 from dn_tasks_notes where task_id = t3.task_id) as task_notes
      , (select top 1 1 from vw_task_allegati f2 where f2.task_id = t3.task_id 
          and not exists (select top 1 1 from dn_files_info where file_name = f2.file_name)) as task_files
  from (select t2.*, datediff(day, t2.dt_ref, getdate()) as diff_days
    from (select t.task_id, t.synch_folder_id, isnull(t.folder_id, f.folder_id) as folder_id
	   , t.file_id, t.title, t.[user], t.stato, t.priorita, t.tipo, t.stima, t.dt_ins, t.dt_upd
     , (case when t.dt_ins > t.dt_upd then t.dt_ins else t.dt_upd end) as dt_ref
	  from dn_tasks t
    
	  left join dn_files f on f.file_id = t.file_id
    where (null is null or (null is not null and t.task_id = null)) ) t2
    where exists (select top 1 1 from dbo.fnc_dn_folders(null, null) ft 
	    where  ft.synch_folder_id = t2.synch_folder_id 
       and isnull(ft.folder_id, 0) = isnull(t2.folder_id, 0))) t3
   left join dn_task_stato tst on tst.stato = t3.stato
   left join dn_task_priorita tp on tp.priorita = t3.priorita
   left join dn_task_tipo tt on tt.tipo = t3.tipo
   left join dn_task_stima ts on ts.stima = t3.stima
   where 1 = 1 
2021-01-10 19:48:47,854 [34] DEBUG dn_lib.tools.log - SQL: select title_singolare, stato from dn_task_stato order by [order]
2021-01-10 19:48:47,866 [34] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, priorita as [value], [order] from dn_task_priorita
      ) t order by t.[order]
2021-01-10 19:48:47,948 [34] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [days]
       union select title_singolare as title, stima as [value], [days] from dn_task_stima 
       ) t order by t.[days]
2021-01-10 19:48:47,953 [34] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, tipo as [value], [order] from dn_task_tipo
       ) t order by t.[order]
2021-01-10 19:48:47,955 [34] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value]
       union select nome as title, nome as [value] from users
       ) t order by 2
2021-01-10 19:49:06,807 [30] INFO dn_lib.tools.log - reload config docs
2021-01-10 19:49:06,809 [30] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:49:06,810 [30] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:49:06,811 [30] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:49:06,812 [30] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:49:06,813 [30] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:49:06,814 [30] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:49:06,815 [30] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:49:06,816 [30] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:49:06,816 [30] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:49:06,817 [30] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:49:06,817 [30] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:49:06,818 [30] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:49:06,818 [30] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:49:06,819 [30] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:49:06,819 [30] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:49:06,820 [30] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:49:06,820 [30] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:49:06,820 [30] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:49:06,821 [30] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:49:06,821 [30] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:49:06,822 [30] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:49:06,822 [30] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:49:06,823 [30] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:49:06,823 [30] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:49:06,824 [30] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 19:49:06,838 [35] INFO dn_lib.tools.log - reload config docs
2021-01-10 19:49:06,838 [35] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:49:06,839 [35] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:49:06,840 [35] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:49:06,841 [35] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:49:06,841 [35] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:49:06,842 [35] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:49:06,843 [35] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:49:06,844 [35] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:49:06,845 [35] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:49:06,845 [35] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:49:06,845 [35] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:49:06,846 [35] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:49:06,847 [35] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:49:06,848 [35] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:49:06,849 [35] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:49:06,849 [35] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:49:06,850 [35] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:49:06,850 [35] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:49:06,851 [35] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:49:06,852 [35] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:49:06,853 [35] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:49:06,853 [35] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:49:06,854 [35] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:49:06,855 [35] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:49:06,855 [35] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 19:49:06,868 [37] INFO dn_lib.tools.log - reload config docs
2021-01-10 19:49:06,869 [37] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:49:06,870 [37] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:49:06,870 [37] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:49:06,871 [37] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:49:06,872 [37] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:49:06,873 [37] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:49:06,874 [37] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:49:06,874 [37] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:49:06,875 [37] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:49:06,876 [37] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:49:06,876 [37] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:49:06,877 [37] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:49:06,877 [37] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:49:06,878 [37] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:49:06,878 [37] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:49:06,879 [37] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:49:06,880 [37] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:49:06,881 [37] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:49:06,882 [37] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:49:06,882 [37] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:49:06,883 [37] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:49:06,883 [37] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:49:06,884 [37] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:49:06,885 [37] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:49:06,886 [37] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 19:49:07,464 [72] INFO dn_lib.tools.log - reload config docs
2021-01-10 19:49:07,465 [72] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:49:07,467 [72] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:49:07,468 [72] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:49:07,469 [72] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:49:07,470 [72] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:49:07,471 [72] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:49:07,472 [72] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:49:07,473 [72] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:49:07,474 [72] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:49:07,475 [72] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:49:07,475 [72] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:49:07,476 [72] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:49:07,476 [72] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:49:07,477 [72] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:49:07,477 [72] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:49:07,478 [72] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:49:07,478 [72] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:49:07,479 [72] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:49:07,479 [72] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:49:07,480 [72] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:49:07,480 [72] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:49:07,481 [72] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:49:07,481 [72] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:49:07,482 [72] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:49:07,482 [72] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 19:49:07,525 [72] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-01-10 19:49:07,527 [72] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-01-10 19:49:07,530 [72] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-01-10 19:49:07,532 [72] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-01-10 19:49:07,534 [72] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-01-10 19:49:07,536 [72] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-01-10 19:49:07,538 [72] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-01-10 19:49:07,540 [72] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-10 19:49:07,547 [72] ERROR dn_lib.tools.log - la variabile 'index-folder' non esiste!
2021-01-10 19:49:07,548 [72] ERROR dn_lib.tools.log - la variabile 'index-folder' non esiste!
2021-01-10 19:49:07,549 [72] ERROR dn_lib.tools.log - la variabile 'index-folder' non esiste!
2021-01-10 19:49:07,550 [72] ERROR dn_lib.tools.log - la variabile 'index-folder' non esiste!
2021-01-10 19:49:07,551 [72] DEBUG dn_lib.tools.log - lettura cartelle
2021-01-10 19:49:07,552 [72] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-10 19:49:07,553 [72] DEBUG dn_lib.tools.log - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-01-10 19:49:07,555 [72] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-01-10 19:49:07,560 [72] DEBUG dn_lib.tools.log - leggo la cartella C:\root\todd\_test\dn
2021-01-10 19:49:07,561 [72] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = '210107.orches.incorso.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, '210107.orches.incorso.task', 1, convert(datetime, '2021-01-10 19:48:56', 120), convert(datetime, '2021-01-10 19:48:56', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-10 19:48:56', 120), dt_upd = convert(datetime, '2021-01-10 19:48:56', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-10 19:48:56', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-10 19:48:56', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 19:49:07,567 [72] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\210107.orches.incorso.task
2021-01-10 19:49:07,575 [72] DEBUG dn_lib.tools.log - SQL: update dn_folders set folder_name = 'orches.task', dt_upd = convert(datetime, convert(varchar, getdate(), 120), 120)
        where folder_id = 1816
2021-01-10 19:49:07,582 [72] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1816 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, 1816, null, left('orches', 150)
            , NULL, convert(datetime, '2021-01-07 00:00:00', 120), convert(datetime, '2021-01-10 19:48:56', 120), 1
            , 'in_corso', NULL, NULL, NULL, convert(datetime, '2021-01-10 19:49:07', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 00:00:00', 120), dt_upd = convert(datetime, '2021-01-10 19:48:56', 120)
         , title = left('orches', 150), [user] = NULL
         , stato = 'in_corso', priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = convert(datetime, '2021-01-10 19:49:07', 120)
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-01-10 19:48:56', 120), getdate())
          or isnull(title, '') <> isnull('orches', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('in_corso', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 19:49:07,588 [72] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\orches
2021-01-10 19:49:07,589 [72] ERROR dn_lib.tools.log - la variabile 'index-folder' non esiste!
2021-01-10 19:49:07,590 [72] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = '210108.orches de dios.ok.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, '210108.orches de dios.ok.task', 1, convert(datetime, '2021-01-10 19:48:56', 120), convert(datetime, '2021-01-10 19:48:56', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-10 19:48:56', 120), dt_upd = convert(datetime, '2021-01-10 19:48:56', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-10 19:48:56', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-10 19:48:56', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 19:49:07,594 [72] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\210108.orches de dios.ok.task
2021-01-10 19:49:07,597 [72] DEBUG dn_lib.tools.log - SQL: update dn_folders set folder_name = 'orches de dios.task', dt_upd = convert(datetime, convert(varchar, getdate(), 120), 120)
        where folder_id = 1817
2021-01-10 19:49:07,603 [72] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1817 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, 1817, null, left('orches de dios', 150)
            , NULL, convert(datetime, '2021-01-08 00:00:00', 120), convert(datetime, '2021-01-10 19:48:56', 120), 1
            , 'fatto', NULL, NULL, NULL, convert(datetime, '2021-01-10 19:49:07', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-08 00:00:00', 120), dt_upd = convert(datetime, '2021-01-10 19:48:56', 120)
         , title = left('orches de dios', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = convert(datetime, '2021-01-10 19:49:07', 120)
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-08 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-01-10 19:48:56', 120), getdate())
          or isnull(title, '') <> isnull('orches de dios', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 19:49:07,609 [72] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\orches de dios
2021-01-10 19:49:07,610 [72] ERROR dn_lib.tools.log - la variabile 'index-folder' non esiste!
2021-01-10 19:49:07,611 [72] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = 'la cartilla';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, 'la cartilla', 1, convert(datetime, '2021-01-08 11:41:58', 120), convert(datetime, '2021-01-10 18:40:35', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-08 11:41:58', 120), dt_upd = convert(datetime, '2021-01-10 18:40:35', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-08 11:41:58', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-10 18:40:35', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 19:49:07,615 [72] ERROR dn_lib.tools.log - la variabile 'index-folder' non esiste!
2021-01-10 19:49:07,616 [72] ERROR dn_lib.tools.log - la variabile 'index-folder' non esiste!
2021-01-10 19:49:07,617 [72] DEBUG dn_lib.tools.log - SQL: delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
2021-01-10 19:49:07,625 [72] DEBUG dn_lib.tools.log - cancellati 13 files/folders/tasks
2021-01-10 19:49:07,626 [72] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '0')
        else update users_cache set var_value = substring('0', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-01-10 19:49:07,629 [72] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '3')
        else update users_cache set var_value = substring('3', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-01-10 19:49:07,633 [72] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/01/10 19:48:56')
        else update users_cache set var_value = substring('2021/01/10 19:48:56', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-01-10 19:49:07,636 [72] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/01/10 19:49:07')
        else update users_cache set var_value = substring('2021/01/10 19:49:07', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
2021-01-10 19:49:52,842 [40] INFO dn_lib.tools.log - reload core
2021-01-10 19:49:52,873 [40] INFO dn_lib.tools.log - reload config docs
2021-01-10 19:49:52,875 [40] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:49:52,876 [40] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:49:52,877 [40] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:49:52,878 [40] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:49:52,880 [40] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:49:52,889 [40] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:49:52,891 [40] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:49:52,893 [40] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:49:52,894 [40] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:49:52,896 [40] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:49:52,897 [40] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:49:52,897 [40] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:49:52,899 [40] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:49:52,899 [40] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:49:52,900 [40] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:49:52,901 [40] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:49:52,902 [40] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:49:52,908 [40] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:49:52,910 [40] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:49:52,911 [40] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:49:52,912 [40] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:49:52,913 [40] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:49:52,914 [40] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:49:52,915 [40] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:49:52,916 [40] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 19:49:52,944 [38] INFO dn_lib.tools.log - reload config docs
2021-01-10 19:49:52,945 [38] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:49:52,946 [38] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:49:52,947 [38] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:49:52,948 [38] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:49:52,948 [38] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:49:52,949 [38] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:49:52,950 [38] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:49:52,950 [38] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:49:52,951 [38] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:49:52,951 [38] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:49:52,952 [38] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:49:52,952 [38] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:49:52,953 [38] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:49:52,954 [38] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:49:52,954 [38] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:49:52,955 [38] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:49:52,955 [38] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:49:52,956 [38] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:49:52,957 [38] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:49:52,958 [38] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:49:52,959 [38] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:49:52,959 [38] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:49:52,960 [38] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:49:52,961 [38] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:49:52,961 [38] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 19:49:52,994 [32] INFO dn_lib.tools.log - reload config docs
2021-01-10 19:49:52,995 [32] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:49:52,996 [32] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:49:52,997 [32] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:49:52,998 [32] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:49:52,998 [32] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:49:52,999 [32] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:49:53,000 [32] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:49:53,000 [32] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:49:53,001 [32] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:49:53,001 [32] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:49:53,002 [32] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:49:53,002 [32] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:49:53,003 [32] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:49:53,003 [32] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:49:53,004 [32] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:49:53,004 [32] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:49:53,005 [32] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:49:53,006 [32] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:49:53,006 [32] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:49:53,007 [32] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:49:53,007 [32] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:49:53,008 [32] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:49:53,008 [32] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:49:53,009 [32] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:49:53,012 [32] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 19:49:53,035 [32] DEBUG dn_lib.tools.log - SQL: select task_filter_id, filter_title, filter_notes, filter_def, filter_class
 from dn_tasks_filters order by filter_order
2021-01-10 19:49:53,041 [32] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = 0 and var_name in ('active-task-filter')
2021-01-10 19:49:53,046 [32] DEBUG dn_lib.tools.log - SQL: select ft.tp, ft.synch_folder_id, ft.folder_id, ft.parent_id, ft.title
       , ft.des, ft.http_path, ft.lvl, dbo.folder_path(ft.folder_id) as folder_path
       , (select top 1 1 from dn_tasks where folder_id = ft.folder_id) as is_task
      from dbo.fnc_dn_folders(null, null) ft
      
      order by ft.synch_folder_id, ft.lvl, ft.title
2021-01-10 19:49:53,057 [32] DEBUG dn_lib.tools.log - SQL: select f.synch_folder_id, f.file_id, f.folder_id, f.file_name, f.dt_ins , null as found_file
       from dn_files f
       where exists (select top 1 1 from dbo.fnc_dn_folders(null, null) ft 
        
	      where ft.synch_folder_id = f.synch_folder_id 
          and isnull(ft.folder_id, 0) = isnull(f.folder_id, 0))
2021-01-10 19:49:53,066 [32] DEBUG dn_lib.tools.log - SQL: select t3.*
      , tst.stato, tst.[order] as stato_order, isnull(tst.class, 'light') as stato_class, isnull(tst.title_plurale, '') as stato_title_plurale, isnull(tst.title_singolare, '') as stato_title_singolare
      , tp.priorita, tp.[order] as priorita_order, isnull(tp.class, 'light') as priorita_class, isnull(tp.title_plurale, '') as priorita_title_plurale, isnull(tp.title_singolare, '') as priorita_title_singolare
      , tt.tipo, tt.[order] as tipo_order, isnull(tt.class, 'light') as tipo_class, isnull(tt.title_plurale, '') as tipo_title_plurale, isnull(tt.title_singolare, '') as tipo_title_singolare
      , ts.stima, ts.[days] as stima_days, isnull(ts.class, 'light') as stima_class, isnull(ts.title_plurale, '') as stima_title_plurale, isnull(ts.title_singolare, '') as stima_title_singolare
      , (select top 1 1 from dn_tasks_notes where task_id = t3.task_id) as task_notes
      , (select top 1 1 from vw_task_allegati f2 where f2.task_id = t3.task_id 
          and not exists (select top 1 1 from dn_files_info where file_name = f2.file_name)) as task_files
  from (select t2.*, datediff(day, t2.dt_ref, getdate()) as diff_days
    from (select t.task_id, t.synch_folder_id, isnull(t.folder_id, f.folder_id) as folder_id
	   , t.file_id, t.title, t.[user], t.stato, t.priorita, t.tipo, t.stima, t.dt_ins, t.dt_upd
     , (case when t.dt_ins > t.dt_upd then t.dt_ins else t.dt_upd end) as dt_ref
	  from dn_tasks t
    
	  left join dn_files f on f.file_id = t.file_id
    where (null is null or (null is not null and t.task_id = null)) ) t2
    where exists (select top 1 1 from dbo.fnc_dn_folders(null, null) ft 
	    where  ft.synch_folder_id = t2.synch_folder_id 
       and isnull(ft.folder_id, 0) = isnull(t2.folder_id, 0))) t3
   left join dn_task_stato tst on tst.stato = t3.stato
   left join dn_task_priorita tp on tp.priorita = t3.priorita
   left join dn_task_tipo tt on tt.tipo = t3.tipo
   left join dn_task_stima ts on ts.stima = t3.stima
   where 1 = 1 
2021-01-10 19:49:53,096 [32] DEBUG dn_lib.tools.log - SQL: select title_singolare, stato from dn_task_stato order by [order]
2021-01-10 19:49:53,106 [32] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, priorita as [value], [order] from dn_task_priorita
      ) t order by t.[order]
2021-01-10 19:49:53,192 [32] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [days]
       union select title_singolare as title, stima as [value], [days] from dn_task_stima 
       ) t order by t.[days]
2021-01-10 19:49:53,195 [32] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value], -1 as [order]
       union select title_singolare as title, tipo as [value], [order] from dn_task_tipo
       ) t order by t.[order]
2021-01-10 19:49:53,197 [32] DEBUG dn_lib.tools.log - SQL: select t.title, t.[value]
      from (select '' as title, '' as [value]
       union select nome as title, nome as [value] from users
       ) t order by 2
2021-01-10 19:50:03,196 [51] INFO dn_lib.tools.log - reload config docs
2021-01-10 19:50:03,199 [51] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:50:03,200 [51] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:50:03,201 [51] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:50:03,202 [51] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:50:03,203 [51] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:50:03,204 [51] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:50:03,205 [51] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:50:03,206 [51] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:50:03,207 [51] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:50:03,208 [51] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:50:03,208 [51] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:50:03,209 [51] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:50:03,209 [51] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:50:03,209 [51] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:50:03,210 [51] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:50:03,210 [51] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:50:03,211 [51] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:50:03,211 [51] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:50:03,212 [51] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:50:03,212 [51] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:50:03,212 [51] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:50:03,212 [51] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:50:03,213 [51] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:50:03,213 [51] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:50:03,214 [51] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 19:50:03,228 [40] INFO dn_lib.tools.log - reload config docs
2021-01-10 19:50:03,229 [40] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:50:03,230 [40] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:50:03,230 [40] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:50:03,231 [40] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:50:03,232 [40] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:50:03,232 [40] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:50:03,233 [40] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:50:03,233 [40] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:50:03,234 [40] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:50:03,234 [40] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:50:03,235 [40] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:50:03,235 [40] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:50:03,236 [40] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:50:03,236 [40] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:50:03,237 [40] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:50:03,238 [40] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:50:03,238 [40] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:50:03,239 [40] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:50:03,239 [40] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:50:03,240 [40] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:50:03,240 [40] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:50:03,241 [40] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:50:03,241 [40] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:50:03,242 [40] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:50:03,242 [40] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 19:50:03,255 [30] INFO dn_lib.tools.log - reload config docs
2021-01-10 19:50:03,256 [30] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:50:03,257 [30] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:50:03,257 [30] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:50:03,258 [30] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:50:03,258 [30] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:50:03,259 [30] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:50:03,259 [30] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:50:03,260 [30] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:50:03,261 [30] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:50:03,261 [30] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:50:03,262 [30] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:50:03,263 [30] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:50:03,263 [30] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:50:03,263 [30] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:50:03,264 [30] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:50:03,264 [30] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:50:03,265 [30] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:50:03,265 [30] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:50:03,266 [30] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:50:03,266 [30] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:50:03,267 [30] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:50:03,267 [30] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:50:03,268 [30] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:50:03,268 [30] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:50:03,269 [30] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 19:50:03,848 [51] INFO dn_lib.tools.log - reload config docs
2021-01-10 19:50:03,849 [51] INFO dn_lib.tools.log - load xml config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:50:03,850 [51] INFO dn_lib.tools.log - load xml config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:50:03,851 [51] INFO dn_lib.tools.log - load xml config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:50:03,852 [51] INFO dn_lib.tools.log - load xml config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:50:03,853 [51] INFO dn_lib.tools.log - load xml config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:50:03,854 [51] INFO dn_lib.tools.log - load xml config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:50:03,854 [51] INFO dn_lib.tools.log - load xml config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:50:03,855 [51] INFO dn_lib.tools.log - load xml config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:50:03,856 [51] INFO dn_lib.tools.log - load vars doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:50:03,857 [51] INFO dn_lib.tools.log - load vars doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:50:03,857 [51] INFO dn_lib.tools.log - load vars doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:50:03,858 [51] INFO dn_lib.tools.log - load vars doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:50:03,858 [51] INFO dn_lib.tools.log - load vars doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:50:03,859 [51] INFO dn_lib.tools.log - load vars doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:50:03,859 [51] INFO dn_lib.tools.log - load vars doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:50:03,860 [51] INFO dn_lib.tools.log - load vars doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:50:03,860 [51] INFO dn_lib.tools.log - load config doc: \defs\blocks.xml - C:\root\todd\git\dn\deepanotes\defs\blocks.xml
2021-01-10 19:50:03,861 [51] INFO dn_lib.tools.log - load config doc: \defs\cmds.xml - C:\root\todd\git\dn\deepanotes\defs\cmds.xml
2021-01-10 19:50:03,861 [51] INFO dn_lib.tools.log - load config doc: \defs\lib-base.xml - C:\root\todd\git\dn\deepanotes\defs\lib-base.xml
2021-01-10 19:50:03,862 [51] INFO dn_lib.tools.log - load config doc: \defs\lib-conns.xml - C:\root\todd\git\dn\deepanotes\defs\lib-conns.xml
2021-01-10 19:50:03,862 [51] INFO dn_lib.tools.log - load config doc: \defs\lib-notes.xml - C:\root\todd\git\dn\deepanotes\defs\lib-notes.xml
2021-01-10 19:50:03,863 [51] INFO dn_lib.tools.log - load config doc: \defs\lib-synch.xml - C:\root\todd\git\dn\deepanotes\defs\lib-synch.xml
2021-01-10 19:50:03,863 [51] INFO dn_lib.tools.log - load config doc: \defs\lib-vars.xml - C:\root\todd\git\dn\deepanotes\defs\lib-vars.xml
2021-01-10 19:50:03,864 [51] INFO dn_lib.tools.log - load config doc: \defs\users.xml - C:\root\todd\git\dn\deepanotes\defs\users.xml
2021-01-10 19:50:03,864 [51] DEBUG dn_lib.tools.log - SQL: open conn 'Data Source=localhost;Initial Catalog=deepanotes;User ID=sa;Password=Molina32!'
2021-01-10 19:50:03,910 [51] DEBUG dn_lib.tools.log - SQL: select distinct lower(nome) as nome from users
2021-01-10 19:50:03,912 [51] DEBUG dn_lib.tools.log - SQL: select free_txt, stato, priorita, tipo, stima, (case when [default] = 1 then '1' else '0' end) as [default]
        from dn_task_free_labels 
2021-01-10 19:50:03,916 [51] DEBUG dn_lib.tools.log - SQL: select file_name, type_info from dn_files_info
2021-01-10 19:50:03,918 [51] DEBUG dn_lib.tools.log - SQL: select extension, des_extension, open_comment, close_comment, type_content from dn_files_types
2021-01-10 19:50:03,921 [51] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-files')
2021-01-10 19:50:03,923 [51] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-folders')
2021-01-10 19:50:03,924 [51] DEBUG dn_lib.tools.log - SQL: select var_name, var_value 
          from users_cache where [user_id] = -1 and var_name in ('synch-lwt')
2021-01-10 19:50:03,927 [51] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-10 19:50:03,934 [51] DEBUG dn_lib.tools.log - lettura cartelle
2021-01-10 19:50:03,935 [51] DEBUG dn_lib.tools.log - SQL: select sf.synch_folder_id, sf.pc_name, sf.[title], sf.[des], sf.local_path, sf.http_path, sf.[user], sf.[password]
        from synch_folders sf where sf.pc_name = 'MOLINOVO' order by sf.[title]
2021-01-10 19:50:03,937 [51] DEBUG dn_lib.tools.log - cartella di sincronizzazione 'dipa notess' - Deepa Notes, path: C:\root\todd\_test\dn
2021-01-10 19:50:03,939 [51] DEBUG dn_lib.tools.log - SQL: update dn_folders set readed = null;
      update dn_files set readed = null;
      update dn_tasks set readed = null;
2021-01-10 19:50:03,950 [51] DEBUG dn_lib.tools.log - leggo la cartella C:\root\todd\_test\dn
2021-01-10 19:50:03,952 [51] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = '210107.orches.incorso.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, '210107.orches.incorso.task', 1, convert(datetime, '2021-01-10 19:49:39', 120), convert(datetime, '2021-01-10 19:49:39', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-10 19:49:39', 120), dt_upd = convert(datetime, '2021-01-10 19:49:39', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-10 19:49:39', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-10 19:49:39', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 19:50:03,958 [51] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\210107.orches.incorso.task
2021-01-10 19:50:03,966 [51] DEBUG dn_lib.tools.log - SQL: update dn_folders set folder_name = 'orches.task', dt_upd = convert(datetime, convert(varchar, getdate(), 120), 120)
        where folder_id = 1818
2021-01-10 19:50:03,975 [51] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1818 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, 1818, null, left('orches', 150)
            , NULL, convert(datetime, '2021-01-07 00:00:00', 120), convert(datetime, '2021-01-10 19:49:39', 120), 1
            , 'in_corso', NULL, NULL, NULL, convert(datetime, '2021-01-10 19:50:03', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 00:00:00', 120), dt_upd = convert(datetime, '2021-01-10 19:49:39', 120)
         , title = left('orches', 150), [user] = NULL
         , stato = 'in_corso', priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = convert(datetime, '2021-01-10 19:50:03', 120)
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-01-10 19:49:39', 120), getdate())
          or isnull(title, '') <> isnull('orches', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('in_corso', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 19:50:03,982 [51] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\orches
2021-01-10 19:50:03,984 [51] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1818 and file_name = 'badabemmm.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1818, 'badabemmm.sql', '.sql', 1, convert(datetime, '2021-01-10 19:49:39', 120), convert(datetime, '2021-01-07 16:50:48', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-10 19:49:39', 120), dt_upd = convert(datetime, '2021-01-07 16:50:48', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-10 19:49:39', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-07 16:50:48', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 19:50:03,990 [51] DEBUG dn_lib.tools.log - added file 4284: C:\root\todd\_test\dn\orches.task\badabemmm.sql
2021-01-10 19:50:03,992 [51] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4284;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4284, '.sql', @content, convert(datetime, '2021-01-10 19:49:39', 120), convert(datetime, '2021-01-07 16:50:48', 120));
2021-01-10 19:50:03,995 [51] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\orches.task\badabemmm.sql'
2021-01-10 19:50:03,996 [51] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1818 and file_name = 'i.txt';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1818, 'i.txt', '.txt', 1, convert(datetime, '2021-01-10 19:49:39', 120), convert(datetime, '2021-01-08 11:51:29', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-10 19:49:39', 120), dt_upd = convert(datetime, '2021-01-08 11:51:29', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-10 19:49:39', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-08 11:51:29', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 19:50:04,001 [51] DEBUG dn_lib.tools.log - added file 4285: C:\root\todd\_test\dn\orches.task\i.txt
2021-01-10 19:50:04,002 [51] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4285;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4285, '.txt', @content, convert(datetime, '2021-01-10 19:49:39', 120), convert(datetime, '2021-01-08 11:51:29', 120));
2021-01-10 19:50:04,006 [51] DEBUG dn_lib.tools.log - SQL: delete from dn_tasks_notes where task_id = 1428;
      insert into dn_tasks_notes (task_id, file_id, content, dt_ins, dt_upd)
        values (1428, 4285, @content
          , convert(datetime, '2021-01-10 19:49:39', 120), convert(datetime, '2021-01-08 11:51:29', 120));
2021-01-10 19:50:04,009 [51] DEBUG dn_lib.tools.log - lette note task 1428
2021-01-10 19:50:04,010 [51] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\orches.task\i.txt'
2021-01-10 19:50:04,010 [51] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1818 and file_name = 'yes.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1818, 'yes.sql', '.sql', 1, convert(datetime, '2021-01-10 19:49:39', 120), convert(datetime, '2021-01-07 17:05:34', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-10 19:49:39', 120), dt_upd = convert(datetime, '2021-01-07 17:05:34', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-10 19:49:39', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-07 17:05:34', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 19:50:04,015 [51] DEBUG dn_lib.tools.log - added file 4286: C:\root\todd\_test\dn\orches.task\yes.sql
2021-01-10 19:50:04,016 [51] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4286;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4286, '.sql', @content, convert(datetime, '2021-01-10 19:49:39', 120), convert(datetime, '2021-01-07 17:05:34', 120));
2021-01-10 19:50:04,018 [51] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\orches.task\yes.sql'
2021-01-10 19:50:04,018 [51] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1428) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 19:50:04,025 [51] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = '210108.orches de dios.ok.task';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, '210108.orches de dios.ok.task', 1, convert(datetime, '2021-01-10 19:49:39', 120), convert(datetime, '2021-01-10 19:49:39', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-10 19:49:39', 120), dt_upd = convert(datetime, '2021-01-10 19:49:39', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-10 19:49:39', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-10 19:49:39', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 19:50:04,030 [51] DEBUG dn_lib.tools.log - added folder: C:\root\todd\_test\dn\210108.orches de dios.ok.task
2021-01-10 19:50:04,033 [51] DEBUG dn_lib.tools.log - SQL: update dn_folders set folder_name = 'orches de dios.task', dt_upd = convert(datetime, convert(varchar, getdate(), 120), 120)
        where folder_id = 1819
2021-01-10 19:50:04,038 [51] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 1819 and isnull(file_id, 0) = 0;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, 1819, null, left('orches de dios', 150)
            , NULL, convert(datetime, '2021-01-08 00:00:00', 120), convert(datetime, '2021-01-10 19:49:39', 120), 1
            , 'fatto', NULL, NULL, NULL, convert(datetime, '2021-01-10 19:50:04', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-08 00:00:00', 120), dt_upd = convert(datetime, '2021-01-10 19:49:39', 120)
         , title = left('orches de dios', 150), [user] = NULL
         , stato = 'fatto', priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = convert(datetime, '2021-01-10 19:50:04', 120)
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-08 00:00:00', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-01-10 19:49:39', 120), getdate())
          or isnull(title, '') <> isnull('orches de dios', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('fatto', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 19:50:04,044 [51] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\orches de dios
2021-01-10 19:50:04,045 [51] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id = 1819 and file_name = 'rincos.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, 1819, 'rincos.sql', '.sql', 1, convert(datetime, '2021-01-10 19:49:39', 120), convert(datetime, '2021-01-08 11:35:14', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-10 19:49:39', 120), dt_upd = convert(datetime, '2021-01-08 11:35:14', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-10 19:49:39', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-08 11:35:14', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 19:50:04,049 [51] DEBUG dn_lib.tools.log - added file 4287: C:\root\todd\_test\dn\orches de dios.task\rincos.sql
2021-01-10 19:50:04,051 [51] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4287;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4287, '.sql', @content, convert(datetime, '2021-01-10 19:49:39', 120), convert(datetime, '2021-01-08 11:35:14', 120));
2021-01-10 19:50:04,053 [51] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\orches de dios.task\rincos.sql'
2021-01-10 19:50:04,054 [51] DEBUG dn_lib.tools.log - SQL: update tt set tt.dt_upd = t2.max_dt
         from dn_tasks tt
         join ( select t.*
          from (select dt.task_id, dt.folder_id, dt.dt_upd 
            , (select max(dt_upd) from dn_files where folder_id = dt.folder_id) as max_dt
          from dn_tasks dt where dt.folder_id is not null and dt.task_id = 1429) t
          where t.max_dt is not null and t.dt_upd < t.max_dt ) t2 on t2.task_id = tt.task_id
         where isnull(tt.dt_upd, 0) <> t2.max_dt;
        select @@ROWCOUNT;
2021-01-10 19:50:04,061 [51] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int;
      select top 1 @id = folder_id from dn_folders 
       where synch_folder_id = 1 and parent_id is null 
        and folder_name = 'la cartilla';
      if(@id is null)
      begin
        insert into dn_folders (synch_folder_id, parent_id, folder_name, readed, dt_ins, dt_upd)
          values (1, null, 'la cartilla', 1, convert(datetime, '2021-01-08 11:41:58', 120), convert(datetime, '2021-01-10 18:40:35', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else
      begin
       update dn_folders set readed = 1 where folder_id = @id;
       set ROWCOUNT 0;
       update dn_folders set dt_ins = convert(datetime, '2021-01-08 11:41:58', 120), dt_upd = convert(datetime, '2021-01-10 18:40:35', 120) 
        where folder_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-08 11:41:58', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-10 18:40:35', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
      end
      select @id, @tp, @cc;
2021-01-10 19:50:04,066 [51] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @content_lwt varchar(25);
      select top 1 @id = file_id from dn_files where synch_folder_id = 1 and folder_id is null and file_name = 'script.incorso.task.sql';
      if(@id is null)
      begin
        insert into dn_files (synch_folder_id, folder_id, file_name, extension, readed, dt_ins, dt_upd)
          values (1, null, 'script.incorso.task.sql', '.sql', 1, convert(datetime, '2021-01-07 16:50:16', 120), convert(datetime, '2021-01-07 16:50:48', 120));
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_files set readed = 1 where file_id = @id;
       set ROWCOUNT 0;
       update dn_files set dt_ins = convert(datetime, '2021-01-07 16:50:16', 120), dt_upd = convert(datetime, '2021-01-07 16:50:48', 120) 
        where file_id = @id and ( isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 16:50:16', 120), getdate())
         or isnull(dt_upd, getdate()) <> isnull(convert(datetime, '2021-01-07 16:50:48', 120), getdate()));
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @content_lwt = convert(varchar, dt_upd, 120) from dn_files_contents where file_id = @id;
      end
      select @id, @tp, @cc, @content_lwt;
2021-01-10 19:50:04,071 [51] DEBUG dn_lib.tools.log - added file 4288: C:\root\todd\_test\dn\script.incorso.task.sql
2021-01-10 19:50:04,072 [51] DEBUG dn_lib.tools.log - SQL: delete from dn_files_contents where file_id = 4288;
        insert into dn_files_contents (file_id, extension, content, dt_ins, dt_upd)
          values (4288, '.sql', @content, convert(datetime, '2021-01-07 16:50:16', 120), convert(datetime, '2021-01-07 16:50:48', 120));
2021-01-10 19:50:04,075 [51] DEBUG dn_lib.tools.log - letto contenuto file 'C:\root\todd\_test\dn\script.incorso.task.sql'
2021-01-10 19:50:04,076 [51] DEBUG dn_lib.tools.log - SQL: declare @id bigint; declare @tp varchar(10); declare @cc int; declare @notes_lwt varchar(25);
      select top 1 @id = task_id from dn_tasks where isnull(folder_id, 0) = 0 and isnull(file_id, 0) = 4288;
      if(@id is null)
      begin
        insert into dn_tasks (synch_folder_id, folder_id, file_id, title, [user], dt_ins, dt_upd, readed, stato, priorita, tipo, stima, dt_index)
          values (1, null, 4288, left('script', 150)
            , NULL, convert(datetime, '2021-01-07 16:50:16', 120), convert(datetime, '2021-01-07 16:50:48', 120), 1
            , 'in_corso', NULL, NULL, NULL, NULL);
        select @id = @@IDENTITY, @tp = 'insert', @cc = 1;  
      end
      else 
      begin
       update dn_tasks set readed = 1 where task_id = @id;
       set ROWCOUNT 0;
       update dn_tasks set dt_ins = convert(datetime, '2021-01-07 16:50:16', 120), dt_upd = convert(datetime, '2021-01-07 16:50:48', 120)
         , title = left('script', 150), [user] = NULL
         , stato = 'in_corso', priorita = NULL
         , tipo = NULL, stima = NULL, dt_index = NULL
        where task_id = @id
         and (isnull(dt_ins, getdate()) <> isnull(convert(datetime, '2021-01-07 16:50:16', 120), getdate()) 
          or isnull(dt_upd, getdate()) < isnull(convert(datetime, '2021-01-07 16:50:48', 120), getdate())
          or isnull(title, '') <> isnull('script', '') or isnull([user], '') <> isnull(NULL, '') 
          or isnull(stato, '') <> isnull('in_corso', '') or isnull(priorita, '') <> isnull(NULL, '') 
          or isnull(tipo, '') <> isnull(NULL, '') or isnull(stima, '') <> isnull(NULL, ''))
       select @tp = 'update', @cc = @@ROWCOUNT;
       select @notes_lwt = convert(varchar, dt_upd, 120) from dn_tasks_notes where task_id = @id;
      end
      select @id, @tp, @cc, @notes_lwt;
2021-01-10 19:50:04,081 [51] DEBUG dn_lib.tools.log - added task: C:\root\todd\_test\dn\script
2021-01-10 19:50:04,082 [51] DEBUG dn_lib.tools.log - SQL: delete from dn_folders where readed is null;
      delete from dn_files where readed is null;
      delete fc from dn_files_contents fc
       where not exists (select top 1 1 from dn_files where file_id = fc.file_id);
      delete from dn_tasks where readed is null;
      delete tn from dn_tasks_notes tn
       where not exists (select top 1 1 from dn_tasks where task_id = tn.task_id);
2021-01-10 19:50:04,088 [51] DEBUG dn_lib.tools.log - cancellati 4 files/folders/tasks
2021-01-10 19:50:04,090 [51] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-files')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-files', '5')
        else update users_cache set var_value = substring('5', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-files'
2021-01-10 19:50:04,093 [51] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-folders')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-folders', '3')
        else update users_cache set var_value = substring('3', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-folders'
2021-01-10 19:50:04,097 [51] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-lwt')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-lwt', '2021/01/10 19:49:39')
        else update users_cache set var_value = substring('2021/01/10 19:49:39', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-lwt'
2021-01-10 19:50:04,100 [51] DEBUG dn_lib.tools.log - SQL: if not exists (select top 1 1 from users_cache where [user_id] = -1 and var_name = 'synch-last')
        insert into users_cache ([user_id], var_name, var_value)
          values (-1, 'synch-last', '2021/01/10 19:50:04')
        else update users_cache set var_value = substring('2021/01/10 19:50:04', 1, 500), dt_upd = getdate()
          where [user_id] = -1 and var_name = 'synch-last'
